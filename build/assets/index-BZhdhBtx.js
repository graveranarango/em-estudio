function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/PostsCreatorModule-B5a755dh.js","assets/skeleton-CFXQkkSv.js","assets/input-CfRvGH1I.js","assets/tabs-B0yVtblO.js","assets/select-B58gjji2.js","assets/chevron-left-Bu3f9hNQ.js","assets/slider-Bg7du52a.js","assets/linkedin-cJwCZyOm.js","assets/twitter-WN9pBLBE.js","assets/switch-DItshaHJ.js","assets/sheet-BgMVdWgK.js","assets/search-DfNbUhoE.js","assets/lock-CmAXTf1G.js","assets/users-Cp4bXVbp.js","assets/VideosCreatorModule-DacV7AMT.js","assets/youtube-BKBaW82I.js","assets/lightbulb-C8O1Fh7s.js","assets/play-BzN_8sZ-.js","assets/skip-forward-BxfI-3bH.js","assets/calendar-DdSsYfuL.js","assets/PodcastsCreatorModule-BrOZZ2FX.js","assets/trending-up-DatmR21n.js","assets/funnel-BCBcJmGg.js","assets/grid-3x3-BSsQOLum.js","assets/heart-D4A0CTka.js","assets/list-DaF7XbHM.js","assets/CalendarModule-Ba9EgO2R.js","assets/AssetsLibrary-DfLv-FFO.js","assets/BrandKitModule-eEL0YHIy.js","assets/AnalyticsModule-BPk6GKJM.js","assets/generateCategoricalChart-CKqFsPyT.js","assets/AutomationModule-D2ADCxP_.js","assets/CompetitionModule-D7QZOTuj.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
function bj(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var EF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Eb={exports:{}},Su={},_b={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ba=Symbol.for("react.element"),wj=Symbol.for("react.portal"),Ej=Symbol.for("react.fragment"),_j=Symbol.for("react.strict_mode"),Nj=Symbol.for("react.profiler"),Sj=Symbol.for("react.provider"),jj=Symbol.for("react.context"),Cj=Symbol.for("react.forward_ref"),kj=Symbol.for("react.suspense"),Tj=Symbol.for("react.memo"),Aj=Symbol.for("react.lazy"),Gx=Symbol.iterator;function Pj(t){return t===null||typeof t!="object"?null:(t=Gx&&t[Gx]||t["@@iterator"],typeof t=="function"?t:null)}var Nb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sb=Object.assign,jb={};function Yo(t,e,n){this.props=t,this.context=e,this.refs=jb,this.updater=n||Nb}Yo.prototype.isReactComponent={};Yo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Cb(){}Cb.prototype=Yo.prototype;function Am(t,e,n){this.props=t,this.context=e,this.refs=jb,this.updater=n||Nb}var Pm=Am.prototype=new Cb;Pm.constructor=Am;Sb(Pm,Yo.prototype);Pm.isPureReactComponent=!0;var Kx=Array.isArray,kb=Object.prototype.hasOwnProperty,Rm={current:null},Tb={key:!0,ref:!0,__self:!0,__source:!0};function Ab(t,e,n){var r,s={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)kb.call(e,r)&&!Tb.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ba,type:t,key:o,ref:a,props:s,_owner:Rm.current}}function Rj(t,e){return{$$typeof:Ba,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Im(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ba}function Ij(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Wx=/\/+/g;function Fd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ij(""+t.key):e.toString(36)}function oc(t,e,n,r,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ba:case wj:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Fd(a,0):r,Kx(s)?(n="",t!=null&&(n=t.replace(Wx,"$&/")+"/"),oc(s,e,n,"",function(d){return d})):s!=null&&(Im(s)&&(s=Rj(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Wx,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Kx(t))for(var l=0;l<t.length;l++){o=t[l];var u=r+Fd(o,l);a+=oc(o,e,n,u,s)}else if(u=Pj(t),typeof u=="function")for(t=u.call(t),l=0;!(o=t.next()).done;)o=o.value,u=r+Fd(o,l++),a+=oc(o,e,n,u,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function El(t,e,n){if(t==null)return t;var r=[],s=0;return oc(t,r,"","",function(o){return e.call(n,o,s++)}),r}function Mj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},ic={transition:null},Dj={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:ic,ReactCurrentOwner:Rm};function Pb(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:El,forEach:function(t,e,n){El(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return El(t,function(){e++}),e},toArray:function(t){return El(t,function(e){return e})||[]},only:function(t){if(!Im(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=Yo;ce.Fragment=Ej;ce.Profiler=Nj;ce.PureComponent=Am;ce.StrictMode=_j;ce.Suspense=kj;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dj;ce.act=Pb;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Sb({},t.props),s=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Rm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)kb.call(e,u)&&!Tb.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Ba,type:t.type,key:s,ref:o,props:r,_owner:a}};ce.createContext=function(t){return t={$$typeof:jj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Sj,_context:t},t.Consumer=t};ce.createElement=Ab;ce.createFactory=function(t){var e=Ab.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:Cj,render:t}};ce.isValidElement=Im;ce.lazy=function(t){return{$$typeof:Aj,_payload:{_status:-1,_result:t},_init:Mj}};ce.memo=function(t,e){return{$$typeof:Tj,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=ic.transition;ic.transition={};try{t()}finally{ic.transition=e}};ce.unstable_act=Pb;ce.useCallback=function(t,e){return Nt.current.useCallback(t,e)};ce.useContext=function(t){return Nt.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};ce.useEffect=function(t,e){return Nt.current.useEffect(t,e)};ce.useId=function(){return Nt.current.useId()};ce.useImperativeHandle=function(t,e,n){return Nt.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return Nt.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return Nt.current.useReducer(t,e,n)};ce.useRef=function(t){return Nt.current.useRef(t)};ce.useState=function(t){return Nt.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return Nt.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return Nt.current.useTransition()};ce.version="18.3.1";_b.exports=ce;var p=_b.exports;const _e=wb(p),Rb=bj({__proto__:null,default:_e},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oj=p,Lj=Symbol.for("react.element"),Vj=Symbol.for("react.fragment"),Fj=Object.prototype.hasOwnProperty,$j=Oj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zj={key:!0,ref:!0,__self:!0,__source:!0};function Ib(t,e,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Fj.call(e,r)&&!zj.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Lj,type:t,key:o,ref:a,props:s,_owner:$j.current}}Su.Fragment=Vj;Su.jsx=Ib;Su.jsxs=Ib;Eb.exports=Su;var i=Eb.exports,Mb={exports:{}},qt={},Db={exports:{}},Ob={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,$){var W=L.length;L.push($);e:for(;0<W;){var ne=W-1>>>1,le=L[ne];if(0<s(le,$))L[ne]=$,L[W]=le,W=ne;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var $=L[0],W=L.pop();if(W!==$){L[0]=W;e:for(var ne=0,le=L.length,pe=le>>>1;ne<pe;){var de=2*(ne+1)-1,tt=L[de],Ie=de+1,re=L[Ie];if(0>s(tt,W))Ie<le&&0>s(re,tt)?(L[ne]=re,L[Ie]=W,ne=Ie):(L[ne]=tt,L[de]=W,ne=de);else if(Ie<le&&0>s(re,W))L[ne]=re,L[Ie]=W,ne=Ie;else break e}}return $}function s(L,$){var W=L.sortIndex-$.sortIndex;return W!==0?W:L.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],d=[],f=1,m=null,h=3,x=!1,y=!1,b=!1,j=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var $=n(d);$!==null;){if($.callback===null)r(d);else if($.startTime<=L)r(d),$.sortIndex=$.expirationTime,e(u,$);else break;$=n(d)}}function R(L){if(b=!1,S(L),!y)if(n(u)!==null)y=!0,H(T);else{var $=n(d);$!==null&&Y(R,$.startTime-L)}}function T(L,$){y=!1,b&&(b=!1,_(w),w=-1),x=!0;var W=h;try{for(S($),m=n(u);m!==null&&(!(m.expirationTime>$)||L&&!I());){var ne=m.callback;if(typeof ne=="function"){m.callback=null,h=m.priorityLevel;var le=ne(m.expirationTime<=$);$=t.unstable_now(),typeof le=="function"?m.callback=le:m===n(u)&&r(u),S($)}else r(u);m=n(u)}if(m!==null)var pe=!0;else{var de=n(d);de!==null&&Y(R,de.startTime-$),pe=!1}return pe}finally{m=null,h=W,x=!1}}var D=!1,N=null,w=-1,C=5,A=-1;function I(){return!(t.unstable_now()-A<C)}function M(){if(N!==null){var L=t.unstable_now();A=L;var $=!0;try{$=N(!0,L)}finally{$?k():(D=!1,N=null)}}else D=!1}var k;if(typeof E=="function")k=function(){E(M)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,z=O.port2;O.port1.onmessage=M,k=function(){z.postMessage(null)}}else k=function(){j(M,0)};function H(L){N=L,D||(D=!0,k())}function Y(L,$){w=j(function(){L(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){y||x||(y=!0,H(T))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(L){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var W=h;h=$;try{return L()}finally{h=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,$){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var W=h;h=L;try{return $()}finally{h=W}},t.unstable_scheduleCallback=function(L,$,W){var ne=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ne+W:ne):W=ne,L){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=W+le,L={id:f++,callback:$,priorityLevel:L,startTime:W,expirationTime:le,sortIndex:-1},W>ne?(L.sortIndex=W,e(d,L),n(u)===null&&L===n(d)&&(b?(_(w),w=-1):b=!0,Y(R,W-ne))):(L.sortIndex=le,e(u,L),y||x||(y=!0,H(T))),L},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(L){var $=h;return function(){var W=h;h=$;try{return L.apply(this,arguments)}finally{h=W}}}})(Ob);Db.exports=Ob;var Bj=Db.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uj=p,Kt=Bj;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lb=new Set,aa={};function zs(t,e){ko(t,e),ko(t+"Capture",e)}function ko(t,e){for(aa[t]=e,t=0;t<e.length;t++)Lb.add(e[t])}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gh=Object.prototype.hasOwnProperty,Hj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qx={},Qx={};function Gj(t){return Gh.call(Qx,t)?!0:Gh.call(qx,t)?!1:Hj.test(t)?Qx[t]=!0:(qx[t]=!0,!1)}function Kj(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Wj(t,e,n,r){if(e===null||typeof e>"u"||Kj(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,s,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mm=/[\-:]([a-z])/g;function Dm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Mm,Dm);ct[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Mm,Dm);ct[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Mm,Dm);ct[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function Om(t,e,n,r){var s=ct.hasOwnProperty(e)?ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Wj(e,n,s,r)&&(n=null),r||s===null?Gj(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var mr=Uj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_l=Symbol.for("react.element"),ro=Symbol.for("react.portal"),so=Symbol.for("react.fragment"),Lm=Symbol.for("react.strict_mode"),Kh=Symbol.for("react.profiler"),Vb=Symbol.for("react.provider"),Fb=Symbol.for("react.context"),Vm=Symbol.for("react.forward_ref"),Wh=Symbol.for("react.suspense"),qh=Symbol.for("react.suspense_list"),Fm=Symbol.for("react.memo"),jr=Symbol.for("react.lazy"),$b=Symbol.for("react.offscreen"),Yx=Symbol.iterator;function _i(t){return t===null||typeof t!="object"?null:(t=Yx&&t[Yx]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,$d;function Oi(t){if($d===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$d=e&&e[1]||""}return`
`+$d+t}var zd=!1;function Bd(t,e){if(!t||zd)return"";zd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{zd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Oi(t):""}function qj(t){switch(t.tag){case 5:return Oi(t.type);case 16:return Oi("Lazy");case 13:return Oi("Suspense");case 19:return Oi("SuspenseList");case 0:case 2:case 15:return t=Bd(t.type,!1),t;case 11:return t=Bd(t.type.render,!1),t;case 1:return t=Bd(t.type,!0),t;default:return""}}function Qh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case so:return"Fragment";case ro:return"Portal";case Kh:return"Profiler";case Lm:return"StrictMode";case Wh:return"Suspense";case qh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Fb:return(t.displayName||"Context")+".Consumer";case Vb:return(t._context.displayName||"Context")+".Provider";case Vm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fm:return e=t.displayName||null,e!==null?e:Qh(t.type)||"Memo";case jr:e=t._payload,t=t._init;try{return Qh(t(e))}catch{}}return null}function Qj(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qh(e);case 8:return e===Lm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Yj(t){var e=zb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nl(t){t._valueTracker||(t._valueTracker=Yj(t))}function Bb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=zb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Nc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Yh(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ub(t,e){e=e.checked,e!=null&&Om(t,"checked",e,!1)}function Xh(t,e){Ub(t,e);var n=Hr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Jh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Jh(t,e.type,Hr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Jh(t,e,n){(e!=="number"||Nc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Li=Array.isArray;function xo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Zh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Li(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hr(n)}}function Hb(t,e){var n=Hr(e.value),r=Hr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ey(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Gb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ef(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Gb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sl,Kb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sl=Sl||document.createElement("div"),Sl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function la(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xj=["Webkit","ms","Moz","O"];Object.keys(Ui).forEach(function(t){Xj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ui[e]=Ui[t]})});function Wb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ui.hasOwnProperty(t)&&Ui[t]?(""+e).trim():e+"px"}function qb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Wb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Jj=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tf(t,e){if(e){if(Jj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function nf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rf=null;function $m(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sf=null,yo=null,vo=null;function ty(t){if(t=Ga(t)){if(typeof sf!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Au(e),sf(t.stateNode,t.type,e))}}function Qb(t){yo?vo?vo.push(t):vo=[t]:yo=t}function Yb(){if(yo){var t=yo,e=vo;if(vo=yo=null,ty(t),e)for(t=0;t<e.length;t++)ty(e[t])}}function Xb(t,e){return t(e)}function Jb(){}var Ud=!1;function Zb(t,e,n){if(Ud)return t(e,n);Ud=!0;try{return Xb(t,e,n)}finally{Ud=!1,(yo!==null||vo!==null)&&(Jb(),Yb())}}function ca(t,e){var n=t.stateNode;if(n===null)return null;var r=Au(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var of=!1;if(ir)try{var Ni={};Object.defineProperty(Ni,"passive",{get:function(){of=!0}}),window.addEventListener("test",Ni,Ni),window.removeEventListener("test",Ni,Ni)}catch{of=!1}function Zj(t,e,n,r,s,o,a,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Hi=!1,Sc=null,jc=!1,af=null,eC={onError:function(t){Hi=!0,Sc=t}};function tC(t,e,n,r,s,o,a,l,u){Hi=!1,Sc=null,Zj.apply(eC,arguments)}function nC(t,e,n,r,s,o,a,l,u){if(tC.apply(this,arguments),Hi){if(Hi){var d=Sc;Hi=!1,Sc=null}else throw Error(U(198));jc||(jc=!0,af=d)}}function Bs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ew(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ny(t){if(Bs(t)!==t)throw Error(U(188))}function rC(t){var e=t.alternate;if(!e){if(e=Bs(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return ny(s),t;if(o===r)return ny(s),e;o=o.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=o;break}if(l===r){a=!0,r=s,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=s;break}if(l===r){a=!0,r=o,n=s;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function tw(t){return t=rC(t),t!==null?nw(t):null}function nw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=nw(t);if(e!==null)return e;t=t.sibling}return null}var rw=Kt.unstable_scheduleCallback,ry=Kt.unstable_cancelCallback,sC=Kt.unstable_shouldYield,oC=Kt.unstable_requestPaint,Oe=Kt.unstable_now,iC=Kt.unstable_getCurrentPriorityLevel,zm=Kt.unstable_ImmediatePriority,sw=Kt.unstable_UserBlockingPriority,Cc=Kt.unstable_NormalPriority,aC=Kt.unstable_LowPriority,ow=Kt.unstable_IdlePriority,ju=null,Vn=null;function lC(t){if(Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(ju,t,void 0,(t.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:dC,cC=Math.log,uC=Math.LN2;function dC(t){return t>>>=0,t===0?32:31-(cC(t)/uC|0)|0}var jl=64,Cl=4194304;function Vi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function kc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Vi(l):(o&=a,o!==0&&(r=Vi(o)))}else a=n&~s,a!==0?r=Vi(a):o!==0&&(r=Vi(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-yn(e),s=1<<n,r|=t[n],e&=~s;return r}function hC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-yn(o),l=1<<a,u=s[a];u===-1?(!(l&n)||l&r)&&(s[a]=hC(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}}function lf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function iw(){var t=jl;return jl<<=1,!(jl&4194240)&&(jl=64),t}function Hd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ua(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yn(e),t[e]=n}function mC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-yn(n),o=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~o}}function Bm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-yn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var be=0;function aw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var lw,Um,cw,uw,dw,cf=!1,kl=[],Ir=null,Mr=null,Dr=null,ua=new Map,da=new Map,kr=[],pC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sy(t,e){switch(t){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":ua.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":da.delete(e.pointerId)}}function Si(t,e,n,r,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Ga(e),e!==null&&Um(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function gC(t,e,n,r,s){switch(e){case"focusin":return Ir=Si(Ir,t,e,n,r,s),!0;case"dragenter":return Mr=Si(Mr,t,e,n,r,s),!0;case"mouseover":return Dr=Si(Dr,t,e,n,r,s),!0;case"pointerover":var o=s.pointerId;return ua.set(o,Si(ua.get(o)||null,t,e,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,da.set(o,Si(da.get(o)||null,t,e,n,r,s)),!0}return!1}function hw(t){var e=ms(t.target);if(e!==null){var n=Bs(e);if(n!==null){if(e=n.tag,e===13){if(e=ew(n),e!==null){t.blockedOn=e,dw(t.priority,function(){cw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ac(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=uf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);rf=r,n.target.dispatchEvent(r),rf=null}else return e=Ga(n),e!==null&&Um(e),t.blockedOn=n,!1;e.shift()}return!0}function oy(t,e,n){ac(t)&&n.delete(e)}function xC(){cf=!1,Ir!==null&&ac(Ir)&&(Ir=null),Mr!==null&&ac(Mr)&&(Mr=null),Dr!==null&&ac(Dr)&&(Dr=null),ua.forEach(oy),da.forEach(oy)}function ji(t,e){t.blockedOn===e&&(t.blockedOn=null,cf||(cf=!0,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,xC)))}function ha(t){function e(s){return ji(s,t)}if(0<kl.length){ji(kl[0],t);for(var n=1;n<kl.length;n++){var r=kl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ir!==null&&ji(Ir,t),Mr!==null&&ji(Mr,t),Dr!==null&&ji(Dr,t),ua.forEach(e),da.forEach(e),n=0;n<kr.length;n++)r=kr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<kr.length&&(n=kr[0],n.blockedOn===null);)hw(n),n.blockedOn===null&&kr.shift()}var bo=mr.ReactCurrentBatchConfig,Tc=!0;function yC(t,e,n,r){var s=be,o=bo.transition;bo.transition=null;try{be=1,Hm(t,e,n,r)}finally{be=s,bo.transition=o}}function vC(t,e,n,r){var s=be,o=bo.transition;bo.transition=null;try{be=4,Hm(t,e,n,r)}finally{be=s,bo.transition=o}}function Hm(t,e,n,r){if(Tc){var s=uf(t,e,n,r);if(s===null)eh(t,e,r,Ac,n),sy(t,r);else if(gC(s,t,e,n,r))r.stopPropagation();else if(sy(t,r),e&4&&-1<pC.indexOf(t)){for(;s!==null;){var o=Ga(s);if(o!==null&&lw(o),o=uf(t,e,n,r),o===null&&eh(t,e,r,Ac,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else eh(t,e,r,null,n)}}var Ac=null;function uf(t,e,n,r){if(Ac=null,t=$m(r),t=ms(t),t!==null)if(e=Bs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ew(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ac=t,null}function fw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iC()){case zm:return 1;case sw:return 4;case Cc:case aC:return 16;case ow:return 536870912;default:return 16}default:return 16}}var Ar=null,Gm=null,lc=null;function mw(){if(lc)return lc;var t,e=Gm,n=e.length,r,s="value"in Ar?Ar.value:Ar.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[o-r];r++);return lc=s.slice(t,1<r?1-r:void 0)}function cc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Tl(){return!0}function iy(){return!1}function Qt(t){function e(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Tl:iy,this.isPropagationStopped=iy,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Tl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Tl)},persist:function(){},isPersistent:Tl}),e}var Xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Km=Qt(Xo),Ha=Re({},Xo,{view:0,detail:0}),bC=Qt(Ha),Gd,Kd,Ci,Cu=Re({},Ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ci&&(Ci&&t.type==="mousemove"?(Gd=t.screenX-Ci.screenX,Kd=t.screenY-Ci.screenY):Kd=Gd=0,Ci=t),Gd)},movementY:function(t){return"movementY"in t?t.movementY:Kd}}),ay=Qt(Cu),wC=Re({},Cu,{dataTransfer:0}),EC=Qt(wC),_C=Re({},Ha,{relatedTarget:0}),Wd=Qt(_C),NC=Re({},Xo,{animationName:0,elapsedTime:0,pseudoElement:0}),SC=Qt(NC),jC=Re({},Xo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),CC=Qt(jC),kC=Re({},Xo,{data:0}),ly=Qt(kC),TC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=PC[t])?!!e[t]:!1}function Wm(){return RC}var IC=Re({},Ha,{key:function(t){if(t.key){var e=TC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?AC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wm,charCode:function(t){return t.type==="keypress"?cc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),MC=Qt(IC),DC=Re({},Cu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cy=Qt(DC),OC=Re({},Ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wm}),LC=Qt(OC),VC=Re({},Xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),FC=Qt(VC),$C=Re({},Cu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zC=Qt($C),BC=[9,13,27,32],qm=ir&&"CompositionEvent"in window,Gi=null;ir&&"documentMode"in document&&(Gi=document.documentMode);var UC=ir&&"TextEvent"in window&&!Gi,pw=ir&&(!qm||Gi&&8<Gi&&11>=Gi),uy=" ",dy=!1;function gw(t,e){switch(t){case"keyup":return BC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oo=!1;function HC(t,e){switch(t){case"compositionend":return xw(e);case"keypress":return e.which!==32?null:(dy=!0,uy);case"textInput":return t=e.data,t===uy&&dy?null:t;default:return null}}function GC(t,e){if(oo)return t==="compositionend"||!qm&&gw(t,e)?(t=mw(),lc=Gm=Ar=null,oo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pw&&e.locale!=="ko"?null:e.data;default:return null}}var KC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!KC[t.type]:e==="textarea"}function yw(t,e,n,r){Qb(r),e=Pc(e,"onChange"),0<e.length&&(n=new Km("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ki=null,fa=null;function WC(t){Tw(t,0)}function ku(t){var e=lo(t);if(Bb(e))return t}function qC(t,e){if(t==="change")return e}var vw=!1;if(ir){var qd;if(ir){var Qd="oninput"in document;if(!Qd){var fy=document.createElement("div");fy.setAttribute("oninput","return;"),Qd=typeof fy.oninput=="function"}qd=Qd}else qd=!1;vw=qd&&(!document.documentMode||9<document.documentMode)}function my(){Ki&&(Ki.detachEvent("onpropertychange",bw),fa=Ki=null)}function bw(t){if(t.propertyName==="value"&&ku(fa)){var e=[];yw(e,fa,t,$m(t)),Zb(WC,e)}}function QC(t,e,n){t==="focusin"?(my(),Ki=e,fa=n,Ki.attachEvent("onpropertychange",bw)):t==="focusout"&&my()}function YC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ku(fa)}function XC(t,e){if(t==="click")return ku(e)}function JC(t,e){if(t==="input"||t==="change")return ku(e)}function ZC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var En=typeof Object.is=="function"?Object.is:ZC;function ma(t,e){if(En(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Gh.call(e,s)||!En(t[s],e[s]))return!1}return!0}function py(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gy(t,e){var n=py(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=py(n)}}function ww(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ww(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ew(){for(var t=window,e=Nc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nc(t.document)}return e}function Qm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ek(t){var e=Ew(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ww(n.ownerDocument.documentElement,n)){if(r!==null&&Qm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!t.extend&&o>r&&(s=r,r=o,o=s),s=gy(n,o);var a=gy(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tk=ir&&"documentMode"in document&&11>=document.documentMode,io=null,df=null,Wi=null,hf=!1;function xy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hf||io==null||io!==Nc(r)||(r=io,"selectionStart"in r&&Qm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wi&&ma(Wi,r)||(Wi=r,r=Pc(df,"onSelect"),0<r.length&&(e=new Km("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=io)))}function Al(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ao={animationend:Al("Animation","AnimationEnd"),animationiteration:Al("Animation","AnimationIteration"),animationstart:Al("Animation","AnimationStart"),transitionend:Al("Transition","TransitionEnd")},Yd={},_w={};ir&&(_w=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function Tu(t){if(Yd[t])return Yd[t];if(!ao[t])return t;var e=ao[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _w)return Yd[t]=e[n];return t}var Nw=Tu("animationend"),Sw=Tu("animationiteration"),jw=Tu("animationstart"),Cw=Tu("transitionend"),kw=new Map,yy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xr(t,e){kw.set(t,e),zs(e,[t])}for(var Xd=0;Xd<yy.length;Xd++){var Jd=yy[Xd],nk=Jd.toLowerCase(),rk=Jd[0].toUpperCase()+Jd.slice(1);Xr(nk,"on"+rk)}Xr(Nw,"onAnimationEnd");Xr(Sw,"onAnimationIteration");Xr(jw,"onAnimationStart");Xr("dblclick","onDoubleClick");Xr("focusin","onFocus");Xr("focusout","onBlur");Xr(Cw,"onTransitionEnd");ko("onMouseEnter",["mouseout","mouseover"]);ko("onMouseLeave",["mouseout","mouseover"]);ko("onPointerEnter",["pointerout","pointerover"]);ko("onPointerLeave",["pointerout","pointerover"]);zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fi));function vy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,nC(r,e,void 0,t),t.currentTarget=null}function Tw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==o&&s.isPropagationStopped())break e;vy(s,l,d),o=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,d=l.currentTarget,l=l.listener,u!==o&&s.isPropagationStopped())break e;vy(s,l,d),o=u}}}if(jc)throw t=af,jc=!1,af=null,t}function je(t,e){var n=e[xf];n===void 0&&(n=e[xf]=new Set);var r=t+"__bubble";n.has(r)||(Aw(e,t,2,!1),n.add(r))}function Zd(t,e,n){var r=0;e&&(r|=4),Aw(n,t,r,e)}var Pl="_reactListening"+Math.random().toString(36).slice(2);function pa(t){if(!t[Pl]){t[Pl]=!0,Lb.forEach(function(n){n!=="selectionchange"&&(sk.has(n)||Zd(n,!1,t),Zd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pl]||(e[Pl]=!0,Zd("selectionchange",!1,e))}}function Aw(t,e,n,r){switch(fw(e)){case 1:var s=yC;break;case 4:s=vC;break;default:s=Hm}n=s.bind(null,e,n,t),s=void 0,!of||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function eh(t,e,n,r,s){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=ms(l),a===null)return;if(u=a.tag,u===5||u===6){r=o=a;continue e}l=l.parentNode}}r=r.return}Zb(function(){var d=o,f=$m(n),m=[];e:{var h=kw.get(t);if(h!==void 0){var x=Km,y=t;switch(t){case"keypress":if(cc(n)===0)break e;case"keydown":case"keyup":x=MC;break;case"focusin":y="focus",x=Wd;break;case"focusout":y="blur",x=Wd;break;case"beforeblur":case"afterblur":x=Wd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=ay;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=EC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=LC;break;case Nw:case Sw:case jw:x=SC;break;case Cw:x=FC;break;case"scroll":x=bC;break;case"wheel":x=zC;break;case"copy":case"cut":case"paste":x=CC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=cy}var b=(e&4)!==0,j=!b&&t==="scroll",_=b?h!==null?h+"Capture":null:h;b=[];for(var E=d,S;E!==null;){S=E;var R=S.stateNode;if(S.tag===5&&R!==null&&(S=R,_!==null&&(R=ca(E,_),R!=null&&b.push(ga(E,R,S)))),j)break;E=E.return}0<b.length&&(h=new x(h,y,null,n,f),m.push({event:h,listeners:b}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",h&&n!==rf&&(y=n.relatedTarget||n.fromElement)&&(ms(y)||y[ar]))break e;if((x||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,x?(y=n.relatedTarget||n.toElement,x=d,y=y?ms(y):null,y!==null&&(j=Bs(y),y!==j||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=d),x!==y)){if(b=ay,R="onMouseLeave",_="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(b=cy,R="onPointerLeave",_="onPointerEnter",E="pointer"),j=x==null?h:lo(x),S=y==null?h:lo(y),h=new b(R,E+"leave",x,n,f),h.target=j,h.relatedTarget=S,R=null,ms(f)===d&&(b=new b(_,E+"enter",y,n,f),b.target=S,b.relatedTarget=j,R=b),j=R,x&&y)t:{for(b=x,_=y,E=0,S=b;S;S=Qs(S))E++;for(S=0,R=_;R;R=Qs(R))S++;for(;0<E-S;)b=Qs(b),E--;for(;0<S-E;)_=Qs(_),S--;for(;E--;){if(b===_||_!==null&&b===_.alternate)break t;b=Qs(b),_=Qs(_)}b=null}else b=null;x!==null&&by(m,h,x,b,!1),y!==null&&j!==null&&by(m,j,y,b,!0)}}e:{if(h=d?lo(d):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var T=qC;else if(hy(h))if(vw)T=JC;else{T=YC;var D=QC}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=XC);if(T&&(T=T(t,d))){yw(m,T,n,f);break e}D&&D(t,h,d),t==="focusout"&&(D=h._wrapperState)&&D.controlled&&h.type==="number"&&Jh(h,"number",h.value)}switch(D=d?lo(d):window,t){case"focusin":(hy(D)||D.contentEditable==="true")&&(io=D,df=d,Wi=null);break;case"focusout":Wi=df=io=null;break;case"mousedown":hf=!0;break;case"contextmenu":case"mouseup":case"dragend":hf=!1,xy(m,n,f);break;case"selectionchange":if(tk)break;case"keydown":case"keyup":xy(m,n,f)}var N;if(qm)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else oo?gw(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(pw&&n.locale!=="ko"&&(oo||w!=="onCompositionStart"?w==="onCompositionEnd"&&oo&&(N=mw()):(Ar=f,Gm="value"in Ar?Ar.value:Ar.textContent,oo=!0)),D=Pc(d,w),0<D.length&&(w=new ly(w,t,null,n,f),m.push({event:w,listeners:D}),N?w.data=N:(N=xw(n),N!==null&&(w.data=N)))),(N=UC?HC(t,n):GC(t,n))&&(d=Pc(d,"onBeforeInput"),0<d.length&&(f=new ly("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=N))}Tw(m,e)})}function ga(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=ca(t,n),o!=null&&r.unshift(ga(t,o,s)),o=ca(t,e),o!=null&&r.push(ga(t,o,s))),t=t.return}return r}function Qs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function by(t,e,n,r,s){for(var o=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=ca(n,o),u!=null&&a.unshift(ga(n,u,l))):s||(u=ca(n,o),u!=null&&a.push(ga(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var ok=/\r\n?/g,ik=/\u0000|\uFFFD/g;function wy(t){return(typeof t=="string"?t:""+t).replace(ok,`
`).replace(ik,"")}function Rl(t,e,n){if(e=wy(e),wy(t)!==e&&n)throw Error(U(425))}function Rc(){}var ff=null,mf=null;function pf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gf=typeof setTimeout=="function"?setTimeout:void 0,ak=typeof clearTimeout=="function"?clearTimeout:void 0,Ey=typeof Promise=="function"?Promise:void 0,lk=typeof queueMicrotask=="function"?queueMicrotask:typeof Ey<"u"?function(t){return Ey.resolve(null).then(t).catch(ck)}:gf;function ck(t){setTimeout(function(){throw t})}function th(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ha(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ha(e)}function Or(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _y(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Jo=Math.random().toString(36).slice(2),Mn="__reactFiber$"+Jo,xa="__reactProps$"+Jo,ar="__reactContainer$"+Jo,xf="__reactEvents$"+Jo,uk="__reactListeners$"+Jo,dk="__reactHandles$"+Jo;function ms(t){var e=t[Mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ar]||n[Mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_y(t);t!==null;){if(n=t[Mn])return n;t=_y(t)}return e}t=n,n=t.parentNode}return null}function Ga(t){return t=t[Mn]||t[ar],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function lo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Au(t){return t[xa]||null}var yf=[],co=-1;function Jr(t){return{current:t}}function Ce(t){0>co||(t.current=yf[co],yf[co]=null,co--)}function Ne(t,e){co++,yf[co]=t.current,t.current=e}var Gr={},xt=Jr(Gr),It=Jr(!1),Cs=Gr;function To(t,e){var n=t.type.contextTypes;if(!n)return Gr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Mt(t){return t=t.childContextTypes,t!=null}function Ic(){Ce(It),Ce(xt)}function Ny(t,e,n){if(xt.current!==Gr)throw Error(U(168));Ne(xt,e),Ne(It,n)}function Pw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,Qj(t)||"Unknown",s));return Re({},n,r)}function Mc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gr,Cs=xt.current,Ne(xt,t),Ne(It,It.current),!0}function Sy(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Pw(t,e,Cs),r.__reactInternalMemoizedMergedChildContext=t,Ce(It),Ce(xt),Ne(xt,t)):Ce(It),Ne(It,n)}var Jn=null,Pu=!1,nh=!1;function Rw(t){Jn===null?Jn=[t]:Jn.push(t)}function hk(t){Pu=!0,Rw(t)}function Zr(){if(!nh&&Jn!==null){nh=!0;var t=0,e=be;try{var n=Jn;for(be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Jn=null,Pu=!1}catch(s){throw Jn!==null&&(Jn=Jn.slice(t+1)),rw(zm,Zr),s}finally{be=e,nh=!1}}return null}var uo=[],ho=0,Dc=null,Oc=0,Jt=[],Zt=0,ks=null,tr=1,nr="";function cs(t,e){uo[ho++]=Oc,uo[ho++]=Dc,Dc=t,Oc=e}function Iw(t,e,n){Jt[Zt++]=tr,Jt[Zt++]=nr,Jt[Zt++]=ks,ks=t;var r=tr;t=nr;var s=32-yn(r)-1;r&=~(1<<s),n+=1;var o=32-yn(e)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,tr=1<<32-yn(e)+s|n<<s|r,nr=o+t}else tr=1<<o|n<<s|r,nr=t}function Ym(t){t.return!==null&&(cs(t,1),Iw(t,1,0))}function Xm(t){for(;t===Dc;)Dc=uo[--ho],uo[ho]=null,Oc=uo[--ho],uo[ho]=null;for(;t===ks;)ks=Jt[--Zt],Jt[Zt]=null,nr=Jt[--Zt],Jt[Zt]=null,tr=Jt[--Zt],Jt[Zt]=null}var Ut=null,Bt=null,ke=!1,mn=null;function Mw(t,e){var n=tn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function jy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ut=t,Bt=Or(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ut=t,Bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ks!==null?{id:tr,overflow:nr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ut=t,Bt=null,!0):!1;default:return!1}}function vf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bf(t){if(ke){var e=Bt;if(e){var n=e;if(!jy(t,e)){if(vf(t))throw Error(U(418));e=Or(n.nextSibling);var r=Ut;e&&jy(t,e)?Mw(r,n):(t.flags=t.flags&-4097|2,ke=!1,Ut=t)}}else{if(vf(t))throw Error(U(418));t.flags=t.flags&-4097|2,ke=!1,Ut=t}}}function Cy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ut=t}function Il(t){if(t!==Ut)return!1;if(!ke)return Cy(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pf(t.type,t.memoizedProps)),e&&(e=Bt)){if(vf(t))throw Dw(),Error(U(418));for(;e;)Mw(t,e),e=Or(e.nextSibling)}if(Cy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Bt=Or(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Bt=null}}else Bt=Ut?Or(t.stateNode.nextSibling):null;return!0}function Dw(){for(var t=Bt;t;)t=Or(t.nextSibling)}function Ao(){Bt=Ut=null,ke=!1}function Jm(t){mn===null?mn=[t]:mn.push(t)}var fk=mr.ReactCurrentBatchConfig;function ki(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Ml(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ky(t){var e=t._init;return e(t._payload)}function Ow(t){function e(_,E){if(t){var S=_.deletions;S===null?(_.deletions=[E],_.flags|=16):S.push(E)}}function n(_,E){if(!t)return null;for(;E!==null;)e(_,E),E=E.sibling;return null}function r(_,E){for(_=new Map;E!==null;)E.key!==null?_.set(E.key,E):_.set(E.index,E),E=E.sibling;return _}function s(_,E){return _=$r(_,E),_.index=0,_.sibling=null,_}function o(_,E,S){return _.index=S,t?(S=_.alternate,S!==null?(S=S.index,S<E?(_.flags|=2,E):S):(_.flags|=2,E)):(_.flags|=1048576,E)}function a(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,E,S,R){return E===null||E.tag!==6?(E=ch(S,_.mode,R),E.return=_,E):(E=s(E,S),E.return=_,E)}function u(_,E,S,R){var T=S.type;return T===so?f(_,E,S.props.children,R,S.key):E!==null&&(E.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===jr&&ky(T)===E.type)?(R=s(E,S.props),R.ref=ki(_,E,S),R.return=_,R):(R=gc(S.type,S.key,S.props,null,_.mode,R),R.ref=ki(_,E,S),R.return=_,R)}function d(_,E,S,R){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=uh(S,_.mode,R),E.return=_,E):(E=s(E,S.children||[]),E.return=_,E)}function f(_,E,S,R,T){return E===null||E.tag!==7?(E=bs(S,_.mode,R,T),E.return=_,E):(E=s(E,S),E.return=_,E)}function m(_,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return E=ch(""+E,_.mode,S),E.return=_,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case _l:return S=gc(E.type,E.key,E.props,null,_.mode,S),S.ref=ki(_,null,E),S.return=_,S;case ro:return E=uh(E,_.mode,S),E.return=_,E;case jr:var R=E._init;return m(_,R(E._payload),S)}if(Li(E)||_i(E))return E=bs(E,_.mode,S,null),E.return=_,E;Ml(_,E)}return null}function h(_,E,S,R){var T=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return T!==null?null:l(_,E,""+S,R);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case _l:return S.key===T?u(_,E,S,R):null;case ro:return S.key===T?d(_,E,S,R):null;case jr:return T=S._init,h(_,E,T(S._payload),R)}if(Li(S)||_i(S))return T!==null?null:f(_,E,S,R,null);Ml(_,S)}return null}function x(_,E,S,R,T){if(typeof R=="string"&&R!==""||typeof R=="number")return _=_.get(S)||null,l(E,_,""+R,T);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case _l:return _=_.get(R.key===null?S:R.key)||null,u(E,_,R,T);case ro:return _=_.get(R.key===null?S:R.key)||null,d(E,_,R,T);case jr:var D=R._init;return x(_,E,S,D(R._payload),T)}if(Li(R)||_i(R))return _=_.get(S)||null,f(E,_,R,T,null);Ml(E,R)}return null}function y(_,E,S,R){for(var T=null,D=null,N=E,w=E=0,C=null;N!==null&&w<S.length;w++){N.index>w?(C=N,N=null):C=N.sibling;var A=h(_,N,S[w],R);if(A===null){N===null&&(N=C);break}t&&N&&A.alternate===null&&e(_,N),E=o(A,E,w),D===null?T=A:D.sibling=A,D=A,N=C}if(w===S.length)return n(_,N),ke&&cs(_,w),T;if(N===null){for(;w<S.length;w++)N=m(_,S[w],R),N!==null&&(E=o(N,E,w),D===null?T=N:D.sibling=N,D=N);return ke&&cs(_,w),T}for(N=r(_,N);w<S.length;w++)C=x(N,_,w,S[w],R),C!==null&&(t&&C.alternate!==null&&N.delete(C.key===null?w:C.key),E=o(C,E,w),D===null?T=C:D.sibling=C,D=C);return t&&N.forEach(function(I){return e(_,I)}),ke&&cs(_,w),T}function b(_,E,S,R){var T=_i(S);if(typeof T!="function")throw Error(U(150));if(S=T.call(S),S==null)throw Error(U(151));for(var D=T=null,N=E,w=E=0,C=null,A=S.next();N!==null&&!A.done;w++,A=S.next()){N.index>w?(C=N,N=null):C=N.sibling;var I=h(_,N,A.value,R);if(I===null){N===null&&(N=C);break}t&&N&&I.alternate===null&&e(_,N),E=o(I,E,w),D===null?T=I:D.sibling=I,D=I,N=C}if(A.done)return n(_,N),ke&&cs(_,w),T;if(N===null){for(;!A.done;w++,A=S.next())A=m(_,A.value,R),A!==null&&(E=o(A,E,w),D===null?T=A:D.sibling=A,D=A);return ke&&cs(_,w),T}for(N=r(_,N);!A.done;w++,A=S.next())A=x(N,_,w,A.value,R),A!==null&&(t&&A.alternate!==null&&N.delete(A.key===null?w:A.key),E=o(A,E,w),D===null?T=A:D.sibling=A,D=A);return t&&N.forEach(function(M){return e(_,M)}),ke&&cs(_,w),T}function j(_,E,S,R){if(typeof S=="object"&&S!==null&&S.type===so&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case _l:e:{for(var T=S.key,D=E;D!==null;){if(D.key===T){if(T=S.type,T===so){if(D.tag===7){n(_,D.sibling),E=s(D,S.props.children),E.return=_,_=E;break e}}else if(D.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===jr&&ky(T)===D.type){n(_,D.sibling),E=s(D,S.props),E.ref=ki(_,D,S),E.return=_,_=E;break e}n(_,D);break}else e(_,D);D=D.sibling}S.type===so?(E=bs(S.props.children,_.mode,R,S.key),E.return=_,_=E):(R=gc(S.type,S.key,S.props,null,_.mode,R),R.ref=ki(_,E,S),R.return=_,_=R)}return a(_);case ro:e:{for(D=S.key;E!==null;){if(E.key===D)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){n(_,E.sibling),E=s(E,S.children||[]),E.return=_,_=E;break e}else{n(_,E);break}else e(_,E);E=E.sibling}E=uh(S,_.mode,R),E.return=_,_=E}return a(_);case jr:return D=S._init,j(_,E,D(S._payload),R)}if(Li(S))return y(_,E,S,R);if(_i(S))return b(_,E,S,R);Ml(_,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,E!==null&&E.tag===6?(n(_,E.sibling),E=s(E,S),E.return=_,_=E):(n(_,E),E=ch(S,_.mode,R),E.return=_,_=E),a(_)):n(_,E)}return j}var Po=Ow(!0),Lw=Ow(!1),Lc=Jr(null),Vc=null,fo=null,Zm=null;function ep(){Zm=fo=Vc=null}function tp(t){var e=Lc.current;Ce(Lc),t._currentValue=e}function wf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wo(t,e){Vc=t,Zm=fo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function on(t){var e=t._currentValue;if(Zm!==t)if(t={context:t,memoizedValue:e,next:null},fo===null){if(Vc===null)throw Error(U(308));fo=t,Vc.dependencies={lanes:0,firstContext:t}}else fo=fo.next=t;return e}var ps=null;function np(t){ps===null?ps=[t]:ps.push(t)}function Vw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,np(e)):(n.next=s.next,s.next=n),e.interleaved=n,lr(t,r)}function lr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Cr=!1;function rp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,lr(t,n)}return s=r.interleaved,s===null?(e.next=e,np(r)):(e.next=s.next,s.next=e),r.interleaved=e,lr(t,n)}function uc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bm(t,n)}}function Ty(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fc(t,e,n,r){var s=t.updateQueue;Cr=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,a===null?o=d:a.next=d,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(o!==null){var m=s.baseState;a=0,f=d=u=null,l=o;do{var h=l.lane,x=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,b=l;switch(h=e,x=n,b.tag){case 1:if(y=b.payload,typeof y=="function"){m=y.call(x,m,h);break e}m=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=b.payload,h=typeof y=="function"?y.call(x,m,h):y,h==null)break e;m=Re({},m,h);break e;case 2:Cr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else x={eventTime:x,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=x,u=m):f=f.next=x,a|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);As|=a,t.lanes=a,t.memoizedState=m}}function Ay(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var Ka={},Fn=Jr(Ka),ya=Jr(Ka),va=Jr(Ka);function gs(t){if(t===Ka)throw Error(U(174));return t}function sp(t,e){switch(Ne(va,e),Ne(ya,t),Ne(Fn,Ka),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ef(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ef(e,t)}Ce(Fn),Ne(Fn,e)}function Ro(){Ce(Fn),Ce(ya),Ce(va)}function $w(t){gs(va.current);var e=gs(Fn.current),n=ef(e,t.type);e!==n&&(Ne(ya,t),Ne(Fn,n))}function op(t){ya.current===t&&(Ce(Fn),Ce(ya))}var Ae=Jr(0);function $c(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rh=[];function ip(){for(var t=0;t<rh.length;t++)rh[t]._workInProgressVersionPrimary=null;rh.length=0}var dc=mr.ReactCurrentDispatcher,sh=mr.ReactCurrentBatchConfig,Ts=0,Pe=null,He=null,Ye=null,zc=!1,qi=!1,ba=0,mk=0;function ht(){throw Error(U(321))}function ap(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!En(t[n],e[n]))return!1;return!0}function lp(t,e,n,r,s,o){if(Ts=o,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dc.current=t===null||t.memoizedState===null?yk:vk,t=n(r,s),qi){o=0;do{if(qi=!1,ba=0,25<=o)throw Error(U(301));o+=1,Ye=He=null,e.updateQueue=null,dc.current=bk,t=n(r,s)}while(qi)}if(dc.current=Bc,e=He!==null&&He.next!==null,Ts=0,Ye=He=Pe=null,zc=!1,e)throw Error(U(300));return t}function cp(){var t=ba!==0;return ba=0,t}function Rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Pe.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function an(){if(He===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Ye===null?Pe.memoizedState:Ye.next;if(e!==null)Ye=e,He=t;else{if(t===null)throw Error(U(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Ye===null?Pe.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function wa(t,e){return typeof e=="function"?e(t):e}function oh(t){var e=an(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=He,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var l=a=null,u=null,d=o;do{var f=d.lane;if((Ts&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,a=r):u=u.next=m,Pe.lanes|=f,As|=f}d=d.next}while(d!==null&&d!==o);u===null?a=r:u.next=l,En(r,e.memoizedState)||(Rt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Pe.lanes|=o,As|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ih(t){var e=an(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=t(o,a.action),a=a.next;while(a!==s);En(o,e.memoizedState)||(Rt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function zw(){}function Bw(t,e){var n=Pe,r=an(),s=e(),o=!En(r.memoizedState,s);if(o&&(r.memoizedState=s,Rt=!0),r=r.queue,up(Gw.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,Ea(9,Hw.bind(null,n,r,s,e),void 0,null),Ze===null)throw Error(U(349));Ts&30||Uw(n,e,s)}return s}function Uw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Hw(t,e,n,r){e.value=n,e.getSnapshot=r,Kw(e)&&Ww(t)}function Gw(t,e,n){return n(function(){Kw(e)&&Ww(t)})}function Kw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!En(t,n)}catch{return!0}}function Ww(t){var e=lr(t,1);e!==null&&vn(e,t,1,-1)}function Py(t){var e=Rn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:t},e.queue=t,t=t.dispatch=xk.bind(null,Pe,t),[e.memoizedState,t]}function Ea(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function qw(){return an().memoizedState}function hc(t,e,n,r){var s=Rn();Pe.flags|=t,s.memoizedState=Ea(1|e,n,void 0,r===void 0?null:r)}function Ru(t,e,n,r){var s=an();r=r===void 0?null:r;var o=void 0;if(He!==null){var a=He.memoizedState;if(o=a.destroy,r!==null&&ap(r,a.deps)){s.memoizedState=Ea(e,n,o,r);return}}Pe.flags|=t,s.memoizedState=Ea(1|e,n,o,r)}function Ry(t,e){return hc(8390656,8,t,e)}function up(t,e){return Ru(2048,8,t,e)}function Qw(t,e){return Ru(4,2,t,e)}function Yw(t,e){return Ru(4,4,t,e)}function Xw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Jw(t,e,n){return n=n!=null?n.concat([t]):null,Ru(4,4,Xw.bind(null,e,t),n)}function dp(){}function Zw(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ap(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function e1(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ap(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function t1(t,e,n){return Ts&21?(En(n,e)||(n=iw(),Pe.lanes|=n,As|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=n)}function pk(t,e){var n=be;be=n!==0&&4>n?n:4,t(!0);var r=sh.transition;sh.transition={};try{t(!1),e()}finally{be=n,sh.transition=r}}function n1(){return an().memoizedState}function gk(t,e,n){var r=Fr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},r1(t))s1(e,n);else if(n=Vw(t,e,n,r),n!==null){var s=Et();vn(n,t,r,s),o1(n,e,r)}}function xk(t,e,n){var r=Fr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(r1(t))s1(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,n);if(s.hasEagerState=!0,s.eagerState=l,En(l,a)){var u=e.interleaved;u===null?(s.next=s,np(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Vw(t,e,s,r),n!==null&&(s=Et(),vn(n,t,r,s),o1(n,e,r))}}function r1(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function s1(t,e){qi=zc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function o1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bm(t,n)}}var Bc={readContext:on,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},yk={readContext:on,useCallback:function(t,e){return Rn().memoizedState=[t,e===void 0?null:e],t},useContext:on,useEffect:Ry,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hc(4194308,4,Xw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hc(4194308,4,t,e)},useInsertionEffect:function(t,e){return hc(4,2,t,e)},useMemo:function(t,e){var n=Rn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=gk.bind(null,Pe,t),[r.memoizedState,t]},useRef:function(t){var e=Rn();return t={current:t},e.memoizedState=t},useState:Py,useDebugValue:dp,useDeferredValue:function(t){return Rn().memoizedState=t},useTransition:function(){var t=Py(!1),e=t[0];return t=pk.bind(null,t[1]),Rn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pe,s=Rn();if(ke){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Ze===null)throw Error(U(349));Ts&30||Uw(r,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,Ry(Gw.bind(null,r,o,t),[t]),r.flags|=2048,Ea(9,Hw.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Rn(),e=Ze.identifierPrefix;if(ke){var n=nr,r=tr;n=(r&~(1<<32-yn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ba++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=mk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vk={readContext:on,useCallback:Zw,useContext:on,useEffect:up,useImperativeHandle:Jw,useInsertionEffect:Qw,useLayoutEffect:Yw,useMemo:e1,useReducer:oh,useRef:qw,useState:function(){return oh(wa)},useDebugValue:dp,useDeferredValue:function(t){var e=an();return t1(e,He.memoizedState,t)},useTransition:function(){var t=oh(wa)[0],e=an().memoizedState;return[t,e]},useMutableSource:zw,useSyncExternalStore:Bw,useId:n1,unstable_isNewReconciler:!1},bk={readContext:on,useCallback:Zw,useContext:on,useEffect:up,useImperativeHandle:Jw,useInsertionEffect:Qw,useLayoutEffect:Yw,useMemo:e1,useReducer:ih,useRef:qw,useState:function(){return ih(wa)},useDebugValue:dp,useDeferredValue:function(t){var e=an();return He===null?e.memoizedState=t:t1(e,He.memoizedState,t)},useTransition:function(){var t=ih(wa)[0],e=an().memoizedState;return[t,e]},useMutableSource:zw,useSyncExternalStore:Bw,useId:n1,unstable_isNewReconciler:!1};function hn(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ef(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Iu={isMounted:function(t){return(t=t._reactInternals)?Bs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Et(),s=Fr(t),o=sr(r,s);o.payload=e,n!=null&&(o.callback=n),e=Lr(t,o,s),e!==null&&(vn(e,t,s,r),uc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Et(),s=Fr(t),o=sr(r,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Lr(t,o,s),e!==null&&(vn(e,t,s,r),uc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Et(),r=Fr(t),s=sr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Lr(t,s,r),e!==null&&(vn(e,t,r,n),uc(e,t,r))}};function Iy(t,e,n,r,s,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!ma(n,r)||!ma(s,o):!0}function i1(t,e,n){var r=!1,s=Gr,o=e.contextType;return typeof o=="object"&&o!==null?o=on(o):(s=Mt(e)?Cs:xt.current,r=e.contextTypes,o=(r=r!=null)?To(t,s):Gr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Iu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function My(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Iu.enqueueReplaceState(e,e.state,null)}function _f(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},rp(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=on(o):(o=Mt(e)?Cs:xt.current,s.context=To(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Ef(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Iu.enqueueReplaceState(s,s.state,null),Fc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Io(t,e){try{var n="",r=e;do n+=qj(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function ah(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Nf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var wk=typeof WeakMap=="function"?WeakMap:Map;function a1(t,e,n){n=sr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hc||(Hc=!0,Mf=r),Nf(t,e)},n}function l1(t,e,n){n=sr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Nf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Nf(t,e),typeof r!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Dy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new wk;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Dk.bind(null,t,e,n),e.then(t,t))}function Oy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ly(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=sr(-1,1),e.tag=2,Lr(n,e,1))),n.lanes|=1),t)}var Ek=mr.ReactCurrentOwner,Rt=!1;function bt(t,e,n,r){e.child=t===null?Lw(e,null,n,r):Po(e,t.child,n,r)}function Vy(t,e,n,r,s){n=n.render;var o=e.ref;return wo(e,s),r=lp(t,e,n,r,o,s),n=cp(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,cr(t,e,s)):(ke&&n&&Ym(e),e.flags|=1,bt(t,e,r,s),e.child)}function Fy(t,e,n,r,s){if(t===null){var o=n.type;return typeof o=="function"&&!vp(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,c1(t,e,o,r,s)):(t=gc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:ma,n(a,r)&&t.ref===e.ref)return cr(t,e,s)}return e.flags|=1,t=$r(o,r),t.ref=e.ref,t.return=e,e.child=t}function c1(t,e,n,r,s){if(t!==null){var o=t.memoizedProps;if(ma(o,r)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=r=o,(t.lanes&s)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,cr(t,e,s)}return Sf(t,e,n,r,s)}function u1(t,e,n){var r=e.pendingProps,s=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(po,Vt),Vt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne(po,Vt),Vt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ne(po,Vt),Vt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ne(po,Vt),Vt|=r;return bt(t,e,s,n),e.child}function d1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sf(t,e,n,r,s){var o=Mt(n)?Cs:xt.current;return o=To(e,o),wo(e,s),n=lp(t,e,n,r,o,s),r=cp(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,cr(t,e,s)):(ke&&r&&Ym(e),e.flags|=1,bt(t,e,n,s),e.child)}function $y(t,e,n,r,s){if(Mt(n)){var o=!0;Mc(e)}else o=!1;if(wo(e,s),e.stateNode===null)fc(t,e),i1(e,n,r),_f(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=on(d):(d=Mt(n)?Cs:xt.current,d=To(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==d)&&My(e,a,r,d),Cr=!1;var h=e.memoizedState;a.state=h,Fc(e,r,a,s),u=e.memoizedState,l!==r||h!==u||It.current||Cr?(typeof f=="function"&&(Ef(e,n,f,r),u=e.memoizedState),(l=Cr||Iy(e,n,l,r,h,u,d))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Fw(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:hn(e.type,l),a.props=d,m=e.pendingProps,h=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=on(u):(u=Mt(n)?Cs:xt.current,u=To(e,u));var x=n.getDerivedStateFromProps;(f=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||h!==u)&&My(e,a,r,u),Cr=!1,h=e.memoizedState,a.state=h,Fc(e,r,a,s);var y=e.memoizedState;l!==m||h!==y||It.current||Cr?(typeof x=="function"&&(Ef(e,n,x,r),y=e.memoizedState),(d=Cr||Iy(e,n,d,r,h,y,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),a.props=r,a.state=y,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return jf(t,e,n,r,o,s)}function jf(t,e,n,r,s,o){d1(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Sy(e,n,!1),cr(t,e,o);r=e.stateNode,Ek.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Po(e,t.child,null,o),e.child=Po(e,null,l,o)):bt(t,e,l,o),e.memoizedState=r.state,s&&Sy(e,n,!0),e.child}function h1(t){var e=t.stateNode;e.pendingContext?Ny(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ny(t,e.context,!1),sp(t,e.containerInfo)}function zy(t,e,n,r,s){return Ao(),Jm(s),e.flags|=256,bt(t,e,n,r),e.child}var Cf={dehydrated:null,treeContext:null,retryLane:0};function kf(t){return{baseLanes:t,cachePool:null,transitions:null}}function f1(t,e,n){var r=e.pendingProps,s=Ae.current,o=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ne(Ae,s&1),t===null)return bf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Ou(a,r,0,null),t=bs(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=kf(n),e.memoizedState=Cf,t):hp(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return _k(t,e,a,r,l,s,n);if(o){o=r.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=$r(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=$r(l,o):(o=bs(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?kf(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Cf,r}return o=t.child,t=o.sibling,r=$r(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function hp(t,e){return e=Ou({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Dl(t,e,n,r){return r!==null&&Jm(r),Po(e,t.child,null,n),t=hp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _k(t,e,n,r,s,o,a){if(n)return e.flags&256?(e.flags&=-257,r=ah(Error(U(422))),Dl(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=Ou({mode:"visible",children:r.children},s,0,null),o=bs(o,s,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Po(e,t.child,null,a),e.child.memoizedState=kf(a),e.memoizedState=Cf,o);if(!(e.mode&1))return Dl(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(U(419)),r=ah(o,r,void 0),Dl(t,e,a,r)}if(l=(a&t.childLanes)!==0,Rt||l){if(r=Ze,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,lr(t,s),vn(r,t,s,-1))}return yp(),r=ah(Error(U(421))),Dl(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Ok.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,Bt=Or(s.nextSibling),Ut=e,ke=!0,mn=null,t!==null&&(Jt[Zt++]=tr,Jt[Zt++]=nr,Jt[Zt++]=ks,tr=t.id,nr=t.overflow,ks=e),e=hp(e,r.children),e.flags|=4096,e)}function By(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),wf(t.return,e,n)}function lh(t,e,n,r,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function m1(t,e,n){var r=e.pendingProps,s=r.revealOrder,o=r.tail;if(bt(t,e,r.children,n),r=Ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&By(t,n,e);else if(t.tag===19)By(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ne(Ae,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&$c(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),lh(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&$c(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}lh(e,!0,n,null,o);break;case"together":lh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function cr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),As|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=$r(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$r(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Nk(t,e,n){switch(e.tag){case 3:h1(e),Ao();break;case 5:$w(e);break;case 1:Mt(e.type)&&Mc(e);break;case 4:sp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ne(Lc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ne(Ae,Ae.current&1),e.flags|=128,null):n&e.child.childLanes?f1(t,e,n):(Ne(Ae,Ae.current&1),t=cr(t,e,n),t!==null?t.sibling:null);Ne(Ae,Ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return m1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ne(Ae,Ae.current),r)break;return null;case 22:case 23:return e.lanes=0,u1(t,e,n)}return cr(t,e,n)}var p1,Tf,g1,x1;p1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Tf=function(){};g1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,gs(Fn.current);var o=null;switch(n){case"input":s=Yh(t,s),r=Yh(t,r),o=[];break;case"select":s=Re({},s,{value:void 0}),r=Re({},r,{value:void 0}),o=[];break;case"textarea":s=Zh(t,s),r=Zh(t,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Rc)}tf(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(aa.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var u=r[d];if(l=s?.[d],r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(aa.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&je("scroll",t),o||l===u||(o=[])):(o=o||[]).push(d,u))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};x1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ti(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Sk(t,e,n){var r=e.pendingProps;switch(Xm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(e),null;case 1:return Mt(e.type)&&Ic(),ft(e),null;case 3:return r=e.stateNode,Ro(),Ce(It),Ce(xt),ip(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Il(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mn!==null&&(Lf(mn),mn=null))),Tf(t,e),ft(e),null;case 5:op(e);var s=gs(va.current);if(n=e.type,t!==null&&e.stateNode!=null)g1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return ft(e),null}if(t=gs(Fn.current),Il(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Mn]=e,r[xa]=o,t=(e.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(s=0;s<Fi.length;s++)je(Fi[s],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":Xx(r,o),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},je("invalid",r);break;case"textarea":Zx(r,o),je("invalid",r)}tf(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Rl(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Rl(r.textContent,l,t),s=["children",""+l]):aa.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&je("scroll",r)}switch(n){case"input":Nl(r),Jx(r,o,!0);break;case"textarea":Nl(r),ey(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Rc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Gb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Mn]=e,t[xa]=r,p1(t,e,!1,!1),e.stateNode=t;e:{switch(a=nf(n,r),n){case"dialog":je("cancel",t),je("close",t),s=r;break;case"iframe":case"object":case"embed":je("load",t),s=r;break;case"video":case"audio":for(s=0;s<Fi.length;s++)je(Fi[s],t);s=r;break;case"source":je("error",t),s=r;break;case"img":case"image":case"link":je("error",t),je("load",t),s=r;break;case"details":je("toggle",t),s=r;break;case"input":Xx(t,r),s=Yh(t,r),je("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Re({},r,{value:void 0}),je("invalid",t);break;case"textarea":Zx(t,r),s=Zh(t,r),je("invalid",t);break;default:s=r}tf(n,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?qb(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Kb(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&la(t,u):typeof u=="number"&&la(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(aa.hasOwnProperty(o)?u!=null&&o==="onScroll"&&je("scroll",t):u!=null&&Om(t,o,u,a))}switch(n){case"input":Nl(t),Jx(t,r,!1);break;case"textarea":Nl(t),ey(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?xo(t,!!r.multiple,o,!1):r.defaultValue!=null&&xo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Rc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ft(e),null;case 6:if(t&&e.stateNode!=null)x1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=gs(va.current),gs(Fn.current),Il(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mn]=e,(o=r.nodeValue!==n)&&(t=Ut,t!==null))switch(t.tag){case 3:Rl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Rl(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mn]=e,e.stateNode=r}return ft(e),null;case 13:if(Ce(Ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&Bt!==null&&e.mode&1&&!(e.flags&128))Dw(),Ao(),e.flags|=98560,o=!1;else if(o=Il(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(U(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(U(317));o[Mn]=e}else Ao(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ft(e),o=!1}else mn!==null&&(Lf(mn),mn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ae.current&1?Ke===0&&(Ke=3):yp())),e.updateQueue!==null&&(e.flags|=4),ft(e),null);case 4:return Ro(),Tf(t,e),t===null&&pa(e.stateNode.containerInfo),ft(e),null;case 10:return tp(e.type._context),ft(e),null;case 17:return Mt(e.type)&&Ic(),ft(e),null;case 19:if(Ce(Ae),o=e.memoizedState,o===null)return ft(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)Ti(o,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=$c(t),a!==null){for(e.flags|=128,Ti(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(Ae,Ae.current&1|2),e.child}t=t.sibling}o.tail!==null&&Oe()>Mo&&(e.flags|=128,r=!0,Ti(o,!1),e.lanes=4194304)}else{if(!r)if(t=$c(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ti(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ke)return ft(e),null}else 2*Oe()-o.renderingStartTime>Mo&&n!==1073741824&&(e.flags|=128,r=!0,Ti(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Oe(),e.sibling=null,n=Ae.current,Ne(Ae,r?n&1|2:n&1),e):(ft(e),null);case 22:case 23:return xp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Vt&1073741824&&(ft(e),e.subtreeFlags&6&&(e.flags|=8192)):ft(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function jk(t,e){switch(Xm(e),e.tag){case 1:return Mt(e.type)&&Ic(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ro(),Ce(It),Ce(xt),ip(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return op(e),null;case 13:if(Ce(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Ao()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(Ae),null;case 4:return Ro(),null;case 10:return tp(e.type._context),null;case 22:case 23:return xp(),null;case 24:return null;default:return null}}var Ol=!1,gt=!1,Ck=typeof WeakSet=="function"?WeakSet:Set,X=null;function mo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function Af(t,e,n){try{n()}catch(r){De(t,e,r)}}var Uy=!1;function kk(t,e){if(ff=Tc,t=Ew(),Qm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,d=0,f=0,m=t,h=null;t:for(;;){for(var x;m!==n||s!==0&&m.nodeType!==3||(l=a+s),m!==o||r!==0&&m.nodeType!==3||(u=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(x=m.firstChild)!==null;)h=m,m=x;for(;;){if(m===t)break t;if(h===n&&++d===s&&(l=a),h===o&&++f===r&&(u=a),(x=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=x}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(mf={focusedElem:t,selectionRange:n},Tc=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,j=y.memoizedState,_=e.stateNode,E=_.getSnapshotBeforeUpdate(e.elementType===e.type?b:hn(e.type,b),j);_.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(R){De(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return y=Uy,Uy=!1,y}function Qi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&Af(e,n,o)}s=s.next}while(s!==r)}}function Mu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Pf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function y1(t){var e=t.alternate;e!==null&&(t.alternate=null,y1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mn],delete e[xa],delete e[xf],delete e[uk],delete e[dk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function v1(t){return t.tag===5||t.tag===3||t.tag===4}function Hy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||v1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Rc));else if(r!==4&&(t=t.child,t!==null))for(Rf(t,e,n),t=t.sibling;t!==null;)Rf(t,e,n),t=t.sibling}function If(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(If(t,e,n),t=t.sibling;t!==null;)If(t,e,n),t=t.sibling}var rt=null,fn=!1;function _r(t,e,n){for(n=n.child;n!==null;)b1(t,e,n),n=n.sibling}function b1(t,e,n){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(ju,n)}catch{}switch(n.tag){case 5:gt||mo(n,e);case 6:var r=rt,s=fn;rt=null,_r(t,e,n),rt=r,fn=s,rt!==null&&(fn?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(fn?(t=rt,n=n.stateNode,t.nodeType===8?th(t.parentNode,n):t.nodeType===1&&th(t,n),ha(t)):th(rt,n.stateNode));break;case 4:r=rt,s=fn,rt=n.stateNode.containerInfo,fn=!0,_r(t,e,n),rt=r,fn=s;break;case 0:case 11:case 14:case 15:if(!gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Af(n,e,a),s=s.next}while(s!==r)}_r(t,e,n);break;case 1:if(!gt&&(mo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){De(n,e,l)}_r(t,e,n);break;case 21:_r(t,e,n);break;case 22:n.mode&1?(gt=(r=gt)||n.memoizedState!==null,_r(t,e,n),gt=r):_r(t,e,n);break;default:_r(t,e,n)}}function Gy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ck),e.forEach(function(r){var s=Lk.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function dn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:rt=l.stateNode,fn=!1;break e;case 3:rt=l.stateNode.containerInfo,fn=!0;break e;case 4:rt=l.stateNode.containerInfo,fn=!0;break e}l=l.return}if(rt===null)throw Error(U(160));b1(o,a,s),rt=null,fn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){De(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)w1(e,t),e=e.sibling}function w1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dn(e,t),Tn(t),r&4){try{Qi(3,t,t.return),Mu(3,t)}catch(b){De(t,t.return,b)}try{Qi(5,t,t.return)}catch(b){De(t,t.return,b)}}break;case 1:dn(e,t),Tn(t),r&512&&n!==null&&mo(n,n.return);break;case 5:if(dn(e,t),Tn(t),r&512&&n!==null&&mo(n,n.return),t.flags&32){var s=t.stateNode;try{la(s,"")}catch(b){De(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Ub(s,o),nf(l,a);var d=nf(l,o);for(a=0;a<u.length;a+=2){var f=u[a],m=u[a+1];f==="style"?qb(s,m):f==="dangerouslySetInnerHTML"?Kb(s,m):f==="children"?la(s,m):Om(s,f,m,d)}switch(l){case"input":Xh(s,o);break;case"textarea":Hb(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var x=o.value;x!=null?xo(s,!!o.multiple,x,!1):h!==!!o.multiple&&(o.defaultValue!=null?xo(s,!!o.multiple,o.defaultValue,!0):xo(s,!!o.multiple,o.multiple?[]:"",!1))}s[xa]=o}catch(b){De(t,t.return,b)}}break;case 6:if(dn(e,t),Tn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(b){De(t,t.return,b)}}break;case 3:if(dn(e,t),Tn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ha(e.containerInfo)}catch(b){De(t,t.return,b)}break;case 4:dn(e,t),Tn(t);break;case 13:dn(e,t),Tn(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(pp=Oe())),r&4&&Gy(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(gt=(d=gt)||f,dn(e,t),gt=d):dn(e,t),Tn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(X=t,f=t.child;f!==null;){for(m=X=f;X!==null;){switch(h=X,x=h.child,h.tag){case 0:case 11:case 14:case 15:Qi(4,h,h.return);break;case 1:mo(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(b){De(r,n,b)}}break;case 5:mo(h,h.return);break;case 22:if(h.memoizedState!==null){Wy(m);continue}}x!==null?(x.return=h,X=x):Wy(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=m.stateNode,u=m.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Wb("display",a))}catch(b){De(t,t.return,b)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(b){De(t,t.return,b)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:dn(e,t),Tn(t),r&4&&Gy(t);break;case 21:break;default:dn(e,t),Tn(t)}}function Tn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(v1(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(la(s,""),r.flags&=-33);var o=Hy(t);If(t,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Hy(t);Rf(t,l,a);break;default:throw Error(U(161))}}catch(u){De(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Tk(t,e,n){X=t,E1(t)}function E1(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var s=X,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Ol;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||gt;l=Ol;var d=gt;if(Ol=a,(gt=u)&&!d)for(X=s;X!==null;)a=X,u=a.child,a.tag===22&&a.memoizedState!==null?qy(s):u!==null?(u.return=a,X=u):qy(s);for(;o!==null;)X=o,E1(o),o=o.sibling;X=s,Ol=l,gt=d}Ky(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,X=o):Ky(t)}}function Ky(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gt||Mu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!gt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:hn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Ay(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ay(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&ha(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}gt||e.flags&512&&Pf(e)}catch(h){De(e,e.return,h)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function Wy(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function qy(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Mu(4,e)}catch(u){De(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){De(e,s,u)}}var o=e.return;try{Pf(e)}catch(u){De(e,o,u)}break;case 5:var a=e.return;try{Pf(e)}catch(u){De(e,a,u)}}}catch(u){De(e,e.return,u)}if(e===t){X=null;break}var l=e.sibling;if(l!==null){l.return=e.return,X=l;break}X=e.return}}var Ak=Math.ceil,Uc=mr.ReactCurrentDispatcher,fp=mr.ReactCurrentOwner,nn=mr.ReactCurrentBatchConfig,xe=0,Ze=null,Fe=null,at=0,Vt=0,po=Jr(0),Ke=0,_a=null,As=0,Du=0,mp=0,Yi=null,Pt=null,pp=0,Mo=1/0,Xn=null,Hc=!1,Mf=null,Vr=null,Ll=!1,Pr=null,Gc=0,Xi=0,Df=null,mc=-1,pc=0;function Et(){return xe&6?Oe():mc!==-1?mc:mc=Oe()}function Fr(t){return t.mode&1?xe&2&&at!==0?at&-at:fk.transition!==null?(pc===0&&(pc=iw()),pc):(t=be,t!==0||(t=window.event,t=t===void 0?16:fw(t.type)),t):1}function vn(t,e,n,r){if(50<Xi)throw Xi=0,Df=null,Error(U(185));Ua(t,n,r),(!(xe&2)||t!==Ze)&&(t===Ze&&(!(xe&2)&&(Du|=n),Ke===4&&Tr(t,at)),Dt(t,r),n===1&&xe===0&&!(e.mode&1)&&(Mo=Oe()+500,Pu&&Zr()))}function Dt(t,e){var n=t.callbackNode;fC(t,e);var r=kc(t,t===Ze?at:0);if(r===0)n!==null&&ry(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ry(n),e===1)t.tag===0?hk(Qy.bind(null,t)):Rw(Qy.bind(null,t)),lk(function(){!(xe&6)&&Zr()}),n=null;else{switch(aw(r)){case 1:n=zm;break;case 4:n=sw;break;case 16:n=Cc;break;case 536870912:n=ow;break;default:n=Cc}n=A1(n,_1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _1(t,e){if(mc=-1,pc=0,xe&6)throw Error(U(327));var n=t.callbackNode;if(Eo()&&t.callbackNode!==n)return null;var r=kc(t,t===Ze?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Kc(t,r);else{e=r;var s=xe;xe|=2;var o=S1();(Ze!==t||at!==e)&&(Xn=null,Mo=Oe()+500,vs(t,e));do try{Ik();break}catch(l){N1(t,l)}while(!0);ep(),Uc.current=o,xe=s,Fe!==null?e=0:(Ze=null,at=0,e=Ke)}if(e!==0){if(e===2&&(s=lf(t),s!==0&&(r=s,e=Of(t,s))),e===1)throw n=_a,vs(t,0),Tr(t,r),Dt(t,Oe()),n;if(e===6)Tr(t,r);else{if(s=t.current.alternate,!(r&30)&&!Pk(s)&&(e=Kc(t,r),e===2&&(o=lf(t),o!==0&&(r=o,e=Of(t,o))),e===1))throw n=_a,vs(t,0),Tr(t,r),Dt(t,Oe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:us(t,Pt,Xn);break;case 3:if(Tr(t,r),(r&130023424)===r&&(e=pp+500-Oe(),10<e)){if(kc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Et(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=gf(us.bind(null,t,Pt,Xn),e);break}us(t,Pt,Xn);break;case 4:if(Tr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-yn(r);o=1<<a,a=e[a],a>s&&(s=a),r&=~o}if(r=s,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ak(r/1960))-r,10<r){t.timeoutHandle=gf(us.bind(null,t,Pt,Xn),r);break}us(t,Pt,Xn);break;case 5:us(t,Pt,Xn);break;default:throw Error(U(329))}}}return Dt(t,Oe()),t.callbackNode===n?_1.bind(null,t):null}function Of(t,e){var n=Yi;return t.current.memoizedState.isDehydrated&&(vs(t,e).flags|=256),t=Kc(t,e),t!==2&&(e=Pt,Pt=n,e!==null&&Lf(e)),t}function Lf(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function Pk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!En(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Tr(t,e){for(e&=~mp,e&=~Du,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yn(e),r=1<<n;t[n]=-1,e&=~r}}function Qy(t){if(xe&6)throw Error(U(327));Eo();var e=kc(t,0);if(!(e&1))return Dt(t,Oe()),null;var n=Kc(t,e);if(t.tag!==0&&n===2){var r=lf(t);r!==0&&(e=r,n=Of(t,r))}if(n===1)throw n=_a,vs(t,0),Tr(t,e),Dt(t,Oe()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,us(t,Pt,Xn),Dt(t,Oe()),null}function gp(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(Mo=Oe()+500,Pu&&Zr())}}function Ps(t){Pr!==null&&Pr.tag===0&&!(xe&6)&&Eo();var e=xe;xe|=1;var n=nn.transition,r=be;try{if(nn.transition=null,be=1,t)return t()}finally{be=r,nn.transition=n,xe=e,!(xe&6)&&Zr()}}function xp(){Vt=po.current,Ce(po)}function vs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ak(n)),Fe!==null)for(n=Fe.return;n!==null;){var r=n;switch(Xm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ic();break;case 3:Ro(),Ce(It),Ce(xt),ip();break;case 5:op(r);break;case 4:Ro();break;case 13:Ce(Ae);break;case 19:Ce(Ae);break;case 10:tp(r.type._context);break;case 22:case 23:xp()}n=n.return}if(Ze=t,Fe=t=$r(t.current,null),at=Vt=e,Ke=0,_a=null,mp=Du=As=0,Pt=Yi=null,ps!==null){for(e=0;e<ps.length;e++)if(n=ps[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}ps=null}return t}function N1(t,e){do{var n=Fe;try{if(ep(),dc.current=Bc,zc){for(var r=Pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}zc=!1}if(Ts=0,Ye=He=Pe=null,qi=!1,ba=0,fp.current=null,n===null||n.return===null){Ke=1,_a=e,Fe=null;break}e:{var o=t,a=n.return,l=n,u=e;if(e=at,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=Oy(a);if(x!==null){x.flags&=-257,Ly(x,a,l,o,e),x.mode&1&&Dy(o,d,e),e=x,u=d;var y=e.updateQueue;if(y===null){var b=new Set;b.add(u),e.updateQueue=b}else y.add(u);break e}else{if(!(e&1)){Dy(o,d,e),yp();break e}u=Error(U(426))}}else if(ke&&l.mode&1){var j=Oy(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Ly(j,a,l,o,e),Jm(Io(u,l));break e}}o=u=Io(u,l),Ke!==4&&(Ke=2),Yi===null?Yi=[o]:Yi.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var _=a1(o,u,e);Ty(o,_);break e;case 1:l=u;var E=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof E.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Vr===null||!Vr.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var R=l1(o,l,e);Ty(o,R);break e}}o=o.return}while(o!==null)}C1(n)}catch(T){e=T,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(!0)}function S1(){var t=Uc.current;return Uc.current=Bc,t===null?Bc:t}function yp(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Ze===null||!(As&268435455)&&!(Du&268435455)||Tr(Ze,at)}function Kc(t,e){var n=xe;xe|=2;var r=S1();(Ze!==t||at!==e)&&(Xn=null,vs(t,e));do try{Rk();break}catch(s){N1(t,s)}while(!0);if(ep(),xe=n,Uc.current=r,Fe!==null)throw Error(U(261));return Ze=null,at=0,Ke}function Rk(){for(;Fe!==null;)j1(Fe)}function Ik(){for(;Fe!==null&&!sC();)j1(Fe)}function j1(t){var e=T1(t.alternate,t,Vt);t.memoizedProps=t.pendingProps,e===null?C1(t):Fe=e,fp.current=null}function C1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=jk(n,e),n!==null){n.flags&=32767,Fe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,Fe=null;return}}else if(n=Sk(n,e,Vt),n!==null){Fe=n;return}if(e=e.sibling,e!==null){Fe=e;return}Fe=e=t}while(e!==null);Ke===0&&(Ke=5)}function us(t,e,n){var r=be,s=nn.transition;try{nn.transition=null,be=1,Mk(t,e,n,r)}finally{nn.transition=s,be=r}return null}function Mk(t,e,n,r){do Eo();while(Pr!==null);if(xe&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(mC(t,o),t===Ze&&(Fe=Ze=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ll||(Ll=!0,A1(Cc,function(){return Eo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=nn.transition,nn.transition=null;var a=be;be=1;var l=xe;xe|=4,fp.current=null,kk(t,n),w1(n,t),ek(mf),Tc=!!ff,mf=ff=null,t.current=n,Tk(n),oC(),xe=l,be=a,nn.transition=o}else t.current=n;if(Ll&&(Ll=!1,Pr=t,Gc=s),o=t.pendingLanes,o===0&&(Vr=null),lC(n.stateNode),Dt(t,Oe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hc)throw Hc=!1,t=Mf,Mf=null,t;return Gc&1&&t.tag!==0&&Eo(),o=t.pendingLanes,o&1?t===Df?Xi++:(Xi=0,Df=t):Xi=0,Zr(),null}function Eo(){if(Pr!==null){var t=aw(Gc),e=nn.transition,n=be;try{if(nn.transition=null,be=16>t?16:t,Pr===null)var r=!1;else{if(t=Pr,Pr=null,Gc=0,xe&6)throw Error(U(331));var s=xe;for(xe|=4,X=t.current;X!==null;){var o=X,a=o.child;if(X.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(X=d;X!==null;){var f=X;switch(f.tag){case 0:case 11:case 15:Qi(8,f,o)}var m=f.child;if(m!==null)m.return=f,X=m;else for(;X!==null;){f=X;var h=f.sibling,x=f.return;if(y1(f),f===d){X=null;break}if(h!==null){h.return=x,X=h;break}X=x}}}var y=o.alternate;if(y!==null){var b=y.child;if(b!==null){y.child=null;do{var j=b.sibling;b.sibling=null,b=j}while(b!==null)}}X=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,X=a;else e:for(;X!==null;){if(o=X,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Qi(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,X=_;break e}X=o.return}}var E=t.current;for(X=E;X!==null;){a=X;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,X=S;else e:for(a=E;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Mu(9,l)}}catch(T){De(l,l.return,T)}if(l===a){X=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,X=R;break e}X=l.return}}if(xe=s,Zr(),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(ju,t)}catch{}r=!0}return r}finally{be=n,nn.transition=e}}return!1}function Yy(t,e,n){e=Io(n,e),e=a1(t,e,1),t=Lr(t,e,1),e=Et(),t!==null&&(Ua(t,1,e),Dt(t,e))}function De(t,e,n){if(t.tag===3)Yy(t,t,n);else for(;e!==null;){if(e.tag===3){Yy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vr===null||!Vr.has(r))){t=Io(n,t),t=l1(e,t,1),e=Lr(e,t,1),t=Et(),e!==null&&(Ua(e,1,t),Dt(e,t));break}}e=e.return}}function Dk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Et(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(at&n)===n&&(Ke===4||Ke===3&&(at&130023424)===at&&500>Oe()-pp?vs(t,0):mp|=n),Dt(t,e)}function k1(t,e){e===0&&(t.mode&1?(e=Cl,Cl<<=1,!(Cl&130023424)&&(Cl=4194304)):e=1);var n=Et();t=lr(t,e),t!==null&&(Ua(t,e,n),Dt(t,n))}function Ok(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),k1(t,n)}function Lk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),k1(t,n)}var T1;T1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||It.current)Rt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rt=!1,Nk(t,e,n);Rt=!!(t.flags&131072)}else Rt=!1,ke&&e.flags&1048576&&Iw(e,Oc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fc(t,e),t=e.pendingProps;var s=To(e,xt.current);wo(e,n),s=lp(null,e,r,t,s,n);var o=cp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mt(r)?(o=!0,Mc(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,rp(e),s.updater=Iu,e.stateNode=s,s._reactInternals=e,_f(e,r,t,n),e=jf(null,e,r,!0,o,n)):(e.tag=0,ke&&o&&Ym(e),bt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Fk(r),t=hn(r,t),s){case 0:e=Sf(null,e,r,t,n);break e;case 1:e=$y(null,e,r,t,n);break e;case 11:e=Vy(null,e,r,t,n);break e;case 14:e=Fy(null,e,r,hn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),Sf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),$y(t,e,r,s,n);case 3:e:{if(h1(e),t===null)throw Error(U(387));r=e.pendingProps,o=e.memoizedState,s=o.element,Fw(t,e),Fc(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Io(Error(U(423)),e),e=zy(t,e,r,n,s);break e}else if(r!==s){s=Io(Error(U(424)),e),e=zy(t,e,r,n,s);break e}else for(Bt=Or(e.stateNode.containerInfo.firstChild),Ut=e,ke=!0,mn=null,n=Lw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ao(),r===s){e=cr(t,e,n);break e}bt(t,e,r,n)}e=e.child}return e;case 5:return $w(e),t===null&&bf(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,a=s.children,pf(r,s)?a=null:o!==null&&pf(r,o)&&(e.flags|=32),d1(t,e),bt(t,e,a,n),e.child;case 6:return t===null&&bf(e),null;case 13:return f1(t,e,n);case 4:return sp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Po(e,null,r,n):bt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),Vy(t,e,r,s,n);case 7:return bt(t,e,e.pendingProps,n),e.child;case 8:return bt(t,e,e.pendingProps.children,n),e.child;case 12:return bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,a=s.value,Ne(Lc,r._currentValue),r._currentValue=a,o!==null)if(En(o.value,a)){if(o.children===s.children&&!It.current){e=cr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=sr(-1,n&-n),u.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),wf(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(U(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),wf(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}bt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,wo(e,n),s=on(s),r=r(s),e.flags|=1,bt(t,e,r,n),e.child;case 14:return r=e.type,s=hn(r,e.pendingProps),s=hn(r.type,s),Fy(t,e,r,s,n);case 15:return c1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),fc(t,e),e.tag=1,Mt(r)?(t=!0,Mc(e)):t=!1,wo(e,n),i1(e,r,s),_f(e,r,s,n),jf(null,e,r,!0,t,n);case 19:return m1(t,e,n);case 22:return u1(t,e,n)}throw Error(U(156,e.tag))};function A1(t,e){return rw(t,e)}function Vk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(t,e,n,r){return new Vk(t,e,n,r)}function vp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fk(t){if(typeof t=="function")return vp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vm)return 11;if(t===Fm)return 14}return 2}function $r(t,e){var n=t.alternate;return n===null?(n=tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gc(t,e,n,r,s,o){var a=2;if(r=t,typeof t=="function")vp(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case so:return bs(n.children,s,o,e);case Lm:a=8,s|=8;break;case Kh:return t=tn(12,n,e,s|2),t.elementType=Kh,t.lanes=o,t;case Wh:return t=tn(13,n,e,s),t.elementType=Wh,t.lanes=o,t;case qh:return t=tn(19,n,e,s),t.elementType=qh,t.lanes=o,t;case $b:return Ou(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Vb:a=10;break e;case Fb:a=9;break e;case Vm:a=11;break e;case Fm:a=14;break e;case jr:a=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=tn(a,n,e,s),e.elementType=t,e.type=r,e.lanes=o,e}function bs(t,e,n,r){return t=tn(7,t,r,e),t.lanes=n,t}function Ou(t,e,n,r){return t=tn(22,t,r,e),t.elementType=$b,t.lanes=n,t.stateNode={isHidden:!1},t}function ch(t,e,n){return t=tn(6,t,null,e),t.lanes=n,t}function uh(t,e,n){return e=tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $k(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hd(0),this.expirationTimes=Hd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function bp(t,e,n,r,s,o,a,l,u){return t=new $k(t,e,n,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=tn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rp(o),t}function zk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ro,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function P1(t){if(!t)return Gr;t=t._reactInternals;e:{if(Bs(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Mt(n))return Pw(t,n,e)}return e}function R1(t,e,n,r,s,o,a,l,u){return t=bp(n,r,!0,t,s,o,a,l,u),t.context=P1(null),n=t.current,r=Et(),s=Fr(n),o=sr(r,s),o.callback=e??null,Lr(n,o,s),t.current.lanes=s,Ua(t,s,r),Dt(t,r),t}function Lu(t,e,n,r){var s=e.current,o=Et(),a=Fr(s);return n=P1(n),e.context===null?e.context=n:e.pendingContext=n,e=sr(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lr(s,e,a),t!==null&&(vn(t,s,a,o),uc(t,s,a)),a}function Wc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Xy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function wp(t,e){Xy(t,e),(t=t.alternate)&&Xy(t,e)}function Bk(){return null}var I1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ep(t){this._internalRoot=t}Vu.prototype.render=Ep.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Lu(t,e,null,null)};Vu.prototype.unmount=Ep.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ps(function(){Lu(null,t,null,null)}),e[ar]=null}};function Vu(t){this._internalRoot=t}Vu.prototype.unstable_scheduleHydration=function(t){if(t){var e=uw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<kr.length&&e!==0&&e<kr[n].priority;n++);kr.splice(n,0,t),n===0&&hw(t)}};function _p(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jy(){}function Uk(t,e,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var d=Wc(a);o.call(d)}}var a=R1(e,r,t,0,null,!1,!1,"",Jy);return t._reactRootContainer=a,t[ar]=a.current,pa(t.nodeType===8?t.parentNode:t),Ps(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Wc(u);l.call(d)}}var u=bp(t,0,!1,null,null,!1,!1,"",Jy);return t._reactRootContainer=u,t[ar]=u.current,pa(t.nodeType===8?t.parentNode:t),Ps(function(){Lu(e,u,n,r)}),u}function $u(t,e,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var u=Wc(a);l.call(u)}}Lu(e,a,t,s)}else a=Uk(n,e,t,s,r);return Wc(a)}lw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Vi(e.pendingLanes);n!==0&&(Bm(e,n|1),Dt(e,Oe()),!(xe&6)&&(Mo=Oe()+500,Zr()))}break;case 13:Ps(function(){var r=lr(t,1);if(r!==null){var s=Et();vn(r,t,1,s)}}),wp(t,1)}};Um=function(t){if(t.tag===13){var e=lr(t,134217728);if(e!==null){var n=Et();vn(e,t,134217728,n)}wp(t,134217728)}};cw=function(t){if(t.tag===13){var e=Fr(t),n=lr(t,e);if(n!==null){var r=Et();vn(n,t,e,r)}wp(t,e)}};uw=function(){return be};dw=function(t,e){var n=be;try{return be=t,e()}finally{be=n}};sf=function(t,e,n){switch(e){case"input":if(Xh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Au(r);if(!s)throw Error(U(90));Bb(r),Xh(r,s)}}}break;case"textarea":Hb(t,n);break;case"select":e=n.value,e!=null&&xo(t,!!n.multiple,e,!1)}};Xb=gp;Jb=Ps;var Hk={usingClientEntryPoint:!1,Events:[Ga,lo,Au,Qb,Yb,gp]},Ai={findFiberByHostInstance:ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gk={bundleType:Ai.bundleType,version:Ai.version,rendererPackageName:Ai.rendererPackageName,rendererConfig:Ai.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tw(t),t===null?null:t.stateNode},findFiberByHostInstance:Ai.findFiberByHostInstance||Bk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vl.isDisabled&&Vl.supportsFiber)try{ju=Vl.inject(Gk),Vn=Vl}catch{}}qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hk;qt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_p(e))throw Error(U(200));return zk(t,e,null,n)};qt.createRoot=function(t,e){if(!_p(t))throw Error(U(299));var n=!1,r="",s=I1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=bp(t,1,!1,null,null,n,!1,r,s),t[ar]=e.current,pa(t.nodeType===8?t.parentNode:t),new Ep(e)};qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=tw(e),t=t===null?null:t.stateNode,t};qt.flushSync=function(t){return Ps(t)};qt.hydrate=function(t,e,n){if(!Fu(e))throw Error(U(200));return $u(null,t,e,!0,n)};qt.hydrateRoot=function(t,e,n){if(!_p(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=I1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=R1(e,null,t,1,n??null,s,!1,o,a),t[ar]=e.current,pa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Vu(e)};qt.render=function(t,e,n){if(!Fu(e))throw Error(U(200));return $u(null,t,e,!1,n)};qt.unmountComponentAtNode=function(t){if(!Fu(t))throw Error(U(40));return t._reactRootContainer?(Ps(function(){$u(null,null,t,!1,function(){t._reactRootContainer=null,t[ar]=null})}),!0):!1};qt.unstable_batchedUpdates=gp;qt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Fu(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return $u(t,e,n,!1,r)};qt.version="18.3.1-next-f1338f8080-20240426";function M1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(M1)}catch(t){console.error(t)}}M1(),Mb.exports=qt;var zu=Mb.exports;const Kk=wb(zu);var D1,Zy=zu;D1=Zy.createRoot,Zy.hydrateRoot;const Wk="modulepreload",qk=function(t){return"/"+t},ev={},_n=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=Promise.all(n.map(l=>{if(l=qk(l),l in ev)return;ev[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Wk,u||(f.as="script",f.crossOrigin=""),f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((m,h)=>{f.addEventListener("load",m),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}return s.then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};function tv(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Bu(...t){return e=>{let n=!1;const r=t.map(s=>{const o=tv(s,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():tv(t[s],null)}}}}function ye(...t){return p.useCallback(Bu(...t),t)}function Rs(t){const e=Qk(t),n=p.forwardRef((r,s)=>{const{children:o,...a}=r,l=p.Children.toArray(o),u=l.find(Xk);if(u){const d=u.props.children,f=l.map(m=>m===u?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:m);return i.jsx(e,{...a,ref:s,children:p.isValidElement(d)?p.cloneElement(d,void 0,f):null})}return i.jsx(e,{...a,ref:s,children:o})});return n.displayName=`${t}.Slot`,n}var O1=Rs("Slot");function Qk(t){const e=p.forwardRef((n,r)=>{const{children:s,...o}=n;if(p.isValidElement(s)){const a=Zk(s),l=Jk(o,s.props);return s.type!==p.Fragment&&(l.ref=r?Bu(r,a):a),p.cloneElement(s,l)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var L1=Symbol("radix.slottable");function Yk(t){const e=({children:n})=>i.jsx(i.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=L1,e}function Xk(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===L1}function Jk(t,e){const n={...e};for(const r in e){const s=t[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...l)=>{const u=o(...l);return s(...l),u}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...t,...n}}function Zk(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function V1(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=V1(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function F1(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=V1(t))&&(r&&(r+=" "),r+=e);return r}const nv=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,rv=F1,Np=(t,e)=>n=>{var r;if(e?.variants==null)return rv(t,n?.class,n?.className);const{variants:s,defaultVariants:o}=e,a=Object.keys(s).map(d=>{const f=n?.[d],m=o?.[d];if(f===null)return null;const h=nv(f)||nv(m);return s[d][h]}),l=n&&Object.entries(n).reduce((d,f)=>{let[m,h]=f;return h===void 0||(d[m]=h),d},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,f)=>{let{class:m,className:h,...x}=f;return Object.entries(x).every(y=>{let[b,j]=y;return Array.isArray(j)?j.includes({...o,...l}[b]):{...o,...l}[b]===j})?[...d,m,h]:d},[]);return rv(t,a,u,n?.class,n?.className)},Sp="-",eT=t=>{const e=nT(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(Sp);return l[0]===""&&l.length!==1&&l.shift(),$1(l,e)||tT(a)},getConflictingClassGroupIds:(a,l)=>{const u=n[a]||[];return l&&r[a]?[...u,...r[a]]:u}}},$1=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?$1(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=t.join(Sp);return e.validators.find(({validator:a})=>a(o))?.classGroupId},sv=/^\[(.+)\]$/,tT=t=>{if(sv.test(t)){const e=sv.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},nT=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const s in n)Vf(n[s],r,s,e);return r},Vf=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const o=s===""?e:ov(e,s);o.classGroupId=n;return}if(typeof s=="function"){if(rT(s)){Vf(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,a])=>{Vf(a,ov(e,o),n,r)})})},ov=(t,e)=>{let n=t;return e.split(Sp).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},rT=t=>t.isThemeGetter,sT=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(o,a)=>{n.set(o,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return s(o,a),a},set(o,a){n.has(o)?n.set(o,a):s(o,a)}}},Ff="!",$f=":",oT=$f.length,iT=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const o=[];let a=0,l=0,u=0,d;for(let y=0;y<s.length;y++){let b=s[y];if(a===0&&l===0){if(b===$f){o.push(s.slice(u,y)),u=y+oT;continue}if(b==="/"){d=y;continue}}b==="["?a++:b==="]"?a--:b==="("?l++:b===")"&&l--}const f=o.length===0?s:s.substring(u),m=aT(f),h=m!==f,x=d&&d>u?d-u:void 0;return{modifiers:o,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:x}};if(e){const s=e+$f,o=r;r=a=>a.startsWith(s)?o(a.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=o=>n({className:o,parseClassName:s})}return r},aT=t=>t.endsWith(Ff)?t.substring(0,t.length-1):t.startsWith(Ff)?t.substring(1):t,lT=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let o=[];return r.forEach(a=>{a[0]==="["||e[a]?(s.push(...o.sort(),a),o=[]):o.push(a)}),s.push(...o.sort()),s}},cT=t=>({cache:sT(t.cacheSize),parseClassName:iT(t),sortModifiers:lT(t),...eT(t)}),uT=/\s+/,dT=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=e,a=[],l=t.trim().split(uT);let u="";for(let d=l.length-1;d>=0;d-=1){const f=l[d],{isExternal:m,modifiers:h,hasImportantModifier:x,baseClassName:y,maybePostfixModifierPosition:b}=n(f);if(m){u=f+(u.length>0?" "+u:u);continue}let j=!!b,_=r(j?y.substring(0,b):y);if(!_){if(!j){u=f+(u.length>0?" "+u:u);continue}if(_=r(y),!_){u=f+(u.length>0?" "+u:u);continue}j=!1}const E=o(h).join(":"),S=x?E+Ff:E,R=S+_;if(a.includes(R))continue;a.push(R);const T=s(_,j);for(let D=0;D<T.length;++D){const N=T[D];a.push(S+N)}u=f+(u.length>0?" "+u:u)}return u};function hT(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=z1(e))&&(r&&(r+=" "),r+=n);return r}const z1=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=z1(t[r]))&&(n&&(n+=" "),n+=e);return n};function fT(t,...e){let n,r,s,o=a;function a(u){const d=e.reduce((f,m)=>m(f),t());return n=cT(d),r=n.cache.get,s=n.cache.set,o=l,l(u)}function l(u){const d=r(u);if(d)return d;const f=dT(u,n);return s(u,f),f}return function(){return o(hT.apply(null,arguments))}}const Ue=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},B1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,U1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,mT=/^\d+\/\d+$/,pT=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,gT=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,xT=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,yT=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,vT=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ys=t=>mT.test(t),ae=t=>!!t&&!Number.isNaN(Number(t)),Nr=t=>!!t&&Number.isInteger(Number(t)),dh=t=>t.endsWith("%")&&ae(t.slice(0,-1)),qn=t=>pT.test(t),bT=()=>!0,wT=t=>gT.test(t)&&!xT.test(t),H1=()=>!1,ET=t=>yT.test(t),_T=t=>vT.test(t),NT=t=>!J(t)&&!Z(t),ST=t=>Zo(t,W1,H1),J=t=>B1.test(t),ls=t=>Zo(t,q1,wT),hh=t=>Zo(t,AT,ae),iv=t=>Zo(t,G1,H1),jT=t=>Zo(t,K1,_T),Fl=t=>Zo(t,Q1,ET),Z=t=>U1.test(t),Pi=t=>ei(t,q1),CT=t=>ei(t,PT),av=t=>ei(t,G1),kT=t=>ei(t,W1),TT=t=>ei(t,K1),$l=t=>ei(t,Q1,!0),Zo=(t,e,n)=>{const r=B1.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},ei=(t,e,n=!1)=>{const r=U1.exec(t);return r?r[1]?e(r[1]):n:!1},G1=t=>t==="position"||t==="percentage",K1=t=>t==="image"||t==="url",W1=t=>t==="length"||t==="size"||t==="bg-size",q1=t=>t==="length",AT=t=>t==="number",PT=t=>t==="family-name",Q1=t=>t==="shadow",RT=()=>{const t=Ue("color"),e=Ue("font"),n=Ue("text"),r=Ue("font-weight"),s=Ue("tracking"),o=Ue("leading"),a=Ue("breakpoint"),l=Ue("container"),u=Ue("spacing"),d=Ue("radius"),f=Ue("shadow"),m=Ue("inset-shadow"),h=Ue("text-shadow"),x=Ue("drop-shadow"),y=Ue("blur"),b=Ue("perspective"),j=Ue("aspect"),_=Ue("ease"),E=Ue("animate"),S=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],T=()=>[...R(),Z,J],D=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto","contain","none"],w=()=>[Z,J,u],C=()=>[Ys,"full","auto",...w()],A=()=>[Nr,"none","subgrid",Z,J],I=()=>["auto",{span:["full",Nr,Z,J]},Nr,Z,J],M=()=>[Nr,"auto",Z,J],k=()=>["auto","min","max","fr",Z,J],O=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],z=()=>["start","end","center","stretch","center-safe","end-safe"],H=()=>["auto",...w()],Y=()=>[Ys,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...w()],L=()=>[t,Z,J],$=()=>[...R(),av,iv,{position:[Z,J]}],W=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ne=()=>["auto","cover","contain",kT,ST,{size:[Z,J]}],le=()=>[dh,Pi,ls],pe=()=>["","none","full",d,Z,J],de=()=>["",ae,Pi,ls],tt=()=>["solid","dashed","dotted","double"],Ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],re=()=>[ae,dh,av,iv],Yt=()=>["","none",y,Z,J],Kn=()=>["none",ae,Z,J],pr=()=>["none",ae,Z,J],ns=()=>[ae,Z,J],Wn=()=>[Ys,"full",...w()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[qn],breakpoint:[qn],color:[bT],container:[qn],"drop-shadow":[qn],ease:["in","out","in-out"],font:[NT],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[qn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[qn],shadow:[qn],spacing:["px",ae],text:[qn],"text-shadow":[qn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ys,J,Z,j]}],container:["container"],columns:[{columns:[ae,J,Z,l]}],"break-after":[{"break-after":S()}],"break-before":[{"break-before":S()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:T()}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:C()}],"inset-x":[{"inset-x":C()}],"inset-y":[{"inset-y":C()}],start:[{start:C()}],end:[{end:C()}],top:[{top:C()}],right:[{right:C()}],bottom:[{bottom:C()}],left:[{left:C()}],visibility:["visible","invisible","collapse"],z:[{z:[Nr,"auto",Z,J]}],basis:[{basis:[Ys,"full","auto",l,...w()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ae,Ys,"auto","initial","none",J]}],grow:[{grow:["",ae,Z,J]}],shrink:[{shrink:["",ae,Z,J]}],order:[{order:[Nr,"first","last","none",Z,J]}],"grid-cols":[{"grid-cols":A()}],"col-start-end":[{col:I()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":A()}],"row-start-end":[{row:I()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":k()}],"auto-rows":[{"auto-rows":k()}],gap:[{gap:w()}],"gap-x":[{"gap-x":w()}],"gap-y":[{"gap-y":w()}],"justify-content":[{justify:[...O(),"normal"]}],"justify-items":[{"justify-items":[...z(),"normal"]}],"justify-self":[{"justify-self":["auto",...z()]}],"align-content":[{content:["normal",...O()]}],"align-items":[{items:[...z(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...z(),{baseline:["","last"]}]}],"place-content":[{"place-content":O()}],"place-items":[{"place-items":[...z(),"baseline"]}],"place-self":[{"place-self":["auto",...z()]}],p:[{p:w()}],px:[{px:w()}],py:[{py:w()}],ps:[{ps:w()}],pe:[{pe:w()}],pt:[{pt:w()}],pr:[{pr:w()}],pb:[{pb:w()}],pl:[{pl:w()}],m:[{m:H()}],mx:[{mx:H()}],my:[{my:H()}],ms:[{ms:H()}],me:[{me:H()}],mt:[{mt:H()}],mr:[{mr:H()}],mb:[{mb:H()}],ml:[{ml:H()}],"space-x":[{"space-x":w()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":w()}],"space-y-reverse":["space-y-reverse"],size:[{size:Y()}],w:[{w:[l,"screen",...Y()]}],"min-w":[{"min-w":[l,"screen","none",...Y()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[a]},...Y()]}],h:[{h:["screen","lh",...Y()]}],"min-h":[{"min-h":["screen","lh","none",...Y()]}],"max-h":[{"max-h":["screen","lh",...Y()]}],"font-size":[{text:["base",n,Pi,ls]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Z,hh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",dh,J]}],"font-family":[{font:[CT,J,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Z,J]}],"line-clamp":[{"line-clamp":[ae,"none",Z,hh]}],leading:[{leading:[o,...w()]}],"list-image":[{"list-image":["none",Z,J]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Z,J]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:L()}],"text-color":[{text:L()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...tt(),"wavy"]}],"text-decoration-thickness":[{decoration:[ae,"from-font","auto",Z,ls]}],"text-decoration-color":[{decoration:L()}],"underline-offset":[{"underline-offset":[ae,"auto",Z,J]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:w()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Z,J]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Z,J]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:$()}],"bg-repeat":[{bg:W()}],"bg-size":[{bg:ne()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Nr,Z,J],radial:["",Z,J],conic:[Nr,Z,J]},TT,jT]}],"bg-color":[{bg:L()}],"gradient-from-pos":[{from:le()}],"gradient-via-pos":[{via:le()}],"gradient-to-pos":[{to:le()}],"gradient-from":[{from:L()}],"gradient-via":[{via:L()}],"gradient-to":[{to:L()}],rounded:[{rounded:pe()}],"rounded-s":[{"rounded-s":pe()}],"rounded-e":[{"rounded-e":pe()}],"rounded-t":[{"rounded-t":pe()}],"rounded-r":[{"rounded-r":pe()}],"rounded-b":[{"rounded-b":pe()}],"rounded-l":[{"rounded-l":pe()}],"rounded-ss":[{"rounded-ss":pe()}],"rounded-se":[{"rounded-se":pe()}],"rounded-ee":[{"rounded-ee":pe()}],"rounded-es":[{"rounded-es":pe()}],"rounded-tl":[{"rounded-tl":pe()}],"rounded-tr":[{"rounded-tr":pe()}],"rounded-br":[{"rounded-br":pe()}],"rounded-bl":[{"rounded-bl":pe()}],"border-w":[{border:de()}],"border-w-x":[{"border-x":de()}],"border-w-y":[{"border-y":de()}],"border-w-s":[{"border-s":de()}],"border-w-e":[{"border-e":de()}],"border-w-t":[{"border-t":de()}],"border-w-r":[{"border-r":de()}],"border-w-b":[{"border-b":de()}],"border-w-l":[{"border-l":de()}],"divide-x":[{"divide-x":de()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":de()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...tt(),"hidden","none"]}],"divide-style":[{divide:[...tt(),"hidden","none"]}],"border-color":[{border:L()}],"border-color-x":[{"border-x":L()}],"border-color-y":[{"border-y":L()}],"border-color-s":[{"border-s":L()}],"border-color-e":[{"border-e":L()}],"border-color-t":[{"border-t":L()}],"border-color-r":[{"border-r":L()}],"border-color-b":[{"border-b":L()}],"border-color-l":[{"border-l":L()}],"divide-color":[{divide:L()}],"outline-style":[{outline:[...tt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ae,Z,J]}],"outline-w":[{outline:["",ae,Pi,ls]}],"outline-color":[{outline:L()}],shadow:[{shadow:["","none",f,$l,Fl]}],"shadow-color":[{shadow:L()}],"inset-shadow":[{"inset-shadow":["none",m,$l,Fl]}],"inset-shadow-color":[{"inset-shadow":L()}],"ring-w":[{ring:de()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:L()}],"ring-offset-w":[{"ring-offset":[ae,ls]}],"ring-offset-color":[{"ring-offset":L()}],"inset-ring-w":[{"inset-ring":de()}],"inset-ring-color":[{"inset-ring":L()}],"text-shadow":[{"text-shadow":["none",h,$l,Fl]}],"text-shadow-color":[{"text-shadow":L()}],opacity:[{opacity:[ae,Z,J]}],"mix-blend":[{"mix-blend":[...Ie(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ie()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ae]}],"mask-image-linear-from-pos":[{"mask-linear-from":re()}],"mask-image-linear-to-pos":[{"mask-linear-to":re()}],"mask-image-linear-from-color":[{"mask-linear-from":L()}],"mask-image-linear-to-color":[{"mask-linear-to":L()}],"mask-image-t-from-pos":[{"mask-t-from":re()}],"mask-image-t-to-pos":[{"mask-t-to":re()}],"mask-image-t-from-color":[{"mask-t-from":L()}],"mask-image-t-to-color":[{"mask-t-to":L()}],"mask-image-r-from-pos":[{"mask-r-from":re()}],"mask-image-r-to-pos":[{"mask-r-to":re()}],"mask-image-r-from-color":[{"mask-r-from":L()}],"mask-image-r-to-color":[{"mask-r-to":L()}],"mask-image-b-from-pos":[{"mask-b-from":re()}],"mask-image-b-to-pos":[{"mask-b-to":re()}],"mask-image-b-from-color":[{"mask-b-from":L()}],"mask-image-b-to-color":[{"mask-b-to":L()}],"mask-image-l-from-pos":[{"mask-l-from":re()}],"mask-image-l-to-pos":[{"mask-l-to":re()}],"mask-image-l-from-color":[{"mask-l-from":L()}],"mask-image-l-to-color":[{"mask-l-to":L()}],"mask-image-x-from-pos":[{"mask-x-from":re()}],"mask-image-x-to-pos":[{"mask-x-to":re()}],"mask-image-x-from-color":[{"mask-x-from":L()}],"mask-image-x-to-color":[{"mask-x-to":L()}],"mask-image-y-from-pos":[{"mask-y-from":re()}],"mask-image-y-to-pos":[{"mask-y-to":re()}],"mask-image-y-from-color":[{"mask-y-from":L()}],"mask-image-y-to-color":[{"mask-y-to":L()}],"mask-image-radial":[{"mask-radial":[Z,J]}],"mask-image-radial-from-pos":[{"mask-radial-from":re()}],"mask-image-radial-to-pos":[{"mask-radial-to":re()}],"mask-image-radial-from-color":[{"mask-radial-from":L()}],"mask-image-radial-to-color":[{"mask-radial-to":L()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":R()}],"mask-image-conic-pos":[{"mask-conic":[ae]}],"mask-image-conic-from-pos":[{"mask-conic-from":re()}],"mask-image-conic-to-pos":[{"mask-conic-to":re()}],"mask-image-conic-from-color":[{"mask-conic-from":L()}],"mask-image-conic-to-color":[{"mask-conic-to":L()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:$()}],"mask-repeat":[{mask:W()}],"mask-size":[{mask:ne()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Z,J]}],filter:[{filter:["","none",Z,J]}],blur:[{blur:Yt()}],brightness:[{brightness:[ae,Z,J]}],contrast:[{contrast:[ae,Z,J]}],"drop-shadow":[{"drop-shadow":["","none",x,$l,Fl]}],"drop-shadow-color":[{"drop-shadow":L()}],grayscale:[{grayscale:["",ae,Z,J]}],"hue-rotate":[{"hue-rotate":[ae,Z,J]}],invert:[{invert:["",ae,Z,J]}],saturate:[{saturate:[ae,Z,J]}],sepia:[{sepia:["",ae,Z,J]}],"backdrop-filter":[{"backdrop-filter":["","none",Z,J]}],"backdrop-blur":[{"backdrop-blur":Yt()}],"backdrop-brightness":[{"backdrop-brightness":[ae,Z,J]}],"backdrop-contrast":[{"backdrop-contrast":[ae,Z,J]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ae,Z,J]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ae,Z,J]}],"backdrop-invert":[{"backdrop-invert":["",ae,Z,J]}],"backdrop-opacity":[{"backdrop-opacity":[ae,Z,J]}],"backdrop-saturate":[{"backdrop-saturate":[ae,Z,J]}],"backdrop-sepia":[{"backdrop-sepia":["",ae,Z,J]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":w()}],"border-spacing-x":[{"border-spacing-x":w()}],"border-spacing-y":[{"border-spacing-y":w()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Z,J]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ae,"initial",Z,J]}],ease:[{ease:["linear","initial",_,Z,J]}],delay:[{delay:[ae,Z,J]}],animate:[{animate:["none",E,Z,J]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,Z,J]}],"perspective-origin":[{"perspective-origin":T()}],rotate:[{rotate:Kn()}],"rotate-x":[{"rotate-x":Kn()}],"rotate-y":[{"rotate-y":Kn()}],"rotate-z":[{"rotate-z":Kn()}],scale:[{scale:pr()}],"scale-x":[{"scale-x":pr()}],"scale-y":[{"scale-y":pr()}],"scale-z":[{"scale-z":pr()}],"scale-3d":["scale-3d"],skew:[{skew:ns()}],"skew-x":[{"skew-x":ns()}],"skew-y":[{"skew-y":ns()}],transform:[{transform:[Z,J,"","none","gpu","cpu"]}],"transform-origin":[{origin:T()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Wn()}],"translate-x":[{"translate-x":Wn()}],"translate-y":[{"translate-y":Wn()}],"translate-z":[{"translate-z":Wn()}],"translate-none":["translate-none"],accent:[{accent:L()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:L()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Z,J]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":w()}],"scroll-mx":[{"scroll-mx":w()}],"scroll-my":[{"scroll-my":w()}],"scroll-ms":[{"scroll-ms":w()}],"scroll-me":[{"scroll-me":w()}],"scroll-mt":[{"scroll-mt":w()}],"scroll-mr":[{"scroll-mr":w()}],"scroll-mb":[{"scroll-mb":w()}],"scroll-ml":[{"scroll-ml":w()}],"scroll-p":[{"scroll-p":w()}],"scroll-px":[{"scroll-px":w()}],"scroll-py":[{"scroll-py":w()}],"scroll-ps":[{"scroll-ps":w()}],"scroll-pe":[{"scroll-pe":w()}],"scroll-pt":[{"scroll-pt":w()}],"scroll-pr":[{"scroll-pr":w()}],"scroll-pb":[{"scroll-pb":w()}],"scroll-pl":[{"scroll-pl":w()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Z,J]}],fill:[{fill:["none",...L()]}],"stroke-w":[{stroke:[ae,Pi,ls,hh]}],stroke:[{stroke:["none",...L()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},IT=fT(RT);function ue(...t){return IT(F1(t))}const MT=Np("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),te=p.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},o)=>{const a=r?O1:"button";return i.jsx(a,{"data-slot":"button",className:ue(MT({variant:e,size:n,className:t})),ref:o,...s})});te.displayName="Button";function DT(t,e){const n=p.createContext(e),r=o=>{const{children:a,...l}=o,u=p.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:u,children:a})};r.displayName=t+"Provider";function s(o){const a=p.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,s]}function jt(t,e=[]){let n=[];function r(o,a){const l=p.createContext(a),u=n.length;n=[...n,a];const d=m=>{const{scope:h,children:x,...y}=m,b=h?.[t]?.[u]||l,j=p.useMemo(()=>y,Object.values(y));return i.jsx(b.Provider,{value:j,children:x})};d.displayName=o+"Provider";function f(m,h){const x=h?.[t]?.[u]||l,y=p.useContext(x);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[d,f]}const s=()=>{const o=n.map(a=>p.createContext(a));return function(l){const u=l?.[t]||o;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:u}}),[l,u])}};return s.scopeName=t,[r,OT(s,...e)]}function OT(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=r.reduce((l,{useScope:u,scopeName:d})=>{const m=u(o)[`__scope${d}`];return{...l,...m}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function it(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>e.current?.(...n),[])}var ln=globalThis?.document?p.useLayoutEffect:()=>{},LT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],oe=LT.reduce((t,e)=>{const n=Rs(`Primitive.${e}`),r=p.forwardRef((s,o)=>{const{asChild:a,...l}=s,u=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(u,{...l,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Y1(t,e){t&&zu.flushSync(()=>t.dispatchEvent(e))}var X1={exports:{}},J1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Do=p;function VT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var FT=typeof Object.is=="function"?Object.is:VT,$T=Do.useState,zT=Do.useEffect,BT=Do.useLayoutEffect,UT=Do.useDebugValue;function HT(t,e){var n=e(),r=$T({inst:{value:n,getSnapshot:e}}),s=r[0].inst,o=r[1];return BT(function(){s.value=n,s.getSnapshot=e,fh(s)&&o({inst:s})},[t,n,e]),zT(function(){return fh(s)&&o({inst:s}),t(function(){fh(s)&&o({inst:s})})},[t]),UT(n),n}function fh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!FT(t,n)}catch{return!0}}function GT(t,e){return e()}var KT=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?GT:HT;J1.useSyncExternalStore=Do.useSyncExternalStore!==void 0?Do.useSyncExternalStore:KT;X1.exports=J1;var WT=X1.exports;function qT(){return WT.useSyncExternalStore(QT,()=>!0,()=>!1)}function QT(){return()=>{}}var jp="Avatar",[YT]=jt(jp),[XT,Z1]=YT(jp),e2=p.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,o]=p.useState("idle");return i.jsx(XT,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:i.jsx(oe.span,{...r,ref:e})})});e2.displayName=jp;var t2="AvatarImage",JT=p.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...o}=t,a=Z1(t2,n),l=ZT(r,o),u=it(d=>{s(d),a.onImageLoadingStatusChange(d)});return ln(()=>{l!=="idle"&&u(l)},[l,u]),l==="loaded"?i.jsx(oe.img,{...o,ref:e,src:r}):null});JT.displayName=t2;var n2="AvatarFallback",r2=p.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,o=Z1(n2,n),[a,l]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(u)}},[r]),a&&o.imageLoadingStatus!=="loaded"?i.jsx(oe.span,{...s,ref:e}):null});r2.displayName=n2;function lv(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ZT(t,{referrerPolicy:e,crossOrigin:n}){const r=qT(),s=p.useRef(null),o=r?(s.current||(s.current=new window.Image),s.current):null,[a,l]=p.useState(()=>lv(o,t));return ln(()=>{l(lv(o,t))},[o,t]),ln(()=>{const u=m=>()=>{l(m)};if(!o)return;const d=u("loaded"),f=u("error");return o.addEventListener("load",d),o.addEventListener("error",f),e&&(o.referrerPolicy=e),typeof n=="string"&&(o.crossOrigin=n),()=>{o.removeEventListener("load",d),o.removeEventListener("error",f)}},[o,n,e]),a}var eA=e2,tA=r2;function nA({className:t,...e}){return i.jsx(eA,{"data-slot":"avatar",className:ue("relative flex size-10 shrink-0 overflow-hidden rounded-full",t),...e})}function rA({className:t,...e}){return i.jsx(tA,{"data-slot":"avatar-fallback",className:ue("bg-muted flex size-full items-center justify-center rounded-full",t),...e})}const sA=Np("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}}),Ve=p.forwardRef(({className:t,variant:e,asChild:n=!1,...r},s)=>{const o=n?O1:"span";return i.jsx(o,{ref:s,"data-slot":"badge",className:ue(sA({variant:e}),t),...r})});Ve.displayName="Badge";function Q(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t?.(s),n===!1||!s.defaultPrevented)return e?.(s)}}function oA(t,e=globalThis?.document){const n=it(t);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var iA="DismissableLayer",zf="dismissableLayer.update",aA="dismissableLayer.pointerDownOutside",lA="dismissableLayer.focusOutside",cv,s2=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wa=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...u}=t,d=p.useContext(s2),[f,m]=p.useState(null),h=f?.ownerDocument??globalThis?.document,[,x]=p.useState({}),y=ye(e,N=>m(N)),b=Array.from(d.layers),[j]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),_=b.indexOf(j),E=f?b.indexOf(f):-1,S=d.layersWithOutsidePointerEventsDisabled.size>0,R=E>=_,T=dA(N=>{const w=N.target,C=[...d.branches].some(A=>A.contains(w));!R||C||(s?.(N),a?.(N),N.defaultPrevented||l?.())},h),D=hA(N=>{const w=N.target;[...d.branches].some(A=>A.contains(w))||(o?.(N),a?.(N),N.defaultPrevented||l?.())},h);return oA(N=>{E===d.layers.size-1&&(r?.(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},h),p.useEffect(()=>{if(f)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(cv=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),uv(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=cv)}},[f,h,n,d]),p.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),uv())},[f,d]),p.useEffect(()=>{const N=()=>x({});return document.addEventListener(zf,N),()=>document.removeEventListener(zf,N)},[]),i.jsx(oe.div,{...u,ref:y,style:{pointerEvents:S?R?"auto":"none":void 0,...t.style},onFocusCapture:Q(t.onFocusCapture,D.onFocusCapture),onBlurCapture:Q(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:Q(t.onPointerDownCapture,T.onPointerDownCapture)})});Wa.displayName=iA;var cA="DismissableLayerBranch",uA=p.forwardRef((t,e)=>{const n=p.useContext(s2),r=p.useRef(null),s=ye(e,r);return p.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),i.jsx(oe.div,{...t,ref:s})});uA.displayName=cA;function dA(t,e=globalThis?.document){const n=it(t),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const o=l=>{if(l.target&&!r.current){let u=function(){o2(aA,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=u,e.addEventListener("click",s.current,{once:!0})):u()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function hA(t,e=globalThis?.document){const n=it(t),r=p.useRef(!1);return p.useEffect(()=>{const s=o=>{o.target&&!r.current&&o2(lA,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function uv(){const t=new CustomEvent(zf);document.dispatchEvent(t)}function o2(t,e,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Y1(s,o):s.dispatchEvent(o)}var fA=Rb[" useId ".trim().toString()]||(()=>{}),mA=0;function bn(t){const[e,n]=p.useState(fA());return ln(()=>{n(r=>r??String(mA++))},[t]),t||(e?`radix-${e}`:"")}const pA=["top","right","bottom","left"],Kr=Math.min,Ft=Math.max,qc=Math.round,zl=Math.floor,$n=t=>({x:t,y:t}),gA={left:"right",right:"left",bottom:"top",top:"bottom"},xA={start:"end",end:"start"};function Bf(t,e,n){return Ft(t,Kr(e,n))}function ur(t,e){return typeof t=="function"?t(e):t}function dr(t){return t.split("-")[0]}function ti(t){return t.split("-")[1]}function Cp(t){return t==="x"?"y":"x"}function kp(t){return t==="y"?"height":"width"}const yA=new Set(["top","bottom"]);function On(t){return yA.has(dr(t))?"y":"x"}function Tp(t){return Cp(On(t))}function vA(t,e,n){n===void 0&&(n=!1);const r=ti(t),s=Tp(t),o=kp(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=Qc(a)),[a,Qc(a)]}function bA(t){const e=Qc(t);return[Uf(t),e,Uf(e)]}function Uf(t){return t.replace(/start|end/g,e=>xA[e])}const dv=["left","right"],hv=["right","left"],wA=["top","bottom"],EA=["bottom","top"];function _A(t,e,n){switch(t){case"top":case"bottom":return n?e?hv:dv:e?dv:hv;case"left":case"right":return e?wA:EA;default:return[]}}function NA(t,e,n,r){const s=ti(t);let o=_A(dr(t),n==="start",r);return s&&(o=o.map(a=>a+"-"+s),e&&(o=o.concat(o.map(Uf)))),o}function Qc(t){return t.replace(/left|right|bottom|top/g,e=>gA[e])}function SA(t){return{top:0,right:0,bottom:0,left:0,...t}}function i2(t){return typeof t!="number"?SA(t):{top:t,right:t,bottom:t,left:t}}function Yc(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function fv(t,e,n){let{reference:r,floating:s}=t;const o=On(e),a=Tp(e),l=kp(a),u=dr(e),d=o==="y",f=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,h=r[l]/2-s[l]/2;let x;switch(u){case"top":x={x:f,y:r.y-s.height};break;case"bottom":x={x:f,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:m};break;case"left":x={x:r.x-s.width,y:m};break;default:x={x:r.x,y:r.y}}switch(ti(e)){case"start":x[a]-=h*(n&&d?-1:1);break;case"end":x[a]+=h*(n&&d?-1:1);break}return x}const jA=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:a}=n,l=o.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:f,y:m}=fv(d,r,u),h=r,x={},y=0;for(let b=0;b<l.length;b++){const{name:j,fn:_}=l[b],{x:E,y:S,data:R,reset:T}=await _({x:f,y:m,initialPlacement:r,placement:h,strategy:s,middlewareData:x,rects:d,platform:a,elements:{reference:t,floating:e}});f=E??f,m=S??m,x={...x,[j]:{...x[j],...R}},T&&y<=50&&(y++,typeof T=="object"&&(T.placement&&(h=T.placement),T.rects&&(d=T.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):T.rects),{x:f,y:m}=fv(d,h,u)),b=-1)}return{x:f,y:m,placement:h,strategy:s,middlewareData:x}};async function Na(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:a,elements:l,strategy:u}=t,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:h=!1,padding:x=0}=ur(e,t),y=i2(x),j=l[h?m==="floating"?"reference":"floating":m],_=Yc(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(j)))==null||n?j:j.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:d,rootBoundary:f,strategy:u})),E=m==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),R=await(o.isElement==null?void 0:o.isElement(S))?await(o.getScale==null?void 0:o.getScale(S))||{x:1,y:1}:{x:1,y:1},T=Yc(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:E,offsetParent:S,strategy:u}):E);return{top:(_.top-T.top+y.top)/R.y,bottom:(T.bottom-_.bottom+y.bottom)/R.y,left:(_.left-T.left+y.left)/R.x,right:(T.right-_.right+y.right)/R.x}}const CA=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:o,platform:a,elements:l,middlewareData:u}=e,{element:d,padding:f=0}=ur(t,e)||{};if(d==null)return{};const m=i2(f),h={x:n,y:r},x=Tp(s),y=kp(x),b=await a.getDimensions(d),j=x==="y",_=j?"top":"left",E=j?"bottom":"right",S=j?"clientHeight":"clientWidth",R=o.reference[y]+o.reference[x]-h[x]-o.floating[y],T=h[x]-o.reference[x],D=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let N=D?D[S]:0;(!N||!await(a.isElement==null?void 0:a.isElement(D)))&&(N=l.floating[S]||o.floating[y]);const w=R/2-T/2,C=N/2-b[y]/2-1,A=Kr(m[_],C),I=Kr(m[E],C),M=A,k=N-b[y]-I,O=N/2-b[y]/2+w,z=Bf(M,O,k),H=!u.arrow&&ti(s)!=null&&O!==z&&o.reference[y]/2-(O<M?A:I)-b[y]/2<0,Y=H?O<M?O-M:O-k:0;return{[x]:h[x]+Y,data:{[x]:z,centerOffset:O-z-Y,...H&&{alignmentOffset:Y}},reset:H}}}),kA=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:o,rects:a,initialPlacement:l,platform:u,elements:d}=e,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:b=!0,...j}=ur(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const _=dr(s),E=On(l),S=dr(l)===l,R=await(u.isRTL==null?void 0:u.isRTL(d.floating)),T=h||(S||!b?[Qc(l)]:bA(l)),D=y!=="none";!h&&D&&T.push(...NA(l,b,y,R));const N=[l,...T],w=await Na(e,j),C=[];let A=((r=o.flip)==null?void 0:r.overflows)||[];if(f&&C.push(w[_]),m){const O=vA(s,a,R);C.push(w[O[0]],w[O[1]])}if(A=[...A,{placement:s,overflows:C}],!C.every(O=>O<=0)){var I,M;const O=(((I=o.flip)==null?void 0:I.index)||0)+1,z=N[O];if(z&&(!(m==="alignment"?E!==On(z):!1)||A.every(L=>On(L.placement)===E?L.overflows[0]>0:!0)))return{data:{index:O,overflows:A},reset:{placement:z}};let H=(M=A.filter(Y=>Y.overflows[0]<=0).sort((Y,L)=>Y.overflows[1]-L.overflows[1])[0])==null?void 0:M.placement;if(!H)switch(x){case"bestFit":{var k;const Y=(k=A.filter(L=>{if(D){const $=On(L.placement);return $===E||$==="y"}return!0}).map(L=>[L.placement,L.overflows.filter($=>$>0).reduce(($,W)=>$+W,0)]).sort((L,$)=>L[1]-$[1])[0])==null?void 0:k[0];Y&&(H=Y);break}case"initialPlacement":H=l;break}if(s!==H)return{reset:{placement:H}}}return{}}}};function mv(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function pv(t){return pA.some(e=>t[e]>=0)}const TA=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ur(t,e);switch(r){case"referenceHidden":{const o=await Na(e,{...s,elementContext:"reference"}),a=mv(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:pv(a)}}}case"escaped":{const o=await Na(e,{...s,altBoundary:!0}),a=mv(o,n.floating);return{data:{escapedOffsets:a,escaped:pv(a)}}}default:return{}}}}},a2=new Set(["left","top"]);async function AA(t,e){const{placement:n,platform:r,elements:s}=t,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=dr(n),l=ti(n),u=On(n)==="y",d=a2.has(a)?-1:1,f=o&&u?-1:1,m=ur(e,t);let{mainAxis:h,crossAxis:x,alignmentAxis:y}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof y=="number"&&(x=l==="end"?y*-1:y),u?{x:x*f,y:h*d}:{x:h*d,y:x*f}}const PA=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:o,placement:a,middlewareData:l}=e,u=await AA(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+u.x,y:o+u.y,data:{...u,placement:a}}}}},RA=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:j=>{let{x:_,y:E}=j;return{x:_,y:E}}},...u}=ur(t,e),d={x:n,y:r},f=await Na(e,u),m=On(dr(s)),h=Cp(m);let x=d[h],y=d[m];if(o){const j=h==="y"?"top":"left",_=h==="y"?"bottom":"right",E=x+f[j],S=x-f[_];x=Bf(E,x,S)}if(a){const j=m==="y"?"top":"left",_=m==="y"?"bottom":"right",E=y+f[j],S=y-f[_];y=Bf(E,y,S)}const b=l.fn({...e,[h]:x,[m]:y});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[h]:o,[m]:a}}}}}},IA=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:o,middlewareData:a}=e,{offset:l=0,mainAxis:u=!0,crossAxis:d=!0}=ur(t,e),f={x:n,y:r},m=On(s),h=Cp(m);let x=f[h],y=f[m];const b=ur(l,e),j=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(u){const S=h==="y"?"height":"width",R=o.reference[h]-o.floating[S]+j.mainAxis,T=o.reference[h]+o.reference[S]-j.mainAxis;x<R?x=R:x>T&&(x=T)}if(d){var _,E;const S=h==="y"?"width":"height",R=a2.has(dr(s)),T=o.reference[m]-o.floating[S]+(R&&((_=a.offset)==null?void 0:_[m])||0)+(R?0:j.crossAxis),D=o.reference[m]+o.reference[S]+(R?0:((E=a.offset)==null?void 0:E[m])||0)-(R?j.crossAxis:0);y<T?y=T:y>D&&(y=D)}return{[h]:x,[m]:y}}}},MA=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:o,platform:a,elements:l}=e,{apply:u=()=>{},...d}=ur(t,e),f=await Na(e,d),m=dr(s),h=ti(s),x=On(s)==="y",{width:y,height:b}=o.floating;let j,_;m==="top"||m==="bottom"?(j=m,_=h===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(_=m,j=h==="end"?"top":"bottom");const E=b-f.top-f.bottom,S=y-f.left-f.right,R=Kr(b-f[j],E),T=Kr(y-f[_],S),D=!e.middlewareData.shift;let N=R,w=T;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(w=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(N=E),D&&!h){const A=Ft(f.left,0),I=Ft(f.right,0),M=Ft(f.top,0),k=Ft(f.bottom,0);x?w=y-2*(A!==0||I!==0?A+I:Ft(f.left,f.right)):N=b-2*(M!==0||k!==0?M+k:Ft(f.top,f.bottom))}await u({...e,availableWidth:w,availableHeight:N});const C=await a.getDimensions(l.floating);return y!==C.width||b!==C.height?{reset:{rects:!0}}:{}}}};function Uu(){return typeof window<"u"}function ni(t){return l2(t)?(t.nodeName||"").toLowerCase():"#document"}function Ht(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Hn(t){var e;return(e=(l2(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function l2(t){return Uu()?t instanceof Node||t instanceof Ht(t).Node:!1}function Nn(t){return Uu()?t instanceof Element||t instanceof Ht(t).Element:!1}function zn(t){return Uu()?t instanceof HTMLElement||t instanceof Ht(t).HTMLElement:!1}function gv(t){return!Uu()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ht(t).ShadowRoot}const DA=new Set(["inline","contents"]);function qa(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Sn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!DA.has(s)}const OA=new Set(["table","td","th"]);function LA(t){return OA.has(ni(t))}const VA=[":popover-open",":modal"];function Hu(t){return VA.some(e=>{try{return t.matches(e)}catch{return!1}})}const FA=["transform","translate","scale","rotate","perspective"],$A=["transform","translate","scale","rotate","perspective","filter"],zA=["paint","layout","strict","content"];function Ap(t){const e=Pp(),n=Nn(t)?Sn(t):t;return FA.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||$A.some(r=>(n.willChange||"").includes(r))||zA.some(r=>(n.contain||"").includes(r))}function BA(t){let e=Wr(t);for(;zn(e)&&!Oo(e);){if(Ap(e))return e;if(Hu(e))return null;e=Wr(e)}return null}function Pp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const UA=new Set(["html","body","#document"]);function Oo(t){return UA.has(ni(t))}function Sn(t){return Ht(t).getComputedStyle(t)}function Gu(t){return Nn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Wr(t){if(ni(t)==="html")return t;const e=t.assignedSlot||t.parentNode||gv(t)&&t.host||Hn(t);return gv(e)?e.host:e}function c2(t){const e=Wr(t);return Oo(e)?t.ownerDocument?t.ownerDocument.body:t.body:zn(e)&&qa(e)?e:c2(e)}function Sa(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=c2(t),o=s===((r=t.ownerDocument)==null?void 0:r.body),a=Ht(s);if(o){const l=Hf(a);return e.concat(a,a.visualViewport||[],qa(s)?s:[],l&&n?Sa(l):[])}return e.concat(s,Sa(s,[],n))}function Hf(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function u2(t){const e=Sn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=zn(t),o=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=qc(n)!==o||qc(r)!==a;return l&&(n=o,r=a),{width:n,height:r,$:l}}function Rp(t){return Nn(t)?t:t.contextElement}function _o(t){const e=Rp(t);if(!zn(e))return $n(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:o}=u2(e);let a=(o?qc(n.width):n.width)/r,l=(o?qc(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const HA=$n(0);function d2(t){const e=Ht(t);return!Pp()||!e.visualViewport?HA:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function GA(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ht(t)?!1:e}function Is(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),o=Rp(t);let a=$n(1);e&&(r?Nn(r)&&(a=_o(r)):a=_o(t));const l=GA(o,n,r)?d2(o):$n(0);let u=(s.left+l.x)/a.x,d=(s.top+l.y)/a.y,f=s.width/a.x,m=s.height/a.y;if(o){const h=Ht(o),x=r&&Nn(r)?Ht(r):r;let y=h,b=Hf(y);for(;b&&r&&x!==y;){const j=_o(b),_=b.getBoundingClientRect(),E=Sn(b),S=_.left+(b.clientLeft+parseFloat(E.paddingLeft))*j.x,R=_.top+(b.clientTop+parseFloat(E.paddingTop))*j.y;u*=j.x,d*=j.y,f*=j.x,m*=j.y,u+=S,d+=R,y=Ht(b),b=Hf(y)}}return Yc({width:f,height:m,x:u,y:d})}function Ku(t,e){const n=Gu(t).scrollLeft;return e?e.left+n:Is(Hn(t)).left+n}function h2(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Ku(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function KA(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const o=s==="fixed",a=Hn(r),l=e?Hu(e.floating):!1;if(r===a||l&&o)return n;let u={scrollLeft:0,scrollTop:0},d=$n(1);const f=$n(0),m=zn(r);if((m||!m&&!o)&&((ni(r)!=="body"||qa(a))&&(u=Gu(r)),zn(r))){const x=Is(r);d=_o(r),f.x=x.x+r.clientLeft,f.y=x.y+r.clientTop}const h=a&&!m&&!o?h2(a,u):$n(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+f.x+h.x,y:n.y*d.y-u.scrollTop*d.y+f.y+h.y}}function WA(t){return Array.from(t.getClientRects())}function qA(t){const e=Hn(t),n=Gu(t),r=t.ownerDocument.body,s=Ft(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Ft(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Ku(t);const l=-n.scrollTop;return Sn(r).direction==="rtl"&&(a+=Ft(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:a,y:l}}const xv=25;function QA(t,e){const n=Ht(t),r=Hn(t),s=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,l=0,u=0;if(s){o=s.width,a=s.height;const f=Pp();(!f||f&&e==="fixed")&&(l=s.offsetLeft,u=s.offsetTop)}const d=Ku(r);if(d<=0){const f=r.ownerDocument,m=f.body,h=getComputedStyle(m),x=f.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,y=Math.abs(r.clientWidth-m.clientWidth-x);y<=xv&&(o-=y)}else d<=xv&&(o+=d);return{width:o,height:a,x:l,y:u}}const YA=new Set(["absolute","fixed"]);function XA(t,e){const n=Is(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,o=zn(t)?_o(t):$n(1),a=t.clientWidth*o.x,l=t.clientHeight*o.y,u=s*o.x,d=r*o.y;return{width:a,height:l,x:u,y:d}}function yv(t,e,n){let r;if(e==="viewport")r=QA(t,n);else if(e==="document")r=qA(Hn(t));else if(Nn(e))r=XA(e,n);else{const s=d2(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Yc(r)}function f2(t,e){const n=Wr(t);return n===e||!Nn(n)||Oo(n)?!1:Sn(n).position==="fixed"||f2(n,e)}function JA(t,e){const n=e.get(t);if(n)return n;let r=Sa(t,[],!1).filter(l=>Nn(l)&&ni(l)!=="body"),s=null;const o=Sn(t).position==="fixed";let a=o?Wr(t):t;for(;Nn(a)&&!Oo(a);){const l=Sn(a),u=Ap(a);!u&&l.position==="fixed"&&(s=null),(o?!u&&!s:!u&&l.position==="static"&&!!s&&YA.has(s.position)||qa(a)&&!u&&f2(t,a))?r=r.filter(f=>f!==a):s=l,a=Wr(a)}return e.set(t,r),r}function ZA(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?Hu(e)?[]:JA(e,this._c):[].concat(n),r],l=a[0],u=a.reduce((d,f)=>{const m=yv(e,f,s);return d.top=Ft(m.top,d.top),d.right=Kr(m.right,d.right),d.bottom=Kr(m.bottom,d.bottom),d.left=Ft(m.left,d.left),d},yv(e,l,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function eP(t){const{width:e,height:n}=u2(t);return{width:e,height:n}}function tP(t,e,n){const r=zn(e),s=Hn(e),o=n==="fixed",a=Is(t,!0,o,e);let l={scrollLeft:0,scrollTop:0};const u=$n(0);function d(){u.x=Ku(s)}if(r||!r&&!o)if((ni(e)!=="body"||qa(s))&&(l=Gu(e)),r){const x=Is(e,!0,o,e);u.x=x.x+e.clientLeft,u.y=x.y+e.clientTop}else s&&d();o&&!r&&s&&d();const f=s&&!r&&!o?h2(s,l):$n(0),m=a.left+l.scrollLeft-u.x-f.x,h=a.top+l.scrollTop-u.y-f.y;return{x:m,y:h,width:a.width,height:a.height}}function mh(t){return Sn(t).position==="static"}function vv(t,e){if(!zn(t)||Sn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Hn(t)===n&&(n=n.ownerDocument.body),n}function m2(t,e){const n=Ht(t);if(Hu(t))return n;if(!zn(t)){let s=Wr(t);for(;s&&!Oo(s);){if(Nn(s)&&!mh(s))return s;s=Wr(s)}return n}let r=vv(t,e);for(;r&&LA(r)&&mh(r);)r=vv(r,e);return r&&Oo(r)&&mh(r)&&!Ap(r)?n:r||BA(t)||n}const nP=async function(t){const e=this.getOffsetParent||m2,n=this.getDimensions,r=await n(t.floating);return{reference:tP(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function rP(t){return Sn(t).direction==="rtl"}const sP={convertOffsetParentRelativeRectToViewportRelativeRect:KA,getDocumentElement:Hn,getClippingRect:ZA,getOffsetParent:m2,getElementRects:nP,getClientRects:WA,getDimensions:eP,getScale:_o,isElement:Nn,isRTL:rP};function p2(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function oP(t,e){let n=null,r;const s=Hn(t);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),o();const d=t.getBoundingClientRect(),{left:f,top:m,width:h,height:x}=d;if(l||e(),!h||!x)return;const y=zl(m),b=zl(s.clientWidth-(f+h)),j=zl(s.clientHeight-(m+x)),_=zl(f),S={rootMargin:-y+"px "+-b+"px "+-j+"px "+-_+"px",threshold:Ft(0,Kr(1,u))||1};let R=!0;function T(D){const N=D[0].intersectionRatio;if(N!==u){if(!R)return a();N?a(!1,N):r=setTimeout(()=>{a(!1,1e-7)},1e3)}N===1&&!p2(d,t.getBoundingClientRect())&&a(),R=!1}try{n=new IntersectionObserver(T,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(T,S)}n.observe(t)}return a(!0),o}function iP(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,d=Rp(t),f=s||o?[...d?Sa(d):[],...Sa(e)]:[];f.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),o&&_.addEventListener("resize",n)});const m=d&&l?oP(d,n):null;let h=-1,x=null;a&&(x=new ResizeObserver(_=>{let[E]=_;E&&E.target===d&&x&&(x.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var S;(S=x)==null||S.observe(e)})),n()}),d&&!u&&x.observe(d),x.observe(e));let y,b=u?Is(t):null;u&&j();function j(){const _=Is(t);b&&!p2(b,_)&&n(),b=_,y=requestAnimationFrame(j)}return n(),()=>{var _;f.forEach(E=>{s&&E.removeEventListener("scroll",n),o&&E.removeEventListener("resize",n)}),m?.(),(_=x)==null||_.disconnect(),x=null,u&&cancelAnimationFrame(y)}}const aP=PA,lP=RA,cP=kA,uP=MA,dP=TA,bv=CA,hP=IA,fP=(t,e,n)=>{const r=new Map,s={platform:sP,...n},o={...s.platform,_c:r};return jA(t,e,{...s,platform:o})};var mP=typeof document<"u",pP=function(){},xc=mP?p.useLayoutEffect:pP;function Xc(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Xc(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&t.$$typeof)&&!Xc(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function g2(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function wv(t,e){const n=g2(t);return Math.round(e*n)/n}function ph(t){const e=p.useRef(t);return xc(()=>{e.current=t}),e}function gP(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:u,open:d}=t,[f,m]=p.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,x]=p.useState(r);Xc(h,r)||x(r);const[y,b]=p.useState(null),[j,_]=p.useState(null),E=p.useCallback(L=>{L!==D.current&&(D.current=L,b(L))},[]),S=p.useCallback(L=>{L!==N.current&&(N.current=L,_(L))},[]),R=o||y,T=a||j,D=p.useRef(null),N=p.useRef(null),w=p.useRef(f),C=u!=null,A=ph(u),I=ph(s),M=ph(d),k=p.useCallback(()=>{if(!D.current||!N.current)return;const L={placement:e,strategy:n,middleware:h};I.current&&(L.platform=I.current),fP(D.current,N.current,L).then($=>{const W={...$,isPositioned:M.current!==!1};O.current&&!Xc(w.current,W)&&(w.current=W,zu.flushSync(()=>{m(W)}))})},[h,e,n,I,M]);xc(()=>{d===!1&&w.current.isPositioned&&(w.current.isPositioned=!1,m(L=>({...L,isPositioned:!1})))},[d]);const O=p.useRef(!1);xc(()=>(O.current=!0,()=>{O.current=!1}),[]),xc(()=>{if(R&&(D.current=R),T&&(N.current=T),R&&T){if(A.current)return A.current(R,T,k);k()}},[R,T,k,A,C]);const z=p.useMemo(()=>({reference:D,floating:N,setReference:E,setFloating:S}),[E,S]),H=p.useMemo(()=>({reference:R,floating:T}),[R,T]),Y=p.useMemo(()=>{const L={position:n,left:0,top:0};if(!H.floating)return L;const $=wv(H.floating,f.x),W=wv(H.floating,f.y);return l?{...L,transform:"translate("+$+"px, "+W+"px)",...g2(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:W}},[n,l,H.floating,f.x,f.y]);return p.useMemo(()=>({...f,update:k,refs:z,elements:H,floatingStyles:Y}),[f,k,z,H,Y])}const xP=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?bv({element:r.current,padding:s}).fn(n):{}:r?bv({element:r,padding:s}).fn(n):{}}}},yP=(t,e)=>({...aP(t),options:[t,e]}),vP=(t,e)=>({...lP(t),options:[t,e]}),bP=(t,e)=>({...hP(t),options:[t,e]}),wP=(t,e)=>({...cP(t),options:[t,e]}),EP=(t,e)=>({...uP(t),options:[t,e]}),_P=(t,e)=>({...dP(t),options:[t,e]}),NP=(t,e)=>({...xP(t),options:[t,e]});var SP="Arrow",x2=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...o}=t;return i.jsx(oe.svg,{...o,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});x2.displayName=SP;var jP=x2;function Ip(t){const[e,n]=p.useState(void 0);return ln(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,l;if("borderBoxSize"in o){const u=o.borderBoxSize,d=Array.isArray(u)?u[0]:u;a=d.inlineSize,l=d.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Mp="Popper",[y2,ri]=jt(Mp),[CP,v2]=y2(Mp),b2=t=>{const{__scopePopper:e,children:n}=t,[r,s]=p.useState(null);return i.jsx(CP,{scope:e,anchor:r,onAnchorChange:s,children:n})};b2.displayName=Mp;var w2="PopperAnchor",E2=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,o=v2(w2,n),a=p.useRef(null),l=ye(e,a),u=p.useRef(null);return p.useEffect(()=>{const d=u.current;u.current=r?.current||a.current,d!==u.current&&o.onAnchorChange(u.current)}),r?null:i.jsx(oe.div,{...s,ref:l})});E2.displayName=w2;var Dp="PopperContent",[kP,TP]=y2(Dp),_2=p.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:h=!1,updatePositionStrategy:x="optimized",onPlaced:y,...b}=t,j=v2(Dp,n),[_,E]=p.useState(null),S=ye(e,re=>E(re)),[R,T]=p.useState(null),D=Ip(R),N=D?.width??0,w=D?.height??0,C=r+(o!=="center"?"-"+o:""),A=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},I=Array.isArray(d)?d:[d],M=I.length>0,k={padding:A,boundary:I.filter(PP),altBoundary:M},{refs:O,floatingStyles:z,placement:H,isPositioned:Y,middlewareData:L}=gP({strategy:"fixed",placement:C,whileElementsMounted:(...re)=>iP(...re,{animationFrame:x==="always"}),elements:{reference:j.anchor},middleware:[yP({mainAxis:s+w,alignmentAxis:a}),u&&vP({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?bP():void 0,...k}),u&&wP({...k}),EP({...k,apply:({elements:re,rects:Yt,availableWidth:Kn,availableHeight:pr})=>{const{width:ns,height:Wn}=Yt.reference,gr=re.floating.style;gr.setProperty("--radix-popper-available-width",`${Kn}px`),gr.setProperty("--radix-popper-available-height",`${pr}px`),gr.setProperty("--radix-popper-anchor-width",`${ns}px`),gr.setProperty("--radix-popper-anchor-height",`${Wn}px`)}}),R&&NP({element:R,padding:l}),RP({arrowWidth:N,arrowHeight:w}),h&&_P({strategy:"referenceHidden",...k})]}),[$,W]=j2(H),ne=it(y);ln(()=>{Y&&ne?.()},[Y,ne]);const le=L.arrow?.x,pe=L.arrow?.y,de=L.arrow?.centerOffset!==0,[tt,Ie]=p.useState();return ln(()=>{_&&Ie(window.getComputedStyle(_).zIndex)},[_]),i.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:Y?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:tt,"--radix-popper-transform-origin":[L.transformOrigin?.x,L.transformOrigin?.y].join(" "),...L.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:i.jsx(kP,{scope:n,placedSide:$,onArrowChange:T,arrowX:le,arrowY:pe,shouldHideArrow:de,children:i.jsx(oe.div,{"data-side":$,"data-align":W,...b,ref:S,style:{...b.style,animation:Y?void 0:"none"}})})})});_2.displayName=Dp;var N2="PopperArrow",AP={top:"bottom",right:"left",bottom:"top",left:"right"},S2=p.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,o=TP(N2,r),a=AP[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(jP,{...s,ref:n,style:{...s.style,display:"block"}})})});S2.displayName=N2;function PP(t){return t!==null}var RP=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:s}=e,a=s.arrow?.centerOffset!==0,l=a?0:t.arrowWidth,u=a?0:t.arrowHeight,[d,f]=j2(n),m={start:"0%",center:"50%",end:"100%"}[f],h=(s.arrow?.x??0)+l/2,x=(s.arrow?.y??0)+u/2;let y="",b="";return d==="bottom"?(y=a?m:`${h}px`,b=`${-u}px`):d==="top"?(y=a?m:`${h}px`,b=`${r.floating.height+u}px`):d==="right"?(y=`${-u}px`,b=a?m:`${x}px`):d==="left"&&(y=`${r.floating.width+u}px`,b=a?m:`${x}px`),{data:{x:y,y:b}}}});function j2(t){const[e,n="center"]=t.split("-");return[e,n]}var Op=b2,Wu=E2,Lp=_2,Vp=S2,IP="Portal",Qa=p.forwardRef((t,e)=>{const{container:n,...r}=t,[s,o]=p.useState(!1);ln(()=>o(!0),[]);const a=n||s&&globalThis?.document?.body;return a?Kk.createPortal(i.jsx(oe.div,{...r,ref:e}),a):null});Qa.displayName=IP;function MP(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var et=t=>{const{present:e,children:n}=t,r=DP(e),s=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),o=ye(r.ref,OP(s));return typeof n=="function"||r.isPresent?p.cloneElement(s,{ref:o}):null};et.displayName="Presence";function DP(t){const[e,n]=p.useState(),r=p.useRef(null),s=p.useRef(t),o=p.useRef("none"),a=t?"mounted":"unmounted",[l,u]=MP(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const d=Bl(r.current);o.current=l==="mounted"?d:"none"},[l]),ln(()=>{const d=r.current,f=s.current;if(f!==t){const h=o.current,x=Bl(d);t?u("MOUNT"):x==="none"||d?.display==="none"?u("UNMOUNT"):u(f&&h!==x?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,u]),ln(()=>{if(e){let d;const f=e.ownerDocument.defaultView??window,m=x=>{const b=Bl(r.current).includes(CSS.escape(x.animationName));if(x.target===e&&b&&(u("ANIMATION_END"),!s.current)){const j=e.style.animationFillMode;e.style.animationFillMode="forwards",d=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=j)})}},h=x=>{x.target===e&&(o.current=Bl(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{f.clearTimeout(d),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function Bl(t){return t?.animationName||"none"}function OP(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var LP=Rb[" useInsertionEffect ".trim().toString()]||ln;function es({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,o,a]=VP({defaultProp:e,onChange:n}),l=t!==void 0,u=l?t:s;{const f=p.useRef(t!==void 0);p.useEffect(()=>{const m=f.current;m!==l&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const d=p.useCallback(f=>{if(l){const m=FP(f)?f(t):f;m!==t&&a.current?.(m)}else o(f)},[l,t,o,a]);return[u,d]}function VP({defaultProp:t,onChange:e}){const[n,r]=p.useState(t),s=p.useRef(n),o=p.useRef(e);return LP(()=>{o.current=e},[e]),p.useEffect(()=>{s.current!==n&&(o.current?.(n),s.current=n)},[n,s]),[n,r,o]}function FP(t){return typeof t=="function"}var $P=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),zP="VisuallyHidden",C2=p.forwardRef((t,e)=>i.jsx(oe.span,{...t,ref:e,style:{...$P,...t.style}}));C2.displayName=zP;var BP=C2,[qu]=jt("Tooltip",[ri]),Qu=ri(),k2="TooltipProvider",UP=700,Gf="tooltip.open",[HP,Fp]=qu(k2),T2=t=>{const{__scopeTooltip:e,delayDuration:n=UP,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=t,a=p.useRef(!0),l=p.useRef(!1),u=p.useRef(0);return p.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),i.jsx(HP,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(u.current),a.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(d=>{l.current=d},[]),disableHoverableContent:s,children:o})};T2.displayName=k2;var ja="Tooltip",[GP,Ya]=qu(ja),A2=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s,onOpenChange:o,disableHoverableContent:a,delayDuration:l}=t,u=Fp(ja,t.__scopeTooltip),d=Qu(e),[f,m]=p.useState(null),h=bn(),x=p.useRef(0),y=a??u.disableHoverableContent,b=l??u.delayDuration,j=p.useRef(!1),[_,E]=es({prop:r,defaultProp:s??!1,onChange:N=>{N?(u.onOpen(),document.dispatchEvent(new CustomEvent(Gf))):u.onClose(),o?.(N)},caller:ja}),S=p.useMemo(()=>_?j.current?"delayed-open":"instant-open":"closed",[_]),R=p.useCallback(()=>{window.clearTimeout(x.current),x.current=0,j.current=!1,E(!0)},[E]),T=p.useCallback(()=>{window.clearTimeout(x.current),x.current=0,E(!1)},[E]),D=p.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{j.current=!0,E(!0),x.current=0},b)},[b,E]);return p.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),i.jsx(Op,{...d,children:i.jsx(GP,{scope:e,contentId:h,open:_,stateAttribute:S,trigger:f,onTriggerChange:m,onTriggerEnter:p.useCallback(()=>{u.isOpenDelayedRef.current?D():R()},[u.isOpenDelayedRef,D,R]),onTriggerLeave:p.useCallback(()=>{y?T():(window.clearTimeout(x.current),x.current=0)},[T,y]),onOpen:R,onClose:T,disableHoverableContent:y,children:n})})};A2.displayName=ja;var Kf="TooltipTrigger",P2=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Ya(Kf,n),o=Fp(Kf,n),a=Qu(n),l=p.useRef(null),u=ye(e,l,s.onTriggerChange),d=p.useRef(!1),f=p.useRef(!1),m=p.useCallback(()=>d.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),i.jsx(Wu,{asChild:!0,...a,children:i.jsx(oe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:u,onPointerMove:Q(t.onPointerMove,h=>{h.pointerType!=="touch"&&!f.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:Q(t.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:Q(t.onPointerDown,()=>{s.open&&s.onClose(),d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Q(t.onFocus,()=>{d.current||s.onOpen()}),onBlur:Q(t.onBlur,s.onClose),onClick:Q(t.onClick,s.onClose)})})});P2.displayName=Kf;var $p="TooltipPortal",[KP,WP]=qu($p,{forceMount:void 0}),R2=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:s}=t,o=Ya($p,e);return i.jsx(KP,{scope:e,forceMount:n,children:i.jsx(et,{present:n||o.open,children:i.jsx(Qa,{asChild:!0,container:s,children:r})})})};R2.displayName=$p;var Lo="TooltipContent",I2=p.forwardRef((t,e)=>{const n=WP(Lo,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=t,a=Ya(Lo,t.__scopeTooltip);return i.jsx(et,{present:r||a.open,children:a.disableHoverableContent?i.jsx(M2,{side:s,...o,ref:e}):i.jsx(qP,{side:s,...o,ref:e})})}),qP=p.forwardRef((t,e)=>{const n=Ya(Lo,t.__scopeTooltip),r=Fp(Lo,t.__scopeTooltip),s=p.useRef(null),o=ye(e,s),[a,l]=p.useState(null),{trigger:u,onClose:d}=n,f=s.current,{onPointerInTransitChange:m}=r,h=p.useCallback(()=>{l(null),m(!1)},[m]),x=p.useCallback((y,b)=>{const j=y.currentTarget,_={x:y.clientX,y:y.clientY},E=JP(_,j.getBoundingClientRect()),S=ZP(_,E),R=e4(b.getBoundingClientRect()),T=n4([...S,...R]);l(T),m(!0)},[m]);return p.useEffect(()=>()=>h(),[h]),p.useEffect(()=>{if(u&&f){const y=j=>x(j,f),b=j=>x(j,u);return u.addEventListener("pointerleave",y),f.addEventListener("pointerleave",b),()=>{u.removeEventListener("pointerleave",y),f.removeEventListener("pointerleave",b)}}},[u,f,x,h]),p.useEffect(()=>{if(a){const y=b=>{const j=b.target,_={x:b.clientX,y:b.clientY},E=u?.contains(j)||f?.contains(j),S=!t4(_,a);E?h():S&&(h(),d())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[u,f,a,d,h]),i.jsx(M2,{...t,ref:o})}),[QP,YP]=qu(ja,{isInside:!1}),XP=Yk("TooltipContent"),M2=p.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:a,...l}=t,u=Ya(Lo,n),d=Qu(n),{onClose:f}=u;return p.useEffect(()=>(document.addEventListener(Gf,f),()=>document.removeEventListener(Gf,f)),[f]),p.useEffect(()=>{if(u.trigger){const m=h=>{h.target?.contains(u.trigger)&&f()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[u.trigger,f]),i.jsx(Wa,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:m=>m.preventDefault(),onDismiss:f,children:i.jsxs(Lp,{"data-state":u.stateAttribute,...d,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(XP,{children:r}),i.jsx(QP,{scope:n,isInside:!0,children:i.jsx(BP,{id:u.contentId,role:"tooltip",children:s||r})})]})})});I2.displayName=Lo;var D2="TooltipArrow",O2=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Qu(n);return YP(D2,n).isInside?null:i.jsx(Vp,{...s,...r,ref:e})});O2.displayName=D2;function JP(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function ZP(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function e4(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function t4(t,e){const{x:n,y:r}=t;let s=!1;for(let o=0,a=e.length-1;o<e.length;a=o++){const l=e[o],u=e[a],d=l.x,f=l.y,m=u.x,h=u.y;f>r!=h>r&&n<(m-d)*(r-f)/(h-f)+d&&(s=!s)}return s}function n4(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),r4(e)}function r4(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const o=e[e.length-1],a=e[e.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const o=n[n.length-1],a=n[n.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var s4=T2,o4=A2,i4=P2,a4=R2,l4=I2,c4=O2;function $i({delayDuration:t=0,...e}){return i.jsx(s4,{"data-slot":"tooltip-provider",delayDuration:t,...e})}function Ul({...t}){return i.jsx($i,{children:i.jsx(o4,{"data-slot":"tooltip",...t})})}function Hl({...t}){return i.jsx(i4,{"data-slot":"tooltip-trigger",...t})}function Gl({className:t,sideOffset:e=0,children:n,...r}){return i.jsx(a4,{children:i.jsxs(l4,{"data-slot":"tooltip-content",sideOffset:e,className:ue("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...r,children:[n,i.jsx(c4,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const L2=p.createContext(void 0);function u4({children:t}){const[e,n]=p.useState(null),[r,s]=p.useState(!1),[o,a]=p.useState(!1),[l,u]=p.useState(null),[d,f]=p.useState(null),m=async(A=!0)=>{try{A&&s(!0),u(null);const I={id:"company_001",meta:{brandName:"Tu Marca",lastUpdated:"2025-09-28T15:30:00Z",version:1},colors:{primary:["#21EDE7","#112846"],secondary:["#FC9528"],alternatives:["#F4F6F8","#000000"],gradients:[{name:"Sunset",from:"#21EDE7",to:"#FC9528"}],rules:{allowedCombinations:[["#21EDE7","#112846"]],forbiddenColors:["#FF0000"]}},typography:{primary:{name:"Montserrat",weights:["Regular","Bold","ExtraBold"]},secondary:{name:"Inter",weights:["Regular","Medium"]},hierarchy:{h1:{font:"Montserrat",size:48},h2:{font:"Montserrat",size:32},body:{font:"Inter",size:16},caption:{font:"Inter",size:12}}},logos:[{name:"main",formats:["svg","png"],url:"https://storage.brandkit/logo_main.svg",usage:"default"},{name:"negative",formats:["svg"],url:"https://storage.brandkit/logo_negative.svg",usage:"darkBackground"}],iconography:{style:"outline",examples:["download","share","arrow"],rules:["usar solo íconos de la librería oficial"]},illustrations:{style:"flat",examples:["people_teamwork.png","delivery_box.svg"]},photography:{style:"natural_light",filters:["bright","highContrast"],examples:["office_team.jpg","warehouse.jpg"]},motion:{speed:"fast",transitions:["fade","slide"],rules:["no usar animaciones rebote"]},audio:{jingles:["intro.mp3","outro.mp3"],style:"corporate_but_friendly",rules:["usar en todos los podcasts y reels educativos"]},voiceTone:{style:"Profesional pero cercano",examples:{correct:["Bienvenido a la familia, estamos contigo"],incorrect:["Compra YA o te lo pierdes!!!"]}},messaging:{tagline:"Conectando tu mundo",slogans:["Más cerca de ti","Rápido y seguro"],differentiators:["Atención personalizada","Cobertura internacional"]},storytelling:{mission:"Facilitar la conexión entre personas y países",vision:"Ser la plataforma líder en envíos internacionales",values:["Transparencia","Rapidez","Cercanía"]},usageGuidelines:{posts:{formats:["1:1","4:5"],rules:["usar logo en esquina superior"]},stories:{formats:["9:16"],rules:["CTA obligatorio"]},videos:{formats:["16:9","9:16"],rules:["subtítulos obligatorios"]},podcasts:{coverFormat:"3000x3000px",rules:["logo siempre visible"]}},examples:{do:["Usar tipografía oficial","Mantener contraste alto","Respetar márgenes del logo"],dont:["Deformar el logo","Usar colores no autorizados","Cambiar tipografía"]},accessibility:{contrastRatio:"AA",minFontSize:14,videoSubtitles:!0,altTextRequired:!0},internationalization:{supportedLanguages:["es","en"],sloganTranslations:{en:"Connecting your world",es:"Conectando tu mundo"},cultureNotes:["Evitar modismos locales en inglés"]},validation:{coherenceReport:{lastScan:"2025-09-28",complianceRate:"92%",issues:["3 assets con colores fuera de paleta"]}}};await new Promise(M=>setTimeout(M,500)),n(I),f("hace unos minutos")}catch(I){const M=I instanceof Error?I.message:"Error cargando BrandKit";console.error("Error loading BrandKit:",I),u(M),n(null)}finally{A&&s(!1)}},h=async()=>{await m(!1)},x=async A=>{try{if(!e)return;const I={...e,...A,metadata:{...e.metadata,updatedAt:new Date}};n(I),f("hace unos momentos"),console.log("BrandKit updated:",I)}catch(I){console.error("Error updating BrandKit:",I),u("Error actualizando BrandKit")}},y=async A=>{const I=Date.now();try{a(!0),u(null),console.log("=== Starting Brand Manual Analysis ==="),console.log(`File: ${A.name} (${A.type}, ${A.size} bytes)`);const M=10*1024*1024;if(A.size>M)throw new Error(`Archivo demasiado grande (${Math.round(A.size/1024/1024)}MB). Máximo permitido: 10MB`);if(!["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/png","image/jpeg","image/jpg","image/webp"].includes(A.type))throw new Error(`Tipo de archivo no soportado: ${A.type}. Soportados: PDF, DOCX, PNG, JPG`);const O=new FormData;O.append("file",A),console.log("Calling backend analysis service...");const{functionsUrl:z,FUNCTIONS_TOKEN:H}=await _n(()=>import("./backend-B8PyVWug.js"),__vite__mapDeps([])),Y=new AbortController,L=setTimeout(()=>Y.abort(),6e4),$=await fetch(z("/analyze-brand-manual"),{method:"POST",headers:{Authorization:`Bearer ${H}`},body:O,signal:Y.signal});if(clearTimeout(L),console.log(`Backend response status: ${$.status}`),!$.ok){let pe=`HTTP ${$.status}: ${$.statusText}`;try{const de=await $.json();pe=de.error||pe,console.error("Backend error details:",de)}catch{console.error("Failed to parse error response")}throw new Error(pe)}const W=await $.json();if(console.log("Backend response received:",{success:W.success,processingTime:W.processingTime,extractedBy:W.extractedBy}),!W.success)throw new Error(W.error||"El análisis no fue exitoso");const ne=W.analysis,le=((Date.now()-I)/1e3).toFixed(1);console.log("=== Analysis Completed Successfully ==="),console.log(`Total time: ${le}s`),console.log(`Brand: ${ne.meta.brandName}`),console.log(`Colors: ${ne.colors.primary.length} primary, ${ne.colors.secondary.length} secondary`),console.log(`Typography: ${ne.typography.primary.name}`),console.log(`Logos: ${ne.logos.length}`),n(ne),f("hace unos momentos"),console.log("Saving to persistent storage..."),await b(ne)}catch(M){const k=((Date.now()-I)/1e3).toFixed(1);console.error("=== Analysis Failed ==="),console.error(`Total time: ${k}s`),console.error("Error details:",M);let O="Error analizando el manual de marca";M instanceof Error&&(M.name==="AbortError"?O="El análisis tardó demasiado tiempo (timeout). Intenta con un archivo más pequeño.":O=M.message),u(O)}finally{a(!1)}},b=async A=>{try{const{functionsUrl:I,FUNCTIONS_TOKEN:M}=await _n(()=>import("./backend-B8PyVWug.js"),__vite__mapDeps([])),k=await fetch(I("/save-brandkit"),{method:"POST",headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"},body:JSON.stringify(A)});if(!k.ok){const z=await k.json();throw new Error(z.error||"Error saving BrandKit")}const O=await k.json();console.log("BrandKit saved successfully:",O)}catch(I){console.error("Error saving BrandKit:",I)}};p.useEffect(()=>{m()},[]);const j=p.useCallback(()=>e?.colors?.primary?e.colors.primary.map((A,I)=>({name:`Color Primario ${I+1}`,hex:A,usage:"Color principal de marca",type:"primary"})):[],[e?.colors]),_=p.useCallback(()=>{if(!e?.colors)return[];const A=[];return e.colors.secondary&&A.push(...e.colors.secondary.map((I,M)=>({name:`Color Secundario ${M+1}`,hex:I,usage:"Color secundario de marca",type:"secondary"}))),e.colors.alternatives&&A.push(...e.colors.alternatives.map((I,M)=>({name:`Color Alternativo ${M+1}`,hex:I,usage:"Color alternativo",type:"alternative"}))),A},[e?.colors]),E=p.useCallback(()=>e?.typography?.primary?{name:e.typography.primary.name,font:e.typography.primary.name,weight:e.typography.primary.weights[0]||"Regular",type:"primary"}:null,[e?.typography]),S=p.useCallback(()=>e?.typography?.secondary?{name:e.typography.secondary.name,font:e.typography.secondary.name,weight:e.typography.secondary.weights[0]||"Regular",type:"secondary"}:null,[e?.typography]),R=p.useCallback(()=>{if(!e?.logos?.length)return null;const A=e.logos.find(I=>I.name==="main")||e.logos[0];return{id:A.name,name:A.name,url:A.url,type:A.usage}},[e?.logos]),T=p.useCallback(()=>{if(!e?.voiceTone)return"";let A=`Estilo: ${e.voiceTone.style}. `;return e.voiceTone.examples?.correct?.length>0&&(A+=`Ejemplos correctos: ${e.voiceTone.examples.correct.join(", ")}. `),e.voiceTone.examples?.incorrect?.length>0&&(A+=`Evitar: ${e.voiceTone.examples.incorrect.join(", ")}. `),A.trim()},[e?.voiceTone]),D=p.useCallback(async(A="post")=>{if(!e)return"";const I=T(),M=j().map(z=>z.hex).join(", "),k=E()?.name||"Fuente por defecto",O=e.usageGuidelines;switch(A){case"post":return`${I} Formatos: ${O?.posts?.formats?.join(", ")||"1:1, 4:5"}. Reglas: ${O?.posts?.rules?.join(", ")||"Usar logo discreto"}. Colores: ${M}. Tipografía: ${k}.`;case"video":return`${I} Formatos: ${O?.videos?.formats?.join(", ")||"16:9, 9:16"}. Reglas: ${O?.videos?.rules?.join(", ")||"Subtítulos obligatorios"}. Colores: ${M}. Tipografía: ${k}.`;case"story":return`${I} Formatos: ${O?.stories?.formats?.join(", ")||"9:16"}. Reglas: ${O?.stories?.rules?.join(", ")||"CTA obligatorio"}. Colores: ${M}. Tipografía: ${k}.`;case"podcast":return`${I} Formato de portada: ${O?.podcasts?.coverFormat||"3000x3000px"}. Reglas: ${O?.podcasts?.rules?.join(", ")||"Logo visible"}. Audio: ${e.audio?.style||"Estilo corporativo amigable"}.`;case"chat":return`${I} Mantén el tono de voz consistente en todas las respuestas.`;default:return I}},[T,j,E,e]),N=p.useCallback(A=>{if(!e?.colors)return!0;const M=[...e.colors.primary||[],...e.colors.secondary||[],...e.colors.alternatives||[]].some(O=>O.toUpperCase()===A.toUpperCase()),k=e.colors.rules?.forbiddenColors?.some(O=>O.toUpperCase()===A.toUpperCase());return M&&!k},[e?.colors]),w=p.useCallback(()=>{if(!e)return{score:0,missing:[],recommendations:[]};if(e.validation?.coherenceReport){const O=parseInt(e.validation.coherenceReport.complianceRate.replace("%","")),z=e.validation.coherenceReport.issues||[],H=[];return O<95&&z.length>0&&H.push(`Corrige los siguientes problemas: ${z.join(", ")}`),O<85&&H.push("Revisa la consistencia en todos los assets"),{score:O,missing:z,recommendations:H}}const A=[{key:"colors",weight:15,exists:!!e.colors?.primary?.length},{key:"typography",weight:15,exists:!!e.typography?.primary},{key:"logos",weight:15,exists:!!e.logos?.length},{key:"voiceTone",weight:10,exists:!!e.voiceTone?.style},{key:"messaging",weight:10,exists:!!e.messaging?.tagline},{key:"storytelling",weight:10,exists:!!e.storytelling?.mission},{key:"guidelines",weight:10,exists:!!e.usageGuidelines?.posts},{key:"accessibility",weight:5,exists:!!e.accessibility?.contrastRatio},{key:"internationalization",weight:5,exists:!!e.internationalization?.supportedLanguages?.length},{key:"audio",weight:5,exists:!!e.audio?.style}],I=A.reduce((O,z)=>O+(z.exists?z.weight:0),0),M=A.filter(O=>!O.exists).map(O=>{switch(O.key){case"colors":return"Paleta de colores";case"typography":return"Tipografías";case"logos":return"Logos";case"voiceTone":return"Tono de voz";case"messaging":return"Mensajes clave";case"storytelling":return"Historia de marca";case"guidelines":return"Guías de aplicación";case"accessibility":return"Reglas de accesibilidad";case"internationalization":return"Internacionalización";case"audio":return"Elementos de audio";default:return O.key}}),k=[];return I<60&&k.push("Completa los elementos básicos: colores, tipografías y logos"),I<80&&k.push("Añade tono de voz y mensajes clave para mayor consistencia"),I<95&&k.push("Completa elementos avanzados: audio, internacionalización"),{score:I,missing:M,recommendations:k}},[e]),C=p.useMemo(()=>({brandKit:e,isLoading:r,isAnalyzing:o,error:l,lastUpdated:d,hasBrandKit:!!e,refreshBrandKit:h,updateBrandKit:x,uploadAndAnalyzeManual:y,saveBrandKit:b,getPrimaryColors:j,getSecondaryColors:_,getPrimaryFont:E,getSecondaryFont:S,getPrimaryLogo:R,getVoiceToneInstructions:T,getBrandInstructions:D,validateBrandColor:N,getBrandCompliance:w}),[e,r,o,l,d,h,x,y,b,j,_,E,S,R,T,D,N,w]);return i.jsx(L2.Provider,{value:C,children:t})}function Xa(){const t=p.useContext(L2);if(t===void 0)throw new Error("useBrandKit must be used within a BrandKitProvider");return t}function _F(){const{getPrimaryColors:t,getSecondaryColors:e,brandKit:n}=Xa();return{primaryColors:t(),secondaryColors:e(),allColors:n?.colors||[],hasColors:!!n?.colors?.length}}function NF(){const{getPrimaryFont:t,getSecondaryFont:e,brandKit:n}=Xa();return{primaryFont:t(),secondaryFont:e(),allFonts:n?.typography||[],hasFonts:!!n?.typography?.length}}function SF(){const{getVoiceToneInstructions:t,brandKit:e}=Xa();return{voiceTone:e?.voiceTone,instructions:t(),hasVoiceTone:!!e?.voiceTone?.personality}}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),h4=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Ev=t=>{const e=h4(t);return e.charAt(0).toUpperCase()+e.slice(1)},V2=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var f4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:a,...l},u)=>p.createElement("svg",{ref:u,...f4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:V2("lucide",s),...l},[...a.map(([d,f])=>p.createElement(d,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=(t,e)=>{const n=p.forwardRef(({className:r,...s},o)=>p.createElement(m4,{ref:o,iconNode:e,className:V2(`lucide-${d4(Ev(t))}`,`lucide-${t}`,r),...s}));return n.displayName=Ev(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Gt=K("arrow-left",p4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],rn=K("arrow-right",g4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],y4=K("badge-check",x4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],zp=K("bot",v4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ca=K("calendar",b4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],E4=K("chart-column",w4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],or=K("check",_4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],xn=K("chevron-down",N4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],j4=K("chevron-right",S4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Vo=K("chevron-up",C4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],hr=K("circle-alert",k4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$e=K("circle-check-big",T4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Wf=K("circle-x",A4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],R4=K("circle",P4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],M4=K("clipboard",I4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Yu=K("clock",D4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ka=K("copy",O4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],_v=K("database",L4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],wn=K("download",V4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],$4=K("ellipsis",F4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],B4=K("external-link",z4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],H4=K("eye",U4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],F2=K("facebook",G4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],$2=K("file-image",K4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Jc=K("file-text",W4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]],Nv=K("file-video",q4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Sv=K("folder-plus",Q4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],X4=K("folder",Y4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Z4=K("git-branch",J4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Bp=K("globe",eR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],qf=K("hash",tR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Fo=K("image",nR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],gh=K("info",rR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],z2=K("instagram",sR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],iR=K("languages",oR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],jv=K("layers",aR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],cR=K("list-checks",lR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],rr=K("loader-circle",uR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],hR=K("menu",dR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Ja=K("message-circle",fR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],pR=K("message-square",mR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],B2=K("mic",gR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],Ta=K("palette",xR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],vR=K("paperclip",yR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],U2=K("plus",bR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],Cv=K("redo",wR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Xu=K("refresh-cw",ER);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],NR=K("rocket",_R);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],H2=K("rotate-ccw",SR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],CR=K("rotate-cw",jR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],kv=K("save",kR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],AR=K("scissors",TR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Za=K("send",PR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Tv=K("settings",RR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],go=K("share-2",IR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],Qf=K("share",MR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],G2=K("shield",DR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],LR=K("smartphone",OR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],K2=K("smile",VR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Ji=K("sparkles",FR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$o=K("square-check-big",$R);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],BR=K("square-pen",zR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Zc=K("square",UR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M14 3v4a2 2 0 0 0 2 2h4",key:"36rjfy"}],["path",{d:"M8 13h.01",key:"1sbv64"}],["path",{d:"M16 13h.01",key:"wip0gl"}],["path",{d:"M10 16s.8 1 2 1c1.3 0 2-1 2-1",key:"1vvgv3"}]],W2=K("sticker",HR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],KR=K("target",GR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],q2=K("trash-2",WR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ot=K("triangle-alert",qR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],Up=K("type",QR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],Av=K("undo",YR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Q2=K("upload",XR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Y2=K("user",JR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],eI=K("video",ZR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Pv=K("wifi-off",tI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],xh=K("wifi",nI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ms=K("x",rI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Yf=K("zap",sI);function oI(){const{hasBrandKit:t,isLoading:e,error:n}=Xa(),[r,s]=p.useState(null),[o,a]=p.useState(!0),[l,u]=p.useState(!1),d=async()=>{try{a(!0),u(!1);const h={hasColors:!0,colorsCount:4,hasTypography:!0,typographyCount:2,hasLogos:!1,logosCount:0,hasVoiceTone:!0,hasUsageRules:!1,completeness:60};await new Promise(x=>setTimeout(x,300)),s(h)}catch{u(!1),s({hasColors:!1,colorsCount:0,hasTypography:!1,typographyCount:0,hasLogos:!1,logosCount:0,hasVoiceTone:!1,hasUsageRules:!1,completeness:0})}finally{a(!1)}};if(p.useEffect(()=>{const h=setTimeout(()=>{t&&!e?d():(a(!1),s(null))},100);return()=>clearTimeout(h)},[t,e]),e||o)return i.jsx($i,{children:i.jsxs(Ul,{children:[i.jsx(Hl,{children:i.jsxs(Ve,{variant:"outline",className:"gap-2",children:[i.jsx(Xu,{className:"w-3 h-3 animate-spin"}),"Cargando BrandKit..."]})}),i.jsx(Gl,{children:i.jsx("p",{children:"Verificando estado del BrandKit"})})]})});if(l&&n&&!n.includes("offline"))return i.jsx($i,{children:i.jsxs(Ul,{children:[i.jsx(Hl,{children:i.jsxs(Ve,{variant:"outline",className:"gap-2 border-red-200 text-red-700",children:[i.jsx(Wf,{className:"w-3 h-3"}),"BrandKit no disponible"]})}),i.jsx(Gl,{children:i.jsx("p",{children:n||"Error conectando con Firestore"})})]})});if(!t&&!e){const h=n&&n.includes("offline");return i.jsx($i,{children:i.jsxs(Ul,{children:[i.jsx(Hl,{children:i.jsx(Ve,{variant:"outline",className:`gap-2 ${h?"border-yellow-200 text-yellow-700":"border-gray-200 text-gray-700"}`,children:h?i.jsxs(i.Fragment,{children:[i.jsx(_v,{className:"w-3 h-3"}),"BrandKit (offline)"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ta,{className:"w-3 h-3"}),"Sin BrandKit"]})})}),i.jsx(Gl,{children:i.jsx("p",{children:h?"Modo offline - BrandKit disponible desde caché":"No hay BrandKit configurado. Ve al módulo BrandKit para crear uno."})})]})})}const f=()=>{const h=r?.completeness||0;return h>=80?i.jsxs(Ve,{className:"gap-2 bg-green-100 text-green-800 border-green-200",children:[i.jsx($e,{className:"w-3 h-3"}),"BrandKit Completo (",Math.round(h),"%)"]}):h>=40?i.jsxs(Ve,{className:"gap-2 bg-yellow-100 text-yellow-800 border-yellow-200",children:[i.jsx(hr,{className:"w-3 h-3"}),"BrandKit Parcial (",Math.round(h),"%)"]}):h>0?i.jsxs(Ve,{className:"gap-2 bg-blue-100 text-blue-800 border-blue-200",children:[i.jsx(Ta,{className:"w-3 h-3"}),"BrandKit Básico (",Math.round(h),"%)"]}):i.jsxs(Ve,{variant:"outline",className:"gap-2 border-gray-300 text-gray-600",children:[i.jsx(Wf,{className:"w-3 h-3"}),"Sin BrandKit"]})},m=()=>!r||r.completeness===0?"No hay BrandKit configurado. Ve al módulo BrandKit para crear uno.":i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"font-medium",children:"Estado del BrandKit:"}),i.jsxs("p",{children:["• Colores: ",r.hasColors?`${r.colorsCount} definidos`:"No definidos"]}),i.jsxs("p",{children:["• Tipografías: ",r.hasTypography?`${r.typographyCount} definidas`:"No definidas"]}),i.jsxs("p",{children:["• Logos: ",r.hasLogos?`${r.logosCount} disponibles`:"No disponibles"]}),i.jsxs("p",{children:["• Tono de voz: ",r.hasVoiceTone?"Definido":"No definido"]}),i.jsxs("p",{children:["• Reglas de uso: ",r.hasUsageRules?"Definidas":"No definidas"]}),i.jsxs("p",{className:"pt-1 border-t border-gray-200",children:[i.jsx(_v,{className:"w-3 h-3 inline mr-1"}),"Sincronizado con Firestore"]})]});return i.jsx($i,{children:i.jsxs(Ul,{children:[i.jsx(Hl,{children:f()}),i.jsx(Gl,{children:m()})]})})}const iI=Np("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Rv({className:t,variant:e,...n}){return i.jsx("div",{"data-slot":"alert",role:"alert",className:ue(iI({variant:e}),t),...n})}function Iv({className:t,...e}){return i.jsx("div",{"data-slot":"alert-description",className:ue("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...e})}const aI=()=>{};var Mv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},lI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return e.join("")},J2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=o>>2,m=(o&3)<<4|l>>4;let h=(l&15)<<2|d>>6,x=d&63;u||(x=64,a||(h=64)),r.push(n[f],n[m],n[h],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(X2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||l==null||d==null||m==null)throw new cI;const h=o<<2|l>>4;if(r.push(h),d!==64){const x=l<<4&240|d>>2;if(r.push(x),m!==64){const y=d<<6&192|m;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uI=function(t){const e=X2(t);return J2.encodeByteArray(e,!0)},eu=function(t){return uI(t).replace(/\./g,"")},dI=function(t){try{return J2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=()=>hI().__FIREBASE_DEFAULTS__,mI=()=>{if(typeof process>"u"||typeof Mv>"u")return;const t=Mv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dI(t[1]);return e&&JSON.parse(e)},Hp=()=>{try{return aI()||fI()||mI()||pI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gI=t=>Hp()?.emulatorHosts?.[t],xI=t=>{const e=gI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Z2=()=>Hp()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vI(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[eu(JSON.stringify(n)),eu(JSON.stringify(a)),""].join(".")}const Zi={};function wI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Zi))Zi[e]?t.emulator.push(e):t.prod.push(e);return t}function EI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Dv=!1;function _I(t,e){if(typeof window>"u"||typeof document>"u"||!Gp(window.location.host)||Zi[t]===e||Zi[t]||Dv)return;Zi[t]=e;function n(h){return`__firebase__banner__${h}`}const r="__firebase__banner",o=wI().prod.length>0;function a(){const h=document.getElementById(r);h&&h.remove()}function l(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function u(h,x){h.setAttribute("width","24"),h.setAttribute("id",x),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function d(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{Dv=!0,a()},h}function f(h,x){h.setAttribute("id",x),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function m(){const h=EI(r),x=n("text"),y=document.getElementById(x)||document.createElement("span"),b=n("learnmore"),j=document.getElementById(b)||document.createElement("a"),_=n("preprendIcon"),E=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const S=h.element;l(S),f(j,b);const R=d();u(E,_),S.append(E,y,j,R),document.body.appendChild(S)}o?(y.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SI(){const t=Hp()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jI(){return!SI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CI(){try{return typeof indexedDB=="object"}catch{return!1}}function kI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="FirebaseError";class si extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=TI,Object.setPrototypeOf(this,si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eE.prototype.create)}}class eE{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?AI(o,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new si(s,l,r)}}function AI(t,e){return t.replace(PI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const PI=/\{\$([^}]+)}/g;function tu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],a=e[s];if(Ov(o)&&Ov(a)){if(!tu(o,a))return!1}else if(o!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ov(t){return t!==null&&typeof t=="object"}class Aa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MI(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ds){return this.instances.has(e)}getOptions(e=ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:II(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ds){return this.component?this.component.multipleInstances?e:ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function II(t){return t===ds?void 0:t}function MI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const OI={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},LI=me.INFO,VI={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},FI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=VI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tE{constructor(e){this.name=e,this._logLevel=LI,this._logHandler=FI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const $I=(t,e)=>e.some(n=>t instanceof n);let Lv,Vv;function zI(){return Lv||(Lv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BI(){return Vv||(Vv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nE=new WeakMap,Xf=new WeakMap,rE=new WeakMap,yh=new WeakMap,Kp=new WeakMap;function UI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(zr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&nE.set(n,t)}).catch(()=>{}),Kp.set(e,t),e}function HI(t){if(Xf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Xf.set(t,e)}let Jf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function GI(t){Jf=t(Jf)}function KI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(vh(this),e,...n);return rE.set(r,e.sort?e.sort():[e]),zr(r)}:BI().includes(t)?function(...e){return t.apply(vh(this),e),zr(nE.get(this))}:function(...e){return zr(t.apply(vh(this),e))}}function WI(t){return typeof t=="function"?KI(t):(t instanceof IDBTransaction&&HI(t),$I(t,zI())?new Proxy(t,Jf):t)}function zr(t){if(t instanceof IDBRequest)return UI(t);if(yh.has(t))return yh.get(t);const e=WI(t);return e!==t&&(yh.set(t,e),Kp.set(e,t)),e}const vh=t=>Kp.get(t);function qI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const a=indexedDB.open(t,e),l=zr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(zr(a.result),u.oldVersion,u.newVersion,zr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const QI=["get","getKey","getAll","getAllKeys","count"],YI=["put","add","delete","clear"],bh=new Map;function Fv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bh.get(e))return bh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=YI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||QI.includes(n)))return;const o=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return bh.set(e,o),o}GI(t=>({...t,get:(e,n,r)=>Fv(e,n)||t.get(e,n,r),has:(e,n)=>!!Fv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(JI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function JI(t){return t.getComponent()?.type==="VERSION"}const Zf="@firebase/app",$v="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new tE("@firebase/app"),ZI="@firebase/app-compat",e3="@firebase/analytics-compat",t3="@firebase/analytics",n3="@firebase/app-check-compat",r3="@firebase/app-check",s3="@firebase/auth",o3="@firebase/auth-compat",i3="@firebase/database",a3="@firebase/data-connect",l3="@firebase/database-compat",c3="@firebase/functions",u3="@firebase/functions-compat",d3="@firebase/installations",h3="@firebase/installations-compat",f3="@firebase/messaging",m3="@firebase/messaging-compat",p3="@firebase/performance",g3="@firebase/performance-compat",x3="@firebase/remote-config",y3="@firebase/remote-config-compat",v3="@firebase/storage",b3="@firebase/storage-compat",w3="@firebase/firestore",E3="@firebase/ai",_3="@firebase/firestore-compat",N3="firebase",S3="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu="[DEFAULT]",j3={[Zf]:"fire-core",[ZI]:"fire-core-compat",[t3]:"fire-analytics",[e3]:"fire-analytics-compat",[r3]:"fire-app-check",[n3]:"fire-app-check-compat",[s3]:"fire-auth",[o3]:"fire-auth-compat",[i3]:"fire-rtdb",[a3]:"fire-data-connect",[l3]:"fire-rtdb-compat",[c3]:"fire-fn",[u3]:"fire-fn-compat",[d3]:"fire-iid",[h3]:"fire-iid-compat",[f3]:"fire-fcm",[m3]:"fire-fcm-compat",[p3]:"fire-perf",[g3]:"fire-perf-compat",[x3]:"fire-rc",[y3]:"fire-rc-compat",[v3]:"fire-gcs",[b3]:"fire-gcs-compat",[w3]:"fire-fst",[_3]:"fire-fst-compat",[E3]:"fire-vertex","fire-js":"fire-js",[N3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=new Map,C3=new Map,em=new Map;function zv(t,e){try{t.container.addComponent(e)}catch(n){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function su(t){const e=t.name;if(em.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;em.set(e,t);for(const n of ru.values())zv(n,t);for(const n of C3.values())zv(n,t);return!0}function sE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function k3(t,e,n=nu){sE(t,e).clearInstance(n)}function T3(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new eE("app","Firebase",A3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Aa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3=S3;function oE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:nu,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Br.create("bad-app-name",{appName:String(s)});if(n||(n=Z2()),!n)throw Br.create("no-options");const o=ru.get(s);if(o){if(tu(n,o.options)&&tu(r,o.config))return o;throw Br.create("duplicate-app",{appName:s})}const a=new DI(s);for(const u of em.values())a.addComponent(u);const l=new P3(n,r,a);return ru.set(s,l),l}function I3(t=nu){const e=ru.get(t);if(!e&&t===nu&&Z2())return oE();if(!e)throw Br.create("no-app",{appName:t});return e}function No(t,e,n){let r=j3[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(a.join(" "));return}su(new Aa(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3="firebase-heartbeat-database",D3=1,Pa="firebase-heartbeat-store";let wh=null;function iE(){return wh||(wh=qI(M3,D3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Pa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Br.create("idb-open",{originalErrorMessage:t.message})})),wh}async function O3(t){try{const n=(await iE()).transaction(Pa),r=await n.objectStore(Pa).get(aE(t));return await n.done,r}catch(e){if(e instanceof si)fr.warn(e.message);else{const n=Br.create("idb-get",{originalErrorMessage:e?.message});fr.warn(n.message)}}}async function Bv(t,e){try{const r=(await iE()).transaction(Pa,"readwrite");await r.objectStore(Pa).put(e,aE(t)),await r.done}catch(n){if(n instanceof si)fr.warn(n.message);else{const r=Br.create("idb-set",{originalErrorMessage:n?.message});fr.warn(r.message)}}}function aE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3=1024,V3=30;class F3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new z3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Uv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>V3){const s=B3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){fr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Uv(),{heartbeatsToSend:n,unsentEntries:r}=$3(this._heartbeatsCache.heartbeats),s=eu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return fr.warn(e),""}}}function Uv(){return new Date().toISOString().substring(0,10)}function $3(t,e=L3){const n=[];let r=t.slice();for(const s of t){const o=n.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),Hv(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Hv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class z3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CI()?kI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await O3(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Bv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Bv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Hv(t){return eu(JSON.stringify({version:2,heartbeats:t})).length}function B3(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U3(t){su(new Aa("platform-logger",e=>new XI(e),"PRIVATE")),su(new Aa("heartbeat",e=>new F3(e),"PRIVATE")),No(Zf,$v,t),No(Zf,$v,"esm2020"),No("fire-js","")}U3("");var H3="firebase",G3="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */No(H3,G3,"app");var Gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wp;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,w){function C(){}C.prototype=w.prototype,N.F=w.prototype,N.prototype=new C,N.prototype.constructor=N,N.D=function(A,I,M){for(var k=Array(arguments.length-2),O=2;O<arguments.length;O++)k[O-2]=arguments[O];return w.prototype[I].apply(A,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,w,C){C||(C=0);const A=Array(16);if(typeof w=="string")for(var I=0;I<16;++I)A[I]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(I=0;I<16;++I)A[I]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=N.g[0],C=N.g[1],I=N.g[2];let M=N.g[3],k;k=w+(M^C&(I^M))+A[0]+3614090360&4294967295,w=C+(k<<7&4294967295|k>>>25),k=M+(I^w&(C^I))+A[1]+3905402710&4294967295,M=w+(k<<12&4294967295|k>>>20),k=I+(C^M&(w^C))+A[2]+606105819&4294967295,I=M+(k<<17&4294967295|k>>>15),k=C+(w^I&(M^w))+A[3]+3250441966&4294967295,C=I+(k<<22&4294967295|k>>>10),k=w+(M^C&(I^M))+A[4]+4118548399&4294967295,w=C+(k<<7&4294967295|k>>>25),k=M+(I^w&(C^I))+A[5]+1200080426&4294967295,M=w+(k<<12&4294967295|k>>>20),k=I+(C^M&(w^C))+A[6]+2821735955&4294967295,I=M+(k<<17&4294967295|k>>>15),k=C+(w^I&(M^w))+A[7]+4249261313&4294967295,C=I+(k<<22&4294967295|k>>>10),k=w+(M^C&(I^M))+A[8]+1770035416&4294967295,w=C+(k<<7&4294967295|k>>>25),k=M+(I^w&(C^I))+A[9]+2336552879&4294967295,M=w+(k<<12&4294967295|k>>>20),k=I+(C^M&(w^C))+A[10]+4294925233&4294967295,I=M+(k<<17&4294967295|k>>>15),k=C+(w^I&(M^w))+A[11]+2304563134&4294967295,C=I+(k<<22&4294967295|k>>>10),k=w+(M^C&(I^M))+A[12]+1804603682&4294967295,w=C+(k<<7&4294967295|k>>>25),k=M+(I^w&(C^I))+A[13]+4254626195&4294967295,M=w+(k<<12&4294967295|k>>>20),k=I+(C^M&(w^C))+A[14]+2792965006&4294967295,I=M+(k<<17&4294967295|k>>>15),k=C+(w^I&(M^w))+A[15]+1236535329&4294967295,C=I+(k<<22&4294967295|k>>>10),k=w+(I^M&(C^I))+A[1]+4129170786&4294967295,w=C+(k<<5&4294967295|k>>>27),k=M+(C^I&(w^C))+A[6]+3225465664&4294967295,M=w+(k<<9&4294967295|k>>>23),k=I+(w^C&(M^w))+A[11]+643717713&4294967295,I=M+(k<<14&4294967295|k>>>18),k=C+(M^w&(I^M))+A[0]+3921069994&4294967295,C=I+(k<<20&4294967295|k>>>12),k=w+(I^M&(C^I))+A[5]+3593408605&4294967295,w=C+(k<<5&4294967295|k>>>27),k=M+(C^I&(w^C))+A[10]+38016083&4294967295,M=w+(k<<9&4294967295|k>>>23),k=I+(w^C&(M^w))+A[15]+3634488961&4294967295,I=M+(k<<14&4294967295|k>>>18),k=C+(M^w&(I^M))+A[4]+3889429448&4294967295,C=I+(k<<20&4294967295|k>>>12),k=w+(I^M&(C^I))+A[9]+568446438&4294967295,w=C+(k<<5&4294967295|k>>>27),k=M+(C^I&(w^C))+A[14]+3275163606&4294967295,M=w+(k<<9&4294967295|k>>>23),k=I+(w^C&(M^w))+A[3]+4107603335&4294967295,I=M+(k<<14&4294967295|k>>>18),k=C+(M^w&(I^M))+A[8]+1163531501&4294967295,C=I+(k<<20&4294967295|k>>>12),k=w+(I^M&(C^I))+A[13]+2850285829&4294967295,w=C+(k<<5&4294967295|k>>>27),k=M+(C^I&(w^C))+A[2]+4243563512&4294967295,M=w+(k<<9&4294967295|k>>>23),k=I+(w^C&(M^w))+A[7]+1735328473&4294967295,I=M+(k<<14&4294967295|k>>>18),k=C+(M^w&(I^M))+A[12]+2368359562&4294967295,C=I+(k<<20&4294967295|k>>>12),k=w+(C^I^M)+A[5]+4294588738&4294967295,w=C+(k<<4&4294967295|k>>>28),k=M+(w^C^I)+A[8]+2272392833&4294967295,M=w+(k<<11&4294967295|k>>>21),k=I+(M^w^C)+A[11]+1839030562&4294967295,I=M+(k<<16&4294967295|k>>>16),k=C+(I^M^w)+A[14]+4259657740&4294967295,C=I+(k<<23&4294967295|k>>>9),k=w+(C^I^M)+A[1]+2763975236&4294967295,w=C+(k<<4&4294967295|k>>>28),k=M+(w^C^I)+A[4]+1272893353&4294967295,M=w+(k<<11&4294967295|k>>>21),k=I+(M^w^C)+A[7]+4139469664&4294967295,I=M+(k<<16&4294967295|k>>>16),k=C+(I^M^w)+A[10]+3200236656&4294967295,C=I+(k<<23&4294967295|k>>>9),k=w+(C^I^M)+A[13]+681279174&4294967295,w=C+(k<<4&4294967295|k>>>28),k=M+(w^C^I)+A[0]+3936430074&4294967295,M=w+(k<<11&4294967295|k>>>21),k=I+(M^w^C)+A[3]+3572445317&4294967295,I=M+(k<<16&4294967295|k>>>16),k=C+(I^M^w)+A[6]+76029189&4294967295,C=I+(k<<23&4294967295|k>>>9),k=w+(C^I^M)+A[9]+3654602809&4294967295,w=C+(k<<4&4294967295|k>>>28),k=M+(w^C^I)+A[12]+3873151461&4294967295,M=w+(k<<11&4294967295|k>>>21),k=I+(M^w^C)+A[15]+530742520&4294967295,I=M+(k<<16&4294967295|k>>>16),k=C+(I^M^w)+A[2]+3299628645&4294967295,C=I+(k<<23&4294967295|k>>>9),k=w+(I^(C|~M))+A[0]+4096336452&4294967295,w=C+(k<<6&4294967295|k>>>26),k=M+(C^(w|~I))+A[7]+1126891415&4294967295,M=w+(k<<10&4294967295|k>>>22),k=I+(w^(M|~C))+A[14]+2878612391&4294967295,I=M+(k<<15&4294967295|k>>>17),k=C+(M^(I|~w))+A[5]+4237533241&4294967295,C=I+(k<<21&4294967295|k>>>11),k=w+(I^(C|~M))+A[12]+1700485571&4294967295,w=C+(k<<6&4294967295|k>>>26),k=M+(C^(w|~I))+A[3]+2399980690&4294967295,M=w+(k<<10&4294967295|k>>>22),k=I+(w^(M|~C))+A[10]+4293915773&4294967295,I=M+(k<<15&4294967295|k>>>17),k=C+(M^(I|~w))+A[1]+2240044497&4294967295,C=I+(k<<21&4294967295|k>>>11),k=w+(I^(C|~M))+A[8]+1873313359&4294967295,w=C+(k<<6&4294967295|k>>>26),k=M+(C^(w|~I))+A[15]+4264355552&4294967295,M=w+(k<<10&4294967295|k>>>22),k=I+(w^(M|~C))+A[6]+2734768916&4294967295,I=M+(k<<15&4294967295|k>>>17),k=C+(M^(I|~w))+A[13]+1309151649&4294967295,C=I+(k<<21&4294967295|k>>>11),k=w+(I^(C|~M))+A[4]+4149444226&4294967295,w=C+(k<<6&4294967295|k>>>26),k=M+(C^(w|~I))+A[11]+3174756917&4294967295,M=w+(k<<10&4294967295|k>>>22),k=I+(w^(M|~C))+A[2]+718787259&4294967295,I=M+(k<<15&4294967295|k>>>17),k=C+(M^(I|~w))+A[9]+3951481745&4294967295,N.g[0]=N.g[0]+w&4294967295,N.g[1]=N.g[1]+(I+(k<<21&4294967295|k>>>11))&4294967295,N.g[2]=N.g[2]+I&4294967295,N.g[3]=N.g[3]+M&4294967295}r.prototype.v=function(N,w){w===void 0&&(w=N.length);const C=w-this.blockSize,A=this.C;let I=this.h,M=0;for(;M<w;){if(I==0)for(;M<=C;)s(this,N,M),M+=this.blockSize;if(typeof N=="string"){for(;M<w;)if(A[I++]=N.charCodeAt(M++),I==this.blockSize){s(this,A),I=0;break}}else for(;M<w;)if(A[I++]=N[M++],I==this.blockSize){s(this,A),I=0;break}}this.h=I,this.o+=w},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var w=1;w<N.length-8;++w)N[w]=0;w=this.o*8;for(var C=N.length-8;C<N.length;++C)N[C]=w&255,w/=256;for(this.v(N),N=Array(16),w=0,C=0;C<4;++C)for(let A=0;A<32;A+=8)N[w++]=this.g[C]>>>A&255;return N};function o(N,w){var C=l;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=w(N)}function a(N,w){this.h=w;const C=[];let A=!0;for(let I=N.length-1;I>=0;I--){const M=N[I]|0;A&&M==w||(C[I]=M,A=!1)}this.g=C}var l={};function u(N){return-128<=N&&N<128?o(N,function(w){return new a([w|0],w<0?-1:0)}):new a([N|0],N<0?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return m;if(N<0)return j(d(-N));const w=[];let C=1;for(let A=0;N>=C;A++)w[A]=N/C|0,C*=4294967296;return new a(w,0)}function f(N,w){if(N.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(N.charAt(0)=="-")return j(f(N.substring(1),w));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=d(Math.pow(w,8));let A=m;for(let M=0;M<N.length;M+=8){var I=Math.min(8,N.length-M);const k=parseInt(N.substring(M,M+I),w);I<8?(I=d(Math.pow(w,I)),A=A.j(I).add(d(k))):(A=A.j(C),A=A.add(d(k)))}return A}var m=u(0),h=u(1),x=u(16777216);t=a.prototype,t.m=function(){if(b(this))return-j(this).m();let N=0,w=1;for(let C=0;C<this.g.length;C++){const A=this.i(C);N+=(A>=0?A:4294967296+A)*w,w*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(y(this))return"0";if(b(this))return"-"+j(this).toString(N);const w=d(Math.pow(N,6));var C=this;let A="";for(;;){const I=R(C,w).g;C=_(C,I.j(w));let M=((C.g.length>0?C.g[0]:C.h)>>>0).toString(N);if(C=I,y(C))return M+A;for(;M.length<6;)M="0"+M;A=M+A}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function y(N){if(N.h!=0)return!1;for(let w=0;w<N.g.length;w++)if(N.g[w]!=0)return!1;return!0}function b(N){return N.h==-1}t.l=function(N){return N=_(this,N),b(N)?-1:y(N)?0:1};function j(N){const w=N.g.length,C=[];for(let A=0;A<w;A++)C[A]=~N.g[A];return new a(C,~N.h).add(h)}t.abs=function(){return b(this)?j(this):this},t.add=function(N){const w=Math.max(this.g.length,N.g.length),C=[];let A=0;for(let I=0;I<=w;I++){let M=A+(this.i(I)&65535)+(N.i(I)&65535),k=(M>>>16)+(this.i(I)>>>16)+(N.i(I)>>>16);A=k>>>16,M&=65535,k&=65535,C[I]=k<<16|M}return new a(C,C[C.length-1]&-2147483648?-1:0)};function _(N,w){return N.add(j(w))}t.j=function(N){if(y(this)||y(N))return m;if(b(this))return b(N)?j(this).j(j(N)):j(j(this).j(N));if(b(N))return j(this.j(j(N)));if(this.l(x)<0&&N.l(x)<0)return d(this.m()*N.m());const w=this.g.length+N.g.length,C=[];for(var A=0;A<2*w;A++)C[A]=0;for(A=0;A<this.g.length;A++)for(let I=0;I<N.g.length;I++){const M=this.i(A)>>>16,k=this.i(A)&65535,O=N.i(I)>>>16,z=N.i(I)&65535;C[2*A+2*I]+=k*z,E(C,2*A+2*I),C[2*A+2*I+1]+=M*z,E(C,2*A+2*I+1),C[2*A+2*I+1]+=k*O,E(C,2*A+2*I+1),C[2*A+2*I+2]+=M*O,E(C,2*A+2*I+2)}for(N=0;N<w;N++)C[N]=C[2*N+1]<<16|C[2*N];for(N=w;N<2*w;N++)C[N]=0;return new a(C,0)};function E(N,w){for(;(N[w]&65535)!=N[w];)N[w+1]+=N[w]>>>16,N[w]&=65535,w++}function S(N,w){this.g=N,this.h=w}function R(N,w){if(y(w))throw Error("division by zero");if(y(N))return new S(m,m);if(b(N))return w=R(j(N),w),new S(j(w.g),j(w.h));if(b(w))return w=R(N,j(w)),new S(j(w.g),w.h);if(N.g.length>30){if(b(N)||b(w))throw Error("slowDivide_ only works with positive integers.");for(var C=h,A=w;A.l(N)<=0;)C=T(C),A=T(A);var I=D(C,1),M=D(A,1);for(A=D(A,2),C=D(C,2);!y(A);){var k=M.add(A);k.l(N)<=0&&(I=I.add(C),M=k),A=D(A,1),C=D(C,1)}return w=_(N,I.j(w)),new S(I,w)}for(I=m;N.l(w)>=0;){for(C=Math.max(1,Math.floor(N.m()/w.m())),A=Math.ceil(Math.log(C)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),M=d(C),k=M.j(w);b(k)||k.l(N)>0;)C-=A,M=d(C),k=M.j(w);y(M)&&(M=h),I=I.add(M),N=_(N,k)}return new S(I,N)}t.B=function(N){return R(this,N).h},t.and=function(N){const w=Math.max(this.g.length,N.g.length),C=[];for(let A=0;A<w;A++)C[A]=this.i(A)&N.i(A);return new a(C,this.h&N.h)},t.or=function(N){const w=Math.max(this.g.length,N.g.length),C=[];for(let A=0;A<w;A++)C[A]=this.i(A)|N.i(A);return new a(C,this.h|N.h)},t.xor=function(N){const w=Math.max(this.g.length,N.g.length),C=[];for(let A=0;A<w;A++)C[A]=this.i(A)^N.i(A);return new a(C,this.h^N.h)};function T(N){const w=N.g.length+1,C=[];for(let A=0;A<w;A++)C[A]=N.i(A)<<1|N.i(A-1)>>>31;return new a(C,N.h)}function D(N,w){const C=w>>5;w%=32;const A=N.g.length-C,I=[];for(let M=0;M<A;M++)I[M]=w>0?N.i(M+C)>>>w|N.i(M+C+1)<<32-w:N.i(M+C);return new a(I,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,Wp=a}).apply(typeof Gv<"u"?Gv:typeof self<"u"?self:typeof window<"u"?window:{});var Kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lE,zi,cE,yc,tm,uE,dE,hE;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kl=="object"&&Kl];for(var g=0;g<c.length;++g){var v=c[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function s(c,g){if(g)e:{var v=r;c=c.split(".");for(var P=0;P<c.length-1;P++){var V=c[P];if(!(V in v))break e;v=v[V]}c=c[c.length-1],P=v[c],g=g(P),g!=P&&g!=null&&e(v,c,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(c){return c||function(g){var v=[],P;for(P in g)Object.prototype.hasOwnProperty.call(g,P)&&v.push([P,g[P]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function u(c,g,v){return c.call.apply(c.bind,arguments)}function d(c,g,v){return d=u,d.apply(null,arguments)}function f(c,g){var v=Array.prototype.slice.call(arguments,1);return function(){var P=v.slice();return P.push.apply(P,arguments),c.apply(this,P)}}function m(c,g){function v(){}v.prototype=g.prototype,c.Z=g.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(P,V,F){for(var G=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)G[ie-2]=arguments[ie];return g.prototype[V].apply(P,G)}}var h=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function x(c){const g=c.length;if(g>0){const v=Array(g);for(let P=0;P<g;P++)v[P]=c[P];return v}return[]}function y(c,g){for(let P=1;P<arguments.length;P++){const V=arguments[P];var v=typeof V;if(v=v!="object"?v:V?Array.isArray(V)?"array":v:"null",v=="array"||v=="object"&&typeof V.length=="number"){v=c.length||0;const F=V.length||0;c.length=v+F;for(let G=0;G<F;G++)c[v+G]=V[G]}else c.push(V)}}class b{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function j(c){a.setTimeout(()=>{throw c},0)}function _(){var c=N;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class E{constructor(){this.h=this.g=null}add(g,v){const P=S.get();P.set(g,v),this.h?this.h.next=P:this.g=P,this.h=P}}var S=new b(()=>new R,c=>c.reset());class R{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let T,D=!1,N=new E,w=()=>{const c=Promise.resolve(void 0);T=()=>{c.then(C)}};function C(){for(var c;c=_();){try{c.h.call(c.g)}catch(v){j(v)}var g=S;g.j(c),g.h<100&&(g.h++,c.next=g.g,g.g=c)}D=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};a.addEventListener("test",v,g),a.removeEventListener("test",v,g)}catch{}return c}();function k(c){return/^[\s\xa0]*$/.test(c)}function O(c,g){I.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,g)}m(O,I),O.prototype.init=function(c,g){const v=this.type=c.type,P=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget,g||(v=="mouseover"?g=c.fromElement:v=="mouseout"&&(g=c.toElement)),this.relatedTarget=g,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&O.Z.h.call(this)},O.prototype.h=function(){O.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var z="closure_listenable_"+(Math.random()*1e6|0),H=0;function Y(c,g,v,P,V){this.listener=c,this.proxy=null,this.src=g,this.type=v,this.capture=!!P,this.ha=V,this.key=++H,this.da=this.fa=!1}function L(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function $(c,g,v){for(const P in c)g.call(v,c[P],P,c)}function W(c,g){for(const v in c)g.call(void 0,c[v],v,c)}function ne(c){const g={};for(const v in c)g[v]=c[v];return g}const le="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(c,g){let v,P;for(let V=1;V<arguments.length;V++){P=arguments[V];for(v in P)c[v]=P[v];for(let F=0;F<le.length;F++)v=le[F],Object.prototype.hasOwnProperty.call(P,v)&&(c[v]=P[v])}}function de(c){this.src=c,this.g={},this.h=0}de.prototype.add=function(c,g,v,P,V){const F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);const G=Ie(c,g,P,V);return G>-1?(g=c[G],v||(g.fa=!1)):(g=new Y(g,this.src,F,!!P,V),g.fa=v,c.push(g)),g};function tt(c,g){const v=g.type;if(v in c.g){var P=c.g[v],V=Array.prototype.indexOf.call(P,g,void 0),F;(F=V>=0)&&Array.prototype.splice.call(P,V,1),F&&(L(g),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Ie(c,g,v,P){for(let V=0;V<c.length;++V){const F=c[V];if(!F.da&&F.listener==g&&F.capture==!!v&&F.ha==P)return V}return-1}var re="closure_lm_"+(Math.random()*1e6|0),Yt={};function Kn(c,g,v,P,V){if(Array.isArray(g)){for(let F=0;F<g.length;F++)Kn(c,g[F],v,P,V);return null}return v=Yg(v),c&&c[z]?c.J(g,v,l(P)?!!P.capture:!1,V):pr(c,g,v,!1,P,V)}function pr(c,g,v,P,V,F){if(!g)throw Error("Invalid event type");const G=l(V)?!!V.capture:!!V;let ie=bd(c);if(ie||(c[re]=ie=new de(c)),v=ie.add(g,v,P,G,F),v.proxy)return v;if(P=ns(),v.proxy=P,P.src=c,P.listener=v,c.addEventListener)M||(V=G),V===void 0&&(V=!1),c.addEventListener(g.toString(),P,V);else if(c.attachEvent)c.attachEvent(Qg(g.toString()),P);else if(c.addListener&&c.removeListener)c.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ns(){function c(v){return g.call(c.src,c.listener,v)}const g=WS;return c}function Wn(c,g,v,P,V){if(Array.isArray(g))for(var F=0;F<g.length;F++)Wn(c,g[F],v,P,V);else P=l(P)?!!P.capture:!!P,v=Yg(v),c&&c[z]?(c=c.i,F=String(g).toString(),F in c.g&&(g=c.g[F],v=Ie(g,v,P,V),v>-1&&(L(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete c.g[F],c.h--)))):c&&(c=bd(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Ie(g,v,P,V)),(v=c>-1?g[c]:null)&&gr(v))}function gr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[z])tt(g.i,c);else{var v=c.type,P=c.proxy;g.removeEventListener?g.removeEventListener(v,P,c.capture):g.detachEvent?g.detachEvent(Qg(v),P):g.addListener&&g.removeListener&&g.removeListener(P),(v=bd(g))?(tt(v,c),v.h==0&&(v.src=null,g[re]=null)):L(c)}}}function Qg(c){return c in Yt?Yt[c]:Yt[c]="on"+c}function WS(c,g){if(c.da)c=!0;else{g=new O(g,this);const v=c.listener,P=c.ha||c.src;c.fa&&gr(c),c=v.call(P,g)}return c}function bd(c){return c=c[re],c instanceof de?c:null}var wd="__closure_events_fn_"+(Math.random()*1e9>>>0);function Yg(c){return typeof c=="function"?c:(c[wd]||(c[wd]=function(g){return c.handleEvent(g)}),c[wd])}function dt(){A.call(this),this.i=new de(this),this.M=this,this.G=null}m(dt,A),dt.prototype[z]=!0,dt.prototype.removeEventListener=function(c,g,v,P){Wn(this,c,g,v,P)};function yt(c,g){var v,P=c.G;if(P)for(v=[];P;P=P.G)v.push(P);if(c=c.M,P=g.type||g,typeof g=="string")g=new I(g,c);else if(g instanceof I)g.target=g.target||c;else{var V=g;g=new I(P,c),pe(g,V)}V=!0;let F,G;if(v)for(G=v.length-1;G>=0;G--)F=g.g=v[G],V=ul(F,P,!0,g)&&V;if(F=g.g=c,V=ul(F,P,!0,g)&&V,V=ul(F,P,!1,g)&&V,v)for(G=0;G<v.length;G++)F=g.g=v[G],V=ul(F,P,!1,g)&&V}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var c=this.i;for(const g in c.g){const v=c.g[g];for(let P=0;P<v.length;P++)L(v[P]);delete c.g[g],c.h--}}this.G=null},dt.prototype.J=function(c,g,v,P){return this.i.add(String(c),g,!1,v,P)},dt.prototype.K=function(c,g,v,P){return this.i.add(String(c),g,!0,v,P)};function ul(c,g,v,P){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();let V=!0;for(let F=0;F<g.length;++F){const G=g[F];if(G&&!G.da&&G.capture==v){const ie=G.listener,Be=G.ha||G.src;G.fa&&tt(c.i,G),V=ie.call(Be,P)!==!1&&V}}return V&&!P.defaultPrevented}function qS(c,g){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=d(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:a.setTimeout(c,g||0)}function Xg(c){c.g=qS(()=>{c.g=null,c.i&&(c.i=!1,Xg(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class QS extends A{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Xg(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ai(c){A.call(this),this.h=c,this.g={}}m(ai,A);var Jg=[];function Zg(c){$(c.g,function(g,v){this.g.hasOwnProperty(v)&&gr(g)},c),c.g={}}ai.prototype.N=function(){ai.Z.N.call(this),Zg(this)},ai.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ed=a.JSON.stringify,YS=a.JSON.parse,XS=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function ex(){}function tx(){}var li={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function _d(){I.call(this,"d")}m(_d,I);function Nd(){I.call(this,"c")}m(Nd,I);var rs={},nx=null;function dl(){return nx=nx||new dt}rs.Ia="serverreachability";function rx(c){I.call(this,rs.Ia,c)}m(rx,I);function ci(c){const g=dl();yt(g,new rx(g))}rs.STAT_EVENT="statevent";function sx(c,g){I.call(this,rs.STAT_EVENT,c),this.stat=g}m(sx,I);function vt(c){const g=dl();yt(g,new sx(g,c))}rs.Ja="timingevent";function ox(c,g){I.call(this,rs.Ja,c),this.size=g}m(ox,I);function ui(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},g)}function di(){this.g=!0}di.prototype.ua=function(){this.g=!1};function JS(c,g,v,P,V,F){c.info(function(){if(c.g)if(F){var G="",ie=F.split("&");for(let we=0;we<ie.length;we++){var Be=ie[we].split("=");if(Be.length>1){const We=Be[0];Be=Be[1];const kn=We.split("_");G=kn.length>=2&&kn[1]=="type"?G+(We+"="+Be+"&"):G+(We+"=redacted&")}}}else G=null;else G=F;return"XMLHTTP REQ ("+P+") [attempt "+V+"]: "+g+`
`+v+`
`+G})}function ZS(c,g,v,P,V,F,G){c.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+V+"]: "+g+`
`+v+`
`+F+" "+G})}function Ks(c,g,v,P){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+tj(c,v)+(P?" "+P:"")})}function ej(c,g){c.info(function(){return"TIMEOUT: "+g})}di.prototype.info=function(){};function tj(c,g){if(!c.g)return g;if(!g)return null;try{const F=JSON.parse(g);if(F){for(c=0;c<F.length;c++)if(Array.isArray(F[c])){var v=F[c];if(!(v.length<2)){var P=v[1];if(Array.isArray(P)&&!(P.length<1)){var V=P[0];if(V!="noop"&&V!="stop"&&V!="close")for(let G=1;G<P.length;G++)P[G]=""}}}}return Ed(F)}catch{return g}}var hl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ix={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ax;function Sd(){}m(Sd,ex),Sd.prototype.g=function(){return new XMLHttpRequest},ax=new Sd;function hi(c){return encodeURIComponent(String(c))}function nj(c){var g=1;c=c.split(":");const v=[];for(;g>0&&c.length;)v.push(c.shift()),g--;return c.length&&v.push(c.join(":")),v}function xr(c,g,v,P){this.j=c,this.i=g,this.l=v,this.S=P||1,this.V=new ai(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new lx}function lx(){this.i=null,this.g="",this.h=!1}var cx={},jd={};function Cd(c,g,v){c.M=1,c.A=ml(Cn(g)),c.u=v,c.R=!0,ux(c,null)}function ux(c,g){c.F=Date.now(),fl(c),c.B=Cn(c.A);var v=c.B,P=c.S;Array.isArray(P)||(P=[String(P)]),_x(v.i,"t",P),c.C=0,v=c.j.L,c.h=new lx,c.g=zx(c.j,v?g:null,!c.u),c.P>0&&(c.O=new QS(d(c.Y,c,c.g),c.P)),g=c.V,v=c.g,P=c.ba;var V="readystatechange";Array.isArray(V)||(V&&(Jg[0]=V.toString()),V=Jg);for(let F=0;F<V.length;F++){const G=Kn(v,V[F],P||g.handleEvent,!1,g.h||g);if(!G)break;g.g[G.key]=G}g=c.J?ne(c.J):{},c.u?(c.v||(c.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,g)):(c.v="GET",c.g.ea(c.B,c.v,null,g)),ci(),JS(c.i,c.v,c.B,c.l,c.S,c.u)}xr.prototype.ba=function(c){c=c.target;const g=this.O;g&&br(c)==3?g.j():this.Y(c)},xr.prototype.Y=function(c){try{if(c==this.g)e:{const ie=br(this.g),Be=this.g.ya(),we=this.g.ca();if(!(ie<3)&&(ie!=3||this.g&&(this.h.h||this.g.la()||Ax(this.g)))){this.K||ie!=4||Be==7||(Be==8||we<=0?ci(3):ci(2)),kd(this);var g=this.g.ca();this.X=g;var v=rj(this);if(this.o=g==200,ZS(this.i,this.v,this.B,this.l,this.S,ie,g),this.o){if(this.U&&!this.L){t:{if(this.g){var P,V=this.g;if((P=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(P)){var F=P;break t}}F=null}if(c=F)Ks(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Td(this,c);else{this.o=!1,this.m=3,vt(12),ss(this),fi(this);break e}}if(this.R){c=!0;let We;for(;!this.K&&this.C<v.length;)if(We=sj(this,v),We==jd){ie==4&&(this.m=4,vt(14),c=!1),Ks(this.i,this.l,null,"[Incomplete Response]");break}else if(We==cx){this.m=4,vt(15),Ks(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else Ks(this.i,this.l,We,null),Td(this,We);if(dx(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ie!=4||v.length!=0||this.h.h||(this.m=1,vt(16),c=!1),this.o=this.o&&c,!c)Ks(this.i,this.l,v,"[Invalid Chunked Response]"),ss(this),fi(this);else if(v.length>0&&!this.W){this.W=!0;var G=this.j;G.g==this&&G.aa&&!G.P&&(G.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Ld(G),G.P=!0,vt(11))}}else Ks(this.i,this.l,v,null),Td(this,v);ie==4&&ss(this),this.o&&!this.K&&(ie==4?Lx(this.j,this):(this.o=!1,fl(this)))}else yj(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,vt(12)):(this.m=0,vt(13)),ss(this),fi(this)}}}catch{}finally{}};function rj(c){if(!dx(c))return c.g.la();const g=Ax(c.g);if(g==="")return"";let v="";const P=g.length,V=br(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return ss(c),fi(c),"";c.h.i=new a.TextDecoder}for(let F=0;F<P;F++)c.h.h=!0,v+=c.h.i.decode(g[F],{stream:!(V&&F==P-1)});return g.length=0,c.h.g+=v,c.C=0,c.h.g}function dx(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function sj(c,g){var v=c.C,P=g.indexOf(`
`,v);return P==-1?jd:(v=Number(g.substring(v,P)),isNaN(v)?cx:(P+=1,P+v>g.length?jd:(g=g.slice(P,P+v),c.C=P+v,g)))}xr.prototype.cancel=function(){this.K=!0,ss(this)};function fl(c){c.T=Date.now()+c.H,hx(c,c.H)}function hx(c,g){if(c.D!=null)throw Error("WatchDog timer not null");c.D=ui(d(c.aa,c),g)}function kd(c){c.D&&(a.clearTimeout(c.D),c.D=null)}xr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(ej(this.i,this.B),this.M!=2&&(ci(),vt(17)),ss(this),this.m=2,fi(this)):hx(this,this.T-c)};function fi(c){c.j.I==0||c.K||Lx(c.j,c)}function ss(c){kd(c);var g=c.O;g&&typeof g.dispose=="function"&&g.dispose(),c.O=null,Zg(c.V),c.g&&(g=c.g,c.g=null,g.abort(),g.dispose())}function Td(c,g){try{var v=c.j;if(v.I!=0&&(v.g==c||Ad(v.h,c))){if(!c.L&&Ad(v.h,c)&&v.I==3){try{var P=v.Ba.g.parse(g)}catch{P=null}if(Array.isArray(P)&&P.length==3){var V=P;if(V[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)vl(v),xl(v);else break e;Od(v),vt(18)}}else v.xa=V[1],0<v.xa-v.K&&V[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=ui(d(v.Va,v),6e3));px(v.h)<=1&&v.ta&&(v.ta=void 0)}else is(v,11)}else if((c.L||v.g==c)&&vl(v),!k(g))for(V=v.Ba.g.parse(g),g=0;g<V.length;g++){let we=V[g];const We=we[0];if(!(We<=v.K))if(v.K=We,we=we[1],v.I==2)if(we[0]=="c"){v.M=we[1],v.ba=we[2];const kn=we[3];kn!=null&&(v.ka=kn,v.j.info("VER="+v.ka));const as=we[4];as!=null&&(v.za=as,v.j.info("SVER="+v.za));const wr=we[5];wr!=null&&typeof wr=="number"&&wr>0&&(P=1.5*wr,v.O=P,v.j.info("backChannelRequestTimeoutMs_="+P)),P=v;const Er=c.g;if(Er){const wl=Er.g?Er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wl){var F=P.h;F.g||wl.indexOf("spdy")==-1&&wl.indexOf("quic")==-1&&wl.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Pd(F,F.h),F.h=null))}if(P.G){const Vd=Er.g?Er.g.getResponseHeader("X-HTTP-Session-Id"):null;Vd&&(P.wa=Vd,Se(P.J,P.G,Vd))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),P=v;var G=c;if(P.na=$x(P,P.L?P.ba:null,P.W),G.L){gx(P.h,G);var ie=G,Be=P.O;Be&&(ie.H=Be),ie.D&&(kd(ie),fl(ie)),P.g=G}else Dx(P);v.i.length>0&&yl(v)}else we[0]!="stop"&&we[0]!="close"||is(v,7);else v.I==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?is(v,7):Dd(v):we[0]!="noop"&&v.l&&v.l.qa(we),v.A=0)}}ci(4)}catch{}}var oj=class{constructor(c,g){this.g=c,this.map=g}};function fx(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function mx(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function px(c){return c.h?1:c.g?c.g.size:0}function Ad(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Pd(c,g){c.g?c.g.add(g):c.h=g}function gx(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}fx.prototype.cancel=function(){if(this.i=xx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function xx(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const v of c.g.values())g=g.concat(v.G);return g}return x(c.i)}var yx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ij(c,g){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const P=c[v].indexOf("=");let V,F=null;P>=0?(V=c[v].substring(0,P),F=c[v].substring(P+1)):V=c[v],g(V,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function yr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;c instanceof yr?(this.l=c.l,mi(this,c.j),this.o=c.o,this.g=c.g,pi(this,c.u),this.h=c.h,Rd(this,Nx(c.i)),this.m=c.m):c&&(g=String(c).match(yx))?(this.l=!1,mi(this,g[1]||"",!0),this.o=gi(g[2]||""),this.g=gi(g[3]||"",!0),pi(this,g[4]),this.h=gi(g[5]||"",!0),Rd(this,g[6]||"",!0),this.m=gi(g[7]||"")):(this.l=!1,this.i=new yi(null,this.l))}yr.prototype.toString=function(){const c=[];var g=this.j;g&&c.push(xi(g,vx,!0),":");var v=this.g;return(v||g=="file")&&(c.push("//"),(g=this.o)&&c.push(xi(g,vx,!0),"@"),c.push(hi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(xi(v,v.charAt(0)=="/"?cj:lj,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",xi(v,dj)),c.join("")},yr.prototype.resolve=function(c){const g=Cn(this);let v=!!c.j;v?mi(g,c.j):v=!!c.o,v?g.o=c.o:v=!!c.g,v?g.g=c.g:v=c.u!=null;var P=c.h;if(v)pi(g,c.u);else if(v=!!c.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var V=g.h.lastIndexOf("/");V!=-1&&(P=g.h.slice(0,V+1)+P)}if(V=P,V==".."||V==".")P="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){P=V.lastIndexOf("/",0)==0,V=V.split("/");const F=[];for(let G=0;G<V.length;){const ie=V[G++];ie=="."?P&&G==V.length&&F.push(""):ie==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),P&&G==V.length&&F.push("")):(F.push(ie),P=!0)}P=F.join("/")}else P=V}return v?g.h=P:v=c.i.toString()!=="",v?Rd(g,Nx(c.i)):v=!!c.m,v&&(g.m=c.m),g};function Cn(c){return new yr(c)}function mi(c,g,v){c.j=v?gi(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function pi(c,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);c.u=g}else c.u=null}function Rd(c,g,v){g instanceof yi?(c.i=g,hj(c.i,c.l)):(v||(g=xi(g,uj)),c.i=new yi(g,c.l))}function Se(c,g,v){c.i.set(g,v)}function ml(c){return Se(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function gi(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function xi(c,g,v){return typeof c=="string"?(c=encodeURI(c).replace(g,aj),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function aj(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var vx=/[#\/\?@]/g,lj=/[#\?:]/g,cj=/[#\?]/g,uj=/[#\?@]/g,dj=/#/g;function yi(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function os(c){c.g||(c.g=new Map,c.h=0,c.i&&ij(c.i,function(g,v){c.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}t=yi.prototype,t.add=function(c,g){os(this),this.i=null,c=Ws(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(g),this.h+=1,this};function bx(c,g){os(c),g=Ws(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function wx(c,g){return os(c),g=Ws(c,g),c.g.has(g)}t.forEach=function(c,g){os(this),this.g.forEach(function(v,P){v.forEach(function(V){c.call(g,V,P,this)},this)},this)};function Ex(c,g){os(c);let v=[];if(typeof g=="string")wx(c,g)&&(v=v.concat(c.g.get(Ws(c,g))));else for(c=Array.from(c.g.values()),g=0;g<c.length;g++)v=v.concat(c[g]);return v}t.set=function(c,g){return os(this),this.i=null,c=Ws(this,c),wx(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},t.get=function(c,g){return c?(c=Ex(this,c),c.length>0?String(c[0]):g):g};function _x(c,g,v){bx(c,g),v.length>0&&(c.i=null,c.g.set(Ws(c,g),x(v)),c.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(let P=0;P<g.length;P++){var v=g[P];const V=hi(v);v=Ex(this,v);for(let F=0;F<v.length;F++){let G=V;v[F]!==""&&(G+="="+hi(v[F])),c.push(G)}}return this.i=c.join("&")};function Nx(c){const g=new yi;return g.i=c.i,c.g&&(g.g=new Map(c.g),g.h=c.h),g}function Ws(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function hj(c,g){g&&!c.j&&(os(c),c.i=null,c.g.forEach(function(v,P){const V=P.toLowerCase();P!=V&&(bx(this,P),_x(this,V,v))},c)),c.j=g}function fj(c,g){const v=new di;if(a.Image){const P=new Image;P.onload=f(vr,v,"TestLoadImage: loaded",!0,g,P),P.onerror=f(vr,v,"TestLoadImage: error",!1,g,P),P.onabort=f(vr,v,"TestLoadImage: abort",!1,g,P),P.ontimeout=f(vr,v,"TestLoadImage: timeout",!1,g,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=c}else g(!1)}function mj(c,g){const v=new di,P=new AbortController,V=setTimeout(()=>{P.abort(),vr(v,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:P.signal}).then(F=>{clearTimeout(V),F.ok?vr(v,"TestPingServer: ok",!0,g):vr(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),vr(v,"TestPingServer: error",!1,g)})}function vr(c,g,v,P,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),P(v)}catch{}}function pj(){this.g=new XS}function Id(c){this.i=c.Sb||null,this.h=c.ab||!1}m(Id,ex),Id.prototype.g=function(){return new pl(this.i,this.h)};function pl(c,g){dt.call(this),this.H=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(pl,dt),t=pl.prototype,t.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=g,this.readyState=1,bi(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(g.body=c),(this.H||a).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vi(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,bi(this)),this.g&&(this.readyState=3,bi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Sx(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Sx(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?vi(this):bi(this),this.readyState==3&&Sx(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,vi(this))},t.Na=function(c){this.g&&(this.response=c,vi(this))},t.ga=function(){this.g&&vi(this)};function vi(c){c.readyState=4,c.l=null,c.j=null,c.B=null,bi(c)}t.setRequestHeader=function(c,g){this.A.append(c,g)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=g.next();return c.join(`\r
`)};function bi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(pl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function jx(c){let g="";return $(c,function(v,P){g+=P,g+=":",g+=v,g+=`\r
`}),g}function Md(c,g,v){e:{for(P in v){var P=!1;break e}P=!0}P||(v=jx(v),typeof c=="string"?v!=null&&hi(v):Se(c,g,v))}function Me(c){dt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Me,dt);var gj=/^https?$/i,xj=["POST","PUT"];t=Me.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,g,v,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ax.g(),this.g.onreadystatechange=h(d(this.Ca,this));try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(F){Cx(this,F);return}if(c=v||"",v=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var V in P)v.set(V,P[V]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const F of P.keys())v.set(F,P.get(F));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(v.keys()).find(F=>F.toLowerCase()=="content-type"),V=a.FormData&&c instanceof a.FormData,!(Array.prototype.indexOf.call(xj,g,void 0)>=0)||P||V||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,G]of v)this.g.setRequestHeader(F,G);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(F){Cx(this,F)}};function Cx(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.o=5,kx(c),gl(c)}function kx(c){c.A||(c.A=!0,yt(c,"complete"),yt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,yt(this,"complete"),yt(this,"abort"),gl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gl(this,!0)),Me.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Tx(this):this.Xa())},t.Xa=function(){Tx(this)};function Tx(c){if(c.h&&typeof o<"u"){if(c.v&&br(c)==4)setTimeout(c.Ca.bind(c),0);else if(yt(c,"readystatechange"),br(c)==4){c.h=!1;try{const F=c.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var P;if(P=F===0){let G=String(c.D).match(yx)[1]||null;!G&&a.self&&a.self.location&&(G=a.self.location.protocol.slice(0,-1)),P=!gj.test(G?G.toLowerCase():"")}v=P}if(v)yt(c,"complete"),yt(c,"success");else{c.o=6;try{var V=br(c)>2?c.g.statusText:""}catch{V=""}c.l=V+" ["+c.ca()+"]",kx(c)}}finally{gl(c)}}}}function gl(c,g){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,g||yt(c,"ready");try{v.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function br(c){return c.g?c.g.readyState:0}t.ca=function(){try{return br(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),YS(g)}};function Ax(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function yj(c){const g={};c=(c.g&&br(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<c.length;P++){if(k(c[P]))continue;var v=nj(c[P]);const V=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const F=g[V]||[];g[V]=F,F.push(v)}W(g,function(P){return P.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wi(c,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||g}function Px(c){this.za=0,this.i=[],this.j=new di,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wi("baseRetryDelayMs",5e3,c),this.Za=wi("retryDelaySeedMs",1e4,c),this.Ta=wi("forwardChannelMaxRetries",2,c),this.va=wi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new fx(c&&c.concurrentRequestLimit),this.Ba=new pj,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Px.prototype,t.ka=8,t.I=1,t.connect=function(c,g,v,P){vt(0),this.W=c,this.H=g||{},v&&P!==void 0&&(this.H.OSID=v,this.H.OAID=P),this.F=this.X,this.J=$x(this,null,this.W),yl(this)};function Dd(c){if(Rx(c),c.I==3){var g=c.V++,v=Cn(c.J);if(Se(v,"SID",c.M),Se(v,"RID",g),Se(v,"TYPE","terminate"),Ei(c,v),g=new xr(c,c.j,g),g.M=2,g.A=ml(Cn(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&a.Image&&(new Image().src=g.A,v=!0),v||(g.g=zx(g.j,null),g.g.ea(g.A)),g.F=Date.now(),fl(g)}Fx(c)}function xl(c){c.g&&(Ld(c),c.g.cancel(),c.g=null)}function Rx(c){xl(c),c.v&&(a.clearTimeout(c.v),c.v=null),vl(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&a.clearTimeout(c.m),c.m=null)}function yl(c){if(!mx(c.h)&&!c.m){c.m=!0;var g=c.Ea;T||w(),D||(T(),D=!0),N.add(g,c),c.D=0}}function vj(c,g){return px(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=g.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=ui(d(c.Ea,c,g),Vx(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const V=new xr(this,this.j,c);let F=this.o;if(this.U&&(F?(F=ne(F),pe(F,this.U)):F=this.U),this.u!==null||this.R||(V.J=F,F=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var P=this.i[v];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(g+=P,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Mx(this,V,g),v=Cn(this.J),Se(v,"RID",c),Se(v,"CVER",22),this.G&&Se(v,"X-HTTP-Session-Id",this.G),Ei(this,v),F&&(this.R?g="headers="+hi(jx(F))+"&"+g:this.u&&Md(v,this.u,F)),Pd(this.h,V),this.Ra&&Se(v,"TYPE","init"),this.S?(Se(v,"$req",g),Se(v,"SID","null"),V.U=!0,Cd(V,v,null)):Cd(V,v,g),this.I=2}}else this.I==3&&(c?Ix(this,c):this.i.length==0||mx(this.h)||Ix(this))};function Ix(c,g){var v;g?v=g.l:v=c.V++;const P=Cn(c.J);Se(P,"SID",c.M),Se(P,"RID",v),Se(P,"AID",c.K),Ei(c,P),c.u&&c.o&&Md(P,c.u,c.o),v=new xr(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),g&&(c.i=g.G.concat(c.i)),g=Mx(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Pd(c.h,v),Cd(v,P,g)}function Ei(c,g){c.H&&$(c.H,function(v,P){Se(g,P,v)}),c.l&&$({},function(v,P){Se(g,P,v)})}function Mx(c,g,v){v=Math.min(c.i.length,v);const P=c.l?d(c.l.Ka,c.l,c):null;e:{var V=c.i;let ie=-1;for(;;){const Be=["count="+v];ie==-1?v>0?(ie=V[0].g,Be.push("ofs="+ie)):ie=0:Be.push("ofs="+ie);let we=!0;for(let We=0;We<v;We++){var F=V[We].g;const kn=V[We].map;if(F-=ie,F<0)ie=Math.max(0,V[We].g-100),we=!1;else try{F="req"+F+"_"||"";try{var G=kn instanceof Map?kn:Object.entries(kn);for(const[as,wr]of G){let Er=wr;l(wr)&&(Er=Ed(wr)),Be.push(F+as+"="+encodeURIComponent(Er))}}catch(as){throw Be.push(F+"type="+encodeURIComponent("_badmap")),as}}catch{P&&P(kn)}}if(we){G=Be.join("&");break e}}G=void 0}return c=c.i.splice(0,v),g.G=c,G}function Dx(c){if(!c.g&&!c.v){c.Y=1;var g=c.Da;T||w(),D||(T(),D=!0),N.add(g,c),c.A=0}}function Od(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=ui(d(c.Da,c),Vx(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Ox(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=ui(d(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,vt(10),xl(this),Ox(this))};function Ld(c){c.B!=null&&(a.clearTimeout(c.B),c.B=null)}function Ox(c){c.g=new xr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var g=Cn(c.na);Se(g,"RID","rpc"),Se(g,"SID",c.M),Se(g,"AID",c.K),Se(g,"CI",c.F?"0":"1"),!c.F&&c.ia&&Se(g,"TO",c.ia),Se(g,"TYPE","xmlhttp"),Ei(c,g),c.u&&c.o&&Md(g,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=ml(Cn(g)),v.u=null,v.R=!0,ux(v,c)}t.Va=function(){this.C!=null&&(this.C=null,xl(this),Od(this),vt(19))};function vl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Lx(c,g){var v=null;if(c.g==g){vl(c),Ld(c),c.g=null;var P=2}else if(Ad(c.h,g))v=g.G,gx(c.h,g),P=1;else return;if(c.I!=0){if(g.o)if(P==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var V=c.D;P=dl(),yt(P,new ox(P,v)),yl(c)}else Dx(c);else if(V=g.m,V==3||V==0&&g.X>0||!(P==1&&vj(c,g)||P==2&&Od(c)))switch(v&&v.length>0&&(g=c.h,g.i=g.i.concat(v)),V){case 1:is(c,5);break;case 4:is(c,10);break;case 3:is(c,6);break;default:is(c,2)}}}function Vx(c,g){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*g}function is(c,g){if(c.j.info("Error code "+g),g==2){var v=d(c.bb,c),P=c.Ua;const V=!P;P=new yr(P||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||mi(P,"https"),ml(P),V?fj(P.toString(),v):mj(P.toString(),v)}else vt(2);c.I=0,c.l&&c.l.pa(g),Fx(c),Rx(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function Fx(c){if(c.I=0,c.ja=[],c.l){const g=xx(c.h);(g.length!=0||c.i.length!=0)&&(y(c.ja,g),y(c.ja,c.i),c.h.i.length=0,x(c.i),c.i.length=0),c.l.oa()}}function $x(c,g,v){var P=v instanceof yr?Cn(v):new yr(v);if(P.g!="")g&&(P.g=g+"."+P.g),pi(P,P.u);else{var V=a.location;P=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;const F=new yr(null);P&&mi(F,P),g&&(F.g=g),V&&pi(F,V),v&&(F.h=v),P=F}return v=c.G,g=c.wa,v&&g&&Se(P,v,g),Se(P,"VER",c.ka),Ei(c,P),P}function zx(c,g,v){if(g&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Aa&&!c.ma?new Me(new Id({ab:v})):new Me(c.ma),g.Fa(c.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bx(){}t=Bx.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function bl(){}bl.prototype.g=function(c,g){return new Lt(c,g)};function Lt(c,g){dt.call(this),this.g=new Px(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(c?c["X-WebChannel-Client-Profile"]=g.sa:c={"X-WebChannel-Client-Profile":g.sa}),this.g.U=c,(c=g&&g.Qb)&&!k(c)&&(this.g.u=c),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!k(g)&&(this.g.G=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new qs(this)}m(Lt,dt),Lt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Dd(this.g)},Lt.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=Ed(c),c=v);g.i.push(new oj(g.Ya++,c)),g.I==3&&yl(g)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Dd(this.g),delete this.g,Lt.Z.N.call(this)};function Ux(c){_d.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const v in g){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}m(Ux,_d);function Hx(){Nd.call(this),this.status=1}m(Hx,Nd);function qs(c){this.g=c}m(qs,Bx),qs.prototype.ra=function(){yt(this.g,"a")},qs.prototype.qa=function(c){yt(this.g,new Ux(c))},qs.prototype.pa=function(c){yt(this.g,new Hx)},qs.prototype.oa=function(){yt(this.g,"b")},bl.prototype.createWebChannel=bl.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,hE=function(){return new bl},dE=function(){return dl()},uE=rs,tm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},hl.NO_ERROR=0,hl.TIMEOUT=8,hl.HTTP_ERROR=6,yc=hl,ix.COMPLETE="complete",cE=ix,tx.EventType=li,li.OPEN="a",li.CLOSE="b",li.ERROR="c",li.MESSAGE="d",dt.prototype.listen=dt.prototype.J,zi=tx,Me.prototype.listenOnce=Me.prototype.K,Me.prototype.getLastError=Me.prototype.Ha,Me.prototype.getLastErrorCode=Me.prototype.ya,Me.prototype.getStatus=Me.prototype.ca,Me.prototype.getResponseJson=Me.prototype.La,Me.prototype.getResponseText=Me.prototype.la,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Fa,lE=Me}).apply(typeof Kl<"u"?Kl:typeof self<"u"?self:typeof window<"u"?window:{});const Kv="@firebase/firestore",Wv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oi="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new tE("@firebase/firestore");function to(){return Ds.logLevel}function ee(t,...e){if(Ds.logLevel<=me.DEBUG){const n=e.map(qp);Ds.debug(`Firestore (${oi}): ${t}`,...n)}}function el(t,...e){if(Ds.logLevel<=me.ERROR){const n=e.map(qp);Ds.error(`Firestore (${oi}): ${t}`,...n)}}function Ju(t,...e){if(Ds.logLevel<=me.WARN){const n=e.map(qp);Ds.warn(`Firestore (${oi}): ${t}`,...n)}}function qp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,fE(t,r,n)}function fE(t,e,n){let r=`FIRESTORE (${oi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw el(r),new Error(r)}function _t(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||fE(e,s,r)}function ut(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends si{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class K3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pt.UNAUTHENTICATED))}shutdown(){}}class W3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class q3{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_t(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new So;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new So,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new So)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_t(typeof r.accessToken=="string",31837,{l:r}),new mE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string",2055,{h:e}),new pt(e)}}class Q3{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Y3{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Q3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class X3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,T3(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){_t(this.o===void 0,3512);const r=o=>{o.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,ee("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new qv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_t(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new qv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=J3(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function ve(t,e){return t<e?-1:t>e?1:0}function nm(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),o=e.charAt(r);if(s!==o)return Eh(s)===Eh(o)?ve(s,o):Eh(s)?1:-1}return ve(t.length,e.length)}const Z3=55296,e5=57343;function Eh(t){const e=t.charCodeAt(0);return e>=Z3&&e<=e5}function zo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="__name__";class In{constructor(e,n,r){n===void 0?n=0:n>e.length&&ge(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ge(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return In.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof In?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=In.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return ve(e.length,n.length)}static compareSegments(e,n){const r=In.isNumericId(e),s=In.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?In.extractNumericId(e).compare(In.extractNumericId(n)):nm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wp.fromString(e.substring(4,e.length-2))}}class Xe extends In{construct(e,n,r){return new Xe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Xe(n)}static emptyPath(){return new Xe([])}}const t5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wt extends In{construct(e,n,r){return new wt(e,n,r)}static isValidIdentifier(e){return t5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Qv}static keyField(){return new wt([Qv])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new se(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new se(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new se(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(o(),s++)}if(o(),a)throw new se(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wt(n)}static emptyPath(){return new wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(Xe.fromString(e))}static fromName(e){return new he(Xe.fromString(e).popFirst(5))}static empty(){return new he(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Xe(e.slice()))}}function n5(t,e,n,r){if(e===!0&&r===!0)throw new se(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function r5(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function s5(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge(12329,{type:typeof t})}function Qp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=s5(t);throw new se(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t,e){const n={typeString:t};return e&&(n.value=e),n}function tl(t,e){if(!r5(t))throw new se(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new se(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=-62135596800,Xv=1e6;class Ge{static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Xv);return new Ge(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Yv)throw new se(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Xv}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ge._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tl(e,Ge._jsonSchema))return new Ge(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Yv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ge._jsonSchemaVersion="firestore/timestamp/1.0",Ge._jsonSchema={type:ze("string",Ge._jsonSchemaVersion),seconds:ze("number"),nanoseconds:ze("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new Ge(0,0))}static max(){return new Te(new Ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=-1;function o5(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Te.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new qr(s,he.empty(),e)}function i5(t){return new qr(t.readTime,t.key,Ra)}class qr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new qr(Te.min(),he.empty(),Ra)}static max(){return new qr(Te.max(),he.empty(),Ra)}}function a5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u5(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==l5)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,o=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++o,a&&o===s&&n()},u=>r(u))}),a=!0,o===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const o=e.length,a=new Array(o);let l=0;for(let u=0;u<o;u++){const d=u;n(e[d]).next(f=>{a[d]=f,++l,l===o&&r(a)},f=>s(f))}})}static doWhile(e,n){return new B((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function d5(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Yp.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5=-1;function Xp(t){return t==null}function rm(t){return t===0&&1/t==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="";function f5(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Jv(e)),e=m5(t.get(n),e);return Jv(e)}function m5(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case gE:n+="";break;default:n+=o}}return n}function Jv(t){return t+gE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ed(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function p5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n){this.comparator=e,this.root=n||st.EMPTY}insert(e,n){return new cn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wl(this.root,e,this.comparator,!0)}}class Wl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??st.RED,this.left=s??st.EMPTY,this.right=o??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new st(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return st.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new st(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new cn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new e0(this.data.getIterator())}getIteratorFrom(e){return new e0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new lt(this.comparator);return n.data=e,n}}class e0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new Rr([])}unionWith(e){let n=new lt(wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new g5("Invalid base64 string: "+o):o}}(e);return new Bn(n)}static fromUint8Array(e){const n=function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o}(e);return new Bn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bn.EMPTY_BYTE_STRING=new Bn("");const x5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Os(t){if(_t(!!t,39018),typeof t=="string"){let e=0;const n=x5.exec(t);if(_t(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(t.seconds),nanos:ot(t.nanos)}}function ot(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Bo(t){return typeof t=="string"?Bn.fromBase64String(t):Bn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="server_timestamp",yE="__type__",vE="__previous_value__",bE="__local_write_time__";function Jp(t){return(t?.mapValue?.fields||{})[yE]?.stringValue===xE}function Zp(t){const e=t.mapValue.fields[vE];return Jp(e)?Zp(e):e}function ou(t){const e=Os(t.mapValue.fields[bE].timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e,n,r,s,o,a,l,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const iu="(default)";class au{constructor(e,n){this.projectId=e,this.database=n||iu}static empty(){return new au("","")}get isDefaultDatabase(){return this.database===iu}isEqual(e){return e instanceof au&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5="__type__",b5="__max__",ql={mapValue:{}},w5="__vector__",t0="value";function Ls(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jp(t)?4:_5(t)?9007199254740991:E5(t)?10:11:ge(28295,{value:t})}function Un(t,e){if(t===e)return!0;const n=Ls(t);if(n!==Ls(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ou(t).isEqual(ou(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=Os(s.timestampValue),l=Os(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Bo(s.bytesValue).isEqual(Bo(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return ot(s.geoPointValue.latitude)===ot(o.geoPointValue.latitude)&&ot(s.geoPointValue.longitude)===ot(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return ot(s.integerValue)===ot(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=ot(s.doubleValue),l=ot(o.doubleValue);return a===l?rm(a)===rm(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return zo(t.arrayValue.values||[],e.arrayValue.values||[],Un);case 10:case 11:return function(s,o){const a=s.mapValue.fields||{},l=o.mapValue.fields||{};if(Zv(a)!==Zv(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Un(a[u],l[u])))return!1;return!0}(t,e);default:return ge(52216,{left:t})}}function Ia(t,e){return(t.values||[]).find(n=>Un(n,e))!==void 0}function Uo(t,e){if(t===e)return 0;const n=Ls(t),r=Ls(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(o,a){const l=ot(o.integerValue||o.doubleValue),u=ot(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return n0(t.timestampValue,e.timestampValue);case 4:return n0(ou(t),ou(e));case 5:return nm(t.stringValue,e.stringValue);case 6:return function(o,a){const l=Bo(o),u=Bo(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const l=o.split("/"),u=a.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=ve(l[d],u[d]);if(f!==0)return f}return ve(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const l=ve(ot(o.latitude),ot(a.latitude));return l!==0?l:ve(ot(o.longitude),ot(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return r0(t.arrayValue,e.arrayValue);case 10:return function(o,a){const l=o.fields||{},u=a.fields||{},d=l[t0]?.arrayValue,f=u[t0]?.arrayValue,m=ve(d?.values?.length||0,f?.values?.length||0);return m!==0?m:r0(d,f)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===ql.mapValue&&a===ql.mapValue)return 0;if(o===ql.mapValue)return 1;if(a===ql.mapValue)return-1;const l=o.fields||{},u=Object.keys(l),d=a.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const h=nm(u[m],f[m]);if(h!==0)return h;const x=Uo(l[u[m]],d[f[m]]);if(x!==0)return x}return ve(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ge(23264,{he:n})}}function n0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const n=Os(t),r=Os(e),s=ve(n.seconds,r.seconds);return s!==0?s:ve(n.nanos,r.nanos)}function r0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=Uo(n[s],r[s]);if(o)return o}return ve(n.length,r.length)}function Ho(t){return sm(t)}function sm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Os(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Bo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=sm(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${sm(n.fields[a])}`;return s+"}"}(t.mapValue):ge(61005,{value:t})}function vc(t){switch(Ls(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zp(t);return e?16+vc(e):16;case 5:return 2*t.stringValue.length;case 6:return Bo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+vc(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ed(r.fields,(o,a)=>{s+=o.length+vc(a)}),s}(t.mapValue);default:throw ge(13486,{value:t})}}function om(t){return!!t&&"integerValue"in t}function eg(t){return!!t&&"arrayValue"in t}function _h(t){return!!t&&"mapValue"in t}function E5(t){return(t?.mapValue?.fields||{})[v5]?.stringValue===w5}function ea(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ed(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ea(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ea(t.arrayValue.values[n]);return e}return{...t}}function _5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===b5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_h(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ea(n)}setAll(e){let n=wt.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=ea(a):s.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());_h(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];_h(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ed(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Zn(ea(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n,r,s,o,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new pn(e,0,Te.min(),Te.min(),Te.min(),Zn.empty(),0)}static newFoundDocument(e,n,r,s){return new pn(e,1,n,Te.min(),r,s,0)}static newNoDocument(e,n){return new pn(e,2,n,Te.min(),Te.min(),Zn.empty(),0)}static newUnknownDocument(e,n){return new pn(e,3,n,Te.min(),Te.min(),Zn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.position=e,this.inclusive=n}}function s0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],a=t.position[s];if(o.field.isKeyField()?r=he.comparator(he.fromName(a.referenceValue),n.key):r=Uo(a,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function o0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Un(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n="asc"){this.field=e,this.dir=n}}function N5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{}class Je extends wE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new j5(e,n,r):n==="array-contains"?new T5(e,r):n==="in"?new A5(e,r):n==="not-in"?new P5(e,r):n==="array-contains-any"?new R5(e,r):new Je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new C5(e,r):new k5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Uo(n,this.value)):n!==null&&Ls(this.value)===Ls(n)&&this.matchesComparison(Uo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qr extends wE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Qr(e,n)}matches(e){return EE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function EE(t){return t.op==="and"}function _E(t){return S5(t)&&EE(t)}function S5(t){for(const e of t.filters)if(e instanceof Qr)return!1;return!0}function im(t){if(t instanceof Je)return t.field.canonicalString()+t.op.toString()+Ho(t.value);if(_E(t))return t.filters.map(e=>im(e)).join(",");{const e=t.filters.map(n=>im(n)).join(",");return`${t.op}(${e})`}}function NE(t,e){return t instanceof Je?function(r,s){return s instanceof Je&&r.op===s.op&&r.field.isEqual(s.field)&&Un(r.value,s.value)}(t,e):t instanceof Qr?function(r,s){return s instanceof Qr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,a,l)=>o&&NE(a,s.filters[l]),!0):!1}(t,e):void ge(19439)}function SE(t){return t instanceof Je?function(n){return`${n.field.canonicalString()} ${n.op} ${Ho(n.value)}`}(t):t instanceof Qr?function(n){return n.op.toString()+" {"+n.getFilters().map(SE).join(" ,")+"}"}(t):"Filter"}class j5 extends Je{constructor(e,n,r){super(e,n,r),this.key=he.fromName(r.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class C5 extends Je{constructor(e,n){super(e,"in",n),this.keys=jE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class k5 extends Je{constructor(e,n){super(e,"not-in",n),this.keys=jE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function jE(t,e){return(e.arrayValue?.values||[]).map(n=>he.fromName(n.referenceValue))}class T5 extends Je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return eg(n)&&Ia(n.arrayValue,this.value)}}class A5 extends Je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ia(this.value.arrayValue,n)}}class P5 extends Je{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ia(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ia(this.value.arrayValue,n)}}class R5 extends Je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!eg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ia(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e,n=null,r=[],s=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=a,this.endAt=l,this.Te=null}}function i0(t,e=null,n=[],r=[],s=null,o=null,a=null){return new I5(t,e,n,r,s,o,a)}function tg(t){const e=ut(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>im(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Xp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ho(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ho(r)).join(",")),e.Te=n}return e.Te}function ng(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!N5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!NE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!o0(t.startAt,e.startAt)&&o0(t.endAt,e.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n=null,r=[],s=[],o=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function M5(t,e,n,r,s,o,a,l){return new td(t,e,n,r,s,o,a,l)}function D5(t){return new td(t)}function a0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function O5(t){return t.collectionGroup!==null}function ta(t){const e=ut(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new lt(wt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new cu(o,r))}),n.has(wt.keyField().canonicalString())||e.Ie.push(new cu(wt.keyField(),r))}return e.Ie}function ws(t){const e=ut(t);return e.Ee||(e.Ee=L5(e,ta(t))),e.Ee}function L5(t,e){if(t.limitType==="F")return i0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new cu(s.field,o)});const n=t.endAt?new lu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new lu(t.startAt.position,t.startAt.inclusive):null;return i0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function am(t,e,n){return new td(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function CE(t,e){return ng(ws(t),ws(e))&&t.limitType===e.limitType}function kE(t){return`${tg(ws(t))}|lt:${t.limitType}`}function Ri(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>SE(s)).join(", ")}]`),Xp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ho(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ho(s)).join(",")),`Target(${r})`}(ws(t))}; limitType=${t.limitType})`}function rg(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):he.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of ta(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,u){const d=s0(a,l,u);return a.inclusive?d<=0:d<0}(r.startAt,ta(r),s)||r.endAt&&!function(a,l,u){const d=s0(a,l,u);return a.inclusive?d>=0:d>0}(r.endAt,ta(r),s))}(t,e)}function V5(t){return(e,n)=>{let r=!1;for(const s of ta(t)){const o=F5(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function F5(t,e,n){const r=t.field.isKeyField()?he.comparator(e.key,n.key):function(o,a,l){const u=a.data.field(o),d=l.data.field(o);return u!==null&&d!==null?Uo(u,d):ge(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ge(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ed(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return p5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=new cn(he.comparator);function lm(){return $5}const TE=new cn(he.comparator);function Ql(...t){let e=TE;for(const n of t)e=e.insert(n.key,n);return e}function z5(t){let e=TE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xs(){return na()}function AE(){return na()}function na(){return new Us(t=>t.toString(),(t,e)=>t.isEqual(e))}const B5=new lt(he.comparator);function $t(...t){let e=B5;for(const n of t)e=e.add(n);return e}const U5=new lt(ve);function H5(){return U5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G5(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rm(e)?"-0":e}}function K5(t){return{integerValue:""+t}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(){this._=void 0}}function W5(t,e,n){return t instanceof cm?function(s,o){const a={fields:{[yE]:{stringValue:xE},[bE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Jp(o)&&(o=Zp(o)),o&&(a.fields[vE]=o),{mapValue:a}}(n,e):t instanceof uu?PE(t,e):t instanceof du?RE(t,e):function(s,o){const a=Q5(s,o),l=l0(a)+l0(s.Ae);return om(a)&&om(s.Ae)?K5(l):G5(s.serializer,l)}(t,e)}function q5(t,e,n){return t instanceof uu?PE(t,e):t instanceof du?RE(t,e):n}function Q5(t,e){return t instanceof um?function(r){return om(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class cm extends nd{}class uu extends nd{constructor(e){super(),this.elements=e}}function PE(t,e){const n=IE(e);for(const r of t.elements)n.some(s=>Un(s,r))||n.push(r);return{arrayValue:{values:n}}}class du extends nd{constructor(e){super(),this.elements=e}}function RE(t,e){let n=IE(e);for(const r of t.elements)n=n.filter(s=>!Un(s,r));return{arrayValue:{values:n}}}class um extends nd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function l0(t){return ot(t.integerValue||t.doubleValue)}function IE(t){return eg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Y5(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof uu&&s instanceof uu||r instanceof du&&s instanceof du?zo(r.elements,s.elements,Un):r instanceof um&&s instanceof um?Un(r.Ae,s.Ae):r instanceof cm&&s instanceof cm}(t.transform,e.transform)}class Es{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Es}static exists(e){return new Es(void 0,e)}static updateTime(e){return new Es(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class sg{}function ME(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new J5(t.key,Es.none()):new og(t.key,t.data,Es.none());{const n=t.data,r=Zn.empty();let s=new lt(wt.comparator);for(let o of e.fields)if(!s.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?r.delete(o):r.set(o,a),s=s.add(o)}return new rd(t.key,r,new Rr(s.toArray()),Es.none())}}function X5(t,e,n){t instanceof og?function(s,o,a){const l=s.value.clone(),u=u0(s.fieldTransforms,o,a.transformResults);l.setAll(u),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof rd?function(s,o,a){if(!bc(s.precondition,o))return void o.convertToUnknownDocument(a.version);const l=u0(s.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(DE(s)),u.setAll(l),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ra(t,e,n,r){return t instanceof og?function(o,a,l,u){if(!bc(o.precondition,a))return l;const d=o.value.clone(),f=d0(o.fieldTransforms,u,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof rd?function(o,a,l,u){if(!bc(o.precondition,a))return l;const d=d0(o.fieldTransforms,u,a),f=a.data;return f.setAll(DE(o)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(o,a,l){return bc(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function c0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&zo(r,s,(o,a)=>Y5(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class og extends sg{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class rd extends sg{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function DE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function u0(t,e,n){const r=new Map;_t(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const o=t[s],a=o.transform,l=e.data.field(o.field);r.set(o.field,q5(a,l,n[s]))}return r}function d0(t,e,n){const r=new Map;for(const s of t){const o=s.transform,a=n.data.field(s.field);r.set(s.field,W5(o,a,e))}return r}class J5 extends sg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&X5(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ra(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ra(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=AE();return this.mutations.forEach(s=>{const o=e.get(s.key),a=o.overlayedDocument;let l=this.applyToLocalView(a,o.mutatedFields);l=n.has(s.key)?null:l;const u=ME(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(Te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),$t())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,(n,r)=>c0(n,r))&&zo(this.baseMutations,e.baseMutations,(n,r)=>c0(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eM=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,fe;function tM(t){if(t===void 0)return el("GRPC error has no .code"),q.UNKNOWN;switch(t){case Le.OK:return q.OK;case Le.CANCELLED:return q.CANCELLED;case Le.UNKNOWN:return q.UNKNOWN;case Le.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case Le.INTERNAL:return q.INTERNAL;case Le.UNAVAILABLE:return q.UNAVAILABLE;case Le.UNAUTHENTICATED:return q.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case Le.NOT_FOUND:return q.NOT_FOUND;case Le.ALREADY_EXISTS:return q.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return q.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case Le.ABORTED:return q.ABORTED;case Le.OUT_OF_RANGE:return q.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return q.UNIMPLEMENTED;case Le.DATA_LOSS:return q.DATA_LOSS;default:return ge(39323,{code:t})}}(fe=Le||(Le={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Wp([4294967295,4294967295],0);class nM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function h0(t){return _t(!!t,49232),Te.fromTimestamp(function(n){const r=Os(n);return new Ge(r.seconds,r.nanos)}(t))}function f0(t,e){const n=function(s){return new Xe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function rM(t){const e=Xe.fromString(t);return _t(aM(e),10190,{key:e.toString()}),e}function sM(t){const e=rM(t);return e.length===4?Xe.emptyPath():oM(e)}function oM(t){return _t(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function iM(t){let e=sM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){_t(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=function(m){const h=OE(m);return h instanceof Qr&&_E(h)?h.getFilters():[h]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(h=>function(y){return new cu(no(y.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(h))}(n.orderBy));let l=null;n.limit&&(l=function(m){let h;return h=typeof m=="object"?m.value:m,Xp(h)?null:h}(n.limit));let u=null;n.startAt&&(u=function(m){const h=!!m.before,x=m.values||[];return new lu(x,h)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const h=!m.before,x=m.values||[];return new lu(x,h)}(n.endAt)),M5(e,s,a,o,l,"F",u,d)}function OE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=no(n.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=no(n.unaryFilter.field);return Je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=no(n.unaryFilter.field);return Je.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=no(n.unaryFilter.field);return Je.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}}(t):t.fieldFilter!==void 0?function(n){return Je.create(no(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Qr.create(n.compositeFilter.filters.map(r=>OE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ge(1026)}}(n.compositeFilter.op))}(t):ge(30097,{filter:t})}function no(t){return wt.fromServerFormat(t.fieldPath)}function aM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.yt=e}}function cM(t){const e=iM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?am(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(){this.Cn=new dM}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(qr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(qr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class dM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new lt(Xe.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new lt(Xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LE=41943040;class Tt{static withCacheSize(e){return new Tt(e,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tt.DEFAULT_COLLECTION_PERCENTILE=10,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tt.DEFAULT=new Tt(LE,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tt.DISABLED=new Tt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Go(0)}static cr(){return new Go(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="LruGarbageCollector",hM=1048576;function g0([t,e],[n,r]){const s=ve(t,n);return s===0?ve(e,r):s}class fM{constructor(e){this.Ir=e,this.buffer=new lt(g0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();g0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class mM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ee(p0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zu(n)?ee(p0,"Ignoring IndexedDB error during garbage collection: ",n):await u5(n)}await this.Vr(3e5)})}}class pM{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Yp.ce);const r=new fM(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(m0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),m0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,o,a,l,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(o=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),to()<=me.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${o} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:m})))}}function gM(t,e){return new pM(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(){this.changes=new Us(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ra(r.mutation,s,Rr.empty(),Ge.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,$t()).next(()=>r))}getLocalViewOfDocuments(e,n,r=$t()){const s=xs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let a=Ql();return o.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=xs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,$t()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let o=lm();const a=na(),l=function(){return na()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof rd)?o=o.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),ra(f.mutation,d,f.mutation.getFieldMask(),Ge.now())):a.set(d.key,Rr.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,f)=>a.set(d,f)),n.forEach((d,f)=>l.set(d,new yM(f,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=na();let s=new cn((a,l)=>a-l),o=$t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Rr.empty();f=l.applyToLocalView(d,f),r.set(u,f);const m=(s.get(l.batchId)||$t()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,m=AE();f.forEach(h=>{if(!o.has(h)){const x=ME(n.get(h),r.get(h));x!==null&&m.set(h,x),o=o.add(h)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return B.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return he.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):O5(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):B.resolve(xs());let l=Ra,u=o;return a.next(d=>B.forEach(d,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),o.get(f)?B.resolve():this.remoteDocumentCache.getEntry(e,f).next(h=>{u=u.insert(f,h)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,$t())).next(f=>({batchId:l,changes:z5(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(r=>{let s=Ql();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let a=Ql();return this.indexManager.getCollectionParents(e,o).next(l=>B.forEach(l,u=>{const d=function(m,h){return new td(h,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,h)=>{a=a.insert(m,h)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(a=>{o.forEach((u,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,pn.newInvalidDocument(f)))});let l=Ql();return a.forEach((u,d)=>{const f=o.get(u);f!==void 0&&ra(f.mutation,d,Rr.empty(),Ge.now()),rg(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:h0(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:cM(s.bundledQuery),readTime:h0(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(){this.overlays=new cn(he.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xs();return B.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.St(e,n,o)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=xs(),o=n.length+1,a=new he(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&s.set(u.getKey(),u)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new cn((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=o.get(d.largestBatchId);f===null&&(f=xs(),o=o.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=xs(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return B.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new eM(n,r));let o=this.qr.get(n);o===void 0&&(o=$t(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(){this.sessionToken=Bn.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(){this.Qr=new lt(Qe.$r),this.Ur=new lt(Qe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Qe(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Qe(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new he(new Xe([])),r=new Qe(n,e),s=new Qe(n,e+1),o=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new he(new Xe([])),r=new Qe(n,e),s=new Qe(n,e+1);let o=$t();return this.Ur.forEachInRange([r,s],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new Qe(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Qe{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return he.comparator(e.key,n.key)||ve(e.Yr,n.Yr)}static Kr(e,n){return ve(e.Yr,n.Yr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new lt(Qe.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Z5(o,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Qe(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),o=s<0?0:s;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?h5:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Qe(n,0),s=new Qe(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);o.push(l)}),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lt(ve);return n.forEach(s=>{const o=new Qe(s,0),a=new Qe(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],l=>{r=r.add(l.Yr)})}),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;he.isDocumentKey(o)||(o=o.child(""));const a=new Qe(new he(o),0);let l=new lt(ve);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Yr)),!0)},a),B.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){_t(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(n.mutations,s=>{const o=new Qe(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Qe(n,0),s=this.Zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e){this.ri=e,this.docs=function(){return new cn(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(n))}getEntries(e,n){let r=lm();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():pn.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=lm();const a=n.path,l=new he(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||a5(i5(f),r)<=0||(s.has(f.key)||rg(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(e,n,r,s){ge(9500)}ii(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new SM(this)}getSize(e){return B.resolve(this.size)}}class SM extends xM{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e){this.persistence=e,this.si=new Us(n=>tg(n),ng),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.oi=0,this._i=new ig,this.targetCount=0,this.ai=Go.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Go(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),B.waitFor(o).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(a=>{o.push(s.markPotentiallyOrphaned(e,a))}),B.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Yp(0),this.li=!1,this.li=!0,this.hi=new EM,this.referenceDelegate=e(this),this.Pi=new jM(this),this.indexManager=new uM,this.remoteDocumentCache=function(s){return new NM(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new lM(n),this.Ii=new bM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new _M(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const s=new CM(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ai(e,n){return B.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class CM extends c5{constructor(e){super(),this.currentSequenceNumber=e}}class ag{constructor(e){this.persistence=e,this.Ri=new ig,this.Vi=null}static mi(e){return new ag(e)}get fi(){if(this.Vi)return this.Vi;throw ge(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,r=>{const s=he.fromPath(r);return this.gi(e,s).next(o=>{o||n.removeEntry(s,Te.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class hu{constructor(e,n){this.persistence=e,this.pi=new Us(r=>f5(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=gM(this,n)}static mi(e,n){return new hu(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(r,s)=>this.br(e,r,s).next(o=>o?B.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,o.removeEntry(a,Te.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=vc(e.data.value)),n}br(e,n,r){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return B.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=$t(),s=$t();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new lg(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return jI()?8:d5(NI())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,s,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new kM;return this.Ss(e,n,a).next(l=>{if(o.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>o.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(to()<=me.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Ri(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(to()<=me.DEBUG&&ee("QueryEngine","Query:",Ri(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(to()<=me.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Ri(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ws(n))):B.resolve())}ys(e,n){if(a0(n))return B.resolve(null);let r=ws(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=am(n,null,"F"),r=ws(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const a=$t(...o);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,l);return this.Cs(n,d,a,u.readTime)?this.ys(e,am(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,s){return a0(n)||s.isEqual(Te.min())?B.resolve(null):this.ps.getDocuments(e,r).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,r,s)?B.resolve(null):(to()<=me.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ri(n)),this.vs(e,a,n,o5(s,Ra)).next(l=>l))})}Ds(e,n){let r=new lt(V5(e));return n.forEach((s,o)=>{rg(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return to()<=me.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Ri(n)),this.ps.getDocumentsMatchingQuery(e,n,qr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM="LocalStore";class PM{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new cn(ve),this.xs=new Us(o=>tg(o),ng),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function RM(t,e,n,r){return new PM(t,e,n,r)}async function FE(t,e){const n=ut(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],l=[];let u=$t();for(const d of s){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of o){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:l}))})})}class x0{constructor(){this.activeTargetIds=H5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class IM{constructor(){this.Mo=new x0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new x0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="ConnectivityMonitor";class v0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ee(y0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ee(y0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yl=null;function dm(){return Yl===null?Yl=function(){return 268435456+Math.round(2147483648*Math.random())}():Yl++,"0x"+Yl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh="RestConnection",DM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===iu?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,o){const a=dm(),l=this.zo(e,n.toUriEncodedString());ee(Nh,`Sending RPC '${e}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,o);const{host:d}=new URL(l),f=Gp(d);return this.Jo(e,l,u,r,f).then(m=>(ee(Nh,`Received RPC '${e}' ${a}: `,m),m),m=>{throw Ju(Nh,`RPC '${e}' ${a} failed with error: `,m,"url: ",l,"request:",r),m})}Ho(e,n,r,s,o,a){return this.Go(e,n,r,s,o)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}zo(e,n){const r=DM[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt="WebChannelConnection";class VM extends OM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const a=dm();return new Promise((l,u)=>{const d=new lE;d.setWithCredentials(!0),d.listenOnce(cE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case yc.NO_ERROR:const m=d.getResponseJson();ee(mt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case yc.TIMEOUT:ee(mt,`RPC '${e}' ${a} timed out`),u(new se(q.DEADLINE_EXCEEDED,"Request time out"));break;case yc.HTTP_ERROR:const h=d.getStatus();if(ee(mt,`RPC '${e}' ${a} failed with status:`,h,"response text:",d.getResponseText()),h>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const y=x?.error;if(y&&y.status&&y.message){const b=function(_){const E=_.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(E)>=0?E:q.UNKNOWN}(y.status);u(new se(b,y.message))}else u(new se(q.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new se(q.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ee(mt,`RPC '${e}' ${a} completed.`)}});const f=JSON.stringify(s);ee(mt,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",f,r,15)})}T_(e,n,r){const s=dm(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=hE(),l=dE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=o.join("");ee(mt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=a.createWebChannel(f,u);this.I_(m);let h=!1,x=!1;const y=new LM({Yo:j=>{x?ee(mt,`Not sending because RPC '${e}' stream ${s} is closed:`,j):(h||(ee(mt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),h=!0),ee(mt,`RPC '${e}' stream ${s} sending:`,j),m.send(j))},Zo:()=>m.close()}),b=(j,_,E)=>{j.listen(_,S=>{try{E(S)}catch(R){setTimeout(()=>{throw R},0)}})};return b(m,zi.EventType.OPEN,()=>{x||(ee(mt,`RPC '${e}' stream ${s} transport opened.`),y.o_())}),b(m,zi.EventType.CLOSE,()=>{x||(x=!0,ee(mt,`RPC '${e}' stream ${s} transport closed`),y.a_(),this.E_(m))}),b(m,zi.EventType.ERROR,j=>{x||(x=!0,Ju(mt,`RPC '${e}' stream ${s} transport errored. Name:`,j.name,"Message:",j.message),y.a_(new se(q.UNAVAILABLE,"The operation could not be completed")))}),b(m,zi.EventType.MESSAGE,j=>{if(!x){const _=j.data[0];_t(!!_,16349);const E=_,S=E?.error||E[0]?.error;if(S){ee(mt,`RPC '${e}' stream ${s} received error:`,S);const R=S.status;let T=function(w){const C=Le[w];if(C!==void 0)return tM(C)}(R),D=S.message;T===void 0&&(T=q.INTERNAL,D="Unknown error status: "+R+" with message "+S.message),x=!0,y.a_(new se(T,D)),m.close()}else ee(mt,`RPC '${e}' stream ${s} received:`,_),y.u_(_)}}),b(l,uE.STAT_EVENT,j=>{j.stat===tm.PROXY?ee(mt,`RPC '${e}' stream ${s} detected buffering proxy`):j.stat===tm.NOPROXY&&ee(mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.__()},0),y}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Sh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(t){return new nM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e,n,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{}class zM extends $M{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new se(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,f0(n,r),s,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(q.UNKNOWN,o.toString())})}Ho(e,n,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,f0(n,r),s,a,l,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new se(q.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class BM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(el(n),this.aa=!1):ee("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="RemoteStore";class UM{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{ug(this)&&(ee(cg,"Restarting streams for network reachability change."),await async function(u){const d=ut(u);d.Ea.add(4),await nl(d),d.Ra.set("Unknown"),d.Ea.delete(4),await sd(d)}(this))})}),this.Ra=new BM(r,s)}}async function sd(t){if(ug(t))for(const e of t.da)await e(!0)}async function nl(t){for(const e of t.da)await e(!1)}function ug(t){return ut(t).Ea.size===0}async function b0(t,e){const n=ut(t);n.asyncQueue.verifyOperationInProgress(),ee(cg,"RemoteStore received new credentials");const r=ug(n);n.Ea.add(3),await nl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await sd(n)}async function HM(t,e){const n=ut(t);e?(n.Ea.delete(2),await sd(n)):e||(n.Ea.add(2),await nl(n),n.Ra.set("Unknown"))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new So,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const a=Date.now()+r,l=new dg(e,n,a,s,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function GM(t,e){if(el("AsyncQueue",`${e}: ${t}`),Zu(t))return new se(q.UNAVAILABLE,`${e}: ${t}`);throw t}class KM{constructor(){this.queries=w0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ut(n),o=s.queries;s.queries=w0(),o.forEach((a,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new se(q.ABORTED,"Firestore shutting down"))}}function w0(){return new Us(t=>kE(t),CE)}function WM(t){t.Ca.forEach(e=>{e.next()})}var E0,_0;(_0=E0||(E0={})).Ma="default",_0.Cache="cache";const qM="SyncEngine";class QM{constructor(e,n,r,s,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Us(l=>kE(l),CE),this.Iu=new Map,this.Eu=new Set,this.du=new cn(he.comparator),this.Au=new Map,this.Ru=new ig,this.Vu={},this.mu=new Map,this.fu=Go.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}function N0(t,e,n){const r=ut(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((o,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=ut(a);u.onlineState=l;let d=!1;u.queries.forEach((f,m)=>{for(const h of m.Sa)h.va(l)&&(d=!0)}),d&&WM(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function YM(t,e,n){const r=ut(t),s=[],o=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{a.push(r.pu(u,e,n).then(d=>{if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(d){s.push(d);const f=lg.As(u.targetId,d);o.push(f)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(u,d){const f=ut(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>B.forEach(d,h=>B.forEach(h.Es,x=>f.persistence.referenceDelegate.addReference(m,h.targetId,x)).next(()=>B.forEach(h.ds,x=>f.persistence.referenceDelegate.removeReference(m,h.targetId,x)))))}catch(m){if(!Zu(m))throw m;ee(AM,"Failed to update sequence numbers: "+m)}for(const m of d){const h=m.targetId;if(!m.fromCache){const x=f.Ms.get(h),y=x.snapshotVersion,b=x.withLastLimboFreeSnapshotVersion(y);f.Ms=f.Ms.insert(h,b)}}}(r.localStore,o))}async function XM(t,e){const n=ut(t);if(!n.currentUser.isEqual(e)){ee(qM,"User change. New user:",e.toKey());const r=await FE(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(l=>{l.forEach(u=>{u.reject(new se(q.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await YM(n,r.Ls)}}class fu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$E(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return RM(this.persistence,new TM,e.initialUser,this.serializer)}Cu(e){return new VE(ag.mi,this.serializer)}Du(e){return new IM}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fu.provider={build:()=>new fu};class JM extends fu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){_t(this.persistence.referenceDelegate instanceof hu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new mM(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Tt.withCacheSize(this.cacheSizeBytes):Tt.DEFAULT;return new VE(r=>hu.mi(r,n),this.serializer)}}class hm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>N0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XM.bind(null,this.syncEngine),await HM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new KM}()}createDatastore(e){const n=$E(e.databaseInfo.databaseId),r=function(o){return new VM(o)}(e.databaseInfo);return function(o,a,l,u){return new zM(o,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,a,l){return new UM(r,s,o,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>N0(this.syncEngine,n,0),function(){return v0.v()?new v0:new MM}())}createSyncEngine(e,n){return function(s,o,a,l,u,d,f){const m=new QM(s,o,a,l,u,d);return f&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const r=ut(n);ee(cg,"RemoteStore shutting down."),r.Ea.add(5),await nl(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}hm.provider={build:()=>new hm};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="FirestoreClient";class ZM{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=pt.UNAUTHENTICATED,this.clientId=pE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async a=>{ee(Yr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(ee(Yr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new So;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=GM(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jh(t,e){t.asyncQueue.verifyOperationInProgress(),ee(Yr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await FE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function S0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zE(t);ee(Yr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>b0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>b0(e.remoteStore,s)),t._onlineComponents=e}async function zE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee(Yr,"Using user provided OfflineComponentProvider");try{await jh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===q.FAILED_PRECONDITION||s.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ju("Error using user provided cache. Falling back to memory cache: "+n),await jh(t,new fu)}}else ee(Yr,"Using default OfflineComponentProvider"),await jh(t,new JM(void 0));return t._offlineComponents}async function eD(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee(Yr,"Using user provided OnlineComponentProvider"),await S0(t,t._uninitializedComponentsProvider._online)):(ee(Yr,"Using default OnlineComponentProvider"),await S0(t,new hm))),t._onlineComponents}function BE(t){return zE(t).then(e=>e.persistence)}function UE(t){return eD(t).then(e=>e.remoteStore)}function tD(t){return t.asyncQueue.enqueue(async()=>{const e=await BE(t),n=await UE(t);return e.setNetworkEnabled(!0),function(s){const o=ut(s);return o.Ea.delete(0),sd(o)}(n)})}function nD(t){return t.asyncQueue.enqueue(async()=>{const e=await BE(t),n=await UE(t);return e.setNetworkEnabled(!1),async function(s){const o=ut(s);o.Ea.add(0),await nl(o),o.Ra.set("Offline")}(n)})}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="firestore.googleapis.com",C0=!0;class k0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GE,this.ssl=C0}else this.host=e.host,this.ssl=e.ssl??C0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<hM)throw new se(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}n5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HE(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class KE{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new k0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new k0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new K3;switch(r.type){case"firstParty":return new Y3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=j0.get(n);r&&(ee("ComponentProvider","Removing Datastore"),j0.delete(n),r.terminate())}(this),Promise.resolve()}}function rD(t,e,n,r={}){t=Qp(t,KE);const s=Gp(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(vI(`https://${l}`),_I("Firestore",!0)),o.host!==GE&&o.host!==l&&Ju("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:l,ssl:s,emulatorOptions:r};if(!tu(u,a)&&(t._setSettings(u),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=pt.MOCK_USER;else{d=bI(r.mockUserToken,t._app?.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new se(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new pt(m)}t._authCredentials=new W3(new mE(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hg(this.firestore,e,this._query)}}class Ln{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ln(this.firestore,e,this._key)}toJSON(){return{type:Ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(tl(n,Ln._jsonSchema))return new Ln(e,r||null,new he(Xe.fromString(n.referencePath)))}}Ln._jsonSchemaVersion="firestore/documentReference/1.0",Ln._jsonSchema={type:ze("string",Ln._jsonSchemaVersion),referencePath:ze("string")};class fg extends hg{constructor(e,n,r){super(e,n,D5(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ln(this.firestore,null,new he(e))}withConverter(e){return new fg(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="AsyncQueue";class A0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new FM(this,"async_queue_retry"),this._c=()=>{const r=Sh();r&&ee(T0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Sh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Sh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new So;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Zu(e))throw e;ee(T0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,el("INTERNAL UNHANDLED ERROR: ",P0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=dg.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&ge(47125,{Pc:P0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function P0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class mg extends KE{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new A0,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new A0(e),this._firestoreClient=void 0,await e}}}function WE(t,e){const n=typeof t=="object"?t:I3(),r=typeof t=="string"?t:iu,s=sE(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=xI("firestore");o&&rD(s,...o)}return s}function qE(t){if(t._terminated)throw new se(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||sD(t),t._firestoreClient}function sD(t){const e=t._freezeSettings(),n=function(s,o,a,l){return new y5(s,o,a,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,HE(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new ZM(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}}(t._componentsProvider))}function pg(t){return tD(qE(t=Qp(t,mg)))}function Ma(t){return nD(qE(t=Qp(t,mg)))}function oD(t){return k3(t.app,"firestore",t._databaseId.database),t._delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this._byteString=e}static fromBase64String(e){try{return new er(Bn.fromBase64String(e))}catch(n){throw new se(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new er(Bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:er._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tl(e,er._jsonSchema))return er.fromBase64String(e.bytes)}}er._jsonSchemaVersion="firestore/bytes/1.0",er._jsonSchema={type:ze("string",er._jsonSchemaVersion),bytes:ze("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_s._jsonSchemaVersion}}static fromJSON(e){if(tl(e,_s._jsonSchema))return new _s(e.latitude,e.longitude)}}_s._jsonSchemaVersion="firestore/geoPoint/1.0",_s._jsonSchema={type:ze("string",_s._jsonSchemaVersion),latitude:ze("number"),longitude:ze("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ns._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tl(e,Ns._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ns(e.vectorValues);throw new se(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ns._jsonSchemaVersion="firestore/vectorValue/1.0",Ns._jsonSchema={type:ze("string",Ns._jsonSchemaVersion),vectorValues:ze("object")};const iD=new RegExp("[~\\*/\\[\\]]");function aD(t,e,n){if(e.search(iD)>=0)throw R0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new QE(...e.split("."))._internalPath}catch{throw R0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function R0(t,e,n,r,s){let o=`Function ${e}() called with invalid data`;o+=". ";let a="";return new se(q.INVALID_ARGUMENT,o+t+a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(XE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class lD extends YE{data(){return super.data()}}function XE(t,e){return typeof e=="string"?aD(t,e):e instanceof QE?e._internalPath:e._delegate._internalPath}class Xl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jo extends YE{constructor(e,n,r,s,o,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(XE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=jo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}jo._jsonSchemaVersion="firestore/documentSnapshot/1.0",jo._jsonSchema={type:ze("string",jo._jsonSchemaVersion),bundleSource:ze("string","DocumentSnapshot"),bundleName:ze("string"),bundle:ze("string")};class wc extends jo{data(e={}){return super.data(e)}}class sa{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Xl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new wc(this._firestore,this._userDataWriter,r.key,r,new Xl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new wc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Xl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const u=new wc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Xl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:cD(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=sa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function cD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:t})}}sa._jsonSchemaVersion="firestore/querySnapshot/1.0",sa._jsonSchema={type:ze("string",sa._jsonSchemaVersion),bundleSource:ze("string","QuerySnapshot"),bundleName:ze("string"),bundle:ze("string")};(function(e,n=!0){(function(s){oi=s})(R3),su(new Aa("firestore",(r,{instanceIdentifier:s,options:o})=>{const a=r.getProvider("app").getImmediate(),l=new mg(new q3(r.getProvider("auth-internal")),new X3(a,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new se(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new au(d.options.projectId,f)}(a,s),a);return o={useFetchStreams:n,...o},l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),No(Kv,Wv,e),No(Kv,Wv,"esm2020")})();const uD={apiKey:"demo-api-key",authDomain:"brandkit-ai-studio.firebaseapp.com",projectId:"brandkit-ai-studio",storageBucket:"brandkit-ai-studio.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:abcdefghijklmnop"},dD=oE(uD),Ss=WE(dD);let en=!1;const Ch=async()=>{if(typeof window>"u")return;const t=navigator.onLine;if(t&&en)try{await pg(Ss),en=!1}catch{en=!0}else if(!t&&!en)try{await Ma(Ss),en=!0}catch{en=!0}};typeof window<"u"&&(navigator.onLine?(en=!0,Ma(Ss).catch(()=>{}),setTimeout(async()=>{try{await pg(Ss),en=!1}catch{}},2e3)):(en=!0,Ma(Ss).catch(t=>console.warn("Failed to initially disable network:",t))),window.addEventListener("online",Ch),window.addEventListener("offline",Ch),setInterval(()=>{Ch()},3e4));const Xs=()=>({isOffline:en,isOnline:typeof window<"u"?navigator.onLine:!0}),hD=async()=>{try{await Ma(Ss),en=!0,console.log("Forced offline mode enabled")}catch(t){console.error("Failed to force offline mode:",t)}},fD=async()=>{try{await pg(Ss),en=!1,console.log("Forced online mode enabled")}catch(t){console.error("Failed to force online mode:",t)}};let oa=!1,I0=!1;const mD=console.error,pD=console.warn;function gD(){if(I0)return;I0=!0;const t=[/firebase/i,/firestore/i,/webchannel/i,/transport errored/i,/listen stream/i,/rpc.*stream/i,/client is offline/i,/failed to get document/i,/unavailable.*code/i,/@firebase\/firestore/i,/grpc.*error/i,/network.*error/i,/connection.*failed/i,/timeout/i,/cancelled/i];console.error=(...e)=>{const n=e.join(" ").toLowerCase();t.some(s=>s.test(n))||mD.apply(console,e)},console.warn=(...e)=>{const n=e.join(" ").toLowerCase();t.some(s=>s.test(n))||pD.apply(console,e)}}async function M0(){if(!oa)try{const t=WE();await Ma(t),await oD(t),oa=!0}catch{oa=!0}}function D0(){return oa}if(typeof window<"u"){gD(),navigator.onLine||M0(),window.addEventListener("offline",()=>{M0()});let t;window.addEventListener("online",()=>{clearTimeout(t),t=setTimeout(()=>{navigator.onLine&&(oa=!1)},5e3)})}function xD({className:t,showControls:e=!1}){const[n,r]=p.useState(Xs()),[s,o]=p.useState(!1),[a,l]=p.useState(!1),[u,d]=p.useState(D0());p.useEffect(()=>{const x=setInterval(()=>{r(Xs()),d(D0())},5e3),y=()=>r(Xs()),b=()=>r(Xs());return typeof window<"u"&&(window.addEventListener("online",y),window.addEventListener("offline",b)),()=>{clearInterval(x),typeof window<"u"&&(window.removeEventListener("online",y),window.removeEventListener("offline",b))}},[]);const f=async()=>{o(!0);try{await fD(),r(Xs())}catch(x){console.error("Failed to force online mode:",x)}finally{o(!1)}},m=async()=>{o(!0);try{await hD(),r(Xs())}catch(x){console.error("Failed to force offline mode:",x)}finally{o(!1)}},h=n.isOnline&&!n.isOffline&&!u;return!e&&h?null:i.jsxs("div",{className:`space-y-2 ${t}`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ve,{variant:h?"default":"destructive",className:`flex items-center gap-1 ${h?"bg-green-100 text-green-800 border-green-200":"bg-yellow-100 text-yellow-800 border-yellow-200"}`,children:h?i.jsxs(i.Fragment,{children:[i.jsx(xh,{className:"w-3 h-3"}),"Online"]}):i.jsxs(i.Fragment,{children:[i.jsx(Pv,{className:"w-3 h-3"}),"Offline"]})}),e&&i.jsx(te,{variant:"ghost",size:"sm",onClick:()=>l(!a),children:i.jsx(Tv,{className:"w-3 h-3"})})]}),!h&&i.jsxs(Rv,{className:"border-yellow-200 bg-yellow-50",children:[i.jsx(hr,{className:"h-4 w-4 text-yellow-600"}),i.jsx(Iv,{className:"text-yellow-800",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Modo offline activo - Funcionalidad limitada"}),i.jsxs(te,{variant:"outline",size:"sm",onClick:f,disabled:s,className:"ml-4",children:[s?i.jsx(Xu,{className:"w-3 h-3 animate-spin"}):i.jsx(xh,{className:"w-3 h-3"}),"Reconectar"]})]})})]}),a&&e&&i.jsxs(Rv,{className:"border-blue-200 bg-blue-50",children:[i.jsx(Tv,{className:"h-4 w-4 text-blue-600"}),i.jsx(Iv,{className:"text-blue-800",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium",children:"Control de Red"}),i.jsxs("div",{className:"flex items-center gap-1",children:[h?i.jsx($e,{className:"w-4 h-4 text-green-600"}):i.jsx(hr,{className:"w-4 h-4 text-yellow-600"}),i.jsx("span",{className:"text-xs",children:h?"Conectado a Firebase":"Desconectado de Firebase"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(te,{variant:"outline",size:"sm",onClick:f,disabled:s||h,children:[i.jsx(xh,{className:"w-3 h-3 mr-1"}),"Conectar"]}),i.jsxs(te,{variant:"outline",size:"sm",onClick:m,disabled:s||n.isOffline,children:[i.jsx(Pv,{className:"w-3 h-3 mr-1"}),"Desconectar"]})]}),i.jsxs("div",{className:"text-xs text-blue-600",children:[i.jsx("p",{children:"• Online: Todas las funciones disponibles"}),i.jsx("p",{children:"• Offline: Usando datos en caché del BrandKit"})]})]})})]})]})}function gg(t){const e=t+"CollectionProvider",[n,r]=jt(e),[s,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=b=>{const{scope:j,children:_}=b,E=_e.useRef(null),S=_e.useRef(new Map).current;return i.jsx(s,{scope:j,itemMap:S,collectionRef:E,children:_})};a.displayName=e;const l=t+"CollectionSlot",u=Rs(l),d=_e.forwardRef((b,j)=>{const{scope:_,children:E}=b,S=o(l,_),R=ye(j,S.collectionRef);return i.jsx(u,{ref:R,children:E})});d.displayName=l;const f=t+"CollectionItemSlot",m="data-radix-collection-item",h=Rs(f),x=_e.forwardRef((b,j)=>{const{scope:_,children:E,...S}=b,R=_e.useRef(null),T=ye(j,R),D=o(f,_);return _e.useEffect(()=>(D.itemMap.set(R,{ref:R,...S}),()=>void D.itemMap.delete(R))),i.jsx(h,{[m]:"",ref:T,children:E})});x.displayName=f;function y(b){const j=o(t+"CollectionConsumer",b);return _e.useCallback(()=>{const E=j.collectionRef.current;if(!E)return[];const S=Array.from(E.querySelectorAll(`[${m}]`));return Array.from(j.itemMap.values()).sort((D,N)=>S.indexOf(D.ref.current)-S.indexOf(N.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:a,Slot:d,ItemSlot:x},y,r]}var yD=p.createContext(void 0);function rl(t){const e=p.useContext(yD);return t||e||"ltr"}var kh=0;function xg(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??O0()),document.body.insertAdjacentElement("beforeend",t[1]??O0()),kh++,()=>{kh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),kh--}},[])}function O0(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Th="focusScope.autoFocusOnMount",Ah="focusScope.autoFocusOnUnmount",L0={bubbles:!1,cancelable:!0},vD="FocusScope",od=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=t,[l,u]=p.useState(null),d=it(s),f=it(o),m=p.useRef(null),h=ye(e,b=>u(b)),x=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let b=function(S){if(x.paused||!l)return;const R=S.target;l.contains(R)?m.current=R:Sr(m.current,{select:!0})},j=function(S){if(x.paused||!l)return;const R=S.relatedTarget;R!==null&&(l.contains(R)||Sr(m.current,{select:!0}))},_=function(S){if(document.activeElement===document.body)for(const T of S)T.removedNodes.length>0&&Sr(l)};document.addEventListener("focusin",b),document.addEventListener("focusout",j);const E=new MutationObserver(_);return l&&E.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",j),E.disconnect()}}},[r,l,x.paused]),p.useEffect(()=>{if(l){F0.add(x);const b=document.activeElement;if(!l.contains(b)){const _=new CustomEvent(Th,L0);l.addEventListener(Th,d),l.dispatchEvent(_),_.defaultPrevented||(bD(SD(JE(l)),{select:!0}),document.activeElement===b&&Sr(l))}return()=>{l.removeEventListener(Th,d),setTimeout(()=>{const _=new CustomEvent(Ah,L0);l.addEventListener(Ah,f),l.dispatchEvent(_),_.defaultPrevented||Sr(b??document.body,{select:!0}),l.removeEventListener(Ah,f),F0.remove(x)},0)}}},[l,d,f,x]);const y=p.useCallback(b=>{if(!n&&!r||x.paused)return;const j=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,_=document.activeElement;if(j&&_){const E=b.currentTarget,[S,R]=wD(E);S&&R?!b.shiftKey&&_===R?(b.preventDefault(),n&&Sr(S,{select:!0})):b.shiftKey&&_===S&&(b.preventDefault(),n&&Sr(R,{select:!0})):_===E&&b.preventDefault()}},[n,r,x.paused]);return i.jsx(oe.div,{tabIndex:-1,...a,ref:h,onKeyDown:y})});od.displayName=vD;function bD(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Sr(r,{select:e}),document.activeElement!==n)return}function wD(t){const e=JE(t),n=V0(e,t),r=V0(e.reverse(),t);return[n,r]}function JE(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function V0(t,e){for(const n of t)if(!ED(n,{upTo:e}))return n}function ED(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function _D(t){return t instanceof HTMLInputElement&&"select"in t}function Sr(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&_D(t)&&e&&t.select()}}var F0=ND();function ND(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=$0(t,e),t.unshift(e)},remove(e){t=$0(t,e),t[0]?.resume()}}}function $0(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function SD(t){return t.filter(e=>e.tagName!=="A")}var Ph="rovingFocusGroup.onEntryFocus",jD={bubbles:!1,cancelable:!0},sl="RovingFocusGroup",[fm,ZE,CD]=gg(sl),[kD,ii]=jt(sl,[CD]),[TD,AD]=kD(sl),e_=p.forwardRef((t,e)=>i.jsx(fm.Provider,{scope:t.__scopeRovingFocusGroup,children:i.jsx(fm.Slot,{scope:t.__scopeRovingFocusGroup,children:i.jsx(PD,{...t,ref:e})})}));e_.displayName=sl;var PD=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:u,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...m}=t,h=p.useRef(null),x=ye(e,h),y=rl(o),[b,j]=es({prop:a,defaultProp:l??null,onChange:u,caller:sl}),[_,E]=p.useState(!1),S=it(d),R=ZE(n),T=p.useRef(!1),[D,N]=p.useState(0);return p.useEffect(()=>{const w=h.current;if(w)return w.addEventListener(Ph,S),()=>w.removeEventListener(Ph,S)},[S]),i.jsx(TD,{scope:n,orientation:r,dir:y,loop:s,currentTabStopId:b,onItemFocus:p.useCallback(w=>j(w),[j]),onItemShiftTab:p.useCallback(()=>E(!0),[]),onFocusableItemAdd:p.useCallback(()=>N(w=>w+1),[]),onFocusableItemRemove:p.useCallback(()=>N(w=>w-1),[]),children:i.jsx(oe.div,{tabIndex:_||D===0?-1:0,"data-orientation":r,...m,ref:x,style:{outline:"none",...t.style},onMouseDown:Q(t.onMouseDown,()=>{T.current=!0}),onFocus:Q(t.onFocus,w=>{const C=!T.current;if(w.target===w.currentTarget&&C&&!_){const A=new CustomEvent(Ph,jD);if(w.currentTarget.dispatchEvent(A),!A.defaultPrevented){const I=R().filter(H=>H.focusable),M=I.find(H=>H.active),k=I.find(H=>H.id===b),z=[M,k,...I].filter(Boolean).map(H=>H.ref.current);r_(z,f)}}T.current=!1}),onBlur:Q(t.onBlur,()=>E(!1))})})}),t_="RovingFocusGroupItem",n_=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:o,children:a,...l}=t,u=bn(),d=o||u,f=AD(t_,n),m=f.currentTabStopId===d,h=ZE(n),{onFocusableItemAdd:x,onFocusableItemRemove:y,currentTabStopId:b}=f;return p.useEffect(()=>{if(r)return x(),()=>y()},[r,x,y]),i.jsx(fm.ItemSlot,{scope:n,id:d,focusable:r,active:s,children:i.jsx(oe.span,{tabIndex:m?0:-1,"data-orientation":f.orientation,...l,ref:e,onMouseDown:Q(t.onMouseDown,j=>{r?f.onItemFocus(d):j.preventDefault()}),onFocus:Q(t.onFocus,()=>f.onItemFocus(d)),onKeyDown:Q(t.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){f.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const _=MD(j,f.orientation,f.dir);if(_!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let S=h().filter(R=>R.focusable).map(R=>R.ref.current);if(_==="last")S.reverse();else if(_==="prev"||_==="next"){_==="prev"&&S.reverse();const R=S.indexOf(j.currentTarget);S=f.loop?DD(S,R+1):S.slice(R+1)}setTimeout(()=>r_(S))}}),children:typeof a=="function"?a({isCurrentTabStop:m,hasTabStop:b!=null}):a})})});n_.displayName=t_;var RD={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ID(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function MD(t,e,n){const r=ID(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return RD[r]}function r_(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function DD(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var yg=e_,vg=n_,OD=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Js=new WeakMap,Jl=new WeakMap,Zl={},Rh=0,s_=function(t){return t&&(t.host||s_(t.parentNode))},LD=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=s_(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},VD=function(t,e,n,r){var s=LD(e,Array.isArray(t)?t:[t]);Zl[n]||(Zl[n]=new WeakMap);var o=Zl[n],a=[],l=new Set,u=new Set(s),d=function(m){!m||l.has(m)||(l.add(m),d(m.parentNode))};s.forEach(d);var f=function(m){!m||u.has(m)||Array.prototype.forEach.call(m.children,function(h){if(l.has(h))f(h);else try{var x=h.getAttribute(r),y=x!==null&&x!=="false",b=(Js.get(h)||0)+1,j=(o.get(h)||0)+1;Js.set(h,b),o.set(h,j),a.push(h),b===1&&y&&Jl.set(h,!0),j===1&&h.setAttribute(n,"true"),y||h.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",h,_)}})};return f(e),l.clear(),Rh++,function(){a.forEach(function(m){var h=Js.get(m)-1,x=o.get(m)-1;Js.set(m,h),o.set(m,x),h||(Jl.has(m)||m.removeAttribute(r),Jl.delete(m)),x||m.removeAttribute(n)}),Rh--,Rh||(Js=new WeakMap,Js=new WeakMap,Jl=new WeakMap,Zl={})}},bg=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=OD(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),VD(r,s,n,"aria-hidden")):function(){return null}},Dn=function(){return Dn=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Dn.apply(this,arguments)};function o_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function FD(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Ec="right-scroll-bar-position",_c="width-before-scroll-bar",$D="with-scroll-bars-hidden",zD="--removed-body-scroll-bar-size";function Ih(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function BD(t,e){var n=p.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var UD=typeof window<"u"?p.useLayoutEffect:p.useEffect,z0=new WeakMap;function HD(t,e){var n=BD(null,function(r){return t.forEach(function(s){return Ih(s,r)})});return UD(function(){var r=z0.get(n);if(r){var s=new Set(r),o=new Set(t),a=n.current;s.forEach(function(l){o.has(l)||Ih(l,null)}),o.forEach(function(l){s.has(l)||Ih(l,a)})}z0.set(n,t)},[t]),n}function GD(t){return t}function KD(t,e){e===void 0&&(e=GD);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var a=e(o,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(o){for(r=!0;n.length;){var a=n;n=[],a.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(o),a=n}var u=function(){var f=a;a=[],f.forEach(o)},d=function(){return Promise.resolve().then(u)};d(),n={push:function(f){a.push(f),d()},filter:function(f){return a=a.filter(f),n}}}};return s}function WD(t){t===void 0&&(t={});var e=KD(null);return e.options=Dn({async:!0,ssr:!1},t),e}var i_=function(t){var e=t.sideCar,n=o_(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,Dn({},n))};i_.isSideCarExport=!0;function qD(t,e){return t.useMedium(e),i_}var a_=WD(),Mh=function(){},id=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:Mh,onWheelCapture:Mh,onTouchMoveCapture:Mh}),s=r[0],o=r[1],a=t.forwardProps,l=t.children,u=t.className,d=t.removeScrollBar,f=t.enabled,m=t.shards,h=t.sideCar,x=t.noRelative,y=t.noIsolation,b=t.inert,j=t.allowPinchZoom,_=t.as,E=_===void 0?"div":_,S=t.gapMode,R=o_(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=h,D=HD([n,e]),N=Dn(Dn({},R),s);return p.createElement(p.Fragment,null,f&&p.createElement(T,{sideCar:a_,removeScrollBar:d,shards:m,noRelative:x,noIsolation:y,inert:b,setCallbacks:o,allowPinchZoom:!!j,lockRef:n,gapMode:S}),a?p.cloneElement(p.Children.only(l),Dn(Dn({},N),{ref:D})):p.createElement(E,Dn({},N,{className:u,ref:D}),l))});id.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};id.classNames={fullWidth:_c,zeroRight:Ec};var QD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function YD(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=QD();return e&&t.setAttribute("nonce",e),t}function XD(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function JD(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var ZD=function(){var t=0,e=null;return{add:function(n){t==0&&(e=YD())&&(XD(e,n),JD(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},e6=function(){var t=ZD();return function(e,n){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},l_=function(){var t=e6(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},t6={left:0,top:0,right:0,gap:0},Dh=function(t){return parseInt(t||"",10)||0},n6=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Dh(n),Dh(r),Dh(s)]},r6=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return t6;var e=n6(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},s6=l_(),Co="data-scroll-locked",o6=function(t,e,n,r){var s=t.left,o=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat($D,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Co,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }

  .`).concat(Ec,` {
    right: `).concat(l,"px ").concat(r,`;
  }

  .`).concat(_c,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }

  .`).concat(Ec," .").concat(Ec,` {
    right: 0 `).concat(r,`;
  }

  .`).concat(_c," .").concat(_c,` {
    margin-right: 0 `).concat(r,`;
  }

  body[`).concat(Co,`] {
    `).concat(zD,": ").concat(l,`px;
  }
`)},B0=function(){var t=parseInt(document.body.getAttribute(Co)||"0",10);return isFinite(t)?t:0},i6=function(){p.useEffect(function(){return document.body.setAttribute(Co,(B0()+1).toString()),function(){var t=B0()-1;t<=0?document.body.removeAttribute(Co):document.body.setAttribute(Co,t.toString())}},[])},a6=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;i6();var o=p.useMemo(function(){return r6(s)},[s]);return p.createElement(s6,{styles:o6(o,!e,s,n?"":"!important")})},mm=!1;if(typeof window<"u")try{var ec=Object.defineProperty({},"passive",{get:function(){return mm=!0,!0}});window.addEventListener("test",ec,ec),window.removeEventListener("test",ec,ec)}catch{mm=!1}var Zs=mm?{passive:!1}:!1,l6=function(t){return t.tagName==="TEXTAREA"},c_=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!l6(t)&&n[e]==="visible")},c6=function(t){return c_(t,"overflowY")},u6=function(t){return c_(t,"overflowX")},U0=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=u_(t,r);if(s){var o=d_(t,r),a=o[1],l=o[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},d6=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},h6=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},u_=function(t,e){return t==="v"?c6(e):u6(e)},d_=function(t,e){return t==="v"?d6(e):h6(e)},f6=function(t,e){return t==="h"&&e==="rtl"?-1:1},m6=function(t,e,n,r,s){var o=f6(t,window.getComputedStyle(e).direction),a=o*r,l=n.target,u=e.contains(l),d=!1,f=a>0,m=0,h=0;do{if(!l)break;var x=d_(t,l),y=x[0],b=x[1],j=x[2],_=b-j-o*y;(y||_)&&u_(t,l)&&(m+=_,h+=y);var E=l.parentNode;l=E&&E.nodeType===Node.DOCUMENT_FRAGMENT_NODE?E.host:E}while(!u&&l!==document.body||u&&(e.contains(l)||e===l));return(f&&Math.abs(m)<1||!f&&Math.abs(h)<1)&&(d=!0),d},tc=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},H0=function(t){return[t.deltaX,t.deltaY]},G0=function(t){return t&&"current"in t?t.current:t},p6=function(t,e){return t[0]===e[0]&&t[1]===e[1]},g6=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},x6=0,eo=[];function y6(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(x6++)[0],o=p.useState(l_)[0],a=p.useRef(t);p.useEffect(function(){a.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var b=FD([t.lockRef.current],(t.shards||[]).map(G0),!0).filter(Boolean);return b.forEach(function(j){return j.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),b.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=p.useCallback(function(b,j){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!a.current.allowPinchZoom;var _=tc(b),E=n.current,S="deltaX"in b?b.deltaX:E[0]-_[0],R="deltaY"in b?b.deltaY:E[1]-_[1],T,D=b.target,N=Math.abs(S)>Math.abs(R)?"h":"v";if("touches"in b&&N==="h"&&D.type==="range")return!1;var w=U0(N,D);if(!w)return!0;if(w?T=N:(T=N==="v"?"h":"v",w=U0(N,D)),!w)return!1;if(!r.current&&"changedTouches"in b&&(S||R)&&(r.current=T),!T)return!0;var C=r.current||T;return m6(C,j,b,C==="h"?S:R)},[]),u=p.useCallback(function(b){var j=b;if(!(!eo.length||eo[eo.length-1]!==o)){var _="deltaY"in j?H0(j):tc(j),E=e.current.filter(function(T){return T.name===j.type&&(T.target===j.target||j.target===T.shadowParent)&&p6(T.delta,_)})[0];if(E&&E.should){j.cancelable&&j.preventDefault();return}if(!E){var S=(a.current.shards||[]).map(G0).filter(Boolean).filter(function(T){return T.contains(j.target)}),R=S.length>0?l(j,S[0]):!a.current.noIsolation;R&&j.cancelable&&j.preventDefault()}}},[]),d=p.useCallback(function(b,j,_,E){var S={name:b,delta:j,target:_,should:E,shadowParent:v6(_)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(R){return R!==S})},1)},[]),f=p.useCallback(function(b){n.current=tc(b),r.current=void 0},[]),m=p.useCallback(function(b){d(b.type,H0(b),b.target,l(b,t.lockRef.current))},[]),h=p.useCallback(function(b){d(b.type,tc(b),b.target,l(b,t.lockRef.current))},[]);p.useEffect(function(){return eo.push(o),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",u,Zs),document.addEventListener("touchmove",u,Zs),document.addEventListener("touchstart",f,Zs),function(){eo=eo.filter(function(b){return b!==o}),document.removeEventListener("wheel",u,Zs),document.removeEventListener("touchmove",u,Zs),document.removeEventListener("touchstart",f,Zs)}},[]);var x=t.removeScrollBar,y=t.inert;return p.createElement(p.Fragment,null,y?p.createElement(o,{styles:g6(s)}):null,x?p.createElement(a6,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function v6(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const b6=qD(a_,y6);var ad=p.forwardRef(function(t,e){return p.createElement(id,Dn({},t,{ref:e,sideCar:b6}))});ad.classNames=id.classNames;var pm=["Enter"," "],w6=["ArrowDown","PageUp","Home"],h_=["ArrowUp","PageDown","End"],E6=[...w6,...h_],_6={ltr:[...pm,"ArrowRight"],rtl:[...pm,"ArrowLeft"]},N6={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ol="Menu",[Da,S6,j6]=gg(ol),[Hs,wg]=jt(ol,[j6,ri,ii]),ld=ri(),f_=ii(),[C6,Gs]=Hs(ol),[k6,il]=Hs(ol),m_=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:o,modal:a=!0}=t,l=ld(e),[u,d]=p.useState(null),f=p.useRef(!1),m=it(o),h=rl(s);return p.useEffect(()=>{const x=()=>{f.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>f.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),i.jsx(Op,{...l,children:i.jsx(C6,{scope:e,open:n,onOpenChange:m,content:u,onContentChange:d,children:i.jsx(k6,{scope:e,onClose:p.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:f,dir:h,modal:a,children:r})})})};m_.displayName=ol;var T6="MenuAnchor",Eg=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=ld(n);return i.jsx(Wu,{...s,...r,ref:e})});Eg.displayName=T6;var _g="MenuPortal",[A6,p_]=Hs(_g,{forceMount:void 0}),g_=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,o=Gs(_g,e);return i.jsx(A6,{scope:e,forceMount:n,children:i.jsx(et,{present:n||o.open,children:i.jsx(Qa,{asChild:!0,container:s,children:r})})})};g_.displayName=_g;var sn="MenuContent",[P6,Ng]=Hs(sn),x_=p.forwardRef((t,e)=>{const n=p_(sn,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,o=Gs(sn,t.__scopeMenu),a=il(sn,t.__scopeMenu);return i.jsx(Da.Provider,{scope:t.__scopeMenu,children:i.jsx(et,{present:r||o.open,children:i.jsx(Da.Slot,{scope:t.__scopeMenu,children:a.modal?i.jsx(R6,{...s,ref:e}):i.jsx(I6,{...s,ref:e})})})})}),R6=p.forwardRef((t,e)=>{const n=Gs(sn,t.__scopeMenu),r=p.useRef(null),s=ye(e,r);return p.useEffect(()=>{const o=r.current;if(o)return bg(o)},[]),i.jsx(Sg,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Q(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),I6=p.forwardRef((t,e)=>{const n=Gs(sn,t.__scopeMenu);return i.jsx(Sg,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),M6=Rs("MenuContent.ScrollLock"),Sg=p.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:u,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:h,onDismiss:x,disableOutsideScroll:y,...b}=t,j=Gs(sn,n),_=il(sn,n),E=ld(n),S=f_(n),R=S6(n),[T,D]=p.useState(null),N=p.useRef(null),w=ye(e,N,j.onContentChange),C=p.useRef(0),A=p.useRef(""),I=p.useRef(0),M=p.useRef(null),k=p.useRef("right"),O=p.useRef(0),z=y?ad:p.Fragment,H=y?{as:M6,allowPinchZoom:!0}:void 0,Y=$=>{const W=A.current+$,ne=R().filter(re=>!re.disabled),le=document.activeElement,pe=ne.find(re=>re.ref.current===le)?.textValue,de=ne.map(re=>re.textValue),tt=K6(de,W,pe),Ie=ne.find(re=>re.textValue===tt)?.ref.current;(function re(Yt){A.current=Yt,window.clearTimeout(C.current),Yt!==""&&(C.current=window.setTimeout(()=>re(""),1e3))})(W),Ie&&setTimeout(()=>Ie.focus())};p.useEffect(()=>()=>window.clearTimeout(C.current),[]),xg();const L=p.useCallback($=>k.current===M.current?.side&&q6($,M.current?.area),[]);return i.jsx(P6,{scope:n,searchRef:A,onItemEnter:p.useCallback($=>{L($)&&$.preventDefault()},[L]),onItemLeave:p.useCallback($=>{L($)||(N.current?.focus(),D(null))},[L]),onTriggerLeave:p.useCallback($=>{L($)&&$.preventDefault()},[L]),pointerGraceTimerRef:I,onPointerGraceIntentChange:p.useCallback($=>{M.current=$},[]),children:i.jsx(z,{...H,children:i.jsx(od,{asChild:!0,trapped:s,onMountAutoFocus:Q(o,$=>{$.preventDefault(),N.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:i.jsx(Wa,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:h,onDismiss:x,children:i.jsx(yg,{asChild:!0,...S,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:T,onCurrentTabStopIdChange:D,onEntryFocus:Q(u,$=>{_.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(Lp,{role:"menu","aria-orientation":"vertical","data-state":I_(j.open),"data-radix-menu-content":"",dir:_.dir,...E,...b,ref:w,style:{outline:"none",...b.style},onKeyDown:Q(b.onKeyDown,$=>{const ne=$.target.closest("[data-radix-menu-content]")===$.currentTarget,le=$.ctrlKey||$.altKey||$.metaKey,pe=$.key.length===1;ne&&($.key==="Tab"&&$.preventDefault(),!le&&pe&&Y($.key));const de=N.current;if($.target!==de||!E6.includes($.key))return;$.preventDefault();const Ie=R().filter(re=>!re.disabled).map(re=>re.ref.current);h_.includes($.key)&&Ie.reverse(),H6(Ie)}),onBlur:Q(t.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(C.current),A.current="")}),onPointerMove:Q(t.onPointerMove,Oa($=>{const W=$.target,ne=O.current!==$.clientX;if($.currentTarget.contains(W)&&ne){const le=$.clientX>O.current?"right":"left";k.current=le,O.current=$.clientX}}))})})})})})})});x_.displayName=sn;var D6="MenuGroup",jg=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(oe.div,{role:"group",...r,ref:e})});jg.displayName=D6;var O6="MenuLabel",y_=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(oe.div,{...r,ref:e})});y_.displayName=O6;var mu="MenuItem",K0="menu.itemSelect",cd=p.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,o=p.useRef(null),a=il(mu,t.__scopeMenu),l=Ng(mu,t.__scopeMenu),u=ye(e,o),d=p.useRef(!1),f=()=>{const m=o.current;if(!n&&m){const h=new CustomEvent(K0,{bubbles:!0,cancelable:!0});m.addEventListener(K0,x=>r?.(x),{once:!0}),Y1(m,h),h.defaultPrevented?d.current=!1:a.onClose()}};return i.jsx(v_,{...s,ref:u,disabled:n,onClick:Q(t.onClick,f),onPointerDown:m=>{t.onPointerDown?.(m),d.current=!0},onPointerUp:Q(t.onPointerUp,m=>{d.current||m.currentTarget?.click()}),onKeyDown:Q(t.onKeyDown,m=>{const h=l.searchRef.current!=="";n||h&&m.key===" "||pm.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});cd.displayName=mu;var v_=p.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...o}=t,a=Ng(mu,n),l=f_(n),u=p.useRef(null),d=ye(e,u),[f,m]=p.useState(!1),[h,x]=p.useState("");return p.useEffect(()=>{const y=u.current;y&&x((y.textContent??"").trim())},[o.children]),i.jsx(Da.ItemSlot,{scope:n,disabled:r,textValue:s??h,children:i.jsx(vg,{asChild:!0,...l,focusable:!r,children:i.jsx(oe.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:d,onPointerMove:Q(t.onPointerMove,Oa(y=>{r?a.onItemLeave(y):(a.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Q(t.onPointerLeave,Oa(y=>a.onItemLeave(y))),onFocus:Q(t.onFocus,()=>m(!0)),onBlur:Q(t.onBlur,()=>m(!1))})})})}),L6="MenuCheckboxItem",b_=p.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return i.jsx(S_,{scope:t.__scopeMenu,checked:n,children:i.jsx(cd,{role:"menuitemcheckbox","aria-checked":pu(n)?"mixed":n,...s,ref:e,"data-state":kg(n),onSelect:Q(s.onSelect,()=>r?.(pu(n)?!0:!n),{checkForDefaultPrevented:!1})})})});b_.displayName=L6;var w_="MenuRadioGroup",[V6,F6]=Hs(w_,{value:void 0,onValueChange:()=>{}}),E_=p.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,o=it(r);return i.jsx(V6,{scope:t.__scopeMenu,value:n,onValueChange:o,children:i.jsx(jg,{...s,ref:e})})});E_.displayName=w_;var __="MenuRadioItem",N_=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=F6(__,t.__scopeMenu),o=n===s.value;return i.jsx(S_,{scope:t.__scopeMenu,checked:o,children:i.jsx(cd,{role:"menuitemradio","aria-checked":o,...r,ref:e,"data-state":kg(o),onSelect:Q(r.onSelect,()=>s.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});N_.displayName=__;var Cg="MenuItemIndicator",[S_,$6]=Hs(Cg,{checked:!1}),j_=p.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,o=$6(Cg,n);return i.jsx(et,{present:r||pu(o.checked)||o.checked===!0,children:i.jsx(oe.span,{...s,ref:e,"data-state":kg(o.checked)})})});j_.displayName=Cg;var z6="MenuSeparator",C_=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(oe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});C_.displayName=z6;var B6="MenuArrow",k_=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=ld(n);return i.jsx(Vp,{...s,...r,ref:e})});k_.displayName=B6;var U6="MenuSub",[kF,T_]=Hs(U6),Bi="MenuSubTrigger",A_=p.forwardRef((t,e)=>{const n=Gs(Bi,t.__scopeMenu),r=il(Bi,t.__scopeMenu),s=T_(Bi,t.__scopeMenu),o=Ng(Bi,t.__scopeMenu),a=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:u}=o,d={__scopeMenu:t.__scopeMenu},f=p.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return p.useEffect(()=>f,[f]),p.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),u(null)}},[l,u]),i.jsx(Eg,{asChild:!0,...d,children:i.jsx(v_,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":I_(n.open),...t,ref:Bu(e,s.onTriggerChange),onClick:m=>{t.onClick?.(m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Q(t.onPointerMove,Oa(m=>{o.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!n.open&&!a.current&&(o.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Q(t.onPointerLeave,Oa(m=>{f();const h=n.content?.getBoundingClientRect();if(h){const x=n.content?.dataset.side,y=x==="right",b=y?-5:5,j=h[y?"left":"right"],_=h[y?"right":"left"];o.onPointerGraceIntentChange({area:[{x:m.clientX+b,y:m.clientY},{x:j,y:h.top},{x:_,y:h.top},{x:_,y:h.bottom},{x:j,y:h.bottom}],side:x}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(m),m.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Q(t.onKeyDown,m=>{const h=o.searchRef.current!=="";t.disabled||h&&m.key===" "||_6[r.dir].includes(m.key)&&(n.onOpenChange(!0),n.content?.focus(),m.preventDefault())})})})});A_.displayName=Bi;var P_="MenuSubContent",R_=p.forwardRef((t,e)=>{const n=p_(sn,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,o=Gs(sn,t.__scopeMenu),a=il(sn,t.__scopeMenu),l=T_(P_,t.__scopeMenu),u=p.useRef(null),d=ye(e,u);return i.jsx(Da.Provider,{scope:t.__scopeMenu,children:i.jsx(et,{present:r||o.open,children:i.jsx(Da.Slot,{scope:t.__scopeMenu,children:i.jsx(Sg,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:d,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{a.isUsingKeyboardRef.current&&u.current?.focus(),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Q(t.onFocusOutside,f=>{f.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Q(t.onEscapeKeyDown,f=>{a.onClose(),f.preventDefault()}),onKeyDown:Q(t.onKeyDown,f=>{const m=f.currentTarget.contains(f.target),h=N6[a.dir].includes(f.key);m&&h&&(o.onOpenChange(!1),l.trigger?.focus(),f.preventDefault())})})})})})});R_.displayName=P_;function I_(t){return t?"open":"closed"}function pu(t){return t==="indeterminate"}function kg(t){return pu(t)?"indeterminate":t?"checked":"unchecked"}function H6(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function G6(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function K6(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let a=G6(t,Math.max(o,0));s.length===1&&(a=a.filter(d=>d!==n));const u=a.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function W6(t,e){const{x:n,y:r}=t;let s=!1;for(let o=0,a=e.length-1;o<e.length;a=o++){const l=e[o],u=e[a],d=l.x,f=l.y,m=u.x,h=u.y;f>r!=h>r&&n<(m-d)*(r-f)/(h-f)+d&&(s=!s)}return s}function q6(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return W6(n,e)}function Oa(t){return e=>e.pointerType==="mouse"?t(e):void 0}var M_=m_,D_=Eg,O_=g_,L_=x_,V_=jg,F_=y_,$_=cd,z_=b_,B_=E_,U_=N_,H_=j_,G_=C_,K_=k_,W_=A_,q_=R_,ud="DropdownMenu",[Q6]=jt(ud,[wg]),Ct=wg(),[Y6,Q_]=Q6(ud),Y_=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:o,onOpenChange:a,modal:l=!0}=t,u=Ct(e),d=p.useRef(null),[f,m]=es({prop:s,defaultProp:o??!1,onChange:a,caller:ud});return i.jsx(Y6,{scope:e,triggerId:bn(),triggerRef:d,contentId:bn(),open:f,onOpenChange:m,onOpenToggle:p.useCallback(()=>m(h=>!h),[m]),modal:l,children:i.jsx(M_,{...u,open:f,onOpenChange:m,dir:r,modal:l,children:n})})};Y_.displayName=ud;var X_="DropdownMenuTrigger",J_=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,o=Q_(X_,n),a=Ct(n);return i.jsx(D_,{asChild:!0,...a,children:i.jsx(oe.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Bu(e,o.triggerRef),onPointerDown:Q(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:Q(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});J_.displayName=X_;var X6="DropdownMenuPortal",Z_=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Ct(e);return i.jsx(O_,{...r,...n})};Z_.displayName=X6;var eN="DropdownMenuContent",tN=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Q_(eN,n),o=Ct(n),a=p.useRef(!1);return i.jsx(L_,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:e,onCloseAutoFocus:Q(t.onCloseAutoFocus,l=>{a.current||s.triggerRef.current?.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:Q(t.onInteractOutside,l=>{const u=l.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0,f=u.button===2||d;(!s.modal||f)&&(a.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});tN.displayName=eN;var J6="DropdownMenuGroup",Z6=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ct(n);return i.jsx(V_,{...s,...r,ref:e})});Z6.displayName=J6;var eO="DropdownMenuLabel",nN=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ct(n);return i.jsx(F_,{...s,...r,ref:e})});nN.displayName=eO;var tO="DropdownMenuItem",rN=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ct(n);return i.jsx($_,{...s,...r,ref:e})});rN.displayName=tO;var nO="DropdownMenuCheckboxItem",rO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ct(n);return i.jsx(z_,{...s,...r,ref:e})});rO.displayName=nO;var sO="DropdownMenuRadioGroup",oO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ct(n);return i.jsx(B_,{...s,...r,ref:e})});oO.displayName=sO;var iO="DropdownMenuRadioItem",aO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ct(n);return i.jsx(U_,{...s,...r,ref:e})});aO.displayName=iO;var lO="DropdownMenuItemIndicator",cO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ct(n);return i.jsx(H_,{...s,...r,ref:e})});cO.displayName=lO;var uO="DropdownMenuSeparator",sN=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ct(n);return i.jsx(G_,{...s,...r,ref:e})});sN.displayName=uO;var dO="DropdownMenuArrow",hO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ct(n);return i.jsx(K_,{...s,...r,ref:e})});hO.displayName=dO;var fO="DropdownMenuSubTrigger",mO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ct(n);return i.jsx(W_,{...s,...r,ref:e})});mO.displayName=fO;var pO="DropdownMenuSubContent",gO=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ct(n);return i.jsx(q_,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});gO.displayName=pO;var xO=Y_,yO=J_,vO=Z_,bO=tN,wO=nN,EO=rN,_O=sN;function gm({...t}){return i.jsx(xO,{"data-slot":"dropdown-menu",...t})}function xm({...t}){return i.jsx(yO,{"data-slot":"dropdown-menu-trigger",...t})}function ym({className:t,sideOffset:e=4,...n}){return i.jsx(vO,{children:i.jsx(bO,{"data-slot":"dropdown-menu-content",sideOffset:e,className:ue("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function At({className:t,inset:e,variant:n="default",...r}){return i.jsx(EO,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":n,className:ue("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function Oh({className:t,inset:e,...n}){return i.jsx(wO,{"data-slot":"dropdown-menu-label","data-inset":e,className:ue("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...n})}function gu({className:t,...e}){return i.jsx(_O,{"data-slot":"dropdown-menu-separator",className:ue("bg-border -mx-1 my-1 h-px",t),...e})}var dd="Dialog",[oN,TF]=jt(dd),[NO,jn]=oN(dd),iN=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=p.useRef(null),u=p.useRef(null),[d,f]=es({prop:r,defaultProp:s??!1,onChange:o,caller:dd});return i.jsx(NO,{scope:e,triggerRef:l,contentRef:u,contentId:bn(),titleId:bn(),descriptionId:bn(),open:d,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(m=>!m),[f]),modal:a,children:n})};iN.displayName=dd;var aN="DialogTrigger",lN=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=jn(aN,n),o=ye(e,s.triggerRef);return i.jsx(oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Pg(s.open),...r,ref:o,onClick:Q(t.onClick,s.onOpenToggle)})});lN.displayName=aN;var Tg="DialogPortal",[SO,cN]=oN(Tg,{forceMount:void 0}),uN=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,o=jn(Tg,e);return i.jsx(SO,{scope:e,forceMount:n,children:p.Children.map(r,a=>i.jsx(et,{present:n||o.open,children:i.jsx(Qa,{asChild:!0,container:s,children:a})}))})};uN.displayName=Tg;var xu="DialogOverlay",dN=p.forwardRef((t,e)=>{const n=cN(xu,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,o=jn(xu,t.__scopeDialog);return o.modal?i.jsx(et,{present:r||o.open,children:i.jsx(CO,{...s,ref:e})}):null});dN.displayName=xu;var jO=Rs("DialogOverlay.RemoveScroll"),CO=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=jn(xu,n);return i.jsx(ad,{as:jO,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(oe.div,{"data-state":Pg(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Vs="DialogContent",hN=p.forwardRef((t,e)=>{const n=cN(Vs,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,o=jn(Vs,t.__scopeDialog);return i.jsx(et,{present:r||o.open,children:o.modal?i.jsx(kO,{...s,ref:e}):i.jsx(TO,{...s,ref:e})})});hN.displayName=Vs;var kO=p.forwardRef((t,e)=>{const n=jn(Vs,t.__scopeDialog),r=p.useRef(null),s=ye(e,n.contentRef,r);return p.useEffect(()=>{const o=r.current;if(o)return bg(o)},[]),i.jsx(fN,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Q(t.onCloseAutoFocus,o=>{o.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Q(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&o.preventDefault()}),onFocusOutside:Q(t.onFocusOutside,o=>o.preventDefault())})}),TO=p.forwardRef((t,e)=>{const n=jn(Vs,t.__scopeDialog),r=p.useRef(!1),s=p.useRef(!1);return i.jsx(fN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||n.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;n.triggerRef.current?.contains(a)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),fN=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...a}=t,l=jn(Vs,n),u=p.useRef(null),d=ye(e,u);return xg(),i.jsxs(i.Fragment,{children:[i.jsx(od,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(Wa,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Pg(l.open),...a,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(AO,{titleId:l.titleId}),i.jsx(RO,{contentRef:u,descriptionId:l.descriptionId})]})]})}),Ag="DialogTitle",mN=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=jn(Ag,n);return i.jsx(oe.h2,{id:s.titleId,...r,ref:e})});mN.displayName=Ag;var pN="DialogDescription",gN=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=jn(pN,n);return i.jsx(oe.p,{id:s.descriptionId,...r,ref:e})});gN.displayName=pN;var xN="DialogClose",yN=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=jn(xN,n);return i.jsx(oe.button,{type:"button",...r,ref:e,onClick:Q(t.onClick,()=>s.onOpenChange(!1))})});yN.displayName=xN;function Pg(t){return t?"open":"closed"}var vN="DialogTitleWarning",[AF,bN]=DT(vN,{contentName:Vs,titleName:Ag,docsSlug:"dialog"}),AO=({titleId:t})=>{const e=bN(vN),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},PO="DialogDescriptionWarning",RO=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${bN(PO).contentName}}.`;return p.useEffect(()=>{const s=t.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},IO=iN,wN=lN,MO=uN,EN=dN,_N=hN,NN=mN,SN=gN,Rg=yN;function yu({...t}){return i.jsx(IO,{"data-slot":"dialog",...t})}const vm=p.forwardRef(({...t},e)=>i.jsx(wN,{ref:e,"data-slot":"dialog-trigger",...t}));vm.displayName=wN.displayName;function DO({...t}){return i.jsx(MO,{"data-slot":"dialog-portal",...t})}const OO=p.forwardRef(({...t},e)=>i.jsx(Rg,{ref:e,"data-slot":"dialog-close",...t}));OO.displayName=Rg.displayName;const jN=p.forwardRef(({className:t,...e},n)=>i.jsx(EN,{ref:n,"data-slot":"dialog-overlay",className:ue("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e}));jN.displayName=EN.displayName;const La=p.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(DO,{"data-slot":"dialog-portal",children:[i.jsx(jN,{}),i.jsxs(_N,{ref:r,"data-slot":"dialog-content",className:ue("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[e,i.jsxs(Rg,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[i.jsx(Ms,{}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));La.displayName=_N.displayName;const Va=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,"data-slot":"dialog-header",className:ue("flex flex-col gap-2 text-center sm:text-left",t),...e}));Va.displayName="DialogHeader";const Ig=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,"data-slot":"dialog-footer",className:ue("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e}));Ig.displayName="DialogFooter";const Fa=p.forwardRef(({className:t,...e},n)=>i.jsx(NN,{ref:n,"data-slot":"dialog-title",className:ue("text-lg leading-none font-semibold",t),...e}));Fa.displayName=NN.displayName;const Mg=p.forwardRef(({className:t,...e},n)=>i.jsx(SN,{ref:n,"data-slot":"dialog-description",className:ue("text-muted-foreground text-sm",t),...e}));Mg.displayName=SN.displayName;var LO="Label",CN=p.forwardRef((t,e)=>i.jsx(oe.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));CN.displayName=LO;var VO=CN;function Ee({className:t,...e}){return i.jsx(VO,{"data-slot":"label",className:ue("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}function kN(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Dg="Radio",[FO,TN]=jt(Dg),[$O,zO]=FO(Dg),AN=p.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:o,disabled:a,value:l="on",onCheck:u,form:d,...f}=t,[m,h]=p.useState(null),x=ye(e,j=>h(j)),y=p.useRef(!1),b=m?d||!!m.closest("form"):!0;return i.jsxs($O,{scope:n,checked:s,disabled:a,children:[i.jsx(oe.button,{type:"button",role:"radio","aria-checked":s,"data-state":MN(s),"data-disabled":a?"":void 0,disabled:a,value:l,...f,ref:x,onClick:Q(t.onClick,j=>{s||u?.(),b&&(y.current=j.isPropagationStopped(),y.current||j.stopPropagation())})}),b&&i.jsx(IN,{control:m,bubbles:!y.current,name:r,value:l,checked:s,required:o,disabled:a,form:d,style:{transform:"translateX(-100%)"}})]})});AN.displayName=Dg;var PN="RadioIndicator",RN=p.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...s}=t,o=zO(PN,n);return i.jsx(et,{present:r||o.checked,children:i.jsx(oe.span,{"data-state":MN(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:e})})});RN.displayName=PN;var BO="RadioBubbleInput",IN=p.forwardRef(({__scopeRadio:t,control:e,checked:n,bubbles:r=!0,...s},o)=>{const a=p.useRef(null),l=ye(a,o),u=kN(n),d=Ip(e);return p.useEffect(()=>{const f=a.current;if(!f)return;const m=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(m,"checked").set;if(u!==n&&x){const y=new Event("click",{bubbles:r});x.call(f,n),f.dispatchEvent(y)}},[u,n,r]),i.jsx(oe.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});IN.displayName=BO;function MN(t){return t?"checked":"unchecked"}var UO=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],hd="RadioGroup",[HO]=jt(hd,[ii,TN]),DN=ii(),ON=TN(),[GO,KO]=HO(hd),LN=p.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:o,required:a=!1,disabled:l=!1,orientation:u,dir:d,loop:f=!0,onValueChange:m,...h}=t,x=DN(n),y=rl(d),[b,j]=es({prop:o,defaultProp:s??null,onChange:m,caller:hd});return i.jsx(GO,{scope:n,name:r,required:a,disabled:l,value:b,onValueChange:j,children:i.jsx(yg,{asChild:!0,...x,orientation:u,dir:y,loop:f,children:i.jsx(oe.div,{role:"radiogroup","aria-required":a,"aria-orientation":u,"data-disabled":l?"":void 0,dir:y,...h,ref:e})})})});LN.displayName=hd;var VN="RadioGroupItem",FN=p.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...s}=t,o=KO(VN,n),a=o.disabled||r,l=DN(n),u=ON(n),d=p.useRef(null),f=ye(e,d),m=o.value===s.value,h=p.useRef(!1);return p.useEffect(()=>{const x=b=>{UO.includes(b.key)&&(h.current=!0)},y=()=>h.current=!1;return document.addEventListener("keydown",x),document.addEventListener("keyup",y),()=>{document.removeEventListener("keydown",x),document.removeEventListener("keyup",y)}},[]),i.jsx(vg,{asChild:!0,...l,focusable:!a,active:m,children:i.jsx(AN,{disabled:a,required:o.required,checked:m,...u,...s,name:o.name,ref:f,onCheck:()=>o.onValueChange(s.value),onKeyDown:Q(x=>{x.key==="Enter"&&x.preventDefault()}),onFocus:Q(s.onFocus,()=>{h.current&&d.current?.click()})})})});FN.displayName=VN;var WO="RadioGroupIndicator",$N=p.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,s=ON(n);return i.jsx(RN,{...s,...r,ref:e})});$N.displayName=WO;var qO=LN,QO=FN,YO=$N;function js({className:t,...e}){return i.jsx(qO,{"data-slot":"radio-group",className:ue("grid gap-3",t),...e})}function zt({className:t,...e}){return i.jsx(QO,{"data-slot":"radio-group-item",className:ue("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:i.jsx(YO,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:i.jsx(R4,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}var fd="Checkbox",[XO]=jt(fd),[JO,Og]=XO(fd);function ZO(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:o,form:a,name:l,onCheckedChange:u,required:d,value:f="on",internal_do_not_use_render:m}=t,[h,x]=es({prop:n,defaultProp:s??!1,onChange:u,caller:fd}),[y,b]=p.useState(null),[j,_]=p.useState(null),E=p.useRef(!1),S=y?!!a||!!y.closest("form"):!0,R={checked:h,disabled:o,setChecked:x,control:y,setControl:b,name:l,form:a,value:f,hasConsumerStoppedPropagationRef:E,required:d,defaultChecked:Ur(s)?!1:s,isFormControl:S,bubbleInput:j,setBubbleInput:_};return i.jsx(JO,{scope:e,...R,children:eL(m)?m(R):r})}var zN="CheckboxTrigger",BN=p.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:o,value:a,disabled:l,checked:u,required:d,setControl:f,setChecked:m,hasConsumerStoppedPropagationRef:h,isFormControl:x,bubbleInput:y}=Og(zN,t),b=ye(s,f),j=p.useRef(u);return p.useEffect(()=>{const _=o?.form;if(_){const E=()=>m(j.current);return _.addEventListener("reset",E),()=>_.removeEventListener("reset",E)}},[o,m]),i.jsx(oe.button,{type:"button",role:"checkbox","aria-checked":Ur(u)?"mixed":u,"aria-required":d,"data-state":qN(u),"data-disabled":l?"":void 0,disabled:l,value:a,...r,ref:b,onKeyDown:Q(e,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:Q(n,_=>{m(E=>Ur(E)?!0:!E),y&&x&&(h.current=_.isPropagationStopped(),h.current||_.stopPropagation())})})});BN.displayName=zN;var UN=p.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:o,required:a,disabled:l,value:u,onCheckedChange:d,form:f,...m}=t;return i.jsx(ZO,{__scopeCheckbox:n,checked:s,defaultChecked:o,disabled:l,required:a,onCheckedChange:d,name:r,form:f,value:u,internal_do_not_use_render:({isFormControl:h})=>i.jsxs(i.Fragment,{children:[i.jsx(BN,{...m,ref:e,__scopeCheckbox:n}),h&&i.jsx(WN,{__scopeCheckbox:n})]})})});UN.displayName=fd;var HN="CheckboxIndicator",GN=p.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,o=Og(HN,n);return i.jsx(et,{present:r||Ur(o.checked)||o.checked===!0,children:i.jsx(oe.span,{"data-state":qN(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});GN.displayName=HN;var KN="CheckboxBubbleInput",WN=p.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:o,defaultChecked:a,required:l,disabled:u,name:d,value:f,form:m,bubbleInput:h,setBubbleInput:x}=Og(KN,t),y=ye(n,x),b=kN(o),j=Ip(r);p.useEffect(()=>{const E=h;if(!E)return;const S=window.HTMLInputElement.prototype,T=Object.getOwnPropertyDescriptor(S,"checked").set,D=!s.current;if(b!==o&&T){const N=new Event("click",{bubbles:D});E.indeterminate=Ur(o),T.call(E,Ur(o)?!1:o),E.dispatchEvent(N)}},[h,b,o,s]);const _=p.useRef(Ur(o)?!1:o);return i.jsx(oe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??_.current,required:l,disabled:u,name:d,value:f,form:m,...e,tabIndex:-1,ref:y,style:{...e.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});WN.displayName=KN;function eL(t){return typeof t=="function"}function Ur(t){return t==="indeterminate"}function qN(t){return Ur(t)?"indeterminate":t?"checked":"unchecked"}function ys({className:t,...e}){return i.jsx(UN,{"data-slot":"checkbox",className:ue("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:i.jsx(GN,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:i.jsx(or,{className:"size-3.5"})})})}class tL{baseUrl;authToken;constructor(e){this.baseUrl="",this.authToken=e}setAuthToken(e){this.authToken=e}async exportToMarkdown(e){return this.export({...e,format:"md"})}async exportToHTML(e){return this.export({...e,format:"html"})}async exportToPDF(e){return this.export({...e,format:"pdf"})}async export(e){return console.log("[Export SDK] export called with:",e),{filename:`export.${e.format}`,content:`# Mock Export

This is a mock export in ${e.format} format.`}}async createShareLink(e){return console.log("[Export SDK] createShareLink called with:",e),{link:"https://example.com/share/mock-link",token:"mock-token",expires_at:null}}async revokeShareLink(e){return console.log("[Export SDK] revokeShareLink called with:",e),{ok:!0}}async getSharedContent(e){return console.log("[Export SDK] getSharedContent called with:",e),{thread:{title:"Mock Thread",system:"Mock System"},messages:[],readOnly:!0}}async downloadExport(e){if(e.url)window.open(e.url,"_blank");else if(e.content){const n=new Blob([e.content],{type:e.filename.endsWith(".html")?"text/html":"text/markdown"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=e.filename,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)}}async copyToClipboard(e){if(navigator.clipboard)await navigator.clipboard.writeText(e);else{const n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)}}async copyShareLink(e){await this.copyToClipboard(e.link)}}const Pn=new tL,{exportToMarkdown:PF,exportToHTML:RF,exportToPDF:IF,createShareLink:MF,revokeShareLink:DF,getSharedContent:OF,downloadExport:LF,copyToClipboard:VF,copyShareLink:FF}=Pn;function nL(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}Array(12).fill(0);let bm=1;class rL{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...s}=e,o=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:bm++,a=this.toasts.find(u=>u.id===o),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),a?this.toasts=this.toasts.map(u=>u.id===o?(this.publish({...u,...e,id:o,title:r}),{...u,...e,id:o,dismissible:l,title:r}):u):this.addToast({title:r,...s,dismissible:l,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let o=r!==void 0,a;const l=s.then(async d=>{if(a=["resolve",d],_e.isValidElement(d))o=!1,this.create({id:r,type:"default",message:d});else if(oL(d)&&!d.ok){o=!1;const m=typeof n.error=="function"?await n.error(`HTTP error! status: ${d.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${d.status}`):n.description,y=typeof m=="object"&&!_e.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:h,...y})}else if(d instanceof Error){o=!1;const m=typeof n.error=="function"?await n.error(d):n.error,h=typeof n.description=="function"?await n.description(d):n.description,y=typeof m=="object"&&!_e.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:h,...y})}else if(n.success!==void 0){o=!1;const m=typeof n.success=="function"?await n.success(d):n.success,h=typeof n.description=="function"?await n.description(d):n.description,y=typeof m=="object"&&!_e.isValidElement(m)?m:{message:m};this.create({id:r,type:"success",description:h,...y})}}).catch(async d=>{if(a=["reject",d],n.error!==void 0){o=!1;const f=typeof n.error=="function"?await n.error(d):n.error,m=typeof n.description=="function"?await n.description(d):n.description,x=typeof f=="object"&&!_e.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:m,...x})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),u=()=>new Promise((d,f)=>l.then(()=>a[0]==="reject"?f(a[1]):d(a[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(e,n)=>{const r=n?.id||bm++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Xt=new rL,sL=(t,e)=>{const n=e?.id||bm++;return Xt.addToast({title:t,...e,id:n}),n},oL=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",iL=sL,aL=()=>Xt.toasts,lL=()=>Xt.getActiveToasts(),qe=Object.assign(iL,{success:Xt.success,info:Xt.info,warning:Xt.warning,error:Xt.error,custom:Xt.custom,message:Xt.message,promise:Xt.promise,dismiss:Xt.dismiss,loading:Xt.loading},{getHistory:aL,getToasts:lL});nL("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const Lg=t=>{const[e,n]=p.useState({isExporting:!1,isSharing:!1,exportError:null,shareError:null,lastExport:null,lastShare:null});t&&Pn.setAuthToken(t);const r=p.useCallback(async x=>{n(y=>({...y,isExporting:!0,exportError:null}));try{let y;switch(x.format){case"md":y=await Pn.exportToMarkdown(x);break;case"html":y=await Pn.exportToHTML(x);break;case"pdf":y=await Pn.exportToPDF(x);break;default:throw new Error(`Formato no soportado: ${x.format}`)}n(j=>({...j,isExporting:!1,lastExport:y}));const b={md:"Markdown",html:"HTML",pdf:"PDF"};return qe.success(`Chat exportado a ${b[x.format]} exitosamente`),y}catch(y){const b=y instanceof Error?y.message:"Error desconocido";throw n(j=>({...j,isExporting:!1,exportError:b})),qe.error(`Error al exportar: ${b}`),y}},[]),s=p.useCallback(async()=>{if(!e.lastExport){qe.error("No hay exportación disponible para descargar");return}try{await Pn.downloadExport(e.lastExport),qe.success("Descarga iniciada")}catch(x){const y=x instanceof Error?x.message:"Error en la descarga";qe.error(`Error al descargar: ${y}`)}},[e.lastExport]),o=p.useCallback(async()=>{if(!e.lastExport?.content){qe.error("No hay contenido disponible para copiar");return}try{await Pn.copyToClipboard(e.lastExport.content),qe.success("Contenido copiado al portapapeles")}catch{qe.error("Error al copiar al portapapeles")}},[e.lastExport]),a=p.useCallback(async x=>{n(y=>({...y,isSharing:!0,shareError:null}));try{const y=await Pn.createShareLink(x);return n(b=>({...b,isSharing:!1,lastShare:y})),qe.success("Enlace de compartir creado exitosamente"),y}catch(y){const b=y instanceof Error?y.message:"Error desconocido";throw n(j=>({...j,isSharing:!1,shareError:b})),qe.error(`Error al crear enlace: ${b}`),y}},[]),l=p.useCallback(async()=>{if(!e.lastShare){qe.error("No hay enlace disponible para copiar");return}try{await Pn.copyShareLink(e.lastShare),qe.success("Enlace copiado al portapapeles")}catch{qe.error("Error al copiar enlace")}},[e.lastShare]),u=p.useCallback(async x=>{try{await Pn.revokeShareLink(x),qe.success("Enlace revocado exitosamente"),n(y=>({...y,lastShare:null}))}catch(y){const b=y instanceof Error?y.message:"Error desconocido";throw qe.error(`Error al revocar enlace: ${b}`),y}},[]),d=p.useCallback(async(x,y,b="md")=>r({threadId:x,messageId:y,range:"current",format:b,cleanup:{hideMeta:!1,hideChips:!1,maskPII:!1}}),[r]),f=p.useCallback(async(x,y={})=>a({threadId:x,mode:y.mode||"readonly",scope:"thread",expiresDays:y.expiresDays||7,hideUsernames:y.hideUsernames??!0,cleanup:{hideMeta:!0,hideChips:!0,maskPII:!0}}),[a]),m=p.useCallback(()=>{n(x=>({...x,exportError:null,shareError:null}))},[]),h=p.useCallback(()=>{n({isExporting:!1,isSharing:!1,exportError:null,shareError:null,lastExport:null,lastShare:null})},[]);return{...e,exportConversation:r,exportCurrentMessage:d,downloadLastExport:s,copyExportToClipboard:o,createShareLink:a,shareConversation:f,copyShareLink:l,revokeShareLink:u,clearErrors:m,reset:h,hasExport:!!e.lastExport,hasShare:!!e.lastShare,isLoading:e.isExporting||e.isSharing,hasErrors:!!(e.exportError||e.shareError)}};var cL="Separator",W0="horizontal",uL=["horizontal","vertical"],QN=p.forwardRef((t,e)=>{const{decorative:n,orientation:r=W0,...s}=t,o=dL(r)?r:W0,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return i.jsx(oe.div,{"data-orientation":o,...l,...s,ref:e})});QN.displayName=cL;function dL(t){return uL.includes(t)}var hL=QN;function ia({className:t,orientation:e="horizontal",decorative:n=!0,...r}){return i.jsx(hL,{"data-slot":"separator-root",decorative:n,orientation:e,className:ue("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...r})}const Lh=({open:t,onOpenChange:e,threadId:n,threadTitle:r,messageCount:s,currentMessageId:o,selectedMessageIds:a=[],authToken:l})=>{const{exportConversation:u,downloadLastExport:d,copyExportToClipboard:f,isExporting:m,lastExport:h,exportError:x,clearErrors:y}=Lg(l),[b,j]=p.useState({format:"md",range:a.length>0?"selection":"thread",hideMeta:!1,hideChips:!1,maskPII:!1}),_={md:Jc,html:Bp,pdf:$2},E={md:"Markdown",html:"HTML",pdf:"PDF"},S=async()=>{y();const D={threadId:n,range:b.range,format:b.format,cleanup:{hideMeta:b.hideMeta,hideChips:b.hideChips,maskPII:b.maskPII},...b.range==="current"&&o?{messageId:o}:{},...b.range==="selection"?{selectionIds:a}:{}};try{await u(D)}catch(N){console.error("Export failed:",N)}},R=()=>{switch(b.range){case"thread":return`${s} mensajes completos`;case"selection":return`${a.length} mensajes seleccionados`;case"current":return"1 mensaje actual";default:return""}},T=D=>D==="selection"&&a.length===0||D==="current"&&!o;return i.jsx(yu,{open:t,onOpenChange:e,children:i.jsxs(La,{className:"max-w-md",children:[i.jsxs(Va,{children:[i.jsxs(Fa,{className:"flex items-center gap-2",children:[i.jsx(wn,{className:"h-5 w-5"}),"Exportar Conversación"]}),i.jsxs(Mg,{children:["Exporta ",i.jsx("strong",{children:r})," en el formato que prefieras."]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx(Ee,{className:"text-sm font-medium",children:"Formato"}),i.jsx(js,{value:b.format,onValueChange:D=>j(N=>({...N,format:D})),className:"grid grid-cols-3 gap-3",children:Object.entries(E).map(([D,N])=>{const w=_[D];return i.jsxs("div",{className:"relative",children:[i.jsx(zt,{value:D,id:D,className:"peer sr-only"}),i.jsxs(Ee,{htmlFor:D,className:"flex flex-col items-center gap-2 p-3 border rounded-lg cursor-pointer peer-checked:border-primary peer-checked:bg-primary/5 hover:bg-accent/50 transition-colors",children:[i.jsx(w,{className:"h-5 w-5"}),i.jsx("span",{className:"text-xs font-medium",children:N})]})]},D)})})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(Ee,{className:"text-sm font-medium",children:"Contenido"}),i.jsxs(js,{value:b.range,onValueChange:D=>j(N=>({...N,range:D})),className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(zt,{value:"thread",id:"thread"}),i.jsxs(Ee,{htmlFor:"thread",className:"text-sm",children:["Conversación completa",i.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",s," mensajes)"]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(zt,{value:"selection",id:"selection",disabled:T("selection")}),i.jsxs(Ee,{htmlFor:"selection",className:`text-sm ${T("selection")?"text-muted-foreground":""}`,children:["Mensajes seleccionados",i.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",a.length," seleccionados)"]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(zt,{value:"current",id:"current",disabled:T("current")}),i.jsx(Ee,{htmlFor:"current",className:`text-sm ${T("current")?"text-muted-foreground":""}`,children:"Mensaje actual"})]})]})]}),i.jsx(ia,{}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(Ee,{className:"text-sm font-medium",children:"Opciones de limpieza"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ys,{id:"hideMeta",checked:b.hideMeta,onCheckedChange:D=>j(N=>({...N,hideMeta:!!D}))}),i.jsx(Ee,{htmlFor:"hideMeta",className:"text-sm",children:"Ocultar metadatos (fechas, IDs)"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ys,{id:"hideChips",checked:b.hideChips,onCheckedChange:D=>j(N=>({...N,hideChips:!!D}))}),i.jsx(Ee,{htmlFor:"hideChips",className:"text-sm",children:"Ocultar chips de Brand Guard"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ys,{id:"maskPII",checked:b.maskPII,onCheckedChange:D=>j(N=>({...N,maskPII:!!D}))}),i.jsx(Ee,{htmlFor:"maskPII",className:"text-sm",children:"Enmascarar información personal (PII)"})]})]})]}),i.jsx("div",{className:"bg-muted/50 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(Ve,{variant:"outline",children:E[b.format]}),i.jsx("span",{className:"text-muted-foreground",children:"•"}),i.jsx("span",{className:"text-muted-foreground",children:R()})]})}),x&&i.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm text-destructive",children:[i.jsx(hr,{className:"h-4 w-4"}),i.jsx("span",{children:x})]})}),h&&!m&&i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-700 mb-2",children:[i.jsx($e,{className:"h-4 w-4"}),i.jsxs("span",{children:["Exportación completada: ",h.filename]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(te,{size:"sm",variant:"outline",onClick:d,className:"h-8",children:[i.jsx(wn,{className:"h-3 w-3 mr-1"}),"Descargar"]}),h.content&&i.jsxs(te,{size:"sm",variant:"outline",onClick:f,className:"h-8",children:[i.jsx(ka,{className:"h-3 w-3 mr-1"}),"Copiar"]})]})]})]}),i.jsxs(Ig,{children:[i.jsx(te,{variant:"outline",onClick:()=>e(!1),children:"Cancelar"}),i.jsx(te,{onClick:S,disabled:m||T(b.range),children:m?i.jsxs(i.Fragment,{children:[i.jsx(rr,{className:"mr-2 h-4 w-4 animate-spin"}),"Exportando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(wn,{className:"mr-2 h-4 w-4"}),"Exportar"]})})]})]})})},Vh=({open:t,onOpenChange:e,threadId:n,threadTitle:r,messageCount:s,selectedMessageIds:o=[],authToken:a})=>{const{createShareLink:l,copyShareLink:u,revokeShareLink:d,isSharing:f,lastShare:m,shareError:h,clearErrors:x}=Lg(a),[y,b]=p.useState({mode:"readonly",scope:o.length>0?"selection":"thread",expiresDays:7,hideUsernames:!0,hideMeta:!0,hideChips:!0,maskPII:!0}),[j,_]=p.useState("7"),E=async()=>{x();const w={threadId:n,mode:y.mode,scope:y.scope,expiresDays:y.expiresDays||void 0,hideUsernames:y.hideUsernames,cleanup:{hideMeta:y.hideMeta,hideChips:y.hideChips,maskPII:y.maskPII},...y.scope==="selection"?{selectionIds:o}:{}};try{await l(w)}catch(C){console.error("Share failed:",C)}},S=async()=>{if(m)try{await d(m.token)}catch(w){console.error("Revoke failed:",w)}},R=()=>{switch(y.scope){case"thread":return`${s} mensajes completos`;case"selection":return`${o.length} mensajes seleccionados`;default:return""}},T=()=>y.expiresDays?y.expiresDays===1?"1 día":`${y.expiresDays} días`:"Sin expiración",D=()=>m?.expires_at?new Date(m.expires_at).toLocaleString():null,N=[{value:1,label:"1 día"},{value:7,label:"1 semana"},{value:30,label:"1 mes"},{value:0,label:"Sin expiración"}];return i.jsx(yu,{open:t,onOpenChange:e,children:i.jsxs(La,{className:"max-w-md",children:[i.jsxs(Va,{children:[i.jsxs(Fa,{className:"flex items-center gap-2",children:[i.jsx(go,{className:"h-5 w-5"}),"Compartir Conversación"]}),i.jsxs(Mg,{children:["Crea un enlace seguro para compartir ",i.jsx("strong",{children:r}),"."]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx(Ee,{className:"text-sm font-medium",children:"Modo de acceso"}),i.jsxs(js,{value:y.mode,onValueChange:w=>b(C=>({...C,mode:w})),className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx(zt,{value:"readonly",id:"readonly",className:"peer sr-only"}),i.jsxs(Ee,{htmlFor:"readonly",className:"flex flex-col items-center gap-2 p-3 border rounded-lg cursor-pointer peer-checked:border-primary peer-checked:bg-primary/5 hover:bg-accent/50 transition-colors",children:[i.jsx(H4,{className:"h-5 w-5"}),i.jsx("span",{className:"text-xs font-medium",children:"Solo lectura"})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(zt,{value:"comments",id:"comments",className:"peer sr-only"}),i.jsxs(Ee,{htmlFor:"comments",className:"flex flex-col items-center gap-2 p-3 border rounded-lg cursor-pointer peer-checked:border-primary peer-checked:bg-primary/5 hover:bg-accent/50 transition-colors",children:[i.jsx(Ja,{className:"h-5 w-5"}),i.jsx("span",{className:"text-xs font-medium",children:"Con comentarios"})]})]})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(Ee,{className:"text-sm font-medium",children:"Contenido"}),i.jsxs(js,{value:y.scope,onValueChange:w=>b(C=>({...C,scope:w})),className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(zt,{value:"thread",id:"thread-share"}),i.jsxs(Ee,{htmlFor:"thread-share",className:"text-sm",children:["Conversación completa",i.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",s," mensajes)"]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(zt,{value:"selection",id:"selection-share",disabled:o.length===0}),i.jsxs(Ee,{htmlFor:"selection-share",className:`text-sm ${o.length===0?"text-muted-foreground":""}`,children:["Mensajes seleccionados",i.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",o.length," seleccionados)"]})]})]})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(Ee,{className:"text-sm font-medium",children:"Expiración"}),i.jsx(js,{value:y.expiresDays.toString(),onValueChange:w=>{const C=parseInt(w);b(A=>({...A,expiresDays:C})),_(w)},className:"grid grid-cols-2 gap-2",children:N.map(w=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(zt,{value:w.value.toString(),id:`expire-${w.value}`}),i.jsx(Ee,{htmlFor:`expire-${w.value}`,className:"text-sm",children:w.label})]},w.value))})]}),i.jsx(ia,{}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs(Ee,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(G2,{className:"h-4 w-4"}),"Opciones de privacidad"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ys,{id:"hideUsernames",checked:y.hideUsernames,onCheckedChange:w=>b(C=>({...C,hideUsernames:!!w}))}),i.jsx(Ee,{htmlFor:"hideUsernames",className:"text-sm",children:"Ocultar nombres de usuario"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ys,{id:"hideMeta-share",checked:y.hideMeta,onCheckedChange:w=>b(C=>({...C,hideMeta:!!w}))}),i.jsx(Ee,{htmlFor:"hideMeta-share",className:"text-sm",children:"Ocultar metadatos internos"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ys,{id:"hideChips-share",checked:y.hideChips,onCheckedChange:w=>b(C=>({...C,hideChips:!!w}))}),i.jsx(Ee,{htmlFor:"hideChips-share",className:"text-sm",children:"Ocultar alertas de Brand Guard"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ys,{id:"maskPII-share",checked:y.maskPII,onCheckedChange:w=>b(C=>({...C,maskPII:!!w}))}),i.jsx(Ee,{htmlFor:"maskPII-share",className:"text-sm",children:"Enmascarar información personal"})]})]})]}),i.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm mb-2",children:[i.jsx(Ve,{variant:"outline",children:y.mode==="readonly"?"Solo lectura":"Con comentarios"}),i.jsx("span",{className:"text-muted-foreground",children:"•"}),i.jsx("span",{className:"text-muted-foreground",children:R()})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(Yu,{className:"h-3 w-3"}),i.jsxs("span",{children:["Expira en ",T()]})]})]}),h&&i.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm text-destructive",children:[i.jsx(hr,{className:"h-4 w-4"}),i.jsx("span",{children:h})]})}),m&&!f&&i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-700 mb-3",children:[i.jsx($e,{className:"h-4 w-4"}),i.jsx("span",{children:"Enlace creado exitosamente"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"bg-white border rounded p-2",children:[i.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Enlace compartible:"}),i.jsx("div",{className:"text-sm font-mono break-all",children:m.link})]}),D()&&i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Expira el ",D()]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(te,{size:"sm",variant:"outline",onClick:u,className:"h-8",children:[i.jsx(ka,{className:"h-3 w-3 mr-1"}),"Copiar enlace"]}),i.jsxs(te,{size:"sm",variant:"outline",onClick:()=>window.open(m.link,"_blank"),className:"h-8",children:[i.jsx(B4,{className:"h-3 w-3 mr-1"}),"Abrir"]}),i.jsx(te,{size:"sm",variant:"destructive",onClick:S,className:"h-8",children:"Revocar"})]})]})]})]}),i.jsxs(Ig,{children:[i.jsx(te,{variant:"outline",onClick:()=>e(!1),children:"Cancelar"}),i.jsx(te,{onClick:E,disabled:f||y.scope==="selection"&&o.length===0,children:f?i.jsxs(i.Fragment,{children:[i.jsx(rr,{className:"mr-2 h-4 w-4 animate-spin"}),"Creando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(go,{className:"mr-2 h-4 w-4"}),"Crear enlace"]})})]})]})})},fL=({threadId:t,threadTitle:e,messageCount:n,currentMessageId:r,selectedMessageIds:s=[],authToken:o,variant:a="buttons",className:l=""})=>{const[u,d]=p.useState(!1),[f,m]=p.useState(!1),{exportCurrentMessage:h,shareConversation:x,isLoading:y}=Lg(o),b=async()=>{if(!r){qe.error("No hay mensaje actual para exportar");return}try{const _=await h(t,r,"md");_.content&&(await navigator.clipboard.writeText(_.content),qe.success("Mensaje copiado como Markdown"))}catch{}},j=async()=>{try{const _=await x(t,{mode:"readonly",expiresDays:7,hideUsernames:!0});_&&(await navigator.clipboard.writeText(_.link),qe.success("Enlace de compartir copiado al portapapeles"))}catch{}};return a==="compact"?i.jsxs("div",{className:`flex items-center ${l}`,children:[i.jsxs(gm,{children:[i.jsx(xm,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx($4,{className:"h-4 w-4"})})}),i.jsxs(ym,{align:"end",className:"w-48",children:[i.jsxs(At,{onClick:b,disabled:!r||y,children:[y?i.jsx(rr,{className:"mr-2 h-4 w-4 animate-spin"}):i.jsx(ka,{className:"mr-2 h-4 w-4"}),"Copiar mensaje"]}),i.jsxs(At,{onClick:()=>d(!0),children:[i.jsx(wn,{className:"mr-2 h-4 w-4"}),"Exportar..."]}),i.jsx(gu,{}),i.jsxs(At,{onClick:j,disabled:y,children:[y?i.jsx(rr,{className:"mr-2 h-4 w-4 animate-spin"}):i.jsx(go,{className:"mr-2 h-4 w-4"}),"Compartir rápido"]}),i.jsxs(At,{onClick:()=>m(!0),children:[i.jsx(go,{className:"mr-2 h-4 w-4"}),"Compartir..."]})]})]}),i.jsx(Lh,{open:u,onOpenChange:d,threadId:t,threadTitle:e,messageCount:n,currentMessageId:r,selectedMessageIds:s,authToken:o}),i.jsx(Vh,{open:f,onOpenChange:m,threadId:t,threadTitle:e,messageCount:n,selectedMessageIds:s,authToken:o})]}):a==="dropdown"?i.jsxs("div",{className:`flex items-center ${l}`,children:[i.jsxs(gm,{children:[i.jsx(xm,{asChild:!0,children:i.jsxs(te,{variant:"outline",size:"sm",children:[i.jsx(wn,{className:"mr-2 h-4 w-4"}),"Exportar"]})}),i.jsxs(ym,{align:"end",className:"w-48",children:[i.jsxs(At,{onClick:b,disabled:!r||y,children:[y?i.jsx(rr,{className:"mr-2 h-4 w-4 animate-spin"}):i.jsx(Jc,{className:"mr-2 h-4 w-4"}),"Copiar como MD"]}),i.jsx(gu,{}),i.jsxs(At,{onClick:()=>d(!0),children:[i.jsx(Jc,{className:"mr-2 h-4 w-4"}),"Markdown"]}),i.jsxs(At,{onClick:()=>d(!0),children:[i.jsx(Bp,{className:"mr-2 h-4 w-4"}),"HTML"]}),i.jsxs(At,{onClick:()=>d(!0),children:[i.jsx($2,{className:"mr-2 h-4 w-4"}),"PDF"]})]})]}),i.jsxs(te,{variant:"outline",size:"sm",onClick:()=>m(!0),className:"ml-2",children:[i.jsx(go,{className:"mr-2 h-4 w-4"}),"Compartir"]}),i.jsx(Lh,{open:u,onOpenChange:d,threadId:t,threadTitle:e,messageCount:n,currentMessageId:r,selectedMessageIds:s,authToken:o}),i.jsx(Vh,{open:f,onOpenChange:m,threadId:t,threadTitle:e,messageCount:n,selectedMessageIds:s,authToken:o})]}):i.jsxs("div",{className:`flex items-center gap-2 ${l}`,children:[i.jsxs(te,{variant:"outline",size:"sm",onClick:()=>d(!0),children:[i.jsx(wn,{className:"mr-2 h-4 w-4"}),"Exportar"]}),i.jsxs(te,{variant:"outline",size:"sm",onClick:()=>m(!0),children:[i.jsx(go,{className:"mr-2 h-4 w-4"}),"Compartir"]}),r&&i.jsx(te,{variant:"ghost",size:"sm",onClick:b,disabled:y,title:"Copiar mensaje actual como Markdown",children:y?i.jsx(rr,{className:"h-4 w-4 animate-spin"}):i.jsx(ka,{className:"h-4 w-4"})}),i.jsx(Lh,{open:u,onOpenChange:d,threadId:t,threadTitle:e,messageCount:n,currentMessageId:r,selectedMessageIds:s,authToken:o}),i.jsx(Vh,{open:f,onOpenChange:m,threadId:t,threadTitle:e,messageCount:n,selectedMessageIds:s,authToken:o})]})};var al="Menubar",[wm,mL,pL]=gg(al),[YN]=jt(al,[pL,ii]),kt=wg(),XN=ii(),[gL,Vg]=YN(al),JN=p.forwardRef((t,e)=>{const{__scopeMenubar:n,value:r,onValueChange:s,defaultValue:o,loop:a=!0,dir:l,...u}=t,d=rl(l),f=XN(n),[m,h]=es({prop:r,onChange:s,defaultProp:o??"",caller:al}),[x,y]=p.useState(null);return i.jsx(gL,{scope:n,value:m,onMenuOpen:p.useCallback(b=>{h(b),y(b)},[h]),onMenuClose:p.useCallback(()=>h(""),[h]),onMenuToggle:p.useCallback(b=>{h(j=>j?"":b),y(b)},[h]),dir:d,loop:a,children:i.jsx(wm.Provider,{scope:n,children:i.jsx(wm.Slot,{scope:n,children:i.jsx(yg,{asChild:!0,...f,orientation:"horizontal",loop:a,dir:d,currentTabStopId:x,onCurrentTabStopIdChange:y,children:i.jsx(oe.div,{role:"menubar",...u,ref:e})})})})})});JN.displayName=al;var Fg="MenubarMenu",[xL,ZN]=YN(Fg),eS=t=>{const{__scopeMenubar:e,value:n,...r}=t,s=bn(),o=n||s||"LEGACY_REACT_AUTO_VALUE",a=Vg(Fg,e),l=kt(e),u=p.useRef(null),d=p.useRef(!1),f=a.value===o;return p.useEffect(()=>{f||(d.current=!1)},[f]),i.jsx(xL,{scope:e,value:o,triggerId:bn(),triggerRef:u,contentId:bn(),wasKeyboardTriggerOpenRef:d,children:i.jsx(M_,{...l,open:f,onOpenChange:m=>{m||a.onMenuClose()},modal:!1,dir:a.dir,...r})})};eS.displayName=Fg;var Em="MenubarTrigger",tS=p.forwardRef((t,e)=>{const{__scopeMenubar:n,disabled:r=!1,...s}=t,o=XN(n),a=kt(n),l=Vg(Em,n),u=ZN(Em,n),d=p.useRef(null),f=ye(e,d,u.triggerRef),[m,h]=p.useState(!1),x=l.value===u.value;return i.jsx(wm.ItemSlot,{scope:n,value:u.value,disabled:r,children:i.jsx(vg,{asChild:!0,...o,focusable:!r,tabStopId:u.value,children:i.jsx(D_,{asChild:!0,...a,children:i.jsx(oe.button,{type:"button",role:"menuitem",id:u.triggerId,"aria-haspopup":"menu","aria-expanded":x,"aria-controls":x?u.contentId:void 0,"data-highlighted":m?"":void 0,"data-state":x?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:f,onPointerDown:Q(t.onPointerDown,y=>{!r&&y.button===0&&y.ctrlKey===!1&&(l.onMenuOpen(u.value),x||y.preventDefault())}),onPointerEnter:Q(t.onPointerEnter,()=>{!!l.value&&!x&&(l.onMenuOpen(u.value),d.current?.focus())}),onKeyDown:Q(t.onKeyDown,y=>{r||(["Enter"," "].includes(y.key)&&l.onMenuToggle(u.value),y.key==="ArrowDown"&&l.onMenuOpen(u.value),["Enter"," ","ArrowDown"].includes(y.key)&&(u.wasKeyboardTriggerOpenRef.current=!0,y.preventDefault()))}),onFocus:Q(t.onFocus,()=>h(!0)),onBlur:Q(t.onBlur,()=>h(!1))})})})})});tS.displayName=Em;var yL="MenubarPortal",nS=t=>{const{__scopeMenubar:e,...n}=t,r=kt(e);return i.jsx(O_,{...r,...n})};nS.displayName=yL;var _m="MenubarContent",rS=p.forwardRef((t,e)=>{const{__scopeMenubar:n,align:r="start",...s}=t,o=kt(n),a=Vg(_m,n),l=ZN(_m,n),u=mL(n),d=p.useRef(!1);return i.jsx(L_,{id:l.contentId,"aria-labelledby":l.triggerId,"data-radix-menubar-content":"",...o,...s,ref:e,align:r,onCloseAutoFocus:Q(t.onCloseAutoFocus,f=>{!!!a.value&&!d.current&&l.triggerRef.current?.focus(),d.current=!1,f.preventDefault()}),onFocusOutside:Q(t.onFocusOutside,f=>{const m=f.target;u().some(x=>x.ref.current?.contains(m))&&f.preventDefault()}),onInteractOutside:Q(t.onInteractOutside,()=>{d.current=!0}),onEntryFocus:f=>{l.wasKeyboardTriggerOpenRef.current||f.preventDefault()},onKeyDown:Q(t.onKeyDown,f=>{if(["ArrowRight","ArrowLeft"].includes(f.key)){const m=f.target,h=m.hasAttribute("data-radix-menubar-subtrigger"),x=m.closest("[data-radix-menubar-content]")!==f.currentTarget,b=(a.dir==="rtl"?"ArrowRight":"ArrowLeft")===f.key;if(!b&&h||x&&b)return;let E=u().filter(T=>!T.disabled).map(T=>T.value);b&&E.reverse();const S=E.indexOf(l.value);E=a.loop?FL(E,S+1):E.slice(S+1);const[R]=E;R&&a.onMenuOpen(R)}},{checkForDefaultPrevented:!1}),style:{...t.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});rS.displayName=_m;var vL="MenubarGroup",bL=p.forwardRef((t,e)=>{const{__scopeMenubar:n,...r}=t,s=kt(n);return i.jsx(V_,{...s,...r,ref:e})});bL.displayName=vL;var wL="MenubarLabel",EL=p.forwardRef((t,e)=>{const{__scopeMenubar:n,...r}=t,s=kt(n);return i.jsx(F_,{...s,...r,ref:e})});EL.displayName=wL;var _L="MenubarItem",sS=p.forwardRef((t,e)=>{const{__scopeMenubar:n,...r}=t,s=kt(n);return i.jsx($_,{...s,...r,ref:e})});sS.displayName=_L;var NL="MenubarCheckboxItem",SL=p.forwardRef((t,e)=>{const{__scopeMenubar:n,...r}=t,s=kt(n);return i.jsx(z_,{...s,...r,ref:e})});SL.displayName=NL;var jL="MenubarRadioGroup",CL=p.forwardRef((t,e)=>{const{__scopeMenubar:n,...r}=t,s=kt(n);return i.jsx(B_,{...s,...r,ref:e})});CL.displayName=jL;var kL="MenubarRadioItem",TL=p.forwardRef((t,e)=>{const{__scopeMenubar:n,...r}=t,s=kt(n);return i.jsx(U_,{...s,...r,ref:e})});TL.displayName=kL;var AL="MenubarItemIndicator",PL=p.forwardRef((t,e)=>{const{__scopeMenubar:n,...r}=t,s=kt(n);return i.jsx(H_,{...s,...r,ref:e})});PL.displayName=AL;var RL="MenubarSeparator",oS=p.forwardRef((t,e)=>{const{__scopeMenubar:n,...r}=t,s=kt(n);return i.jsx(G_,{...s,...r,ref:e})});oS.displayName=RL;var IL="MenubarArrow",ML=p.forwardRef((t,e)=>{const{__scopeMenubar:n,...r}=t,s=kt(n);return i.jsx(K_,{...s,...r,ref:e})});ML.displayName=IL;var DL="MenubarSubTrigger",OL=p.forwardRef((t,e)=>{const{__scopeMenubar:n,...r}=t,s=kt(n);return i.jsx(W_,{"data-radix-menubar-subtrigger":"",...s,...r,ref:e})});OL.displayName=DL;var LL="MenubarSubContent",VL=p.forwardRef((t,e)=>{const{__scopeMenubar:n,...r}=t,s=kt(n);return i.jsx(q_,{...s,"data-radix-menubar-content":"",...r,ref:e,style:{...t.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});VL.displayName=LL;function FL(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var $L=JN,zL=eS,BL=tS,UL=nS,HL=rS,GL=sS,KL=oS;function WL({className:t,...e}){return i.jsx($L,{"data-slot":"menubar",className:ue("bg-background flex h-9 items-center gap-1 rounded-md border p-1 shadow-xs",t),...e})}function Ii({...t}){return i.jsx(zL,{"data-slot":"menubar-menu",...t})}function qL({...t}){return i.jsx(UL,{"data-slot":"menubar-portal",...t})}function Mi({className:t,...e}){return i.jsx(BL,{"data-slot":"menubar-trigger",className:ue("focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex items-center rounded-sm px-2 py-1 text-sm font-medium outline-hidden select-none",t),...e})}function Di({className:t,align:e="start",alignOffset:n=-4,sideOffset:r=8,...s}){return i.jsx(qL,{children:i.jsx(HL,{"data-slot":"menubar-content",align:e,alignOffset:n,sideOffset:r,className:ue("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[12rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-md",t),...s})})}function nt({className:t,inset:e,variant:n="default",...r}){return i.jsx(GL,{"data-slot":"menubar-item","data-inset":e,"data-variant":n,className:ue("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function Fh({className:t,...e}){return i.jsx(KL,{"data-slot":"menubar-separator",className:ue("bg-border -mx-1 my-1 h-px",t),...e})}function QL(){const[t,e]=p.useState(!1),[n,r]=p.useState(!1);return p.useEffect(()=>{const l=()=>{const u=window.innerWidth<=768;r(u),!u&&n?e(!0):u&&!n?e(!1):n===!1&&!u&&e(!0)};return l(),window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}},[n]),{isOpen:t,isMobile:n,toggle:()=>e(!t),close:()=>e(!1),open:()=>e(!0)}}const iS=p.createContext(void 0);function YL({children:t}){const e=QL();return i.jsx(iS.Provider,{value:e,children:t})}function aS(){const t=p.useContext(iS);if(t===void 0)throw new Error("useSidebarContext must be used within a SidebarProvider");return t}function XL({activeModule:t,threadId:e,threadTitle:n="Chat sin título",messageCount:r=0,authToken:s,showMasterMenu:o=!1}={}){const{toggle:a,isMobile:l}=aS(),u=t==="chat"&&e&&r>0;return i.jsxs("header",{className:"h-16 bg-card border-b border-border flex items-center justify-between px-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[l&&i.jsx(te,{variant:"ghost",size:"sm",onClick:a,className:"md:hidden p-2",children:i.jsx(hR,{className:"w-5 h-5"})}),o&&l&&i.jsxs(gm,{children:[i.jsx(xm,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:"sm",className:"lg:hidden p-2",children:i.jsx(BR,{className:"w-5 h-5"})})}),i.jsxs(ym,{align:"start",className:"w-48",children:[i.jsx(Oh,{children:"Archivo"}),i.jsxs(At,{children:[i.jsx(Sv,{className:"mr-2 h-4 w-4"}),"Nuevo proyecto"]}),i.jsxs(At,{children:[i.jsx(kv,{className:"mr-2 h-4 w-4"}),"Guardar"]}),i.jsx(gu,{}),i.jsx(Oh,{children:"Edición"}),i.jsxs(At,{children:[i.jsx(Av,{className:"mr-2 h-4 w-4"}),"Deshacer"]}),i.jsxs(At,{children:[i.jsx(Cv,{className:"mr-2 h-4 w-4"}),"Rehacer"]}),i.jsx(gu,{}),i.jsx(Oh,{children:"Exportar"}),i.jsxs(At,{children:[i.jsx($o,{className:"mr-2 h-4 w-4"}),"Preflight QA"]}),i.jsxs(At,{children:[i.jsx(Nv,{className:"mr-2 h-4 w-4"}),"Exportar MP4"]})]})]}),i.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg flex items-center justify-center",children:i.jsx(Zc,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("h1",{className:"text-foreground font-semibold",children:"AI Content Studio"}),i.jsx("div",{className:"flex items-center gap-2 -mt-1",children:i.jsx(Ve,{variant:"outline",className:"text-xs bg-green-100 text-green-700 border-green-300",children:"Sistema Completo"})})]})]}),i.jsxs("div",{className:"flex-1 flex items-center justify-center gap-4",children:[o&&i.jsx("div",{className:"hidden lg:block",children:i.jsxs(WL,{className:"bg-white border border-gray-200 shadow-sm",children:[i.jsxs(Ii,{children:[i.jsx(Mi,{className:"text-sm",children:"Archivo"}),i.jsxs(Di,{children:[i.jsxs(nt,{children:[i.jsx(Sv,{className:"mr-2 h-4 w-4"}),"Nuevo proyecto"]}),i.jsxs(nt,{children:[i.jsx(kv,{className:"mr-2 h-4 w-4"}),"Guardar"]}),i.jsx(Fh,{}),i.jsxs(nt,{children:[i.jsx(Qf,{className:"mr-2 h-4 w-4"}),"Exportar"]})]})]}),i.jsxs(Ii,{children:[i.jsx(Mi,{className:"text-sm",children:"Edición"}),i.jsxs(Di,{children:[i.jsxs(nt,{children:[i.jsx(Av,{className:"mr-2 h-4 w-4"}),"Deshacer"]}),i.jsxs(nt,{children:[i.jsx(Cv,{className:"mr-2 h-4 w-4"}),"Rehacer"]}),i.jsx(Fh,{}),i.jsxs(nt,{children:[i.jsx(AR,{className:"mr-2 h-4 w-4"}),"Cortar"]}),i.jsxs(nt,{children:[i.jsx(ka,{className:"mr-2 h-4 w-4"}),"Copiar"]}),i.jsxs(nt,{children:[i.jsx(M4,{className:"mr-2 h-4 w-4"}),"Pegar"]})]})]}),i.jsxs(Ii,{children:[i.jsx(Mi,{className:"text-sm",children:"Capas"}),i.jsxs(Di,{children:[i.jsxs(nt,{children:[i.jsx(jv,{className:"mr-2 h-4 w-4"}),"Ordenar capas"]}),i.jsxs(nt,{children:[i.jsx(jv,{className:"mr-2 h-4 w-4"}),"Agrupar"]}),i.jsxs(nt,{children:[i.jsx(Zc,{className:"mr-2 h-4 w-4"}),"Bloquear"]})]})]}),i.jsxs(Ii,{children:[i.jsx(Mi,{className:"text-sm",children:"Subtítulos"}),i.jsxs(Di,{children:[i.jsxs(nt,{children:[i.jsx(pR,{className:"mr-2 h-4 w-4"}),"Generar IA"]}),i.jsxs(nt,{children:[i.jsx(Up,{className:"mr-2 h-4 w-4"}),"Sincronizar"]}),i.jsxs(nt,{children:[i.jsx(iR,{className:"mr-2 h-4 w-4"}),"Traducir"]})]})]}),i.jsxs(Ii,{children:[i.jsx(Mi,{className:"text-sm",children:"Exportar"}),i.jsxs(Di,{children:[i.jsxs(nt,{children:[i.jsx($o,{className:"mr-2 h-4 w-4"}),"Preflight QA"]}),i.jsx(Fh,{}),i.jsxs(nt,{children:[i.jsx(Nv,{className:"mr-2 h-4 w-4"}),"Exportar MP4"]}),i.jsxs(nt,{children:[i.jsx(Qf,{className:"mr-2 h-4 w-4"}),"Exportar multiformato"]})]})]})]})}),i.jsx(oI,{}),o&&i.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground bg-gray-50 px-2 py-1 rounded border",children:[i.jsx("span",{className:"hidden sm:inline",children:"⌘K"}),i.jsx("span",{className:"sm:hidden",children:"⌘"}),i.jsx("span",{children:"Paleta de comandos"})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(xD,{showControls:!1}),u&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"h-6 w-px bg-border"}),i.jsx(fL,{threadId:e,threadTitle:n,messageCount:r,authToken:s,variant:"compact"})]}),i.jsx("div",{className:"h-6 w-px bg-border"}),i.jsxs(te,{variant:"default",className:"flex items-center gap-2",children:[i.jsx(U2,{className:"w-4 h-4"}),"Nuevo Proyecto"]}),i.jsx(nA,{className:"w-9 h-9",children:i.jsx(rA,{className:"bg-muted text-muted-foreground",children:"US"})})]})]})}const JL=[{id:"chat",label:"Chat Maestro",icon:zp,highlight:!0},{id:"posts",label:"Posts/Carrousels",icon:Fo},{id:"videos",label:"Videos",icon:eI},{id:"podcasts",label:"Podcasts",icon:B2},{id:"stories",label:"Historias",icon:LR},{id:"calendar",label:"Calendar",icon:Ca},{id:"library",label:"Biblioteca",icon:X4},{id:"brandkit",label:"BrandKit",icon:Ta},{id:"analytics",label:"Analytics",icon:E4},{id:"automation",label:"Automatización",icon:Yf},{id:"competition",label:"Competencia",icon:KR}],ZL=p.memo(function({activeModule:e,onModuleChange:n}){const{isOpen:r,isMobile:s,close:o}=aS(),a=l=>{n(l),s&&o()};return!r&&!s?null:i.jsxs(i.Fragment,{children:[s&&r&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:o}),i.jsxs("aside",{className:`
          ${s?`fixed left-0 top-0 h-full w-80 z-50 transform transition-transform duration-300 ease-in-out ${r?"translate-x-0":"-translate-x-full"}`:"relative w-1/5 min-w-64"}
          bg-sidebar border-r border-sidebar-border flex flex-col
        `,children:[s&&i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-sidebar-border",children:[i.jsx("h2",{className:"text-sidebar-foreground",children:"AI Content Studio"}),i.jsx(te,{variant:"ghost",size:"sm",onClick:o,className:"p-2 text-sidebar-foreground hover:bg-sidebar-accent",children:i.jsx(Ms,{className:"w-5 h-5"})})]}),i.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:JL.map(l=>{const u=l.icon,d=e===l.id,f=l.highlight;return i.jsxs(te,{variant:d?"secondary":"ghost",className:`w-full justify-start gap-3 h-12 text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground ${d?"bg-sidebar-primary text-sidebar-primary-foreground hover:bg-sidebar-primary hover:text-sidebar-primary-foreground":""} ${f&&!d?"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 hover:from-purple-100 hover:to-blue-100 dark:from-purple-900/20 dark:to-blue-900/20 dark:border-purple-700":""}`,onClick:()=>a(l.id),children:[i.jsx(u,{className:`w-5 h-5 ${f&&!d?"text-purple-600 dark:text-purple-400":""}`}),i.jsx("span",{className:`${f&&!d?"text-purple-700 font-medium dark:text-purple-300":""}`,children:l.label}),f&&!d&&i.jsx("div",{className:"ml-auto w-2 h-2 bg-purple-400 rounded-full animate-pulse"})]},l.id)})}),i.jsx("div",{className:"p-4 border-t border-sidebar-border/50",children:i.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg p-3 border border-green-200 dark:border-green-700",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),i.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Sistema Activo"})]}),i.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Todos los módulos disponibles y funcionando correctamente."})]})})]})]})}),lS=p.createContext(void 0);function e9({children:t}){const[e,n]=p.useState(null),[r,s]=p.useState("briefing"),o=S=>{if(!e)return;const R={...e,...S,updatedAt:new Date};n(R)},a=S=>{e&&o({briefing:{...e.briefing,...S},status:"briefing"})},l=S=>{e&&o({scenes:[...e.scenes,S],status:"generating"})},u=(S,R)=>{if(!e)return;const T=e.scenes.map(D=>D.id===S?{...D,...R}:D);o({scenes:T})},d=S=>{if(!e)return;const R=e.scenes.map(T=>({...T,isSelected:S.includes(T.id)}));o({scenes:R,selectedSceneIds:S,status:"editing"})},f=S=>{e&&o({timeline:{...e.timeline,...S}})},m=S=>{e&&o({copywriting:{...e.copywriting,...S},status:"finalizing"})},h=["briefing","configuration","storyboard","generation","editing","copywriting","publishing"],E={currentProject:e,setCurrentProject:n,updateProject:o,updateBriefing:a,addScene:l,updateScene:u,selectScenes:d,updateTimeline:f,updateCopywriting:m,currentStep:r,setCurrentStep:s,goToNextStep:()=>{const S=h.indexOf(r);S<h.length-1&&s(h[S+1])},goToPreviousStep:()=>{const S=h.indexOf(r);S>0&&s(h[S-1])},saveProject:async()=>{if(e)try{const S={...e,updatedAt:new Date};console.log("Saving video project:",S)}catch(S){throw console.error("Error saving video project:",S),S}},loadProject:async S=>{try{console.log("Loading video project:",S)}catch(R){throw console.error("Error loading video project:",R),R}},createNewProject:S=>{const R={id:`video_project_${Date.now()}`,title:`Nuevo ${S==="short"?"Short/Reel":S==="video_long"?"Video Largo":S}`,type:S,status:"briefing",briefing:{description:"",videoType:S,duration:{target:30,min:15,max:60,label:"30s"},platform:S==="short"?"multiple":"youtube",style:S==="short"?"trendy":"dynamic",chatHistory:[],objectives:S==="short"?["viral"]:[]},scenes:[],selectedSceneIds:[],timeline:{totalDuration:0,scenes:[],globalLayers:[],audioTracks:[],markers:[]},copywriting:{caption:"",hashtags:[],tone:"",aiGenerated:!1},publishing:{platforms:[],status:"draft"},createdAt:new Date,updatedAt:new Date,brandKitCompliant:!0};n(R),s("briefing")}};return i.jsx(lS.Provider,{value:E,children:t})}function $F(){const t=p.useContext(lS);if(t===void 0)throw new Error("useVideoProject must be used within a VideoProjectProvider");return t}const cS=p.createContext(void 0);function t9({children:t}){const[e,n]=p.useState(null),[r,s]=p.useState("briefing"),o=S=>{if(!e)return;const R={...e,...S,updatedAt:new Date};n(R)},a=S=>{e&&o({briefing:{...e.briefing,...S},status:"briefing"})},l=S=>{e&&o({configuration:{...e.configuration,...S},status:"configuring"})},u=S=>{e&&o({designs:[...e.designs,S],status:"generating"})},d=S=>{if(!e)return;const R=e.designs.map(T=>({...T,isSelected:T.id===S}));o({designs:R,selectedDesignId:S,status:"editing"})},f=S=>{if(!e||!e.selectedDesignId)return;const R=e.designs.map(T=>T.id===e.selectedDesignId?{...T,...S}:T);o({designs:R})},m=S=>{e&&o({copywriting:{...e.copywriting,...S},status:"finalizing"})},h=["briefing","configuration","generation","editing","copywriting","caption","publishing"],E={currentProject:e,setCurrentProject:n,updateProject:o,updateBriefing:a,updateConfiguration:l,addDesign:u,selectDesign:d,updateSelectedDesign:f,updateCopywriting:m,currentStep:r,setCurrentStep:s,goToNextStep:()=>{const S=h.indexOf(r);S<h.length-1&&s(h[S+1])},goToPreviousStep:()=>{const S=h.indexOf(r);S>0&&s(h[S-1])},saveProject:async()=>{if(e)try{const S={...e,updatedAt:new Date};console.log("Saving project:",S)}catch(S){throw console.error("Error saving project:",S),S}},loadProject:async S=>{try{console.log("Loading project:",S)}catch(R){throw console.error("Error loading project:",R),R}},createNewProject:S=>{const R={id:`project_${Date.now()}`,title:`Nuevo ${S==="post"?"Post":"Carrusel"}`,type:S,status:"briefing",briefing:{description:"",chatHistory:[],referenceImages:[],objectives:[]},configuration:{socialPlatforms:["instagram"],primaryPlatform:"instagram",generationCount:3,format:{ratio:"1:1",name:"Cuadrado",width:1080,height:1080},dimensions:{width:1080,height:1080}},designs:[],copywriting:{caption:"",hashtags:[],tone:"",length:"medium",aiGenerated:!1},publishing:{platforms:[],status:"draft"},createdAt:new Date,updatedAt:new Date,brandKitCompliant:!0};n(R),s("briefing")}};return i.jsx(cS.Provider,{value:E,children:t})}function zF(){const t=p.useContext(cS);if(t===void 0)throw new Error("usePostProject must be used within a PostProjectProvider");return t}const uS=p.createContext(void 0);function n9({children:t}){const[e,n]=p.useState(null),[r,s]=p.useState("briefing"),o=T=>{if(!e)return;const D={...e,...T,updatedAt:new Date};n(D)},a=T=>{e&&o({briefing:{...e.briefing,...T},status:"briefing"})},l=T=>{e&&o({concepts:[...e.concepts,T],status:"generating"})},u=T=>{if(!e)return;const D=e.concepts.find(C=>C.id===T);if(!D)return;const N=d(D),w=e.concepts.map(C=>({...C,isSelected:C.id===T}));o({concepts:w,selectedConceptId:T,layers:N,status:"editing"})},d=T=>{const D=[];let N=0;D.push({id:`bg_${T.id}`,type:"background",name:"Fondo",content:{type:T.layout.background.type,primaryColor:T.layout.background.primaryColor,secondaryColor:T.layout.background.secondaryColor,direction:T.layout.background.direction},position:{x:0,y:0,width:100,height:100},style:{backgroundColor:T.layout.background.primaryColor},visible:!0,locked:!1,zIndex:N++});const w=T.layout.textPlacement.area,C=w==="top"?15:w==="center"?45:75;if(D.push({id:`text_${T.id}`,type:"text",name:"Texto Principal",content:{text:T.title,fontSize:36,fontFamily:T.brandElements.fonts[0]?.family||"Inter",fontWeight:"700"},position:{x:10,y:C,width:80,height:15},style:{fontSize:36,fontFamily:T.brandElements.fonts[0]?.family||"Inter",fontWeight:"700",color:"#FFFFFF",textAlign:T.layout.textPlacement.alignment},visible:!0,locked:!1,zIndex:N++,animation:{type:"fade_in",duration:.5}}),T.layout.logoPosition!=="hidden"){const A=f(T.layout.logoPosition);D.push({id:`logo_${T.id}`,type:"logo",name:"Logo",content:{type:"placeholder",text:"LOGO"},position:A,style:{backgroundColor:"rgba(255,255,255,0.1)",borderRadius:8,color:"#FFFFFF"},visible:!0,locked:!1,zIndex:N++})}return T.layout.overlays.forEach((A,I)=>{D.push({id:`overlay_${T.id}_${I}`,type:"shape",name:`Overlay ${I+1}`,content:{type:A.type},position:A.position,style:A.style,visible:!0,locked:!1,zIndex:N++})}),D},f=T=>{switch(T){case"top-left":return{x:5,y:5,width:15,height:8};case"top-right":return{x:80,y:5,width:15,height:8};case"bottom-left":return{x:5,y:87,width:15,height:8};case"bottom-right":return{x:80,y:87,width:15,height:8};case"center":return{x:42.5,y:46,width:15,height:8};default:return{x:80,y:87,width:15,height:8}}},m=T=>{e&&o({layers:T})},h=(T,D)=>{if(!e)return;const N=e.layers.map(w=>w.id===T?{...w,...D}:w);o({layers:N})},x=T=>{e&&o({copywriting:{...e.copywriting,...T},status:"finalizing"})},y=["briefing","configuration","generation","advanced-editing","captions","publishing"],R={currentProject:e,setCurrentProject:n,updateProject:o,updateBriefing:a,addConcept:l,selectConcept:u,updateLayers:m,updateLayer:h,updateCopywriting:x,currentStep:r,setCurrentStep:s,goToNextStep:()=>{const T=y.indexOf(r);T<y.length-1&&s(y[T+1])},goToPreviousStep:()=>{const T=y.indexOf(r);T>0&&s(y[T-1])},saveProject:async()=>{if(e)try{const T={...e,updatedAt:new Date};console.log("Saving story project:",T)}catch(T){throw console.error("Error saving story project:",T),T}},loadProject:async T=>{try{console.log("Loading story project:",T)}catch(D){throw console.error("Error loading story project:",D),D}},createNewProject:T=>{const D={id:`story_project_${Date.now()}`,title:"Nueva Historia",type:"story",objective:T,status:"briefing",briefing:{description:"",objective:T,platform:"instagram",duration:{seconds:10,label:"10s (Estándar)",autoAdvance:!0},chatHistory:[]},concepts:[],layers:[],copywriting:{mainText:"",hashtags:[],tone:"",length:"short",aiGenerated:!1},publishing:{platforms:[],status:"draft"},createdAt:new Date,updatedAt:new Date,brandKitCompliant:!0};n(D),s("briefing")}};return i.jsx(uS.Provider,{value:R,children:t})}function $g(){const t=p.useContext(uS);if(t===void 0)throw new Error("useStoryProject must be used within a StoryProjectProvider");return t}const dS=p.createContext(void 0);function r9({children:t}){const[e,n]=p.useState(null),[r,s]=p.useState("briefing"),o=M=>{if(!e)return;const k={...e,...M,updatedAt:new Date};n(k)},a=M=>{e&&o({briefing:{...e.briefing,...M},status:"briefing"})},l=M=>{e&&o({recording:{...e.recording,...M},status:M.status==="completed"?"transcribing":"recording"})},u=M=>{e&&o({transcription:{...e.transcription,...M},status:M.status==="completed"?"highlighting":"transcribing"})},d=(M,k)=>{if(!e)return;const O=e.transcription.segments.map(z=>z.id===M?{...z,...k,isEdited:!0}:z);u({segments:O,editHistory:[...e.transcription.editHistory,{id:`edit_${Date.now()}`,segmentId:M,originalText:e.transcription.segments.find(z=>z.id===M)?.text||"",editedText:k.text||"",timestamp:new Date,reason:"accuracy"}]})},f=M=>{if(!e||M.length<2)return;const k=e.transcription.segments,O=k.filter(Y=>M.includes(Y.id)).sort((Y,L)=>Y.startTime-L.startTime);if(O.length<2)return;const z={id:`merged_${Date.now()}`,startTime:O[0].startTime,endTime:O[O.length-1].endTime,text:O.map(Y=>Y.text).join(" "),confidence:O.reduce((Y,L)=>Y+L.confidence,0)/O.length,isEdited:!0,brandFlags:[],emotions:O[0].emotions,speaker:O[0].speaker},H=[...k.filter(Y=>!M.includes(Y.id)),z].sort((Y,L)=>Y.startTime-L.startTime);u({segments:H})},m=(M,k)=>{if(!e)return;const O=e.transcription.segments.find(ne=>ne.id===M);if(!O||k<=O.startTime||k>=O.endTime)return;const z=O.text.split(" "),H=(k-O.startTime)/(O.endTime-O.startTime),Y=Math.floor(z.length*H),L={...O,id:`${M}_part1`,endTime:k,text:z.slice(0,Y).join(" "),isEdited:!0},$={...O,id:`${M}_part2`,startTime:k,text:z.slice(Y).join(" "),isEdited:!0},W=[...e.transcription.segments.filter(ne=>ne.id!==M),L,$].sort((ne,le)=>ne.startTime-le.startTime);u({segments:W})},h=M=>{e&&o({highlights:[...e.highlights,M]})},x=(M,k)=>{if(!e)return;const O=e.highlights.map(z=>z.id===M?{...z,...k}:z);o({highlights:O})},y=M=>{e&&o({clips:[...e.clips,M]})},b=(M,k)=>{if(!e)return;const O=e.clips.map(z=>z.id===M?{...z,...k}:z);o({clips:O})},j=["briefing","recording","transcription","highlights","publishing"],_=()=>{const M=j.indexOf(r);M<j.length-1&&s(j[M+1])},E=()=>{const M=j.indexOf(r);M>0&&s(j[M-1])},S=M=>{const k={id:`podcast_project_${Date.now()}`,title:`Nuevo ${M.includes("podcast")?"Podcast":"Contenido Educativo"}`,type:M.includes("podcast")?"podcast":"educational",status:"briefing",briefing:{description:"",contentType:M,targetDuration:{minutes:30,label:"30 min",segments:5},contentStyle:"professional",targetAudience:"",chatHistory:[],outline:{segments:[],totalEstimatedDuration:0,introduction:"",conclusion:"",transitionPhrases:[]},objectives:[],keyMessages:[],callToActions:[]},recording:{status:"not_started",recordingMethod:"browser_audio",quality:{audioSampleRate:44100,audioBitrate:128,format:"webm"},metadata:{},liveGuidance:{currentSegment:0,suggestions:[],brandReminders:[],paceGuidance:"good_pace",energyLevel:"medium"}},transcription:{status:"not_started",segments:[],confidence:0,language:"es",wordCount:0,editHistory:[],brandAlignment:{overallScore:0,toneConsistency:0,vocabularyAlignment:0,messageClarity:0,recommendations:[]}},highlights:[],clips:[],publishing:{podcastPlatforms:[],clipsPlatforms:[],status:"draft",metadata:{category:"Technology",tags:[],language:"es",isExplicit:!1},distribution:{rss:!0,embedCode:!0,downloadLink:!0,socialSharing:!0,analytics:!0}},createdAt:new Date,updatedAt:new Date,brandKitCompliant:!0};n(k),s("briefing")},R=async()=>{if(e)try{const M={...e,updatedAt:new Date};console.log("Saving podcast project:",M)}catch(M){throw console.error("Error saving podcast project:",M),M}},T=async M=>{try{console.log("Loading podcast project:",M)}catch(k){throw console.error("Error loading podcast project:",k),k}},D=async M=>{if(!e)return"";try{switch(M){case"json":return JSON.stringify(e,null,2);case"srt":return N(e.transcription.segments);case"vtt":return w(e.transcription.segments);default:return""}}catch(k){return console.error("Error exporting project:",k),""}},N=M=>M.map((k,O)=>{const z=C(k.startTime),H=C(k.endTime);return`${O+1}
${z} --> ${H}
${k.text}
`}).join(`
`),w=M=>{const k=`WEBVTT

`,O=M.map(z=>{const H=A(z.startTime),Y=A(z.endTime);return`${H} --> ${Y}
${z.text}
`}).join(`
`);return k+O},C=M=>{const k=Math.floor(M/3600),O=Math.floor(M%3600/60),z=Math.floor(M%60),H=Math.floor(M%1*1e3);return`${k.toString().padStart(2,"0")}:${O.toString().padStart(2,"0")}:${z.toString().padStart(2,"0")},${H.toString().padStart(3,"0")}`},A=M=>{const k=Math.floor(M/3600),O=Math.floor(M%3600/60),z=Math.floor(M%60),H=Math.floor(M%1*1e3);return`${k.toString().padStart(2,"0")}:${O.toString().padStart(2,"0")}:${z.toString().padStart(2,"0")}.${H.toString().padStart(3,"0")}`},I={currentProject:e,setCurrentProject:n,updateProject:o,updateBriefing:a,updateRecording:l,updateTranscription:u,addHighlight:h,updateHighlight:x,addClip:y,updateClip:b,updateTranscriptSegment:d,mergeTranscriptSegments:f,splitTranscriptSegment:m,currentStep:r,setCurrentStep:s,goToNextStep:_,goToPreviousStep:E,saveProject:R,loadProject:T,createNewProject:S,exportProject:D};return i.jsx(dS.Provider,{value:I,children:t})}function BF(){const t=p.useContext(dS);if(t===void 0)throw new Error("usePodcastProject must be used within a PodcastProjectProvider");return t}class s9{jwt;constructor(e){this.jwt=e}setJWT(e){this.jwt=e}processSlashCommands(e){const n={content:e,tools:[],settings:{}},r=/\/(\w+)(?:\s+([^\s\/]+))?/g;let s;for(;(s=r.exec(e))!==null;){const[o,a,l]=s;switch(a.toLowerCase()){case"model":l&&(n.settings.model=l);break;case"temp":case"temperature":l&&(n.settings.temperature=parseFloat(l));break;case"creative":n.settings.temperature=.8;break;case"precise":n.settings.temperature=.1;break;case"web":n.tools.push("web_search");break;case"docs":n.tools.push("document_search");break;case"brand":n.settings.brandGuard=!0;break}n.content=n.content.replace(o,"").trim()}return n}}async function o9(t,e,n){const r=`run_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;try{const s=await fetch("/make-server-ecf7df64/api/chat/stream",{method:"POST",headers:{"Content-Type":"application/json",Authorization:e?`Bearer ${e}`:""},body:JSON.stringify({...t,runId:r})});if(!s.ok)throw new Error(`Streaming failed: ${s.status}`);if(s.body&&n){const o=s.body.getReader(),a=new TextDecoder;try{for(;;){const{done:l,value:u}=await o.read();if(l)break;const f=a.decode(u).split(`
`);for(const m of f)if(m.startsWith("data: "))try{const h=JSON.parse(m.slice(6));n(h)}catch{console.warn("Failed to parse SSE event:",m)}}}finally{o.releaseLock()}}return{runId:r}}catch(s){throw console.error("Stream error:",s),s}}async function i9(t,e,n,r){try{const s=await fetch("/make-server-ecf7df64/api/chat/regenerate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:r?`Bearer ${r}`:""},body:JSON.stringify({threadId:t,messageId:e,nudge:n})});if(!s.ok)throw new Error(`Regenerate failed: ${s.status}`)}catch(s){throw console.error("Regenerate error:",s),s}}const q0=t=>{let e;const n=new Set,r=(d,f)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const h=e;e=f??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(x=>x(e,h))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d))},u=e=t(r,s,l);return l},a9=t=>t?q0(t):q0,l9=t=>t;function c9(t,e=l9){const n=_e.useSyncExternalStore(t.subscribe,_e.useCallback(()=>e(t.getState()),[t,e]),_e.useCallback(()=>e(t.getInitialState()),[t,e]));return _e.useDebugValue(n),n}const u9=t=>{const e=a9(t),n=r=>c9(e,r);return Object.assign(n,e),n},d9=t=>u9;var hS=Symbol.for("immer-nothing"),Q0=Symbol.for("immer-draftable"),Wt=Symbol.for("immer-state");function gn(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Ko=Object.getPrototypeOf;function Wo(t){return!!t&&!!t[Wt]}function Fs(t){return t?fS(t)||Array.isArray(t)||!!t[Q0]||!!t.constructor?.[Q0]||ll(t)||pd(t):!1}var h9=Object.prototype.constructor.toString();function fS(t){if(!t||typeof t!="object")return!1;const e=Ko(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===h9}function vu(t,e){md(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function md(t){const e=t[Wt];return e?e.type_:Array.isArray(t)?1:ll(t)?2:pd(t)?3:0}function Nm(t,e){return md(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function mS(t,e,n){const r=md(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function f9(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function ll(t){return t instanceof Map}function pd(t){return t instanceof Set}function hs(t){return t.copy_||t.base_}function Sm(t,e){if(ll(t))return new Map(t);if(pd(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=fS(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Wt];let s=Reflect.ownKeys(r);for(let o=0;o<s.length;o++){const a=s[o],l=r[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[a]})}return Object.create(Ko(t),r)}else{const r=Ko(t);if(r!==null&&n)return{...t};const s=Object.create(r);return Object.assign(s,t)}}function zg(t,e=!1){return gd(t)||Wo(t)||!Fs(t)||(md(t)>1&&Object.defineProperties(t,{set:{value:nc},add:{value:nc},clear:{value:nc},delete:{value:nc}}),Object.freeze(t),e&&Object.values(t).forEach(n=>zg(n,!0))),t}function nc(){gn(2)}function gd(t){return Object.isFrozen(t)}var m9={};function $s(t){const e=m9[t];return e||gn(0,t),e}var $a;function pS(){return $a}function p9(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Y0(t,e){e&&($s("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function jm(t){Cm(t),t.drafts_.forEach(g9),t.drafts_=null}function Cm(t){t===$a&&($a=t.parent_)}function X0(t){return $a=p9($a,t)}function g9(t){const e=t[Wt];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function J0(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Wt].modified_&&(jm(e),gn(4)),Fs(t)&&(t=bu(e,t),e.parent_||wu(e,t)),e.patches_&&$s("Patches").generateReplacementPatches_(n[Wt].base_,t,e.patches_,e.inversePatches_)):t=bu(e,n,[]),jm(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==hS?t:void 0}function bu(t,e,n){if(gd(e))return e;const r=e[Wt];if(!r)return vu(e,(s,o)=>Z0(t,r,e,s,o,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return wu(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let o=s,a=!1;r.type_===3&&(o=new Set(s),s.clear(),a=!0),vu(o,(l,u)=>Z0(t,r,s,l,u,n,a)),wu(t,s,!1),n&&t.patches_&&$s("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function Z0(t,e,n,r,s,o,a){if(Wo(s)){const l=o&&e&&e.type_!==3&&!Nm(e.assigned_,r)?o.concat(r):void 0,u=bu(t,s,l);if(mS(n,r,u),Wo(u))t.canAutoFreeze_=!1;else return}else a&&n.add(s);if(Fs(s)&&!gd(s)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;bu(t,s),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(ll(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&wu(t,s)}}function wu(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&zg(e,n)}function x9(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:pS(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,o=Bg;n&&(s=[r],o=za);const{revoke:a,proxy:l}=Proxy.revocable(s,o);return r.draft_=l,r.revoke_=a,l}var Bg={get(t,e){if(e===Wt)return t;const n=hs(t);if(!Nm(n,e))return y9(t,n,e);const r=n[e];return t.finalized_||!Fs(r)?r:r===$h(t.base_,e)?(zh(t),t.copy_[e]=Tm(r,t)):r},has(t,e){return e in hs(t)},ownKeys(t){return Reflect.ownKeys(hs(t))},set(t,e,n){const r=gS(hs(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const s=$h(hs(t),e),o=s?.[Wt];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(f9(n,s)&&(n!==void 0||Nm(t.base_,e)))return!0;zh(t),km(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return $h(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,zh(t),km(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=hs(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){gn(11)},getPrototypeOf(t){return Ko(t.base_)},setPrototypeOf(){gn(12)}},za={};vu(Bg,(t,e)=>{za[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});za.deleteProperty=function(t,e){return za.set.call(this,t,e,void 0)};za.set=function(t,e,n){return Bg.set.call(this,t[0],e,n,t[0])};function $h(t,e){const n=t[Wt];return(n?hs(n):t)[e]}function y9(t,e,n){const r=gS(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function gS(t,e){if(!(e in t))return;let n=Ko(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Ko(n)}}function km(t){t.modified_||(t.modified_=!0,t.parent_&&km(t.parent_))}function zh(t){t.copy_||(t.copy_=Sm(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var v9=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const a=this;return function(u=o,...d){return a.produce(u,f=>n.call(this,f,...d))}}typeof n!="function"&&gn(6),r!==void 0&&typeof r!="function"&&gn(7);let s;if(Fs(e)){const o=X0(this),a=Tm(e,void 0);let l=!0;try{s=n(a),l=!1}finally{l?jm(o):Cm(o)}return Y0(o,r),J0(s,o)}else if(!e||typeof e!="object"){if(s=n(e),s===void 0&&(s=e),s===hS&&(s=void 0),this.autoFreeze_&&zg(s,!0),r){const o=[],a=[];$s("Patches").generateReplacementPatches_(e,s,o,a),r(o,a)}return s}else gn(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...l)=>this.produceWithPatches(a,u=>e(u,...l));let r,s;return[this.produce(e,n,(a,l)=>{r=a,s=l}),r,s]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Fs(t)||gn(8),Wo(t)&&(t=b9(t));const e=X0(this),n=Tm(t,void 0);return n[Wt].isManual_=!0,Cm(e),n}finishDraft(t,e){const n=t&&t[Wt];(!n||!n.isManual_)&&gn(9);const{scope_:r}=n;return Y0(r,e),J0(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const s=e[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(e=e.slice(n+1));const r=$s("Patches").applyPatches_;return Wo(t)?r(t,e):this.produce(t,s=>r(s,e))}};function Tm(t,e){const n=ll(t)?$s("MapSet").proxyMap_(t,e):pd(t)?$s("MapSet").proxySet_(t,e):x9(t,e);return(e?e.scope_:pS()).drafts_.push(n),n}function b9(t){return Wo(t)||gn(10,t),xS(t)}function xS(t){if(!Fs(t)||gd(t))return t;const e=t[Wt];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Sm(t,e.scope_.immer_.useStrictShallowCopy_)}else n=Sm(t,!0);return vu(n,(r,s)=>{mS(n,r,xS(s))}),e&&(e.finalized_=!1),n}var w9=new v9,E9=w9.produce;const _9=t=>(e,n,r)=>(r.setState=(s,o,...a)=>{const l=typeof s=="function"?E9(s):s;return e(l,o,...a)},t(r.setState,n,r)),N9=_9,Qn="/make-server-ecf7df64/api";class S9{async listThreads(){const e=await fetch(`${Qn}/threads/list`);if(!e.ok)throw new Error("Failed to list threads");return(await e.json()).threads||[]}async createThread(e){const n=await fetch(`${Qn}/thread/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error("Failed to create thread");return n.json()}async renameThread(e,n){if(!(await fetch(`${Qn}/thread/rename`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threadId:e,title:n})})).ok)throw new Error("Failed to rename thread")}async deleteThread(e){if(!(await fetch(`${Qn}/thread/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threadId:e})})).ok)throw new Error("Failed to delete thread")}async createBranch(e,n){const r=await fetch(`${Qn}/branch/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threadId:e,name:n})});if(!r.ok)throw new Error("Failed to create branch");return r.json()}async renameBranch(e,n){if(!(await fetch(`${Qn}/branch/rename`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branchId:e,name:n})})).ok)throw new Error("Failed to rename branch")}async deleteBranch(e){if(!(await fetch(`${Qn}/branch/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branchId:e})})).ok)throw new Error("Failed to delete branch")}async switchBranch(e,n){if(!(await fetch(`${Qn}/branch/switch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threadId:e,branchId:n})})).ok)throw new Error("Failed to switch branch")}async branchFromMessage(e,n,r){const s=await fetch(`${Qn}/message/branch-from`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threadId:e,messageId:n,name:r})});if(!s.ok)throw new Error("Failed to branch from message");return s.json()}getDefaultBranch(e){return e.branches.find(n=>n.isDefault)||e.branches[0]}}const An=new S9,j9={model:"gpt-5",temperature:.3,persona:"mentor",brandGuard:!0};function eb(){return`id_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function tb(){return`thread_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}const fs=d9()(N9((t,e)=>({threadId:tb(),branchId:void 0,system:"You are a helpful AI assistant specialized in content creation.",settings:{...j9},messages:[],rightPanelOpen:!1,composerText:"",mobileKeyboardOpen:!1,showVirtualKeyboard:!1,isMobileView:!1,streaming:{status:"idle"},history:[],branches:[],setSystem:n=>t(r=>{r.system=n}),setSettings:n=>t(r=>{r.settings={...r.settings,...n}}),setRightPanelOpen:n=>t(r=>{r.rightPanelOpen=n}),setComposerText:n=>t(r=>{r.composerText=n}),setMobileKeyboardOpen:n=>t(r=>{r.mobileKeyboardOpen=n}),setShowVirtualKeyboard:n=>t(r=>{r.showVirtualKeyboard=n}),setIsMobileView:n=>t(r=>{r.isMobileView=n}),pushUserMessage:(n,r)=>t(s=>{const o={id:eb(),role:"user",parts:[{type:"text",value:n}],createdAt:new Date().toISOString(),meta:{attachments:r}};s.messages.push(o),s.composerText=""}),upsertAssistantMessage:(n,r)=>t(s=>{const o=s.messages.findIndex(a=>a.id===r||a.role==="assistant"&&!r);if(o>=0)s.messages[o].parts=[{type:"text",value:n}];else{const a={id:r||eb(),role:"assistant",parts:[{type:"text",value:n}],createdAt:new Date().toISOString(),meta:{streaming:!0}};s.messages.push(a)}}),setStreaming:(n,r,s)=>t(o=>{o.streaming={status:n,runId:r,abortFn:s,toolsUsed:n==="idle"?[]:o.streaming.toolsUsed},n==="idle"&&(o.streaming.currentStage=void 0,o.streaming.toolsUsed=[])}),appendDeltaToLastAssistant:n=>t(r=>{const s=r.messages[r.messages.length-1];if(s&&s.role==="assistant"){const o=s.parts[0]?.value||"";s.parts[0]={type:"text",value:o+n}}}),endStreaming:()=>t(n=>{n.streaming={status:"idle"};const r=n.messages[n.messages.length-1];r&&r.role==="assistant"&&r.meta&&(r.meta.streaming=!1)}),applyToolChipToLastAssistant:n=>t(r=>{r.streaming.toolsUsed||(r.streaming.toolsUsed=[]),r.streaming.toolsUsed.push({...n,completed:!1});const s=r.messages[r.messages.length-1];s&&s.role==="assistant"&&(s.meta||(s.meta={}),s.meta.tools||(s.meta.tools=[]),s.meta.tools.push(n))}),setGoogleIaRequest:n=>t(r=>{r.googleIaRequest=n;const s=r.messages[r.messages.length-1];s&&s.role==="assistant"&&(s.meta||(s.meta={}),s.meta.googleIaRequest=n)}),loadHistory:async()=>{try{const n=await An.listThreads();t(r=>{r.history=n}),console.log(`[ChatStore] Loaded ${n.length} threads from backend`)}catch(n){console.error("[ChatStore] Failed to load history:",n),t(r=>{r.error="Failed to load thread history"})}},selectThread:async(n,r)=>{try{const o=e().history.find(l=>l.id===n);if(!o)throw new Error("Thread not found in history");const a=r?o.branches.find(l=>l.id===r):An.getDefaultBranch(o);if(!a)throw new Error("Branch not found");t(l=>{l.threadId=n,l.branchId=a.id,l.branches=o.branches,l.messages=[],l.streaming={status:"idle"},l.googleIaRequest=void 0,l.error=void 0}),console.log(`[ChatStore] Selected thread ${n}, branch ${a.name}`)}catch(s){console.error("[ChatStore] Failed to select thread:",s),t(o=>{o.error=`Failed to load thread: ${s instanceof Error?s.message:"Unknown error"}`})}},createNewThread:async n=>{try{const r=await An.createThread({title:n||"Nuevo Hilo"});await e().loadHistory(),await e().selectThread(r.id),console.log(`[ChatStore] Created new thread: ${r.id}`)}catch(r){console.error("[ChatStore] Failed to create thread:",r),t(s=>{s.error=`Failed to create thread: ${r instanceof Error?r.message:"Unknown error"}`})}},renameThread:async(n,r)=>{try{await An.renameThread(n,r),t(s=>{const o=s.history.find(a=>a.id===n);o&&(o.title=r)}),console.log(`[ChatStore] Renamed thread ${n} to "${r}"`)}catch(s){console.error("[ChatStore] Failed to rename thread:",s),t(o=>{o.error=`Failed to rename thread: ${s instanceof Error?s.message:"Unknown error"}`})}},deleteThread:async n=>{try{await An.deleteThread(n),t(r=>{r.history=r.history.filter(s=>s.id!==n),r.threadId===n&&(r.threadId=tb(),r.branchId=void 0,r.messages=[],r.branches=[],r.streaming={status:"idle"},r.googleIaRequest=void 0)}),console.log(`[ChatStore] Deleted thread ${n}`)}catch(r){console.error("[ChatStore] Failed to delete thread:",r),t(s=>{s.error=`Failed to delete thread: ${r instanceof Error?r.message:"Unknown error"}`})}},setBranch:async n=>{try{const r=e();if(!r.branches.find(o=>o.id===n))throw new Error("Branch not found");await An.switchBranch(r.threadId,n),t(o=>{o.branchId=n,o.messages=[],o.streaming={status:"idle"}}),console.log(`[ChatStore] Switched to branch ${n}`)}catch(r){console.error("[ChatStore] Failed to switch branch:",r),t(s=>{s.error=`Failed to switch branch: ${r instanceof Error?r.message:"Unknown error"}`})}},createBranch:async(n,r)=>{try{const s=await An.createBranch(n,r);return t(o=>{o.branches.push({id:s.id,name:r,isDefault:!1})}),console.log(`[ChatStore] Created branch ${s.id} "${r}"`),s.id}catch(s){throw console.error("[ChatStore] Failed to create branch:",s),t(o=>{o.error=`Failed to create branch: ${s instanceof Error?s.message:"Unknown error"}`}),s}},renameBranch:async(n,r)=>{try{await An.renameBranch(n,r),t(s=>{const o=s.branches.find(a=>a.id===n);o&&(o.name=r)}),console.log(`[ChatStore] Renamed branch ${n} to "${r}"`)}catch(s){console.error("[ChatStore] Failed to rename branch:",s),t(o=>{o.error=`Failed to rename branch: ${s instanceof Error?s.message:"Unknown error"}`})}},deleteBranch:async n=>{try{await An.deleteBranch(n),t(r=>{if(r.branches=r.branches.filter(s=>s.id!==n),r.branchId===n){const o=r.branches.find(a=>a.isDefault)||r.branches[0];o&&(r.branchId=o.id,r.messages=[])}}),console.log(`[ChatStore] Deleted branch ${n}`)}catch(r){console.error("[ChatStore] Failed to delete branch:",r),t(s=>{s.error=`Failed to delete branch: ${r instanceof Error?r.message:"Unknown error"}`})}},branchFromMessage:async(n,r)=>{try{const s=e(),o=await An.branchFromMessage(s.threadId,n,r),a=r||`rama-${Date.now()}`;return t(l=>{l.branches.push({id:o.branchId,name:a,isDefault:!1}),l.branchId=o.branchId}),console.log(`[ChatStore] Created branch ${o.branchId} from message ${n}`),o.branchId}catch(s){throw console.error("[ChatStore] Failed to branch from message:",s),t(o=>{o.error=`Failed to create branch: ${s instanceof Error?s.message:"Unknown error"}`}),s}},handleSSEEvent:n=>{const r=e();switch(n.type){case"ready":t(s=>{s.streaming.status="thinking",s.error=void 0});break;case"state":t(s=>{s.streaming.currentStage=n.data.stage,n.data.stage==="generate"&&(s.streaming.status="streaming")});break;case"tool":r.applyToolChipToLastAssistant({name:n.data.name,args:n.data.args,mode:n.data.mode});break;case"token":r.streaming.status==="streaming"&&r.appendDeltaToLastAssistant(n.data.delta);break;case"usage":t(s=>{const o=s.messages[s.messages.length-1];o&&o.role==="assistant"&&(o.meta||(o.meta={}),o.meta.usage=n.data)});break;case"error":t(s=>{s.streaming.status="error",s.error=`${n.data.code}: ${n.data.message}`});break;case"done":t(s=>{s.streaming.status="idle",s.streaming.currentStage=void 0;const o=s.messages[s.messages.length-1];o&&o.role==="assistant"&&(o.id=n.data.messageId,o.meta&&(o.meta.streaming=!1))});break}},setError:n=>t(r=>{r.error=n}),clearError:()=>t(n=>{n.error=void 0})}))),Bh={useIsStreaming:()=>fs(t=>t.streaming.status!=="idle"),useLastAssistantMessage:()=>fs(t=>{const e=t.messages.filter(n=>n.role==="assistant");return e[e.length-1]}),useCurrentTools:()=>fs(t=>t.streaming.toolsUsed||[]),useThreadTitle:()=>fs(t=>{const e=t.messages.find(n=>n.role==="user");return e?.parts?.[0]?.value?e.parts[0].value.substring(0,50)+"...":"New Chat"}),useCanSendMessage:()=>fs(t=>t.streaming.status==="idle"&&t.composerText.trim().length>0),useCanAbort:()=>fs(t=>t.streaming.status!=="idle"&&!!t.streaming.abortFn)};function C9(t){console.log("useChat hook called");const{threadId:e,system:n,settings:r,messages:s,composerText:o,rightPanelOpen:a,streaming:l,error:u,setComposerText:d,setSettings:f,setRightPanelOpen:m,pushUserMessage:h,upsertAssistantMessage:x,setStreaming:y,handleSSEEvent:b,createNewThread:j,selectThread:_,setError:E,clearError:S}=fs(),R=Bh.useIsStreaming();Bh.useCanSendMessage(),Bh.useCanAbort();const T=p.useRef(new s9(t)),D=p.useRef(),N=p.useCallback(k=>T.current.processSlashCommands(k),[]),w=p.useCallback(async(k,O=[])=>{const z=k||o;if(!(!z.trim()||R)){try{S();const H=N(z);h(H.content),y("thinking"),x(""),setTimeout(()=>{const Y=["Esta es una respuesta simulada del Chat Maestro. En modo demo, puedo ayudarte a entender la funcionalidad sin conectar al backend real.","¡Excelente pregunta! En producción, estaría procesando tu solicitud con IA avanzada y herramientas como búsqueda web, análisis de documentos y brand guard.","Para activar todas las funcionalidades, necesitas configurar la autenticación JWT y conectar con el backend de Supabase."],L=Y[Math.floor(Math.random()*Y.length)];x(L,`demo_${Date.now()}`),y("idle")},2e3);return}catch(H){console.error("Demo mode error:",H),E("Error en modo demo"),y("error");return}try{S();const H=N(z),Y=[...O,...H.tools.map(W=>({name:W}))];Object.keys(H.settings).length>0&&f(H.settings),h(H.content),x("");const L={threadId:e,system:`You are a ${r.persona} AI assistant specialized in content creation. ${r.brandGuard?"Always follow brand guidelines and maintain brand consistency.":""}`,messages:[...s,{id:`user_${Date.now()}`,role:"user",parts:[{type:"text",value:H.content}],createdAt:new Date().toISOString()}],settings:{...r,...H.settings},tools:Y,objective:H.content},{runId:$}=await o9(L,t,b);D.current=$,y("thinking",$)}catch(H){console.error("Failed to send message:",H),E(H instanceof Error?H.message:"Failed to send message"),y("error")}}},[t,o,R,e,n,r,s,N,f,h,x,b,y,E,S]),C=p.useCallback(async k=>{if(R||s.length===0)return;const O=[...s].reverse().find(z=>z.role==="assistant");if(!O){console.warn("No assistant message to regenerate");return}try{if(S(),x("",`regenerate_${Date.now()}`),y("thinking"),!t){setTimeout(()=>{const H={shorter:"Respuesta más breve simulada.",longer:"Esta es una respuesta más detallada y extensa que simula el comportamiento de regeneración del Chat Maestro en modo demo.",creative:"✨ Respuesta creativa e innovadora que demuestra el potencial del sistema! 🚀",concise:"Respuesta concisa y directa."}[k||"shorter"]||"Respuesta regenerada en modo demo.";x(H,`regenerate_${Date.now()}`),y("idle")},1500);return}await i9(e,O.id,k,t)}catch(z){console.error("Failed to regenerate response:",z),E(z instanceof Error?z.message:"Failed to regenerate"),y("error")}},[t,R,s,e,x,y,E,S]),A=p.useCallback(async()=>{if(R)try{t&&D.current,y("cancelled"),l.abortFn&&l.abortFn()}catch(k){console.error("Failed to abort generation:",k),E("Failed to abort generation")}},[t,R,e,l.abortFn,y,E]),I=p.useCallback(async()=>{try{const k=s.find(O=>O.role==="user")?.parts[0]?.value.substring(0,50)||"Untitled Chat";if(!t){const O={id:e,title:k,system:n,settings:r,messages:s,savedAt:new Date().toISOString()};localStorage.setItem(`chat_thread_${e}`,JSON.stringify(O)),console.log("Thread saved to localStorage in demo mode")}}catch(k){console.error("Failed to save thread:",k),E("Failed to save thread")}},[t,e,n,r,s,E]),M=p.useCallback(async k=>{try{if(!t)return new Promise(O=>{setTimeout(()=>{O({id:`demo_attachment_${Date.now()}`,url:URL.createObjectURL(k)})},1e3)})}catch(O){throw console.error("Failed to upload attachment:",O),new Error("Failed to upload attachment")}},[t,e]);return{messages:s,isStreaming:R,error:u,settings:r,composerText:o,rightPanelOpen:a,send:w,abort:A,regenerate:C,setComposerText:d,setSettings:f,setRightPanelOpen:m,createNewThread:j,selectThread:_,saveCurrentThread:I,uploadAttachment:M,processSlashCommand:N}}class k9{baseUrl;headers;constructor(){this.baseUrl="",this.headers={"Content-Type":"application/json"}}async checkText(e){return console.log("[Brand Guard SDK] checkText called with:",e),{report:{score:85,findings:[],disclaimerNeeded:!1}}}async preCheckUserMessage(e,n,r){return this.checkText({text:e,role:"user",brand:n,context:r})}async postCheckAssistantMessage(e,n,r){return this.checkText({text:e,role:"assistant",brand:n,context:r})}async updateRules(e,n){return console.log("[Brand Guard SDK] updateRules called with:",e,n),{ok:!0}}convertBrandKitToBrandGuard(e){const n=e.voiceTone?.style||"";e.voiceTone?.examples?.correct;const r=e.voiceTone?.examples?.incorrect||[];let s=["profesional","claro","consistente"],o=["agresivo","confuso","inconsistente"];return n.toLowerCase().includes("profesional")&&s.push("formal","cortés"),(n.toLowerCase().includes("cercano")||n.toLowerCase().includes("amigable"))&&(s.push("cercano","amigable"),o.push("frío","distante")),{tone:{do:s,dont:o,readingLevel:"neutral"},lexicon:{preferred:e.messaging?.differentiators||[],avoid:r.map(a=>a.split(" ").slice(0,2).join(" ")).filter(Boolean),banned:["spam","scam","fake","gratis!!!"]},style:{emoji:!0,exclamationMax:n.toLowerCase().includes("enérgico")?3:1,linksPolicy:"need-disclaimer"},claims:{allowed:[...e.messaging?.slogans||[],...e.messaging?.differentiators||[],e.messaging?.tagline].filter(Boolean),forbidden:["el mejor del mundo","100% garantizado","imposible de fallar","nunca falla"],needsDisclaimer:["resultados pueden variar","sujeto a términos","disponibilidad limitada"]},disclaimers:{standard:"Esta información se proporciona solo con fines informativos.",legal:"Consulte los términos y condiciones completos."},locales:e.internationalization?.supportedLanguages||["es"]}}}const Uh=new k9;function T9(){console.log("useBrandGuard hook called");const[t,e]=p.useState({isAnalyzing:!1,lastReport:null,error:null,metrics:{totalChecks:0,averageScore:0,suggestionsApplied:0}}),{brandKit:n}=Xa(),r=p.useCallback(()=>{if(!n)return{tone:{do:["profesional","claro","consistente","útil"],dont:["agresivo","confuso","técnico excesivo","informal excesivo"],readingLevel:"neutral"},lexicon:{preferred:["solución","experiencia","innovación","calidad"],avoid:["problema","fallo","error","imposible"],banned:["spam","scam","fake","gratis!!!"]},style:{emoji:!1,exclamationMax:1,linksPolicy:"need-disclaimer"},claims:{allowed:["Ofrecemos soluciones innovadoras","Experiencia comprobada"],forbidden:["El mejor del mercado","100% garantizado","Imposible de fallar"],needsDisclaimer:["resultados pueden variar","sujeto a términos"]},disclaimers:{standard:"Esta información se proporciona solo con fines informativos.",legal:"Consulte los términos y condiciones completos."},locales:["es"]};try{return Uh.convertBrandKitToBrandGuard(n)}catch(d){return console.warn("[Brand Guard] Failed to convert BrandKit:",d),null}},[n]),s=p.useCallback(d=>{e(f=>{const m=f.metrics.totalChecks+1,h=(f.metrics.averageScore*f.metrics.totalChecks+d.score)/m;return{...f,metrics:{...f.metrics,totalChecks:m,averageScore:Math.round(h)}}})},[]),o=p.useCallback(async(d,f)=>{const m=r();if(!m)return console.warn("[Brand Guard] No BrandKit available for analysis"),{score:100,findings:[],disclaimerNeeded:!1};e(h=>({...h,isAnalyzing:!0,error:null}));try{const x=(await Uh.preCheckUserMessage(d,m,f)).report;return e(y=>({...y,isAnalyzing:!1,lastReport:x,error:null})),s(x),x.findings.length>0&&console.log("[Brand Guard] User message findings:",x.findings),x}catch(h){const x=h instanceof Error?h.message:"Error analyzing message";return e(y=>({...y,isAnalyzing:!1,error:x})),{score:75,findings:[{type:"compliance",severity:"info",message:"Análisis de marca no disponible",suggestion:"Revisa manualmente según directrices"}],disclaimerNeeded:!1}}},[r,s]),a=p.useCallback(async(d,f)=>{const m=r();if(!m)return{score:100,findings:[],disclaimerNeeded:!1};e(h=>({...h,isAnalyzing:!0,error:null}));try{const x=(await Uh.postCheckAssistantMessage(d,m,f)).report;return e(y=>({...y,isAnalyzing:!1,lastReport:x,error:null})),s(x),x.findings.length>0&&console.log("[Brand Guard] Assistant message findings:",x.findings),x}catch(h){const x=h instanceof Error?h.message:"Error analyzing message";return e(y=>({...y,isAnalyzing:!1,error:x})),{score:75,findings:[],disclaimerNeeded:!1}}},[r,s]),l=p.useCallback((d,f)=>{e(m=>({...m,metrics:{...m.metrics,suggestionsApplied:m.metrics.suggestionsApplied+1}})),console.log("[Brand Guard] Applied suggestion:",{originalText:d,suggestedText:f})},[]),u=p.useCallback(()=>{e(d=>({...d,lastReport:null,error:null}))},[]);return{...t,checkUserMessage:o,checkAssistantMessage:a,applySuggestion:l,clearReport:u,getBrandKitForGuard:r}}const yS=p.forwardRef(({className:t,...e},n)=>i.jsx("textarea",{ref:n,"data-slot":"textarea",className:ue("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...e}));yS.displayName="Textarea";var Ug="Progress",Hg=100,[A9]=jt(Ug),[P9,R9]=A9(Ug),vS=p.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:o=I9,...a}=t;(s||s===0)&&!nb(s)&&console.error(M9(`${s}`,"Progress"));const l=nb(s)?s:Hg;r!==null&&!rb(r,l)&&console.error(D9(`${r}`,"Progress"));const u=rb(r,l)?r:null,d=Eu(u)?o(u,l):void 0;return i.jsx(P9,{scope:n,value:u,max:l,children:i.jsx(oe.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Eu(u)?u:void 0,"aria-valuetext":d,role:"progressbar","data-state":ES(u,l),"data-value":u??void 0,"data-max":l,...a,ref:e})})});vS.displayName=Ug;var bS="ProgressIndicator",wS=p.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=R9(bS,n);return i.jsx(oe.div,{"data-state":ES(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});wS.displayName=bS;function I9(t,e){return`${Math.round(t/e*100)}%`}function ES(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Eu(t){return typeof t=="number"}function nb(t){return Eu(t)&&!isNaN(t)&&t>0}function rb(t,e){return Eu(t)&&!isNaN(t)&&t<=e&&t>=0}function M9(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Hg}\`.`}function D9(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Hg} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var O9=vS,L9=wS;function V9({className:t,value:e,...n}){return i.jsx(O9,{"data-slot":"progress",className:ue("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...n,children:i.jsx(L9,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})})}var xd="Popover",[_S]=jt(xd,[ri]),cl=ri(),[F9,ts]=_S(xd),NS=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:a=!1}=t,l=cl(e),u=p.useRef(null),[d,f]=p.useState(!1),[m,h]=es({prop:r,defaultProp:s??!1,onChange:o,caller:xd});return i.jsx(Op,{...l,children:i.jsx(F9,{scope:e,contentId:bn(),triggerRef:u,open:m,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(x=>!x),[h]),hasCustomAnchor:d,onCustomAnchorAdd:p.useCallback(()=>f(!0),[]),onCustomAnchorRemove:p.useCallback(()=>f(!1),[]),modal:a,children:n})})};NS.displayName=xd;var SS="PopoverAnchor",$9=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=ts(SS,n),o=cl(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return p.useEffect(()=>(a(),()=>l()),[a,l]),i.jsx(Wu,{...o,...r,ref:e})});$9.displayName=SS;var jS="PopoverTrigger",CS=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=ts(jS,n),o=cl(n),a=ye(e,s.triggerRef),l=i.jsx(oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":RS(s.open),...r,ref:a,onClick:Q(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:i.jsx(Wu,{asChild:!0,...o,children:l})});CS.displayName=jS;var Gg="PopoverPortal",[z9,B9]=_S(Gg,{forceMount:void 0}),kS=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,o=ts(Gg,e);return i.jsx(z9,{scope:e,forceMount:n,children:i.jsx(et,{present:n||o.open,children:i.jsx(Qa,{asChild:!0,container:s,children:r})})})};kS.displayName=Gg;var qo="PopoverContent",TS=p.forwardRef((t,e)=>{const n=B9(qo,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,o=ts(qo,t.__scopePopover);return i.jsx(et,{present:r||o.open,children:o.modal?i.jsx(H9,{...s,ref:e}):i.jsx(G9,{...s,ref:e})})});TS.displayName=qo;var U9=Rs("PopoverContent.RemoveScroll"),H9=p.forwardRef((t,e)=>{const n=ts(qo,t.__scopePopover),r=p.useRef(null),s=ye(e,r),o=p.useRef(!1);return p.useEffect(()=>{const a=r.current;if(a)return bg(a)},[]),i.jsx(ad,{as:U9,allowPinchZoom:!0,children:i.jsx(AS,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Q(t.onCloseAutoFocus,a=>{a.preventDefault(),o.current||n.triggerRef.current?.focus()}),onPointerDownOutside:Q(t.onPointerDownOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;o.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Q(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),G9=p.forwardRef((t,e)=>{const n=ts(qo,t.__scopePopover),r=p.useRef(!1),s=p.useRef(!1);return i.jsx(AS,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||n.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;n.triggerRef.current?.contains(a)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),AS=p.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,...m}=t,h=ts(qo,n),x=cl(n);return xg(),i.jsx(od,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(Wa,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>h.onOpenChange(!1),children:i.jsx(Lp,{"data-state":RS(h.open),role:"dialog",id:h.contentId,...x,...m,ref:e,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),PS="PopoverClose",K9=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=ts(PS,n);return i.jsx(oe.button,{type:"button",...r,ref:e,onClick:Q(t.onClick,()=>s.onOpenChange(!1))})});K9.displayName=PS;var W9="PopoverArrow",q9=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=cl(n);return i.jsx(Vp,{...s,...r,ref:e})});q9.displayName=W9;function RS(t){return t?"open":"closed"}var Q9=NS,Y9=CS,X9=kS,J9=TS;function Z9({...t}){return i.jsx(Q9,{"data-slot":"popover",...t})}function eV({...t}){return i.jsx(Y9,{"data-slot":"popover-trigger",...t})}function tV({className:t,align:e="center",sideOffset:n=4,...r}){return i.jsx(X9,{children:i.jsx(J9,{"data-slot":"popover-content",align:e,sideOffset:n,className:ue("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...r})})}function sb({className:t,...e}){return i.jsx("div",{"data-slot":"card",className:ue("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...e})}function ob({className:t,...e}){return i.jsx("div",{"data-slot":"card-header",className:ue("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...e})}function ib({className:t,...e}){return i.jsx("h4",{"data-slot":"card-title",className:ue("leading-none",t),...e})}function nV({className:t,...e}){return i.jsx("p",{"data-slot":"card-description",className:ue("text-muted-foreground",t),...e})}function ab({className:t,...e}){return i.jsx("div",{"data-slot":"card-content",className:ue("px-6 [&:last-child]:pb-6",t),...e})}function rV(t,[e,n]){return Math.min(n,Math.max(e,t))}function sV(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var Kg="ScrollArea",[IS]=jt(Kg),[oV,un]=IS(Kg),MS=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:o=600,...a}=t,[l,u]=p.useState(null),[d,f]=p.useState(null),[m,h]=p.useState(null),[x,y]=p.useState(null),[b,j]=p.useState(null),[_,E]=p.useState(0),[S,R]=p.useState(0),[T,D]=p.useState(!1),[N,w]=p.useState(!1),C=ye(e,I=>u(I)),A=rl(s);return i.jsx(oV,{scope:n,type:r,dir:A,scrollHideDelay:o,scrollArea:l,viewport:d,onViewportChange:f,content:m,onContentChange:h,scrollbarX:x,onScrollbarXChange:y,scrollbarXEnabled:T,onScrollbarXEnabledChange:D,scrollbarY:b,onScrollbarYChange:j,scrollbarYEnabled:N,onScrollbarYEnabledChange:w,onCornerWidthChange:E,onCornerHeightChange:R,children:i.jsx(oe.div,{dir:A,...a,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":_+"px","--radix-scroll-area-corner-height":S+"px",...t.style}})})});MS.displayName=Kg;var DS="ScrollAreaViewport",OS=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...o}=t,a=un(DS,n),l=p.useRef(null),u=ye(e,l,a.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(oe.div,{"data-radix-scroll-area-viewport":"",...o,ref:u,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:i.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});OS.displayName=DS;var Gn="ScrollAreaScrollbar",LS=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=un(Gn,t.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:a}=s,l=t.orientation==="horizontal";return p.useEffect(()=>(l?o(!0):a(!0),()=>{l?o(!1):a(!1)}),[l,o,a]),s.type==="hover"?i.jsx(iV,{...r,ref:e,forceMount:n}):s.type==="scroll"?i.jsx(aV,{...r,ref:e,forceMount:n}):s.type==="auto"?i.jsx(VS,{...r,ref:e,forceMount:n}):s.type==="always"?i.jsx(Wg,{...r,ref:e}):null});LS.displayName=Gn;var iV=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=un(Gn,t.__scopeScrollArea),[o,a]=p.useState(!1);return p.useEffect(()=>{const l=s.scrollArea;let u=0;if(l){const d=()=>{window.clearTimeout(u),a(!0)},f=()=>{u=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(u),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(et,{present:n||o,children:i.jsx(VS,{"data-state":o?"visible":"hidden",...r,ref:e})})}),aV=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=un(Gn,t.__scopeScrollArea),o=t.orientation==="horizontal",a=vd(()=>u("SCROLL_END"),100),[l,u]=sV("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>u("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,s.scrollHideDelay,u]),p.useEffect(()=>{const d=s.viewport,f=o?"scrollLeft":"scrollTop";if(d){let m=d[f];const h=()=>{const x=d[f];m!==x&&(u("SCROLL"),a()),m=x};return d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[s.viewport,o,u,a]),i.jsx(et,{present:n||l!=="hidden",children:i.jsx(Wg,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Q(t.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Q(t.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),VS=p.forwardRef((t,e)=>{const n=un(Gn,t.__scopeScrollArea),{forceMount:r,...s}=t,[o,a]=p.useState(!1),l=t.orientation==="horizontal",u=vd(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;a(l?d:f)}},10);return Qo(n.viewport,u),Qo(n.content,u),i.jsx(et,{present:r||o,children:i.jsx(Wg,{"data-state":o?"visible":"hidden",...s,ref:e})})}),Wg=p.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=un(Gn,t.__scopeScrollArea),o=p.useRef(null),a=p.useRef(0),[l,u]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=US(l.viewport,l.content),f={...r,sizes:l,onSizesChange:u,hasThumb:d>0&&d<1,onThumbChange:h=>o.current=h,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:h=>a.current=h};function m(h,x){return fV(h,a.current,l,x)}return n==="horizontal"?i.jsx(lV,{...f,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,x=lb(h,l,s.dir);o.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=m(h,s.dir))}}):n==="vertical"?i.jsx(cV,{...f,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,x=lb(h,l);o.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=m(h))}}):null}),lV=p.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,o=un(Gn,t.__scopeScrollArea),[a,l]=p.useState(),u=p.useRef(null),d=ye(e,u,o.onScrollbarXChange);return p.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),i.jsx($S,{"data-orientation":"horizontal",...s,ref:d,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":yd(n)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.x),onDragScroll:f=>t.onDragScroll(f.x),onWheelScroll:(f,m)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;t.onWheelScroll(h),GS(h,m)&&f.preventDefault()}},onResize:()=>{u.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Nu(a.paddingLeft),paddingEnd:Nu(a.paddingRight)}})}})}),cV=p.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,o=un(Gn,t.__scopeScrollArea),[a,l]=p.useState(),u=p.useRef(null),d=ye(e,u,o.onScrollbarYChange);return p.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),i.jsx($S,{"data-orientation":"vertical",...s,ref:d,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":yd(n)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.y),onDragScroll:f=>t.onDragScroll(f.y),onWheelScroll:(f,m)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;t.onWheelScroll(h),GS(h,m)&&f.preventDefault()}},onResize:()=>{u.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Nu(a.paddingTop),paddingEnd:Nu(a.paddingBottom)}})}})}),[uV,FS]=IS(Gn),$S=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:o,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:u,onDragScroll:d,onWheelScroll:f,onResize:m,...h}=t,x=un(Gn,n),[y,b]=p.useState(null),j=ye(e,C=>b(C)),_=p.useRef(null),E=p.useRef(""),S=x.viewport,R=r.content-r.viewport,T=it(f),D=it(u),N=vd(m,10);function w(C){if(_.current){const A=C.clientX-_.current.left,I=C.clientY-_.current.top;d({x:A,y:I})}}return p.useEffect(()=>{const C=A=>{const I=A.target;y?.contains(I)&&T(A,R)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[S,y,R,T]),p.useEffect(D,[r,D]),Qo(y,N),Qo(x.content,N),i.jsx(uV,{scope:n,scrollbar:y,hasThumb:s,onThumbChange:it(o),onThumbPointerUp:it(a),onThumbPositionChange:D,onThumbPointerDown:it(l),children:i.jsx(oe.div,{...h,ref:j,style:{position:"absolute",...h.style},onPointerDown:Q(t.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),_.current=y.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),w(C))}),onPointerMove:Q(t.onPointerMove,w),onPointerUp:Q(t.onPointerUp,C=>{const A=C.target;A.hasPointerCapture(C.pointerId)&&A.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=E.current,x.viewport&&(x.viewport.style.scrollBehavior=""),_.current=null})})})}),_u="ScrollAreaThumb",zS=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=FS(_u,t.__scopeScrollArea);return i.jsx(et,{present:n||s.hasThumb,children:i.jsx(dV,{ref:e,...r})})}),dV=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,o=un(_u,n),a=FS(_u,n),{onThumbPositionChange:l}=a,u=ye(e,m=>a.onThumbChange(m)),d=p.useRef(void 0),f=vd(()=>{d.current&&(d.current(),d.current=void 0)},100);return p.useEffect(()=>{const m=o.viewport;if(m){const h=()=>{if(f(),!d.current){const x=mV(m,l);d.current=x,l()}};return l(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[o.viewport,f,l]),i.jsx(oe.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Q(t.onPointerDownCapture,m=>{const x=m.target.getBoundingClientRect(),y=m.clientX-x.left,b=m.clientY-x.top;a.onThumbPointerDown({x:y,y:b})}),onPointerUp:Q(t.onPointerUp,a.onThumbPointerUp)})});zS.displayName=_u;var qg="ScrollAreaCorner",BS=p.forwardRef((t,e)=>{const n=un(qg,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(hV,{...t,ref:e}):null});BS.displayName=qg;var hV=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=un(qg,n),[o,a]=p.useState(0),[l,u]=p.useState(0),d=!!(o&&l);return Qo(s.scrollbarX,()=>{const f=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(f),u(f)}),Qo(s.scrollbarY,()=>{const f=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(f),a(f)}),d?i.jsx(oe.div,{...r,ref:e,style:{width:o,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Nu(t){return t?parseInt(t,10):0}function US(t,e){const n=t/e;return isNaN(n)?0:n}function yd(t){const e=US(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function fV(t,e,n,r="ltr"){const s=yd(n),o=s/2,a=e||o,l=s-a,u=n.scrollbar.paddingStart+a,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,m=r==="ltr"?[0,f]:[f*-1,0];return HS([u,d],m)(t)}function lb(t,e,n="ltr"){const r=yd(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-s,a=e.content-e.viewport,l=o-r,u=n==="ltr"?[0,a]:[a*-1,0],d=rV(t,u);return HS([0,a],[0,l])(d)}function HS(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function GS(t,e){return t>0&&t<e}var mV=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const o={left:t.scrollLeft,top:t.scrollTop},a=n.left!==o.left,l=n.top!==o.top;(a||l)&&e(),n=o,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function vd(t,e){const n=it(t),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Qo(t,e){const n=it(e);ln(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var pV=MS,gV=OS,xV=BS;function yV({className:t,children:e,...n}){return i.jsxs(pV,{"data-slot":"scroll-area",className:ue("relative",t),...n,children:[i.jsx(gV,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),i.jsx(vV,{}),i.jsx(xV,{})]})}function vV({className:t,orientation:e="vertical",...n}){return i.jsx(LS,{"data-slot":"scroll-area-scrollbar",orientation:e,className:ue("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...n,children:i.jsx(zS,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function KS({report:t,isAnalyzing:e,onApplySuggestion:n,onClose:r,className:s=""}){if(e)return i.jsxs(sb,{className:`animate-pulse ${s}`,children:[i.jsxs(ob,{className:"pb-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(ib,{className:"flex items-center gap-2",children:[i.jsx(Yf,{className:"h-4 w-4 text-blue-500"}),"Brand Guard"]}),r&&i.jsx(te,{variant:"ghost",size:"sm",onClick:r,children:i.jsx(Ms,{className:"h-4 w-4"})})]}),i.jsx(nV,{children:"Analizando conformidad con directrices de marca..."})]}),i.jsx(ab,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded animate-pulse"}),i.jsx("div",{className:"h-4 bg-muted rounded animate-pulse w-3/4"}),i.jsx("div",{className:"h-4 bg-muted rounded animate-pulse w-1/2"})]})})]});if(!t)return null;const o=d=>{switch(d){case"block":return i.jsx(Ot,{className:"h-4 w-4 text-red-500"});case"warn":return i.jsx(Ot,{className:"h-4 w-4 text-yellow-500"});case"info":return i.jsx(gh,{className:"h-4 w-4 text-blue-500"});default:return i.jsx(gh,{className:"h-4 w-4 text-gray-500"})}},a=d=>{switch(d){case"block":return"destructive";case"warn":return"secondary";case"info":return"default";default:return"outline"}},l=d=>d>=90?"text-green-600":d>=70?"text-yellow-600":"text-red-600",u=d=>d>=90?"Excelente":d>=70?"Bueno":d>=50?"Mejorable":"Requiere atención";return i.jsxs(sb,{className:s,children:[i.jsxs(ob,{className:"pb-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(ib,{className:"flex items-center gap-2",children:[i.jsx(Yf,{className:"h-4 w-4 text-blue-500"}),"Brand Guard"]}),r&&i.jsx(te,{variant:"ghost",size:"sm",onClick:r,children:i.jsx(Ms,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx($e,{className:"h-4 w-4 text-green-500"}),i.jsxs("span",{className:`font-medium ${l(t.score)}`,children:[t.score,"/100"]}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",u(t.score),")"]})]}),t.findings.length>0&&i.jsxs(Ve,{variant:"secondary",children:[t.findings.length," finding",t.findings.length!==1?"s":""]})]})]}),i.jsx(ab,{className:"space-y-4",children:t.findings.length===0?i.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[i.jsx($e,{className:"h-8 w-8 mx-auto mb-2 text-green-500"}),i.jsx("p",{children:"¡Perfecto! El contenido cumple con todas las directrices de marca."})]}):i.jsxs(i.Fragment,{children:[i.jsx(yV,{className:"max-h-60",children:i.jsx("div",{className:"space-y-3",children:t.findings.map((d,f)=>i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[o(d.severity),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(Ve,{variant:a(d.severity),className:"text-xs",children:d.type}),i.jsx("span",{className:"text-sm capitalize text-muted-foreground",children:d.severity})]}),i.jsx("p",{className:"text-sm",children:d.message}),d.suggestion&&i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["💡 ",d.suggestion]})]})]}),f<t.findings.length-1&&i.jsx(ia,{})]},f))})}),t.suggestedText&&n&&i.jsxs(i.Fragment,{children:[i.jsx(ia,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"text-sm font-medium",children:"Texto sugerido:"}),i.jsx("div",{className:"bg-muted p-3 rounded-md",children:i.jsx("p",{className:"text-sm",children:t.suggestedText})}),i.jsx(te,{size:"sm",onClick:()=>n(t.suggestedText),className:"w-full",children:"Aplicar sugerencia"})]})]}),t.disclaimerNeeded&&t.disclaimerText&&i.jsxs(i.Fragment,{children:[i.jsx(ia,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("h4",{className:"text-sm font-medium flex items-center gap-1",children:[i.jsx(gh,{className:"h-4 w-4"}),"Disclaimer requerido:"]}),i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-3 rounded-md",children:i.jsx("p",{className:"text-xs text-yellow-800",children:t.disclaimerText})})]})]})]})})]})}function Hh({report:t,isAnalyzing:e,onApplySuggestion:n,size:r="sm",showLabel:s=!0}){const o=()=>e?"secondary":t?t.score>=90?"default":t.score>=70?"secondary":"destructive":"outline",a=()=>e?i.jsx(rr,{className:"h-3 w-3 animate-spin"}):t?t.findings.some(u=>u.severity==="block"||u.severity==="warn")?i.jsx(Ot,{className:"h-3 w-3"}):i.jsx($e,{className:"h-3 w-3"}):i.jsx(G2,{className:"h-3 w-3"}),l=()=>e?"Analizando...":t?t.findings.length===0?s?`${t.score}/100`:`${t.score}`:s?`${t.score}/100 (${t.findings.length})`:`${t.score} (${t.findings.length})`:"Brand Guard";return!e&&!t?null:i.jsxs(Z9,{children:[i.jsx(eV,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:r,className:`h-6 px-2 ${r==="sm"?"text-xs":"text-sm"}`,children:i.jsxs(Ve,{variant:o(),className:"flex items-center gap-1",children:[a(),s&&i.jsx("span",{className:"font-medium",children:l()})]})})}),i.jsx(tV,{className:"w-80 p-0",align:"end",side:"top",children:i.jsx(KS,{report:t,isAnalyzing:e,onApplySuggestion:n})})]})}function cb(){const t=C9(void 0),e=T9(),[n,r]=p.useState(!1),[s,o]=p.useState(!1),[a,l]=p.useState(!1),[u,d]=p.useState(!1),[f,m]=p.useState("md"),[h,x]=p.useState("readonly"),[y,b]=p.useState(!1),j=t.isStreaming,_=t.composerText.trim().length>0&&!j,E=j,S=p.useMemo(()=>t.messages.find(z=>z.role==="user")?.parts?.[0]?.value?.substring(0,50)+"..."||"New Chat",[t.messages]),R=[],T=p.useRef(null),D=p.useRef(null);p.useEffect(()=>{const O=()=>{r(window.innerWidth<768),window.innerWidth>=768&&t.setRightPanelOpen(!0)};return O(),window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[t.setRightPanelOpen]),p.useEffect(()=>{D.current&&(D.current.scrollTop=D.current.scrollHeight)},[t.messages]),p.useEffect(()=>{const O=t.messages[t.messages.length-1];if(O&&O.role==="assistant"&&O.parts?.[0]?.value&&!O.isStreaming&&t.settings.brandGuard){const z=O.parts[0].value;z.trim().length>0&&e.checkAssistantMessage(z,{objective:"chat_response",audience:"general"})}},[t.messages,e,t.settings.brandGuard]),p.useEffect(()=>{if(t.settings.brandGuard&&t.composerText.length>10){const O=setTimeout(()=>{e.checkUserMessage(t.composerText,{objective:"user_input",audience:"general"})},500);return()=>clearTimeout(O)}},[t.composerText,e,t.settings.brandGuard]);const N=O=>{const z=t.composerText+O;t.setComposerText(z),o(!1),T.current?.focus()},w=async()=>{if(_)try{const O=t.composerText.trim();O.length>0&&t.settings.brandGuard&&await e.checkUserMessage(O,{objective:"chat_conversation",audience:"general"}),await t.send(),setTimeout(()=>T.current?.focus(),100)}catch(O){console.error("Failed to send message:",O)}},C=O=>{O.key==="Escape"&&o(!1),(O.ctrlKey||O.metaKey)&&O.key==="Enter"&&(O.preventDefault(),w())},A=O=>{const z=O.target.value;t.setComposerText(z);const H=O.target.selectionStart,Y=z.substring(0,H),L=Y.slice(-1),$=Y.slice(-2,-1);o(L==="/"&&(Y.length===1||$===" "||$===`
`))},I=p.useCallback(O=>{t.setComposerText(O),e.applySuggestion(t.composerText,O),T.current?.focus()},[t,e]),M=()=>j?i.jsx("div",{className:"flex justify-center mb-4",children:i.jsxs("div",{className:"bg-card border border-border rounded-xl p-3 max-w-md",children:[i.jsx("h4",{className:"text-sm font-medium mb-3",children:t.settings.persona==="mentor"?"Analizando solicitud":t.settings.persona==="planner"?"Estructurando respuesta":"Procesando información"}),R.length>0&&i.jsx("div",{className:"space-y-2 mb-3",children:R.map((O,z)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${O.completed?"bg-green-500":"bg-amber-500"}`}),i.jsx("span",{className:"text-sm",children:O.name}),i.jsx("span",{className:"text-xs text-muted-foreground",children:O.mode==="dry_run"?"(simulado)":"(en vivo)"})]},z))}),i.jsx(V9,{value:j?45:100,className:"mb-3"}),E&&i.jsxs(te,{variant:"outline",size:"sm",onClick:t.abort,className:"flex items-center gap-1",children:[i.jsx(Wf,{className:"w-3 h-3"}),"Cancelar"]})]})}):null,k=p.useCallback((O,z)=>{const H=O.role==="user",Y=O.role==="assistant";return i.jsxs("div",{className:`flex gap-2 sm:gap-3 ${H?"justify-end":""}`,children:[!H&&i.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center text-sm font-medium flex-shrink-0",children:"AI"}),i.jsxs("div",{className:`flex-1 max-w-[85%] sm:max-w-[80%] ${H?"flex flex-col items-end":""}`,children:[i.jsxs("div",{className:`rounded-xl p-3 text-sm ${H?"bg-blue-600 text-white":"bg-gray-50"}`,children:[i.jsx("div",{className:"whitespace-pre-wrap",children:O.parts?.[0]?.value||O.content||""}),Y&&O.meta?.tools&&i.jsx("div",{className:"flex items-center gap-1 mt-2 flex-wrap",children:O.meta.tools.map((L,$)=>i.jsx(Ve,{variant:"secondary",className:"text-xs",children:L.name},$))}),Y&&O.meta?.googleIaRequest&&i.jsxs("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsx("div",{className:"text-xs font-medium text-blue-800",children:"💫 Solicitud de generación visual"}),i.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[O.meta.googleIaRequest.task,": ",O.meta.googleIaRequest.subject]})]}),Y&&O.meta?.usage&&i.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:[O.meta.usage.prompt+O.meta.usage.completion," tokens"]})]}),i.jsxs("div",{className:"mt-1 flex items-center gap-2 text-xs text-muted-foreground",children:[i.jsx("span",{children:O.createdAt?new Date(O.createdAt).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):"Ahora"}),!O.isStreaming&&O.parts?.[0]?.value&&i.jsx(Hh,{report:Y?e.lastReport:null,isAnalyzing:!1,onApplySuggestion:H?I:void 0,size:"sm",showLabel:!1})]}),Y&&z===t.messages.length-1&&!j&&i.jsxs("div",{className:"mt-2 flex gap-1",children:[i.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>t.regenerate(),className:"text-xs",children:[i.jsx(CR,{className:"w-3 h-3 mr-1"}),"Regenerar"]}),i.jsx(te,{variant:"ghost",size:"sm",onClick:()=>t.regenerate("shorter"),className:"text-xs",children:"Más breve"}),i.jsx(te,{variant:"ghost",size:"sm",onClick:()=>t.regenerate("creative"),className:"text-xs",children:"Más creativo"})]})]}),H&&i.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-sm font-medium text-white flex-shrink-0",children:"U"})]},O.id||z)},[t.messages.length,j,t.regenerate]);return i.jsxs("div",{className:"h-full w-full flex flex-col lg:flex-row bg-background",children:[i.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[i.jsxs("div",{className:"min-h-14 border-b bg-card px-2 sm:px-4 flex items-center justify-between shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-4 h-4 rounded-full ${j?"bg-amber-500":t.error?"bg-red-500":"bg-blue-500"}`,title:j?"Generando":t.error?"Error":"Modo Demo"}),i.jsxs("h1",{className:"text-base font-medium",children:["Chat Maestro",i.jsx("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Demo"})]}),i.jsxs("div",{className:"hidden lg:flex items-center gap-2",children:[i.jsxs(Ve,{variant:"outline",className:"text-xs",children:[i.jsx(Z4,{className:"w-3 h-3 mr-1"}),S]}),i.jsxs(Ve,{variant:"secondary",className:"text-xs",children:[t.settings.model," • ",t.settings.persona]})]}),i.jsxs("div",{className:"hidden lg:flex items-center gap-1",children:[i.jsxs(yu,{open:a,onOpenChange:l,children:[i.jsx(vm,{asChild:!0,children:i.jsxs(te,{variant:"outline",size:"sm",children:[i.jsx(wn,{className:"w-3 h-3 mr-1"}),"Exportar"]})}),i.jsxs(La,{children:[i.jsx(Va,{children:i.jsx(Fa,{children:"Exportar Conversación"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(js,{value:f,onValueChange:m,children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(zt,{value:"md",id:"md"}),i.jsx(Ee,{htmlFor:"md",children:"Markdown (.md)"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(zt,{value:"pdf",id:"pdf"}),i.jsx(Ee,{htmlFor:"pdf",children:"PDF"})]})]}),i.jsxs(te,{onClick:()=>l(!1),children:["Exportar como ",f.toUpperCase()]})]})]})]}),i.jsxs(yu,{open:u,onOpenChange:d,children:[i.jsx(vm,{asChild:!0,children:i.jsxs(te,{variant:"outline",size:"sm",children:[i.jsx(Qf,{className:"w-3 h-3 mr-1"}),"Compartir"]})}),i.jsxs(La,{children:[i.jsx(Va,{children:i.jsx(Fa,{children:"Compartir Conversación"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(js,{value:h,onValueChange:x,children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(zt,{value:"readonly",id:"readonly"}),i.jsx(Ee,{htmlFor:"readonly",children:"Solo lectura"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(zt,{value:"collaborative",id:"collaborative"}),i.jsx(Ee,{htmlFor:"collaborative",children:"Colaborativo"})]})]}),i.jsx(te,{onClick:()=>d(!1),children:"Generar enlace"})]})]})]})]})]}),i.jsx(te,{variant:"ghost",size:"sm",onClick:()=>t.setRightPanelOpen(!t.rightPanelOpen),children:i.jsx(j4,{className:`w-4 h-4 transition-transform ${t.rightPanelOpen?"rotate-180":""}`})})]}),i.jsx("div",{className:"border-b bg-card px-2 sm:px-4 py-2",children:i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(NR,{className:"w-3 h-3 text-muted-foreground"}),i.jsx("select",{value:t.settings.model,onChange:O=>t.setSettings({model:O.target.value}),className:"text-xs bg-transparent border-none outline-none",children:i.jsx("option",{value:"gpt-5",children:"GPT-5"})})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Ji,{className:"w-3 h-3 text-muted-foreground"}),i.jsxs("select",{value:t.settings.persona,onChange:O=>t.setSettings({persona:O.target.value}),className:"text-xs bg-transparent border-none outline-none",children:[i.jsx("option",{value:"mentor",children:"Mentor creativo"}),i.jsx("option",{value:"planner",children:"Planificador estratégico"}),i.jsx("option",{value:"engineer",children:"Ingeniero técnico"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Temp"}),i.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:t.settings.temperature,onChange:O=>t.setSettings({temperature:parseFloat(O.target.value)}),className:"w-16"}),i.jsx(Ve,{variant:"secondary",className:"text-xs font-mono",children:t.settings.temperature.toFixed(2)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(Ve,{variant:t.settings.brandGuard?"default":"secondary",className:"text-xs cursor-pointer",onClick:()=>t.setSettings({brandGuard:!t.settings.brandGuard}),children:["Brand Guard ",t.settings.brandGuard?"ON":"OFF"]}),t.settings.brandGuard&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Hh,{report:e.lastReport,isAnalyzing:e.isAnalyzing,onApplySuggestion:I,size:"sm",showLabel:!0}),e.lastReport?.findings&&e.lastReport.findings.length>0&&i.jsx(te,{variant:"ghost",size:"sm",onClick:()=>b(!y),className:"h-6 px-1",children:y?i.jsx(Vo,{className:"h-3 w-3"}):i.jsx(xn,{className:"h-3 w-3"})})]})]})]})}),y&&e.lastReport&&i.jsx("div",{className:"border-b bg-card",children:i.jsx("div",{className:"max-w-4xl mx-auto p-4",children:i.jsx(KS,{report:e.lastReport,isAnalyzing:e.isAnalyzing,onApplySuggestion:I,onClose:()=>b(!1)})})}),i.jsx("div",{ref:D,className:"flex-1 overflow-y-auto p-2 sm:p-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto space-y-4",children:[t.error&&i.jsx("div",{className:"flex justify-center",children:i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 max-w-md",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ot,{className:"w-5 h-5 text-red-600"}),i.jsx("span",{className:"text-sm text-red-800",children:t.error})]})})}),t.messages.map((O,z)=>i.jsx("div",{children:k(O,z)},O.id||`msg-${z}`)),M(),t.messages.length===0&&!j&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Ji,{className:"w-8 h-8 text-muted-foreground"})}),i.jsxs("h3",{className:"text-lg font-medium mb-2",children:["¡Bienvenido al Chat Maestro!",i.jsx("span",{className:"block text-sm text-blue-600 mt-1",children:"Modo Demo Activo"})]}),i.jsx("p",{className:"text-muted-foreground mb-4 max-w-md mx-auto",children:"En modo demo puedes probar todas las funcionalidades del chat sin conexión al backend. Las respuestas son simuladas para demostrar el flujo de trabajo."}),i.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[i.jsx(te,{variant:"outline",size:"sm",onClick:()=>t.setComposerText("/brief Crear campaña de redes sociales para lanzamiento de producto"),children:"💡 Brief creativo"}),i.jsx(te,{variant:"outline",size:"sm",onClick:()=>t.setComposerText('/tone Revisar este copy: "Tu mejor versión está a un click de distancia"'),children:"🎯 Tone check"}),i.jsx(te,{variant:"outline",size:"sm",onClick:()=>t.setComposerText("/web Últimas tendencias en marketing digital 2025"),children:"🌐 Búsqueda web"})]})]})]})}),i.jsx("div",{className:"border-t bg-card shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto p-2 sm:p-3 space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx(te,{variant:"ghost",size:"sm",className:"p-2",title:"Adjuntar archivo",children:i.jsx(vR,{className:"w-4 h-4"})}),i.jsx(te,{variant:"ghost",size:"sm",className:"p-2",title:"Grabar audio",children:i.jsx(B2,{className:"w-4 h-4"})}),i.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>o(!s),className:"flex items-center gap-1",children:[i.jsx(Ji,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Comandos"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(te,{variant:"secondary",size:"sm",onClick:()=>N("/brief "),className:"text-xs",children:"/brief"}),i.jsx(te,{variant:"secondary",size:"sm",onClick:()=>N("/tone "),className:"text-xs",children:"/tone"}),i.jsx(te,{variant:"secondary",size:"sm",onClick:()=>N("/web "),className:"text-xs",children:"/web"})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(yS,{ref:T,value:t.composerText,onChange:A,onKeyDown:C,placeholder:"Escribe tu mensaje... Usa / para abrir comandos, Ctrl/⌘+Enter para enviar",className:"resize-none min-h-[80px] max-h-[200px] pr-12",disabled:j}),i.jsx(te,{onClick:w,disabled:!_,size:"sm",className:"absolute bottom-2 right-2",children:i.jsx(Za,{className:"w-4 h-4"})}),s&&i.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-96 bg-popover border border-border rounded-xl shadow-lg z-50",children:i.jsx("div",{className:"p-2 space-y-1",children:[{cmd:"/brief",icon:cR,title:"Brief creativo",desc:"Objetivo, audiencia, conceptos y ganchos"},{cmd:"/tone",icon:y4,title:"Tone Check",desc:"Verificación de tono de marca"},{cmd:"/imgjson",icon:Fo,title:"Prompt JSON",desc:"Generar JSON para imágenes"},{cmd:"/web",icon:Bp,title:"Búsqueda web",desc:"Buscar información actualizada"},{cmd:"/sum",icon:Jc,title:"Resumir",desc:"Resumir documento adjunto"}].map(O=>i.jsxs(te,{variant:"ghost",className:"w-full justify-start p-2.5 h-auto",onClick:()=>N(`${O.cmd} `),children:[i.jsx(O.icon,{className:"w-4 h-4 mr-3 text-muted-foreground"}),i.jsxs("div",{className:"text-left",children:[i.jsxs("div",{className:"text-sm font-medium",children:[O.cmd," — ",O.title]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:O.desc})]})]},O.cmd))})})]}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-blue-600",children:"Demo Mode"}),i.jsx("span",{children:"•"}),i.jsx(Hh,{report:e.lastReport,isAnalyzing:e.isAnalyzing,onApplySuggestion:I,size:"sm",showLabel:!0}),i.jsx("span",{children:"•"}),i.jsxs("span",{children:[t.composerText.length," caracteres"]}),i.jsx("span",{children:"•"}),i.jsxs("span",{children:["≈ ",Math.ceil(t.composerText.length/4)," tokens"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[j&&i.jsx("span",{children:"Generando..."}),i.jsx("kbd",{className:"px-1 py-0.5 bg-muted rounded text-xs",children:"⌘+Enter"})]})]})]})})]}),t.rightPanelOpen&&i.jsxs("div",{className:"w-80 border-l bg-card flex flex-col",children:[i.jsx("div",{className:"p-4 border-b",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"font-medium",children:"Biblioteca"}),i.jsx(te,{variant:"ghost",size:"sm",onClick:()=>t.setRightPanelOpen(!1),children:i.jsx(Ms,{className:"w-4 h-4"})})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium mb-2",children:"Plantillas rápidas"}),i.jsx("div",{className:"space-y-2",children:["Brief para campaña de redes sociales","Análisis de competencia","Propuesta creativa","Plan de contenidos mensual"].map((O,z)=>i.jsx(te,{variant:"outline",size:"sm",className:"w-full justify-start text-xs",onClick:()=>t.setComposerText(`Ayúdame a crear: ${O}`),children:O},z))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium mb-2",children:"Historial"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(te,{variant:"ghost",size:"sm",onClick:t.createNewThread,className:"w-full justify-start text-xs",children:[i.jsx(U2,{className:"w-3 h-3 mr-2"}),"Nuevo chat"]}),["Campaña lanzamiento producto...","Análisis brief cliente ABC...","Propuesta naming marca..."].map((O,z)=>i.jsxs(te,{variant:"ghost",size:"sm",className:"w-full justify-start text-xs text-muted-foreground",children:[i.jsx(Yu,{className:"w-3 h-3 mr-2"}),O]},z))]})]})]})})]})]})}const ub=[{id:"engagement",label:"Engagement (5–10s)",binding:"@tipo"},{id:"promocional",label:"Promocional (5–15s)",binding:"@tipo"},{id:"anuncio",label:"Anuncio (5–15s)",binding:"@tipo"},{id:"educativo",label:"Educativo (10–15s)",binding:"@tipo"},{id:"behind_scenes",label:"Behind Scenes (10–15s)",binding:"@tipo"},{id:"producto",label:"Producto (10–15s)",binding:"@tipo"},{id:"evento",label:"Evento (5–15s)",binding:"@tipo"},{id:"pregunta_encuesta",label:"Pregunta/Encuesta (5–10s)",binding:"@tipo"}];function bV(){const{goToNextStep:t}=$g(),[e,n]=p.useState([{id:"1",role:"user",content:"Quiero una historia promocional de 10s con CTA de compra.",timestamp:new Date(Date.now()-6e4)},{id:"2",role:"assistant",content:"Entendido. @tipo: Promocional; @duracion: 10s; @objetivo: vender oferta; @cta: Compra ahora; @publico: clientes jóvenes.",timestamp:new Date(Date.now()-3e4)}]),[r,s]=p.useState(""),[o,a]=p.useState({tipo:"promocional",objetivo:"vender oferta",publico:"clientes jóvenes",mensaje:"",cta:"Compra ahora"});p.useEffect(()=>{const x=e.filter(y=>y.role==="assistant").pop();if(x){const y=x.content,b=y.match(/@tipo:\s*([^;]+)/),j=y.match(/@objetivo:\s*([^;]+)/),_=y.match(/@publico:\s*([^;]+)/),E=y.match(/@mensaje:\s*([^;]+)/),S=y.match(/@cta:\s*([^;]+)/);a(R=>({...R,...b&&{tipo:b[1].toLowerCase().trim()},...j&&{objetivo:j[1].trim()},..._&&{publico:_[1].trim()},...E&&{mensaje:E[1].trim()},...S&&{cta:S[1].trim()}}))}},[e]);const l=()=>{if(!r.trim())return;const x={id:Date.now().toString(),role:"user",content:r,timestamp:new Date};n(y=>[...y,x]),setTimeout(()=>{const y={id:(Date.now()+1).toString(),role:"assistant",content:"Perfecto. He actualizado los campos del formulario basándome en tu solicitud. ¿Hay algo más que quieras ajustar?",timestamp:new Date};n(b=>[...b,y])},1e3),s("")},u=x=>{ub.find(b=>b.id===x)&&a(b=>({...b,tipo:x}))},d=(x,y)=>{a(b=>({...b,[x]:y}))},f=[{label:"Tipo de historia seleccionado",completed:!!o.tipo},{label:"Objetivo definido",completed:!!o.objetivo},{label:"Público identificado",completed:!!o.publico},{label:"Mensaje principal listo",completed:!!o.mensaje},{label:"CTA definido",completed:!!o.cta}],h=f.filter(x=>x.completed).length===f.length;return i.jsx("div",{className:"h-full bg-canvas",children:i.jsxs("div",{className:"h-full flex gap-4 p-4",children:[i.jsx("div",{className:"w-[460px] flex-shrink-0",children:i.jsxs("div",{className:"h-full bg-white rounded-lg shadow-sm p-3 flex flex-col",children:[i.jsxs("div",{className:"flex items-center gap-2 pb-3 border-b border-gray-100",children:[i.jsx(Ja,{className:"w-4 h-4 text-blue-600"}),i.jsx("h3",{className:"font-medium text-sm",children:"Chat Maestro (Briefing de Historia)"})]}),i.jsx("div",{className:"flex-1 overflow-y-auto py-3 space-y-3",style:{height:"560px"},children:e.map(x=>i.jsxs("div",{className:`flex gap-2 ${x.role==="user"?"justify-end":"justify-start"}`,children:[x.role==="assistant"&&i.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(zp,{className:"w-3 h-3 text-blue-600"})}),i.jsx("div",{className:`max-w-[80%] px-3 py-2 rounded-lg text-xs leading-relaxed ${x.role==="user"?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"}`,children:x.content}),x.role==="user"&&i.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(Y2,{className:"w-3 h-3 text-gray-600"})})]},x.id))}),i.jsxs("div",{className:"pt-3 border-t border-gray-100 space-y-2",children:[i.jsx("textarea",{value:r,onChange:x=>s(x.target.value),placeholder:"Escribe una instrucción o idea…",rows:3,className:"w-full p-2 text-sm border border-gray-200 rounded resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onKeyDown:x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),l())}}),i.jsxs("button",{onClick:l,disabled:!r.trim(),className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-500 text-white text-sm rounded hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:[i.jsx(Za,{className:"w-3 h-3"}),"Enviar al asistente"]})]})]})}),i.jsx("div",{className:"flex-1 flex flex-col",children:i.jsxs("div",{className:"h-full bg-white rounded-lg shadow-sm p-3 flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between pb-3 border-b border-gray-100",children:[i.jsx("h2",{className:"font-medium",children:"Nueva Historia"}),i.jsx("div",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:"Paso 1 de 6"})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto py-4 space-y-4",children:[i.jsxs("div",{className:"bg-white border border-gray-100 rounded-xl p-3",children:[i.jsx("h3",{className:"font-medium mb-3",children:"Selecciona tipo de historia"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:ub.map(x=>i.jsx("button",{onClick:()=>u(x.id),className:`px-3 py-1.5 rounded-lg text-xs border transition-all ${o.tipo===x.id?"bg-blue-500 text-white border-blue-500":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100"}`,children:x.label},x.id))})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-xl p-3",children:[i.jsx("h3",{className:"font-medium mb-3",children:"Detalles de la historia"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Objetivo"}),i.jsx("div",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:"AI"})]}),i.jsx("textarea",{value:o.objetivo,onChange:x=>d("objetivo",x.target.value),placeholder:"Ej: Aumentar interacción, generar ventas",rows:2,className:"w-full p-2 text-sm border border-gray-200 rounded resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Público objetivo"}),i.jsx("div",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:"AI"})]}),i.jsx("textarea",{value:o.publico,onChange:x=>d("publico",x.target.value),placeholder:"Ej: Jóvenes de 18–30 interesados en moda",rows:2,className:"w-full p-2 text-sm border border-gray-200 rounded resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Mensaje principal"}),i.jsx("div",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:"AI"})]}),i.jsx("input",{type:"text",value:o.mensaje,onChange:x=>d("mensaje",x.target.value),placeholder:"Ej: Oferta flash disponible hoy",className:"w-full p-2 text-sm border border-gray-200 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"CTA"}),i.jsx("div",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:"AI"})]}),i.jsx("input",{type:"text",value:o.cta,onChange:x=>d("cta",x.target.value),placeholder:"Ej: Desliza hacia arriba, Compra ahora",className:"w-full p-2 text-sm border border-gray-200 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-xl p-3",children:[i.jsx("h3",{className:"font-medium mb-3",children:"Checklist"}),i.jsx("div",{className:"space-y-2",children:f.map((x,y)=>i.jsxs("div",{className:"flex items-center gap-2",children:[x.completed?i.jsx($e,{className:"w-4 h-4 text-green-500"}):i.jsx("div",{className:"w-4 h-4 border border-gray-300 rounded-full"}),i.jsx("span",{className:`text-sm ${x.completed?"text-green-700":"text-gray-600"}`,children:x.label})]},y))}),h&&i.jsx("div",{className:"mt-3 p-2 bg-green-50 border border-green-200 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(or,{className:"w-4 h-4 text-green-600"}),i.jsx("span",{className:"text-sm text-green-800 font-medium",children:"¡Briefing completo! Listo para continuar."})]})})]})]}),i.jsx("div",{className:"pt-3 border-t border-gray-100 flex justify-end",children:i.jsxs("button",{onClick:t,disabled:!h,className:`flex items-center gap-2 px-4 py-2 rounded text-sm ${h?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:["Siguiente: Configuración",i.jsx(rn,{className:"w-4 h-4"})]})})]})})]})})}const wV=[{id:"engagement",label:"Engagement (5–10s)",binding:"@tipo"},{id:"promocional",label:"Promocional (5–15s)",binding:"@tipo"},{id:"anuncio",label:"Anuncio (5–15s)",binding:"@tipo"},{id:"educativo",label:"Educativo (10–15s)",binding:"@tipo"},{id:"behind_scenes",label:"Behind Scenes (10–15s)",binding:"@tipo"},{id:"producto",label:"Producto (10–15s)",binding:"@tipo"},{id:"evento",label:"Evento (5–15s)",binding:"@tipo"},{id:"pregunta_encuesta",label:"Pregunta/Encuesta (5–10s)",binding:"@tipo"}];function EV(){const[t,e]=p.useState([{id:"1",role:"user",content:"Quiero una historia promocional de 10s con CTA de compra.",timestamp:new Date(Date.now()-6e4)},{id:"2",role:"assistant",content:"Entendido. @tipo: Promocional; @duracion: 10s; @objetivo: vender oferta; @cta: Compra ahora; @publico: clientes jóvenes.",timestamp:new Date(Date.now()-3e4)}]),[n,r]=p.useState(""),[s,o]=p.useState({tipo:"promocional",objetivo:"vender oferta",publico:"clientes jóvenes",mensaje:"",cta:"Compra ahora"}),[a,l]=p.useState(!1);p.useEffect(()=>{const y=t.filter(b=>b.role==="assistant").pop();if(y){const b=y.content,j=b.match(/@tipo:\s*([^;]+)/),_=b.match(/@objetivo:\s*([^;]+)/),E=b.match(/@publico:\s*([^;]+)/),S=b.match(/@mensaje:\s*([^;]+)/),R=b.match(/@cta:\s*([^;]+)/);o(T=>({...T,...j&&{tipo:j[1].toLowerCase().trim()},..._&&{objetivo:_[1].trim()},...E&&{publico:E[1].trim()},...S&&{mensaje:S[1].trim()},...R&&{cta:R[1].trim()}}))}},[t]);const u=()=>{if(!n.trim())return;const y={id:Date.now().toString(),role:"user",content:n,timestamp:new Date};e(b=>[...b,y]),setTimeout(()=>{const b={id:(Date.now()+1).toString(),role:"assistant",content:"Perfecto. He actualizado los campos del formulario basándome en tu solicitud. ¿Hay algo más que quieras ajustar?",timestamp:new Date};e(j=>[...j,b])},1e3),r("")},d=y=>{o(b=>({...b,tipo:y}))},f=(y,b)=>{o(j=>({...j,[y]:b}))},m=[{label:"Tipo de historia seleccionado",completed:!!s.tipo},{label:"Objetivo definido",completed:!!s.objetivo},{label:"Público identificado",completed:!!s.publico},{label:"Mensaje principal listo",completed:!!s.mensaje},{label:"CTA definido",completed:!!s.cta}],x=m.filter(y=>y.completed).length===m.length;return i.jsxs("div",{className:"h-full bg-canvas flex flex-col",children:[i.jsx("div",{className:"bg-white border-b border-gray-100 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"font-medium",children:"Nueva Historia"}),i.jsx("div",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:"Paso 1 de 6"})]})}),i.jsxs("div",{className:"flex-1 overflow-y-auto",children:[i.jsxs("div",{className:"bg-white border-b border-gray-100",children:[i.jsxs("button",{onClick:()=>l(!a),className:"w-full p-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ja,{className:"w-4 h-4 text-blue-600"}),i.jsx("h3",{className:"font-medium text-sm",children:"Chat Maestro (Briefing de Historia)"})]}),a?i.jsx(Vo,{className:"w-4 h-4 text-gray-500"}):i.jsx(xn,{className:"w-4 h-4 text-gray-500"})]}),a&&i.jsxs("div",{className:"px-4 pb-4",children:[i.jsx("div",{className:"max-h-60 overflow-y-auto py-3 space-y-3 border border-gray-100 rounded-lg p-3 mb-3",children:t.map(y=>i.jsxs("div",{className:`flex gap-2 ${y.role==="user"?"justify-end":"justify-start"}`,children:[y.role==="assistant"&&i.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(zp,{className:"w-3 h-3 text-blue-600"})}),i.jsx("div",{className:`max-w-[80%] px-3 py-2 rounded-lg text-xs leading-relaxed ${y.role==="user"?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"}`,children:y.content}),y.role==="user"&&i.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(Y2,{className:"w-3 h-3 text-gray-600"})})]},y.id))}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("textarea",{value:n,onChange:y=>r(y.target.value),placeholder:"Escribe una instrucción o idea…",rows:2,className:"w-full p-2 text-sm border border-gray-200 rounded resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),i.jsxs("button",{onClick:u,disabled:!n.trim(),className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-500 text-white text-sm rounded hover:bg-blue-600 disabled:bg-gray-300",children:[i.jsx(Za,{className:"w-3 h-3"}),"Enviar al asistente"]})]})]})]}),i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{className:"bg-white border border-gray-100 rounded-xl p-4",children:[i.jsx("h3",{className:"font-medium mb-3",children:"Selecciona tipo de historia"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:wV.map(y=>i.jsx("button",{onClick:()=>d(y.id),className:`px-3 py-2 rounded-lg text-xs border transition-all text-left ${s.tipo===y.id?"bg-blue-500 text-white border-blue-500":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100"}`,children:y.label},y.id))})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-xl p-4",children:[i.jsx("h3",{className:"font-medium mb-3",children:"Detalles de la historia"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Objetivo"}),i.jsx("div",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:"AI"})]}),i.jsx("textarea",{value:s.objetivo,onChange:y=>f("objetivo",y.target.value),placeholder:"Ej: Aumentar interacción, generar ventas",rows:2,className:"w-full p-2 text-sm border border-gray-200 rounded resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Público objetivo"}),i.jsx("div",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:"AI"})]}),i.jsx("textarea",{value:s.publico,onChange:y=>f("publico",y.target.value),placeholder:"Ej: Jóvenes de 18–30 interesados en moda",rows:2,className:"w-full p-2 text-sm border border-gray-200 rounded resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Mensaje principal"}),i.jsx("div",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:"AI"})]}),i.jsx("input",{type:"text",value:s.mensaje,onChange:y=>f("mensaje",y.target.value),placeholder:"Ej: Oferta flash disponible hoy",className:"w-full p-2 text-sm border border-gray-200 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"CTA"}),i.jsx("div",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:"AI"})]}),i.jsx("input",{type:"text",value:s.cta,onChange:y=>f("cta",y.target.value),placeholder:"Ej: Desliza hacia arriba, Compra ahora",className:"w-full p-2 text-sm border border-gray-200 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-xl p-4",children:[i.jsx("h3",{className:"font-medium mb-3",children:"Checklist"}),i.jsx("div",{className:"space-y-2",children:m.map((y,b)=>i.jsxs("div",{className:"flex items-center gap-2",children:[y.completed?i.jsx($e,{className:"w-4 h-4 text-green-500"}):i.jsx("div",{className:"w-4 h-4 border border-gray-300 rounded-full"}),i.jsx("span",{className:`text-sm ${y.completed?"text-green-700":"text-gray-600"}`,children:y.label})]},b))}),x&&i.jsx("div",{className:"mt-3 p-2 bg-green-50 border border-green-200 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(or,{className:"w-4 h-4 text-green-600"}),i.jsx("span",{className:"text-sm text-green-800 font-medium",children:"¡Briefing completo! Listo para continuar."})]})})]})]})]}),i.jsx("div",{className:"bg-white border-t border-gray-100 p-4",children:i.jsxs("button",{disabled:!x,className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded text-sm ${x?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:["Siguiente: Configuración",i.jsx(rn,{className:"w-4 h-4"})]})})]})}function _V(){const[t,e]=p.useState(!1);return p.useEffect(()=>{const n=()=>{e(window.innerWidth<768)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),t}function db(){return _V()?i.jsx(EV,{}):i.jsx(bV,{})}const NV=[{id:"sticker",label:"Sticker"},{id:"encuesta",label:"Encuesta"},{id:"pregunta",label:"Pregunta"},{id:"reaccion",label:"Reacción"},{id:"link_cta",label:"Link / CTA"}],SV=[{id:"minimalista",label:"Minimalista"},{id:"colorido",label:"Colorido"},{id:"dinamico",label:"Dinámico"},{id:"plantilla_oficial",label:"Plantilla oficial"}];function jV(){const{goToNextStep:t,goToPreviousStep:e}=$g(),[n,r]=p.useState(10),[s,o]=p.useState("10"),[a,l]=p.useState(["link_cta"]),[u,d]=p.useState("minimalista"),[f,m]=p.useState(2),[h,x]=p.useState("2"),y=R=>{r(R),o(R.toString())},b=R=>{o(R);const T=parseInt(R);!isNaN(T)&&T>=5&&T<=15&&r(T)},j=R=>{m(R),x(R.toString())},_=R=>{x(R);const T=parseInt(R);!isNaN(T)&&T>=1&&T<=5&&m(T)},E=R=>{l(T=>T.includes(R)?T.filter(D=>D!==R):[...T,R])},S=R=>{d(R)};return i.jsxs("div",{className:"h-full bg-canvas",children:[i.jsxs("div",{className:"h-full flex flex-col gap-6 p-8",children:[i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsx("h1",{className:"text-2xl font-medium",children:"Configuración de Historia"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm",children:"Paso 2 de 6"}),i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800",children:[i.jsx(Gt,{className:"w-4 h-4"}),"Volver"]}),i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:["Siguiente: Generación inicial",i.jsx(rn,{className:"w-4 h-4"})]})]})]}),i.jsxs("div",{className:"flex-1 space-y-6 overflow-y-auto",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[i.jsx("h3",{className:"font-medium mb-4",children:"Duración"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("label",{className:"text-sm font-medium min-w-0",children:"Duración exacta (segundos)"}),i.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[i.jsx("input",{type:"range",min:"5",max:"15",step:"1",value:n,onChange:R=>y(parseInt(R.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-thumb",style:{background:`linear-gradient(to right, #2563EB 0%, #2563EB ${(n-5)/10*100}%, #E5E7EB ${(n-5)/10*100}%, #E5E7EB 100%)`}}),i.jsx("input",{type:"number",min:"5",max:"15",value:s,onChange:R=>b(R.target.value),className:"w-16 px-2 py-1 text-sm border border-gray-200 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),i.jsx("span",{className:"text-sm text-gray-500",children:"s"})]})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"El rango depende del tipo de historia seleccionado en el paso anterior."})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[i.jsx("h3",{className:"font-medium mb-4",children:"Elementos interactivos"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:NV.map(R=>i.jsx("button",{onClick:()=>E(R.id),className:`px-3 py-2 rounded-xl text-sm border transition-all ${a.includes(R.id)?"bg-blue-500 text-white border-blue-500":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100"}`,children:R.label},R.id))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[i.jsx("h3",{className:"font-medium mb-4",children:"Estilo visual"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:SV.map(R=>i.jsx("button",{onClick:()=>S(R.id),className:`px-3 py-2 rounded-xl text-sm border transition-all ${u===R.id?"bg-blue-500 text-white border-blue-500":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100"}`,children:R.label},R.id))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[i.jsx("h3",{className:"font-medium mb-4",children:"Número de variaciones"}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("label",{className:"text-sm font-medium min-w-0",children:"Variaciones a generar"}),i.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[i.jsx("input",{type:"range",min:"1",max:"5",step:"1",value:f,onChange:R=>j(parseInt(R.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-thumb",style:{background:`linear-gradient(to right, #2563EB 0%, #2563EB ${(f-1)/4*100}%, #E5E7EB ${(f-1)/4*100}%, #E5E7EB 100%)`}}),i.jsx("input",{type:"number",min:"1",max:"5",value:h,onChange:R=>_(R.target.value),className:"w-16 px-2 py-1 text-sm border border-gray-200 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[i.jsx(Ot,{className:"w-4 h-4"}),i.jsx("span",{children:"Validación previa: logo y CTA deben estar presentes antes de exportar."})]})]}),i.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-100",children:[i.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800",children:[i.jsx(Gt,{className:"w-4 h-4"}),"Anterior: Briefing"]}),i.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:["Siguiente: Generación inicial",i.jsx(rn,{className:"w-4 h-4"})]})]})]}),i.jsx("style",{jsx:!0,children:`
        .slider-thumb::-webkit-slider-thumb {
          appearance: none;
          height: 16px;
          width: 16px;
          border-radius: 50%;
          background: #2563EB;
          cursor: pointer;
          border: 2px solid #ffffff;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .slider-thumb::-moz-range-thumb {
          height: 16px;
          width: 16px;
          border-radius: 50%;
          background: #2563EB;
          cursor: pointer;
          border: 2px solid #ffffff;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
      `})]})}const CV=[{id:"sticker",label:"Sticker"},{id:"encuesta",label:"Encuesta"},{id:"pregunta",label:"Pregunta"},{id:"reaccion",label:"Reacción"},{id:"link_cta",label:"Link / CTA"}],kV=[{id:"minimalista",label:"Minimalista"},{id:"colorido",label:"Colorido"},{id:"dinamico",label:"Dinámico"},{id:"plantilla_oficial",label:"Plantilla oficial"}];function TV(){const[t,e]=p.useState(10),[n,r]=p.useState("10"),[s,o]=p.useState(["link_cta"]),[a,l]=p.useState("minimalista"),[u,d]=p.useState(2),[f,m]=p.useState("2"),h=E=>{e(E),r(E.toString())},x=E=>{r(E);const S=parseInt(E);!isNaN(S)&&S>=5&&S<=15&&e(S)},y=E=>{d(E),m(E.toString())},b=E=>{m(E);const S=parseInt(E);!isNaN(S)&&S>=1&&S<=5&&d(S)},j=E=>{o(S=>S.includes(E)?S.filter(R=>R!==E):[...S,E])},_=E=>{l(E)};return i.jsxs("div",{className:"h-full bg-canvas flex flex-col",children:[i.jsx("div",{className:"bg-white border-b border-gray-100 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-lg font-medium",children:"Configuración de Historia"}),i.jsx("div",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:"Paso 2 de 6"})]})}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[i.jsx("h3",{className:"font-medium mb-4",children:"Duración"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"text-sm font-medium",children:"Duración exacta (segundos)"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",min:"5",max:"15",value:n,onChange:E=>x(E.target.value),className:"w-12 px-2 py-1 text-sm border border-gray-200 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),i.jsx("span",{className:"text-sm text-gray-500",children:"s"})]})]}),i.jsx("input",{type:"range",min:"5",max:"15",step:"1",value:t,onChange:E=>h(parseInt(E.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-thumb",style:{background:`linear-gradient(to right, #2563EB 0%, #2563EB ${(t-5)/10*100}%, #E5E7EB ${(t-5)/10*100}%, #E5E7EB 100%)`}}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[i.jsx("span",{children:"5s"}),i.jsx("span",{children:"15s"})]})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"El rango depende del tipo de historia seleccionado en el paso anterior."})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[i.jsx("h3",{className:"font-medium mb-4",children:"Elementos interactivos"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:CV.map(E=>i.jsx("button",{onClick:()=>j(E.id),className:`px-3 py-2 rounded-xl text-sm border transition-all text-center ${s.includes(E.id)?"bg-blue-500 text-white border-blue-500":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100"}`,children:E.label},E.id))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[i.jsx("h3",{className:"font-medium mb-4",children:"Estilo visual"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:kV.map(E=>i.jsx("button",{onClick:()=>_(E.id),className:`px-3 py-2 rounded-xl text-sm border transition-all text-center ${a===E.id?"bg-blue-500 text-white border-blue-500":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100"}`,children:E.label},E.id))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[i.jsx("h3",{className:"font-medium mb-4",children:"Número de variaciones"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"text-sm font-medium",children:"Variaciones a generar"}),i.jsx("input",{type:"number",min:"1",max:"5",value:f,onChange:E=>b(E.target.value),className:"w-12 px-2 py-1 text-sm border border-gray-200 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsx("input",{type:"range",min:"1",max:"5",step:"1",value:u,onChange:E=>y(parseInt(E.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-thumb",style:{background:`linear-gradient(to right, #2563EB 0%, #2563EB ${(u-1)/4*100}%, #E5E7EB ${(u-1)/4*100}%, #E5E7EB 100%)`}}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[i.jsx("span",{children:"1"}),i.jsx("span",{children:"5"})]})]})]}),i.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Ot,{className:"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5"}),i.jsxs("p",{className:"text-sm text-amber-700",children:[i.jsx("strong",{children:"Validación previa:"})," logo y CTA deben estar presentes antes de exportar."]})]})})]}),i.jsx("div",{className:"bg-white border-t border-gray-100 p-4",children:i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{className:"flex items-center justify-center gap-2 px-4 py-3 text-gray-600 hover:text-gray-800 border border-gray-200 rounded flex-1",children:[i.jsx(Gt,{className:"w-4 h-4"}),"Volver"]}),i.jsxs("button",{className:"flex items-center justify-center gap-2 px-4 py-3 bg-blue-500 text-white rounded hover:bg-blue-600 flex-1",children:["Siguiente: Generación inicial",i.jsx(rn,{className:"w-4 h-4"})]})]})}),i.jsx("style",{jsx:!0,children:`
        .slider-thumb::-webkit-slider-thumb {
          appearance: none;
          height: 16px;
          width: 16px;
          border-radius: 50%;
          background: #2563EB;
          cursor: pointer;
          border: 2px solid #ffffff;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .slider-thumb::-moz-range-thumb {
          height: 16px;
          width: 16px;
          border-radius: 50%;
          background: #2563EB;
          cursor: pointer;
          border: 2px solid #ffffff;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
      `})]})}function AV(){const[t,e]=p.useState(!1);return p.useEffect(()=>{const n=()=>{e(window.innerWidth<768)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),t}function PV(){return AV()?i.jsx(TV,{}):i.jsx(jV,{})}const RV=[{id:1,type:"Promocional",preview:{bg:"bg-gradient-to-br from-blue-500 to-purple-600",content:`OFERTA FLASH
50% OFF
Solo hoy`},elements:["Sticker: ¿Qué opinas?","CTA: Desliza hacia arriba"]},{id:2,type:"Engagement",preview:{bg:"bg-gradient-to-br from-pink-500 to-red-500",content:`¿Cuál prefieres?
A o B
Vota ahora`},elements:["Encuesta: ¿A o B?","CTA: Vota ahora"]},{id:3,type:"Educativo",preview:{bg:"bg-gradient-to-br from-green-500 to-teal-600",content:`TIP DEL DÍA
#MarketingTips
Aprende más`},elements:["Sticker: Tip del día","CTA: Aprende más"]},{id:4,type:"Behind Scenes",preview:{bg:"bg-gradient-to-br from-orange-500 to-yellow-500",content:`DETRÁS DE
CÁMARAS
Así trabajamos`},elements:["Sticker: Behind scenes","CTA: Ver proceso"]},{id:5,type:"Producto",preview:{bg:"bg-gradient-to-br from-indigo-500 to-blue-600",content:`NUEVO
PRODUCTO
Conoce más`},elements:["Sticker: Nuevo producto","CTA: Conoce más"]},{id:6,type:"Evento",preview:{bg:"bg-gradient-to-br from-teal-500 to-green-500",content:`EVENTO
ESPECIAL
Te esperamos`},elements:["Sticker: Evento especial","CTA: Te esperamos"]}];function IV(){const[t,e]=p.useState(!0),[n,r]=p.useState([]),[s,o]=p.useState(RV);p.useEffect(()=>{const h=setTimeout(()=>{e(!1)},3e3);return()=>clearTimeout(h)},[]);const a=h=>{r(x=>x.includes(h)?x.filter(y=>y!==h):[...x,h])},l=()=>{n.length===s.length?r([]):r(s.map(h=>h.id))},u=h=>{console.log(`Regenerating story ${h}`)},d=h=>{o(x=>x.filter(y=>y.id!==h)),r(x=>x.filter(y=>y!==h))},f=n.length,m=f>0;return t?i.jsx("div",{className:"h-full bg-canvas",children:i.jsxs("div",{className:"h-full flex flex-col gap-6 p-8",children:[i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsx("h1",{className:"text-2xl font-medium",children:"Generación inicial de Historias"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm",children:"Paso 3 de 6"}),i.jsxs("button",{disabled:!0,className:"flex items-center gap-2 px-4 py-2 text-gray-400",children:[i.jsx(Gt,{className:"w-4 h-4"}),"Volver"]}),i.jsxs("button",{disabled:!0,className:"flex items-center gap-2 px-4 py-2 bg-gray-300 text-gray-500 rounded",children:["Siguiente: Edición avanzada",i.jsx(rn,{className:"w-4 h-4"})]})]})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(rr,{className:"w-6 h-6 animate-spin text-blue-500"}),i.jsx("span",{className:"text-lg",children:"Generando borradores de historias con IA…"})]}),i.jsx("div",{className:"grid grid-cols-3 gap-6 w-full max-w-4xl",children:Array.from({length:6}).map((h,x)=>i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 animate-pulse",children:[i.jsx("div",{className:"w-full h-[420px] bg-gray-200 rounded-lg mb-4"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"h-4 bg-gray-200 rounded"}),i.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx("div",{className:"h-8 bg-gray-200 rounded flex-1"}),i.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded"}),i.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded"})]})]},x))})]})]})}):i.jsx("div",{className:"h-full bg-canvas",children:i.jsxs("div",{className:"h-full flex flex-col gap-6 p-8",children:[i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsx("h1",{className:"text-2xl font-medium",children:"Generación inicial de Historias"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm",children:"Paso 3 de 6"}),i.jsxs("span",{className:"text-sm text-gray-600",children:[f," historia",f!==1?"s":""," seleccionada",f!==1?"s":""]}),i.jsx("button",{onClick:l,className:"text-sm text-blue-600 hover:text-blue-800",children:n.length===s.length?"Deseleccionar todo":"Seleccionar todo"}),i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800",children:[i.jsx(Gt,{className:"w-4 h-4"}),"Volver"]}),i.jsxs("button",{disabled:!m,className:`flex items-center gap-2 px-4 py-2 rounded ${m?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:["Siguiente: Edición avanzada",i.jsx(rn,{className:"w-4 h-4"})]})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:i.jsx("div",{className:"grid grid-cols-3 gap-6",children:s.map(h=>{const x=n.includes(h.id);return i.jsxs("div",{className:`bg-white rounded-xl shadow-sm p-4 transition-all border-2 ${x?"border-blue-500 shadow-lg":"border-transparent"}`,children:[i.jsx("div",{className:"relative mb-4",children:i.jsxs("div",{className:`w-full h-[420px] rounded-lg ${h.preview.bg} flex items-center justify-center text-white relative overflow-hidden`,style:{aspectRatio:"9/16"},children:[i.jsx("div",{className:"text-center p-4",children:h.preview.content.split(`
`).map((y,b)=>i.jsx("div",{className:`${b===0?"text-2xl font-bold mb-2":b===1?"text-4xl font-bold mb-2":"text-lg"}`,children:y},b))}),i.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 bg-black/20 backdrop-blur-sm rounded text-xs",children:h.type}),x&&i.jsx("div",{className:"absolute inset-0 bg-blue-500/20 flex items-center justify-center",children:i.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center",children:i.jsx($o,{className:"w-6 h-6 text-white"})})})]})}),i.jsxs("div",{className:"mb-4",children:[i.jsx("h4",{className:"font-medium text-sm mb-2",children:"Elementos sugeridos"}),i.jsx("ul",{className:"space-y-1",children:h.elements.map((y,b)=>i.jsxs("li",{className:"text-sm text-gray-600 flex items-center gap-2",children:[i.jsx("span",{className:"w-1 h-1 bg-gray-400 rounded-full"}),y]},b))})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>a(h.id),className:`flex items-center gap-2 px-3 py-2 rounded text-sm flex-1 transition-colors ${x?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[x?i.jsx($o,{className:"w-4 h-4"}):i.jsx(Zc,{className:"w-4 h-4"}),x?"Seleccionada":"Seleccionar"]}),i.jsx("button",{onClick:()=>u(h.id),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",title:"Regenerar IA",children:i.jsx(H2,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>d(h.id),className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded",title:"Descartar",children:i.jsx(q2,{className:"w-4 h-4"})})]})]},h.id)})})}),!m&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 px-4",children:[i.jsx(Ot,{className:"w-4 h-4"}),i.jsx("span",{children:"Debes seleccionar al menos una historia para continuar."})]}),i.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-100",children:[i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800",children:[i.jsx(Gt,{className:"w-4 h-4"}),"Volver"]}),i.jsxs("button",{disabled:!m,className:`flex items-center gap-2 px-4 py-2 rounded ${m?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:["Siguiente: Edición avanzada",i.jsx(rn,{className:"w-4 h-4"})]})]})]})})}const MV=[{id:1,type:"Promocional",preview:{bg:"bg-gradient-to-br from-blue-500 to-purple-600",content:`OFERTA FLASH
50% OFF
Solo hoy`},elements:["Sticker: ¿Qué opinas?","CTA: Desliza hacia arriba"]},{id:2,type:"Engagement",preview:{bg:"bg-gradient-to-br from-pink-500 to-red-500",content:`¿Cuál prefieres?
A o B
Vota ahora`},elements:["Encuesta: ¿A o B?","CTA: Vota ahora"]},{id:3,type:"Educativo",preview:{bg:"bg-gradient-to-br from-green-500 to-teal-600",content:`TIP DEL DÍA
#MarketingTips
Aprende más`},elements:["Sticker: Tip del día","CTA: Aprende más"]},{id:4,type:"Behind Scenes",preview:{bg:"bg-gradient-to-br from-orange-500 to-yellow-500",content:`DETRÁS DE
CÁMARAS
Así trabajamos`},elements:["Sticker: Behind scenes","CTA: Ver proceso"]},{id:5,type:"Producto",preview:{bg:"bg-gradient-to-br from-indigo-500 to-blue-600",content:`NUEVO
PRODUCTO
Conoce más`},elements:["Sticker: Nuevo producto","CTA: Conoce más"]},{id:6,type:"Evento",preview:{bg:"bg-gradient-to-br from-teal-500 to-green-500",content:`EVENTO
ESPECIAL
Te esperamos`},elements:["Sticker: Evento especial","CTA: Te esperamos"]}];function DV(){const[t,e]=p.useState(!0),[n,r]=p.useState([]),[s,o]=p.useState(MV);p.useEffect(()=>{const h=setTimeout(()=>{e(!1)},3e3);return()=>clearTimeout(h)},[]);const a=h=>{r(x=>x.includes(h)?x.filter(y=>y!==h):[...x,h])},l=()=>{n.length===s.length?r([]):r(s.map(h=>h.id))},u=h=>{console.log(`Regenerating story ${h}`)},d=h=>{o(x=>x.filter(y=>y.id!==h)),r(x=>x.filter(y=>y!==h))},f=n.length,m=f>0;return t?i.jsxs("div",{className:"h-full bg-canvas flex flex-col",children:[i.jsx("div",{className:"bg-white border-b border-gray-100 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-lg font-medium",children:"Generación inicial de Historias"}),i.jsx("div",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:"Paso 3 de 6"})]})}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-6 p-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(rr,{className:"w-5 h-5 animate-spin text-blue-500"}),i.jsx("span",{className:"text-center",children:"Generando borradores de historias con IA…"})]}),i.jsx("div",{className:"grid grid-cols-2 gap-4 w-full",children:Array.from({length:6}).map((h,x)=>i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-3 animate-pulse",children:[i.jsx("div",{className:"w-full h-48 bg-gray-200 rounded-lg mb-3"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"h-3 bg-gray-200 rounded"}),i.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]}),i.jsxs("div",{className:"flex gap-2 mt-3",children:[i.jsx("div",{className:"h-6 bg-gray-200 rounded flex-1"}),i.jsx("div",{className:"h-6 w-6 bg-gray-200 rounded"})]})]},x))})]})]}):i.jsxs("div",{className:"h-full bg-canvas flex flex-col",children:[i.jsxs("div",{className:"bg-white border-b border-gray-100 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h1",{className:"text-lg font-medium",children:"Generación inicial de Historias"}),i.jsx("div",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:"Paso 3 de 6"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[f," seleccionada",f!==1?"s":""]}),i.jsx("button",{onClick:l,className:"text-sm text-blue-600 hover:text-blue-800",children:n.length===s.length?"Deseleccionar":"Seleccionar todo"})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:i.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.map(h=>{const x=n.includes(h.id);return i.jsxs("div",{className:`bg-white rounded-xl shadow-sm p-3 transition-all border-2 ${x?"border-blue-500 shadow-lg":"border-transparent"}`,children:[i.jsx("div",{className:"relative mb-3",children:i.jsxs("div",{className:`w-full h-48 rounded-lg ${h.preview.bg} flex items-center justify-center text-white relative overflow-hidden`,children:[i.jsx("div",{className:"text-center p-2",children:h.preview.content.split(`
`).map((y,b)=>i.jsx("div",{className:`${b===0?"text-sm font-bold mb-1":b===1?"text-lg font-bold mb-1":"text-xs"}`,children:y},b))}),i.jsx("div",{className:"absolute top-1 left-1 px-1.5 py-0.5 bg-black/20 backdrop-blur-sm rounded text-xs",children:h.type}),x&&i.jsx("div",{className:"absolute inset-0 bg-blue-500/20 flex items-center justify-center",children:i.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:i.jsx($o,{className:"w-4 h-4 text-white"})})})]})}),i.jsxs("div",{className:"mb-3",children:[i.jsx("h4",{className:"font-medium text-xs mb-1",children:"Elementos sugeridos"}),i.jsx("ul",{className:"space-y-0.5",children:h.elements.slice(0,2).map((y,b)=>i.jsxs("li",{className:"text-xs text-gray-600 flex items-center gap-1",children:[i.jsx("span",{className:"w-1 h-1 bg-gray-400 rounded-full flex-shrink-0"}),i.jsx("span",{className:"truncate",children:y})]},b))})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("button",{onClick:()=>a(h.id),className:`flex items-center gap-1 px-2 py-1 rounded text-xs flex-1 transition-colors ${x?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[x?i.jsx($o,{className:"w-3 h-3"}):i.jsx(Zc,{className:"w-3 h-3"}),i.jsx("span",{className:"hidden sm:inline",children:x?"Seleccionada":"Seleccionar"})]}),i.jsx("button",{onClick:()=>u(h.id),className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",title:"Regenerar IA",children:i.jsx(H2,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>d(h.id),className:"p-1.5 text-red-500 hover:text-red-700 hover:bg-red-50 rounded",title:"Descartar",children:i.jsx(q2,{className:"w-3 h-3"})})]})]},h.id)})})}),!m&&i.jsx("div",{className:"bg-amber-50 border-t border-amber-200 p-4",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Ot,{className:"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5"}),i.jsx("p",{className:"text-sm text-amber-700",children:"Debes seleccionar al menos una historia para continuar."})]})}),i.jsx("div",{className:"bg-white border-t border-gray-100 p-4",children:i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{className:"flex items-center justify-center gap-2 px-4 py-3 text-gray-600 hover:text-gray-800 border border-gray-200 rounded flex-1",children:[i.jsx(Gt,{className:"w-4 h-4"}),"Volver"]}),i.jsxs("button",{disabled:!m,className:`flex items-center justify-center gap-2 px-4 py-3 rounded flex-1 ${m?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:["Siguiente: Edición avanzada",i.jsx(rn,{className:"w-4 h-4"})]})]})})]})}function OV(){const[t,e]=p.useState(!1);return p.useEffect(()=>{const n=()=>{e(window.innerWidth<768)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),t}function LV(){return OV()?i.jsx(DV,{}):i.jsx(IV,{})}const VV=[{id:1,role:"user",content:"Haz el texto principal más grande",timestamp:new Date(Date.now()-12e4)},{id:2,role:"assistant",content:"✅ Texto aumentado en tamaño.",timestamp:new Date(Date.now()-1e5)}],FV=["Montserrat","Inter","Poppins","Roboto"],$V=["Ninguna","Fade","Slide","Zoom"],hb=["#2563eb","#dc2626","#059669","#d97706","#7c3aed","#db2777"],zV=["Color","Degradado","Imagen","Video"],BV=["Pregunta","Encuesta","Reacción","Link / CTA"],rc=[{id:1,title:"Historia 1",thumbnail:"https://via.placeholder.com/180x320/2563eb/ffffff?text=1"},{id:2,title:"Historia 2",thumbnail:"https://via.placeholder.com/180x320/dc2626/ffffff?text=2"},{id:3,title:"Historia 3",thumbnail:"https://via.placeholder.com/180x320/059669/ffffff?text=3"}],UV=()=>({selectedFont:"Montserrat",textColor:"#2563eb",textSize:24,textAnimation:"Ninguna",selectedStickerTypes:["Link / CTA"],stickerText:"",backgroundType:"Color",backgroundColor:"#2563eb",logoSize:40,logoOpacity:100});function HV(){const[t,e]=p.useState(VV),[n,r]=p.useState(""),[s,o]=p.useState(rc[0].id),[a,l]=p.useState(()=>{const h={};return rc.forEach(x=>{h[x.id]=UV()}),h}),u=a[s],d=h=>{l(x=>({...x,[s]:{...x[s],...h}}))},f=()=>{if(!n.trim())return;const h={id:t.length+1,role:"user",content:n,timestamp:new Date};e(x=>[...x,h]),r(""),setTimeout(()=>{const x={id:t.length+2,role:"assistant",content:"✅ Instrucción procesada.",timestamp:new Date};e(y=>[...y,x])},1e3)},m=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),f())};return i.jsxs("div",{className:"h-full bg-canvas flex flex-col",children:[i.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h2",{className:"font-medium text-gray-900 mr-4",children:"Editando:"}),i.jsx("div",{className:"flex gap-2",children:rc.map(h=>i.jsxs("button",{onClick:()=>o(h.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-2 ${s===h.id?"bg-blue-500 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[i.jsx("div",{className:"w-4 h-4 rounded border border-white/20",style:{backgroundColor:s===h.id?"#ffffff40":"#00000020"}}),h.title]},h.id))})]})}),i.jsxs("div",{className:"flex-1 flex gap-4 p-4",children:[i.jsxs("div",{className:"w-80 flex flex-col bg-white rounded-xl shadow-sm border border-gray-200",children:[i.jsx("div",{className:"p-4 border-b border-gray-100",children:i.jsx("h3",{className:"font-medium",children:"Chat de Edición (IA)"})}),i.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[i.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",style:{height:"480px"},children:t.map(h=>i.jsx("div",{className:`flex ${h.role==="user"?"justify-end":"justify-start"}`,children:i.jsx("div",{className:`max-w-[85%] px-3 py-2 rounded-xl text-sm ${h.role==="user"?"bg-bubble-user text-white":"bg-bubble-assistant text-gray-800"}`,children:h.content})},h.id))}),i.jsxs("div",{className:"p-4 border-t border-gray-100 space-y-3",children:[i.jsx("textarea",{value:n,onChange:h=>r(h.target.value),onKeyPress:m,placeholder:"Ej: 'Agrega sticker de encuesta'",className:"w-full p-3 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3}),i.jsxs("button",{onClick:f,disabled:!n.trim(),className:`w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium ${n.trim()?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[i.jsx(Za,{className:"w-4 h-4"}),"Enviar instrucción"]})]})]})]}),i.jsx("div",{className:"flex-1 flex flex-col",children:i.jsx("div",{className:"flex-1 flex items-center justify-center bg-black rounded-xl border border-gray-300",children:i.jsxs("div",{className:"bg-gray-100 rounded-lg border border-gray-300 flex items-center justify-center relative",style:{width:"405px",height:"720px"},children:[i.jsx("div",{className:"absolute top-3 left-3 bg-blue-500 text-white px-2 py-1 rounded text-xs font-medium",children:rc.find(h=>h.id===s)?.title}),i.jsxs("div",{className:"text-center text-gray-600",children:[i.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-300 rounded-lg flex items-center justify-center",children:i.jsx(Fo,{className:"w-8 h-8 text-gray-500"})}),i.jsx("h4",{className:"font-medium mb-2",children:"Canvas Historia 9:16"}),i.jsx("p",{className:"text-sm text-gray-500",children:"(Capas editables)"}),i.jsx("div",{className:"mt-4 text-xs text-gray-400",children:"405 × 720 px"}),i.jsxs("div",{className:"mt-4 p-3 bg-white rounded-lg text-left max-w-xs",children:[i.jsx("h5",{className:"text-xs font-medium text-gray-700 mb-2",children:"Configuración actual:"}),i.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[i.jsxs("div",{children:["Fuente: ",u.selectedFont]}),i.jsxs("div",{children:["Tamaño: ",u.textSize,"px"]}),i.jsxs("div",{className:"flex items-center gap-2",children:["Color:",i.jsx("div",{className:"w-3 h-3 rounded border border-gray-300",style:{backgroundColor:u.textColor}})]})]})]})]})]})})}),i.jsxs("div",{className:"w-65 bg-white rounded-xl shadow-sm border border-gray-200 p-3 overflow-y-auto",children:[i.jsx("div",{className:"mb-4",children:i.jsx("h3",{className:"font-medium",children:"Herramientas"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Up,{className:"w-4 h-4 text-gray-600"}),i.jsx("h4",{className:"font-medium text-sm",children:"Texto"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Fuente"}),i.jsxs("div",{className:"relative",children:[i.jsx("select",{value:u.selectedFont,onChange:h=>d({selectedFont:h.target.value}),className:"w-full px-3 py-2 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none",children:FV.map(h=>i.jsx("option",{value:h,children:h},h))}),i.jsx(xn,{className:"absolute right-2 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Color"}),i.jsx("div",{className:"flex gap-2",children:hb.map(h=>i.jsx("button",{onClick:()=>d({textColor:h}),className:`w-6 h-6 rounded-full border-2 ${u.textColor===h?"border-gray-400":"border-gray-200"}`,style:{backgroundColor:h}},h))})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:["Tamaño: ",u.textSize,"px"]}),i.jsx("input",{type:"range",min:"10",max:"72",value:u.textSize,onChange:h=>d({textSize:parseInt(h.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-thumb",style:{background:`linear-gradient(to right, #2563EB 0%, #2563EB ${(u.textSize-10)/62*100}%, #E5E7EB ${(u.textSize-10)/62*100}%, #E5E7EB 100%)`}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Animación"}),i.jsxs("div",{className:"relative",children:[i.jsx("select",{value:u.textAnimation,onChange:h=>d({textAnimation:h.target.value}),className:"w-full px-3 py-2 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none",children:$V.map(h=>i.jsx("option",{value:h,children:h},h))}),i.jsx(xn,{className:"absolute right-2 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(W2,{className:"w-4 h-4 text-gray-600"}),i.jsx("h4",{className:"font-medium text-sm",children:"Stickers / Interacción"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"grid grid-cols-2 gap-2",children:BV.map(h=>i.jsx("button",{onClick:()=>{const x=u.selectedStickerTypes.includes(h)?u.selectedStickerTypes.filter(y=>y!==h):[...u.selectedStickerTypes,h];d({selectedStickerTypes:x})},className:`px-2 py-1 rounded-lg text-xs border transition-all ${u.selectedStickerTypes.includes(h)?"bg-blue-500 text-white border-blue-500":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100"}`,children:h},h))}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Texto del sticker"}),i.jsx("input",{type:"text",value:u.stickerText,onChange:h=>d({stickerText:h.target.value}),placeholder:"Ej: ¿Qué opinas?",className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Ta,{className:"w-4 h-4 text-gray-600"}),i.jsx("h4",{className:"font-medium text-sm",children:"Fondo"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Tipo"}),i.jsxs("div",{className:"relative",children:[i.jsx("select",{value:u.backgroundType,onChange:h=>d({backgroundType:h.target.value}),className:"w-full px-3 py-2 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none",children:zV.map(h=>i.jsx("option",{value:h,children:h},h))}),i.jsx(xn,{className:"absolute right-2 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Color de fondo"}),i.jsx("div",{className:"flex gap-2",children:hb.map(h=>i.jsx("button",{onClick:()=>d({backgroundColor:h}),className:`w-6 h-6 rounded-full border-2 ${u.backgroundColor===h?"border-gray-400":"border-gray-200"}`,style:{backgroundColor:h}},h))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Subir imagen/video"}),i.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-3 text-center hover:border-gray-300 transition-colors",children:[i.jsx(Q2,{className:"w-6 h-6 text-gray-400 mx-auto mb-1"}),i.jsx("p",{className:"text-xs text-gray-500",children:"JPG, PNG, MP4"}),i.jsx("input",{type:"file",accept:".jpg,.png,.mp4",className:"hidden"})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Fo,{className:"w-4 h-4 text-gray-600"}),i.jsx("h4",{className:"font-medium text-sm",children:"Logo / Branding"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("button",{className:"w-full px-3 py-2 text-sm bg-gray-100 text-gray-700 border border-gray-200 rounded-lg hover:bg-gray-200 transition-colors",children:"Insertar logo (BrandKit)"}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:["Tamaño logo: ",u.logoSize,"%"]}),i.jsx("input",{type:"range",min:"10",max:"100",value:u.logoSize,onChange:h=>d({logoSize:parseInt(h.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-thumb",style:{background:`linear-gradient(to right, #2563EB 0%, #2563EB ${(u.logoSize-10)/90*100}%, #E5E7EB ${(u.logoSize-10)/90*100}%, #E5E7EB 100%)`}})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:["Opacidad logo: ",u.logoOpacity,"%"]}),i.jsx("input",{type:"range",min:"0",max:"100",value:u.logoOpacity,onChange:h=>d({logoOpacity:parseInt(h.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-thumb",style:{background:`linear-gradient(to right, #2563EB 0%, #2563EB ${u.logoOpacity}%, #E5E7EB ${u.logoOpacity}%, #E5E7EB 100%)`}})]})]})]})]})]})]}),i.jsx("style",{jsx:"true",children:`
        .slider-thumb::-webkit-slider-thumb {
          appearance: none;
          height: 16px;
          width: 16px;
          border-radius: 50%;
          background: #2563EB;
          cursor: pointer;
          border: 2px solid #ffffff;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .slider-thumb::-moz-range-thumb {
          height: 16px;
          width: 16px;
          border-radius: 50%;
          background: #2563EB;
          cursor: pointer;
          border: 2px solid #ffffff;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
      `})]})}const GV=[{id:1,role:"user",content:"Haz el texto principal más grande",timestamp:new Date(Date.now()-12e4)},{id:2,role:"assistant",content:"✅ Texto aumentado en tamaño.",timestamp:new Date(Date.now()-1e5)}],KV=["Montserrat","Inter","Poppins","Roboto"],fb=["#2563eb","#dc2626","#059669","#d97706","#7c3aed","#db2777"],WV=["Color","Degradado","Imagen","Video"],qV=["Pregunta","Encuesta","Reacción","Link / CTA"],sc=[{id:1,title:"Historia 1",thumbnail:"https://via.placeholder.com/180x320/2563eb/ffffff?text=1"},{id:2,title:"Historia 2",thumbnail:"https://via.placeholder.com/180x320/dc2626/ffffff?text=2"},{id:3,title:"Historia 3",thumbnail:"https://via.placeholder.com/180x320/059669/ffffff?text=3"}],QV=()=>({selectedFont:"Montserrat",textColor:"#2563eb",textSize:24,textAnimation:"Ninguna",selectedStickerTypes:["Link / CTA"],stickerText:"",backgroundType:"Color",backgroundColor:"#2563eb",logoSize:40,logoOpacity:100});function YV(){const[t,e]=p.useState(GV),[n,r]=p.useState(""),[s,o]=p.useState(!1),[a,l]=p.useState(!1),[u,d]=p.useState(sc[0].id),[f,m]=p.useState(()=>{const j={};return sc.forEach(_=>{j[_.id]=QV()}),j}),h=f[u],x=j=>{m(_=>({..._,[u]:{..._[u],...j}}))},y=()=>{if(!n.trim())return;const j={id:t.length+1,role:"user",content:n,timestamp:new Date};e(_=>[..._,j]),r(""),setTimeout(()=>{const _={id:t.length+2,role:"assistant",content:"✅ Instrucción procesada.",timestamp:new Date};e(E=>[...E,_])},1e3)},b=j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),y())};return i.jsxs("div",{className:"h-full bg-canvas flex flex-col",children:[i.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3",children:i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("h2",{className:"font-medium text-gray-900 text-sm",children:"Editando:"}),i.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:sc.map(j=>i.jsxs("button",{onClick:()=>d(j.id),className:`px-3 py-2 rounded-lg text-xs font-medium transition-all flex items-center gap-2 whitespace-nowrap ${u===j.id?"bg-blue-500 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[i.jsx("div",{className:"w-3 h-3 rounded border border-white/20 flex-shrink-0",style:{backgroundColor:u===j.id?"#ffffff40":"#00000020"}}),j.title]},j.id))})]})}),i.jsxs("div",{className:"bg-white border-b border-gray-200",children:[i.jsxs("button",{onClick:()=>o(!s),className:"w-full p-4 flex items-center justify-between text-left",children:[i.jsx("h3",{className:"font-medium",children:"Chat de Edición (IA)"}),s?i.jsx(Vo,{className:"w-5 h-5 text-gray-400"}):i.jsx(xn,{className:"w-5 h-5 text-gray-400"})]}),s&&i.jsxs("div",{className:"px-4 pb-4",children:[i.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2 mb-3",children:t.map(j=>i.jsx("div",{className:`flex ${j.role==="user"?"justify-end":"justify-start"}`,children:i.jsx("div",{className:`max-w-[85%] px-3 py-2 rounded-xl text-sm ${j.role==="user"?"bg-bubble-user text-white":"bg-bubble-assistant text-gray-800"}`,children:j.content})},j.id))}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("textarea",{value:n,onChange:j=>r(j.target.value),onKeyPress:b,placeholder:"Ej: 'Agrega sticker de encuesta'",className:"w-full p-3 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",rows:2}),i.jsxs("button",{onClick:y,disabled:!n.trim(),className:`w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium text-sm ${n.trim()?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[i.jsx(Za,{className:"w-4 h-4"}),"Enviar instrucción"]})]})]})]}),i.jsx("div",{className:"flex-1 flex items-center justify-center p-4 bg-black",children:i.jsxs("div",{className:"bg-gray-100 rounded-lg border border-gray-300 flex items-center justify-center relative",style:{width:"216px",height:"384px"},children:[i.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white px-2 py-1 rounded text-xs font-medium",children:sc.find(j=>j.id===u)?.title}),i.jsxs("div",{className:"text-center text-gray-600",children:[i.jsx("div",{className:"w-12 h-12 mx-auto mb-3 bg-gray-300 rounded-lg flex items-center justify-center",children:i.jsx(Fo,{className:"w-6 h-6 text-gray-500"})}),i.jsx("h4",{className:"font-medium mb-1 text-sm",children:"Canvas Historia 9:16"}),i.jsx("p",{className:"text-xs text-gray-500",children:"(Capas editables)"}),i.jsx("div",{className:"mt-2 text-xs text-gray-400",children:"216 × 384 px"}),i.jsxs("div",{className:"mt-3 p-2 bg-white rounded text-left text-xs",children:[i.jsx("div",{className:"text-gray-700 font-medium mb-1",children:"Config actual:"}),i.jsxs("div",{className:"text-gray-500 space-y-1",children:[i.jsxs("div",{children:[h.selectedFont," ",h.textSize,"px"]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-2 h-2 rounded border",style:{backgroundColor:h.textColor}}),"Color texto"]})]})]})]})]})}),i.jsxs("div",{className:"bg-white border-t border-gray-200",children:[i.jsxs("button",{onClick:()=>l(!a),className:"w-full p-4 flex items-center justify-between text-left",children:[i.jsx("h3",{className:"font-medium",children:"Herramientas"}),a?i.jsx(Vo,{className:"w-5 h-5 text-gray-400"}):i.jsx(xn,{className:"w-5 h-5 text-gray-400"})]}),a&&i.jsx("div",{className:"px-4 pb-4 max-h-96 overflow-y-auto",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Up,{className:"w-4 h-4 text-gray-600"}),i.jsx("h4",{className:"font-medium text-sm",children:"Texto"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Fuente"}),i.jsxs("div",{className:"relative",children:[i.jsx("select",{value:h.selectedFont,onChange:j=>x({selectedFont:j.target.value}),className:"w-full px-3 py-2 text-sm bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none",children:KV.map(j=>i.jsx("option",{value:j,children:j},j))}),i.jsx(xn,{className:"absolute right-2 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Color"}),i.jsx("div",{className:"flex gap-2",children:fb.map(j=>i.jsx("button",{onClick:()=>x({textColor:j}),className:`w-6 h-6 rounded-full border-2 ${h.textColor===j?"border-gray-400":"border-gray-200"}`,style:{backgroundColor:j}},j))})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:["Tamaño: ",h.textSize,"px"]}),i.jsx("input",{type:"range",min:"10",max:"72",value:h.textSize,onChange:j=>x({textSize:parseInt(j.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-thumb",style:{background:`linear-gradient(to right, #2563EB 0%, #2563EB ${(h.textSize-10)/62*100}%, #E5E7EB ${(h.textSize-10)/62*100}%, #E5E7EB 100%)`}})]})]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(W2,{className:"w-4 h-4 text-gray-600"}),i.jsx("h4",{className:"font-medium text-sm",children:"Stickers / Interacción"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"grid grid-cols-2 gap-2",children:qV.map(j=>i.jsx("button",{onClick:()=>{const _=h.selectedStickerTypes.includes(j)?h.selectedStickerTypes.filter(E=>E!==j):[...h.selectedStickerTypes,j];x({selectedStickerTypes:_})},className:`px-2 py-1 rounded-lg text-xs border transition-all ${h.selectedStickerTypes.includes(j)?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-200 hover:bg-gray-100"}`,children:j},j))}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Texto del sticker"}),i.jsx("input",{type:"text",value:h.stickerText,onChange:j=>x({stickerText:j.target.value}),placeholder:"Ej: ¿Qué opinas?",className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Ta,{className:"w-4 h-4 text-gray-600"}),i.jsx("h4",{className:"font-medium text-sm",children:"Fondo"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Tipo"}),i.jsxs("div",{className:"relative",children:[i.jsx("select",{value:h.backgroundType,onChange:j=>x({backgroundType:j.target.value}),className:"w-full px-3 py-2 text-sm bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none",children:WV.map(j=>i.jsx("option",{value:j,children:j},j))}),i.jsx(xn,{className:"absolute right-2 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Color de fondo"}),i.jsx("div",{className:"flex gap-2",children:fb.map(j=>i.jsx("button",{onClick:()=>x({backgroundColor:j}),className:`w-6 h-6 rounded-full border-2 ${h.backgroundColor===j?"border-gray-400":"border-gray-200"}`,style:{backgroundColor:j}},j))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"Subir imagen/video"}),i.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-2 text-center hover:border-gray-300 transition-colors",children:[i.jsx(Q2,{className:"w-5 h-5 text-gray-400 mx-auto mb-1"}),i.jsx("p",{className:"text-xs text-gray-500",children:"JPG, PNG, MP4"}),i.jsx("input",{type:"file",accept:".jpg,.png,.mp4",className:"hidden"})]})]})]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Fo,{className:"w-4 h-4 text-gray-600"}),i.jsx("h4",{className:"font-medium text-sm",children:"Logo / Branding"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("button",{className:"w-full px-3 py-2 text-sm bg-white text-gray-700 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:"Insertar logo (BrandKit)"}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:["Tamaño logo: ",h.logoSize,"%"]}),i.jsx("input",{type:"range",min:"10",max:"100",value:h.logoSize,onChange:j=>x({logoSize:parseInt(j.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-thumb",style:{background:`linear-gradient(to right, #2563EB 0%, #2563EB ${(h.logoSize-10)/90*100}%, #E5E7EB ${(h.logoSize-10)/90*100}%, #E5E7EB 100%)`}})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:["Opacidad logo: ",h.logoOpacity,"%"]}),i.jsx("input",{type:"range",min:"0",max:"100",value:h.logoOpacity,onChange:j=>x({logoOpacity:parseInt(j.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-thumb",style:{background:`linear-gradient(to right, #2563EB 0%, #2563EB ${h.logoOpacity}%, #E5E7EB ${h.logoOpacity}%, #E5E7EB 100%)`}})]})]})]})]})})]}),i.jsx("style",{jsx:"true",children:`
        .slider-thumb::-webkit-slider-thumb {
          appearance: none;
          height: 20px;
          width: 20px;
          border-radius: 50%;
          background: #2563EB;
          cursor: pointer;
          border: 2px solid #ffffff;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .slider-thumb::-moz-range-thumb {
          height: 20px;
          width: 20px;
          border-radius: 50%;
          background: #2563EB;
          cursor: pointer;
          border: 2px solid #ffffff;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
      `})]})}function XV(){const[t,e]=p.useState(!1);return p.useEffect(()=>{const n=()=>{e(window.innerWidth<768)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),t}function JV(){return XV()?i.jsx(YV,{}):i.jsx(HV,{})}const mb=[{id:1,title:"Historia 1",caption:"¡Oferta flash solo por hoy! 🚀 Desliza hacia arriba para aprovechar el descuento.",hashtags:["#Oferta","#Descuento","#TuMarca"],isValid:!1,characterCount:89},{id:2,title:"Historia 2",caption:"Nuevo producto disponible. ¡No te lo pierdas! ✨",hashtags:["#Nuevo","#Producto","#TuMarca","#Disponible"],isValid:!0,characterCount:52},{id:3,title:"Historia 3",caption:"Behind the scenes de nuestro último proyecto. Proceso creativo increíble que queremos compartir contigo.",hashtags:["#BehindTheScenes","#Proceso","#Creativo"],isValid:!1,characterCount:126}],ZV=["#Marketing","#Ventas","#Promocion","#Limitado","#Exclusivo","#Calidad","#Innovacion","#Tendencia","#Estilo","#Premium"];function eF(){const[t,e]=p.useState(mb[0].id),[n,r]=p.useState(mb),[s,o]=p.useState(!0),a=n.find(b=>b.id===t);if(!a)return null;const l=n.some(b=>b.isValid),u=125,d=a.characterCount>u,f=b=>{r(j=>j.map(_=>_.id===t?{..._,...b,characterCount:b.caption?.length||_.characterCount}:_))},m=()=>{const b=["¡Nueva oferta disponible! 🔥 Aprovecha ahora.","Descuento especial por tiempo limitado ⏰","No te pierdas esta oportunidad única ✨","Oferta flash: solo por hoy 🚀"],j=b[Math.floor(Math.random()*b.length)];f({caption:j,characterCount:j.length,isValid:j.length<=u})},h=b=>{a.hashtags.includes(b)||f({hashtags:[...a.hashtags,b]})},x=b=>{f({hashtags:a.hashtags.filter(j=>j!==b)})},y=()=>{f({isValid:!d&&a.caption.trim().length>0})};return i.jsxs("div",{className:"h-full bg-canvas flex flex-col",children:[i.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("h1",{className:"text-2xl font-medium text-gray-900",children:"Captions & Hashtags para Historias"}),i.jsx("div",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium",children:"Paso 5 de 6"})]})}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex gap-2",children:n.map(b=>i.jsxs("button",{onClick:()=>e(b.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-2 ${t===b.id?"bg-blue-500 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[b.isValid?i.jsx($e,{className:"w-4 h-4 text-green-400"}):i.jsx(Ot,{className:"w-4 h-4 text-orange-400"}),b.title]},b.id))}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:[i.jsx(Gt,{className:"w-4 h-4"}),"Volver"]}),i.jsxs("button",{disabled:!l,className:`flex items-center gap-2 px-6 py-2 rounded-lg font-medium transition-all ${l?"bg-blue-500 text-white hover:bg-blue-600 shadow-sm":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:["Siguiente: Publicación",i.jsx(rn,{className:"w-4 h-4"})]})]})]})]})}),i.jsx("div",{className:"flex-1 p-6",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:i.jsx("span",{className:"text-white font-medium text-sm",children:a.title.slice(-1)})}),i.jsx("h2",{className:"text-lg font-medium text-gray-900",children:a.title})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("label",{className:"font-medium text-gray-900",children:"Caption generado por IA"}),i.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:i.jsxs("span",{className:d?"text-red-500":"text-gray-600",children:[a.characterCount,"/",u]})})]}),i.jsx("textarea",{value:a.caption,onChange:b=>f({caption:b.target.value,characterCount:b.target.value.length}),onBlur:y,className:"w-full p-4 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:4,placeholder:"Escribe tu caption aquí..."}),d&&i.jsxs("div",{className:"flex items-center gap-2 mt-3 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[i.jsx(Ot,{className:"w-5 h-5 text-orange-500 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-orange-700 font-medium text-sm",children:"Caption demasiado largo para Instagram"}),i.jsxs("div",{className:"text-orange-600 text-sm",children:["IA recomienda acortar a ",u," caracteres"]})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"font-medium text-gray-900 block mb-3",children:"Hashtags sugeridos"}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:a.hashtags.map((b,j)=>i.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium",children:[b,i.jsx("button",{onClick:()=>x(b),className:"text-blue-500 hover:text-blue-700 transition-colors",children:i.jsx(Ms,{className:"w-3 h-3"})})]},j))}),i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Sugerencias adicionales:"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:ZV.filter(b=>!a.hashtags.includes(b)).slice(0,5).map(b=>i.jsxs("button",{onClick:()=>h(b),className:"inline-flex items-center gap-1 px-3 py-1 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200 transition-colors",children:[i.jsx(qf,{className:"w-3 h-3"}),b.slice(1)]},b))})]})]}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:[i.jsx(Xu,{className:"w-4 h-4"}),"Regenerar caption"]}),i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:[i.jsx(qf,{className:"w-4 h-4"}),"Sugerir más hashtags"]})]}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[i.jsx("input",{type:"checkbox",checked:s,onChange:b=>o(b.target.checked),className:"rounded border-gray-300 text-blue-500 focus:ring-blue-500"}),i.jsx(K2,{className:"w-4 h-4"}),"Permitir emojis"]})})]})]})]}),!l&&i.jsx("div",{className:"mt-6 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2 text-orange-700",children:[i.jsx(Ot,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm",children:"Debes confirmar al menos un caption válido antes de continuar."})]})})]})}),i.jsx("div",{className:"bg-white border-t border-gray-200 p-6",children:i.jsxs("div",{className:"max-w-6xl mx-auto flex justify-end gap-3",children:[i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:[i.jsx(Gt,{className:"w-4 h-4"}),"Volver"]}),i.jsxs("button",{disabled:!l,className:`flex items-center gap-2 px-6 py-2 rounded-lg font-medium transition-all ${l?"bg-blue-500 text-white hover:bg-blue-600 shadow-sm":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:["Siguiente: Publicación",i.jsx(rn,{className:"w-4 h-4"})]})]})})]})}const pb=[{id:1,title:"Historia 1",caption:"¡Oferta flash solo por hoy! 🚀 Desliza hacia arriba para aprovechar el descuento.",hashtags:["#Oferta","#Descuento","#TuMarca"],isValid:!1,characterCount:89},{id:2,title:"Historia 2",caption:"Nuevo producto disponible. ¡No te lo pierdas! ✨",hashtags:["#Nuevo","#Producto","#TuMarca","#Disponible"],isValid:!0,characterCount:52},{id:3,title:"Historia 3",caption:"Behind the scenes de nuestro último proyecto. Proceso creativo increíble que queremos compartir contigo.",hashtags:["#BehindTheScenes","#Proceso","#Creativo"],isValid:!1,characterCount:126}],tF=["#Marketing","#Ventas","#Promocion","#Limitado","#Exclusivo","#Calidad","#Innovacion","#Tendencia","#Estilo","#Premium"];function nF(){const[t,e]=p.useState(pb[0].id),[n,r]=p.useState(pb),[s,o]=p.useState(!0),[a,l]=p.useState(!1),u=n.find(_=>_.id===t);if(!u)return null;const d=n.some(_=>_.isValid),f=125,m=u.characterCount>f,h=_=>{r(E=>E.map(S=>S.id===t?{...S,..._,characterCount:_.caption?.length||S.characterCount}:S))},x=()=>{const _=["¡Nueva oferta disponible! 🔥 Aprovecha ahora.","Descuento especial por tiempo limitado ⏰","No te pierdas esta oportunidad única ✨","Oferta flash: solo por hoy 🚀"],E=_[Math.floor(Math.random()*_.length)];h({caption:E,characterCount:E.length,isValid:E.length<=f})},y=_=>{u.hashtags.includes(_)||h({hashtags:[...u.hashtags,_]})},b=_=>{h({hashtags:u.hashtags.filter(E=>E!==_)})},j=()=>{h({isValid:!m&&u.caption.trim().length>0})};return i.jsxs("div",{className:"h-full bg-canvas flex flex-col",children:[i.jsxs("div",{className:"bg-white border-b border-gray-200 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h1",{className:"text-lg font-medium text-gray-900",children:"Captions & Hashtags"}),i.jsx("div",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs font-medium",children:"5/6"})]}),i.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:n.map(_=>i.jsxs("button",{onClick:()=>e(_.id),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-2 whitespace-nowrap ${t===_.id?"bg-blue-500 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[_.isValid?i.jsx($e,{className:"w-3 h-3 text-green-400"}):i.jsx(Ot,{className:"w-3 h-3 text-orange-400"}),_.title]},_.id))})]}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-lg flex items-center justify-center",children:i.jsx("span",{className:"text-white font-medium text-xs",children:u.title.slice(-1)})}),i.jsx("h2",{className:"font-medium text-gray-900",children:u.title})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"font-medium text-gray-900 text-sm",children:"Caption generado por IA"}),i.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:i.jsxs("span",{className:m?"text-red-500":"text-gray-600",children:[u.characterCount,"/",f]})})]}),i.jsx("textarea",{value:u.caption,onChange:_=>h({caption:_.target.value,characterCount:_.target.value.length}),onBlur:j,className:"w-full p-3 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",rows:4,placeholder:"Escribe tu caption aquí..."}),m&&i.jsxs("div",{className:"flex items-start gap-2 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[i.jsx(Ot,{className:"w-4 h-4 text-orange-500 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-orange-700 font-medium text-xs",children:"Caption demasiado largo"}),i.jsxs("div",{className:"text-orange-600 text-xs",children:["Recorta a ",f," caracteres"]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:x,className:"flex items-center gap-1 px-3 py-2 text-gray-600 hover:text-gray-800 transition-colors text-sm",children:[i.jsx(Xu,{className:"w-3 h-3"}),"Regenerar"]}),i.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[i.jsx("input",{type:"checkbox",checked:s,onChange:_=>o(_.target.checked),className:"rounded border-gray-300 text-blue-500 focus:ring-blue-500 w-3 h-3"}),i.jsx(K2,{className:"w-3 h-3 text-gray-600"}),i.jsx("span",{className:"text-xs text-gray-600",children:"Emojis"})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("label",{className:"font-medium text-gray-900 text-sm",children:"Hashtags actuales"})}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:u.hashtags.map((_,E)=>i.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-medium",children:[_,i.jsx("button",{onClick:()=>b(_),className:"text-blue-500 hover:text-blue-700 transition-colors",children:i.jsx(Ms,{className:"w-2 h-2"})})]},E))}),i.jsxs("button",{onClick:()=>l(!a),className:"flex items-center justify-between w-full p-2 text-left text-sm text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",children:[i.jsx("span",{children:"Sugerencias adicionales"}),a?i.jsx(Vo,{className:"w-4 h-4"}):i.jsx(xn,{className:"w-4 h-4"})]}),a&&i.jsxs("div",{className:"mt-3 space-y-2",children:[i.jsx("div",{className:"flex flex-wrap gap-2",children:tF.filter(_=>!u.hashtags.includes(_)).slice(0,8).map(_=>i.jsxs("button",{onClick:()=>y(_),className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-700 rounded-lg text-xs hover:bg-gray-200 transition-colors",children:[i.jsx(qf,{className:"w-2 h-2"}),_.slice(1)]},_))}),i.jsx("button",{className:"text-xs text-blue-500 hover:text-blue-600",children:"Ver más sugerencias"})]})]}),!d&&i.jsx("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-2 text-orange-700",children:[i.jsx(Ot,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),i.jsx("span",{className:"text-xs",children:"Debes confirmar al menos un caption válido antes de continuar."})]})})]})}),i.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:[i.jsx(Gt,{className:"w-4 h-4"}),"Volver"]}),i.jsxs("button",{disabled:!d,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${d?"bg-blue-500 text-white hover:bg-blue-600 shadow-sm":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:["Siguiente",i.jsx(rn,{className:"w-4 h-4"})]})]})})]})}function rF(){const[t,e]=p.useState(!1);return p.useEffect(()=>{const n=()=>{e(window.innerWidth<768)};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[]),t?i.jsx(nF,{}):i.jsx(eF,{})}const gb=[{id:1,title:"Historia 1",type:"Promocional",exported:!1,scheduled:!1,platforms:[]},{id:2,title:"Historia 2",type:"Informativo",exported:!0,scheduled:!0,platforms:["instagram","facebook"]},{id:3,title:"Historia 3",type:"Behind the Scenes",exported:!1,scheduled:!1,platforms:[]}],sF=[{id:"instagram",name:"Instagram Stories",icon:z2,color:"bg-pink-500"},{id:"facebook",name:"Facebook Stories",icon:F2,color:"bg-blue-600"},{id:"tiktok",name:"TikTok Stories",icon:Ja,color:"bg-black"}],xb=[{date:"2025-10-15",time:"18:00",story:"Historia 1",type:"Promocional"},{date:"2025-10-16",time:"12:00",story:"Historia 2",type:"Informativo"},{date:"2025-10-17",time:"15:30",story:"Historia 3",type:"Behind the Scenes"}];function oF(){const[t,e]=p.useState(gb[0].id),[n,r]=p.useState(gb),[s,o]=p.useState("high"),[a,l]=p.useState("manual"),[u,d]=p.useState("2025-10-15"),[f,m]=p.useState("18:00"),[h,x]=p.useState(!1),y=n.find(T=>T.id===t);if(!y)return null;const b=n.some(T=>T.exported&&T.scheduled&&T.platforms.length>0),j=T=>{r(D=>D.map(N=>N.id===t?{...N,...T}:N))},_=()=>{x(!0),setTimeout(()=>{j({exported:!0}),x(!1)},2e3)},E=T=>{const D=y.platforms,N=D.includes(T)?D.filter(w=>w!==T):[...D,T];j({platforms:N})},S=()=>{const T=[{date:"2025-10-15",time:"18:00",reason:"Mayor engagement los martes por la tarde"},{date:"2025-10-16",time:"12:00",reason:"Horario de almuerzo óptimo para tu audiencia"},{date:"2025-10-17",time:"20:30",reason:"Peak time para tu demografía"}],D=T[Math.floor(Math.random()*T.length)];d(D.date),m(D.time),l("ai"),j({scheduled:!0})},R=()=>{j({scheduled:!0})};return i.jsxs("div",{className:"h-full bg-canvas flex flex-col",children:[i.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("h1",{className:"text-2xl font-medium text-gray-900",children:"Publicación final de Historias"}),i.jsx("div",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-lg text-sm font-medium",children:"Paso 6 de 6"})]})}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex gap-2",children:n.map(T=>{const D=T.exported&&T.scheduled&&T.platforms.length>0;return i.jsxs("button",{onClick:()=>e(T.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-2 ${t===T.id?"bg-blue-500 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[D?i.jsx($e,{className:"w-4 h-4 text-green-400"}):i.jsx(hr,{className:"w-4 h-4 text-orange-400"}),T.title]},T.id)})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:[i.jsx(Gt,{className:"w-4 h-4"}),"Volver"]}),i.jsxs("button",{disabled:!b,className:`flex items-center gap-2 px-6 py-2 rounded-lg font-medium transition-all ${b?"bg-green-500 text-white hover:bg-green-600 shadow-sm":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[i.jsx($e,{className:"w-4 h-4"}),"Finalizar"]})]})]})]})}),i.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:i.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:i.jsx(wn,{className:"w-4 h-4 text-white"})}),i.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Exportar archivo"}),y.exported&&i.jsxs("div",{className:"flex items-center gap-1 text-green-600 text-sm",children:[i.jsx(or,{className:"w-4 h-4"}),"Exportado"]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"font-medium text-gray-900 block mb-2",children:"Formato"}),i.jsx("div",{className:"p-3 bg-gray-50 rounded-lg text-gray-700",children:"9:16 (vertical) - Optimizado para Stories"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"font-medium text-gray-900 block mb-3",children:"Opciones de calidad"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>o("high"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${s==="high"?"bg-blue-100 text-blue-700 border-2 border-blue-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Alta calidad (1080x1920)"}),i.jsx("button",{onClick:()=>o("medium"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${s==="medium"?"bg-blue-100 text-blue-700 border-2 border-blue-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Calidad media (720x1280)"})]})]}),i.jsx("button",{onClick:_,disabled:y.exported||h,className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all ${y.exported?"bg-green-100 text-green-700 cursor-not-allowed":h?"bg-blue-100 text-blue-700 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600 shadow-sm"}`,children:h?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Generando exportación..."]}):y.exported?i.jsxs(i.Fragment,{children:[i.jsx(or,{className:"w-4 h-4"}),"Exportación completada"]}):i.jsxs(i.Fragment,{children:[i.jsx(wn,{className:"w-4 h-4"}),"Generar exportación"]})})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center",children:i.jsx(Ca,{className:"w-4 h-4 text-white"})}),i.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Programar publicación"}),y.scheduled&&i.jsxs("div",{className:"flex items-center gap-1 text-green-600 text-sm",children:[i.jsx(or,{className:"w-4 h-4"}),"Programado"]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"font-medium text-gray-900 block mb-3",children:"Programar manualmente"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"Fecha"}),i.jsx("input",{type:"date",value:u,onChange:T=>d(T.target.value),className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"Hora"}),i.jsx("input",{type:"time",value:f,onChange:T=>m(T.target.value),className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),a==="manual"&&i.jsx("button",{onClick:R,className:"mt-3 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Confirmar programación"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-gray-200"})}),i.jsx("div",{className:"relative flex justify-center text-sm",children:i.jsx("span",{className:"px-2 bg-white text-gray-500",children:"o"})})]}),i.jsxs("button",{onClick:S,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all shadow-sm",children:[i.jsx(Ji,{className:"w-4 h-4"}),"Programar con IA"]}),a==="ai"&&i.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[i.jsxs("div",{className:"text-purple-700 text-sm",children:["📊 IA recomienda: ",i.jsxs("strong",{children:[u," a las ",f]})]}),i.jsx("div",{className:"text-purple-600 text-xs mt-1",children:"Mayor engagement según tu audiencia histórica"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center",children:i.jsx($e,{className:"w-4 h-4 text-white"})}),i.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Plataformas de publicación"})]}),i.jsx("div",{className:"grid grid-cols-1 gap-3",children:sF.map(T=>{const D=y.platforms.includes(T.id),N=T.icon;return i.jsxs("button",{onClick:()=>E(T.id),className:`flex items-center gap-3 p-4 rounded-lg border-2 transition-all ${D?"border-blue-300 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[i.jsx("div",{className:`w-8 h-8 ${T.color} rounded-lg flex items-center justify-center`,children:i.jsx(N,{className:"w-4 h-4 text-white"})}),i.jsx("span",{className:"font-medium text-gray-900",children:T.name}),D&&i.jsx($e,{className:"w-5 h-5 text-blue-500 ml-auto"})]},T.id)})})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center",children:i.jsx(Ca,{className:"w-4 h-4 text-white"})}),i.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Vista rápida de agenda"})]}),i.jsx("div",{className:"space-y-3",children:xb.map((T,D)=>i.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900 text-sm",children:T.story}),i.jsx("div",{className:"text-gray-600 text-xs",children:T.type})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-gray-900 text-sm font-medium",children:T.date}),i.jsxs("div",{className:"text-gray-600 text-xs flex items-center gap-1",children:[i.jsx(Yu,{className:"w-3 h-3"}),T.time]})]})]})},D))}),i.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsxs("div",{className:"text-blue-700 text-sm font-medium",children:["📅 ",xb.length," historias programadas esta semana"]}),i.jsx("div",{className:"text-blue-600 text-xs mt-1",children:"Distribución óptima para máximo alcance"})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Resumen del progreso"}),i.jsx("div",{className:"space-y-3",children:n.map(T=>{const D=[T.exported,T.scheduled,T.platforms.length>0].filter(Boolean).length;return i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-700",children:T.title}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-blue-500 transition-all",style:{width:`${D/3*100}%`}})}),i.jsxs("span",{className:"text-xs text-gray-600",children:[D,"/3"]})]})]},T.id)})})]})]})]})}),i.jsx("div",{className:"bg-white border-t border-gray-200 p-6",children:i.jsxs("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:[i.jsx(Gt,{className:"w-4 h-4"}),"Volver"]}),i.jsxs("div",{className:"flex items-center gap-4",children:[!b&&i.jsxs("div",{className:"text-sm text-orange-600 flex items-center gap-1",children:[i.jsx(hr,{className:"w-4 h-4"}),"Completa al menos una historia para finalizar"]}),i.jsxs("button",{disabled:!b,className:`flex items-center gap-2 px-6 py-2 rounded-lg font-medium transition-all ${b?"bg-green-500 text-white hover:bg-green-600 shadow-sm":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[i.jsx($e,{className:"w-4 h-4"}),"Finalizar"]})]})]})})]})}const yb=[{id:1,title:"Historia 1",type:"Promocional",exported:!1,scheduled:!1,platforms:[]},{id:2,title:"Historia 2",type:"Informativo",exported:!0,scheduled:!0,platforms:["instagram","facebook"]},{id:3,title:"Historia 3",type:"Behind the Scenes",exported:!1,scheduled:!1,platforms:[]}],iF=[{id:"instagram",name:"Instagram Stories",icon:z2,color:"bg-pink-500"},{id:"facebook",name:"Facebook Stories",icon:F2,color:"bg-blue-600"},{id:"tiktok",name:"TikTok Stories",icon:Ja,color:"bg-black"}],vb=[{date:"2025-10-15",time:"18:00",story:"Historia 1",type:"Promocional"},{date:"2025-10-16",time:"12:00",story:"Historia 2",type:"Informativo"},{date:"2025-10-17",time:"15:30",story:"Historia 3",type:"Behind the Scenes"}];function aF(){const[t,e]=p.useState(yb[0].id),[n,r]=p.useState(yb),[s,o]=p.useState("high"),[a,l]=p.useState("manual"),[u,d]=p.useState("2025-10-15"),[f,m]=p.useState("18:00"),[h,x]=p.useState(!1),[y,b]=p.useState(!1),j=n.find(N=>N.id===t);if(!j)return null;const _=n.some(N=>N.exported&&N.scheduled&&N.platforms.length>0),E=N=>{r(w=>w.map(C=>C.id===t?{...C,...N}:C))},S=()=>{x(!0),setTimeout(()=>{E({exported:!0}),x(!1)},2e3)},R=N=>{const w=j.platforms,C=w.includes(N)?w.filter(A=>A!==N):[...w,N];E({platforms:C})},T=()=>{const N=[{date:"2025-10-15",time:"18:00",reason:"Mayor engagement los martes por la tarde"},{date:"2025-10-16",time:"12:00",reason:"Horario de almuerzo óptimo para tu audiencia"},{date:"2025-10-17",time:"20:30",reason:"Peak time para tu demografía"}],w=N[Math.floor(Math.random()*N.length)];d(w.date),m(w.time),l("ai"),E({scheduled:!0})},D=()=>{E({scheduled:!0})};return i.jsxs("div",{className:"h-full bg-canvas flex flex-col",children:[i.jsxs("div",{className:"bg-white border-b border-gray-200 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h1",{className:"text-lg font-medium text-gray-900",children:"Publicación final"}),i.jsx("div",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium",children:"6/6"})]}),i.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:n.map(N=>{const w=N.exported&&N.scheduled&&N.platforms.length>0;return i.jsxs("button",{onClick:()=>e(N.id),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-2 whitespace-nowrap ${t===N.id?"bg-blue-500 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[w?i.jsx($e,{className:"w-3 h-3 text-green-400"}):i.jsx(hr,{className:"w-3 h-3 text-orange-400"}),N.title]},N.id)})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-lg flex items-center justify-center",children:i.jsx(wn,{className:"w-3 h-3 text-white"})}),i.jsx("h2",{className:"font-medium text-gray-900",children:"Exportar archivo"}),j.exported&&i.jsxs("div",{className:"flex items-center gap-1 text-green-600 text-xs ml-auto",children:[i.jsx(or,{className:"w-3 h-3"}),"Exportado"]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"font-medium text-gray-900 text-sm block mb-2",children:"Formato"}),i.jsx("div",{className:"p-3 bg-gray-50 rounded-lg text-gray-700 text-sm",children:"9:16 (vertical) - Optimizado para Stories"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"font-medium text-gray-900 text-sm block mb-2",children:"Calidad"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>o("high"),className:`flex-1 px-3 py-2 rounded-lg text-xs font-medium transition-all ${s==="high"?"bg-blue-100 text-blue-700 border border-blue-300":"bg-gray-100 text-gray-700"}`,children:"Alta (1080x1920)"}),i.jsx("button",{onClick:()=>o("medium"),className:`flex-1 px-3 py-2 rounded-lg text-xs font-medium transition-all ${s==="medium"?"bg-blue-100 text-blue-700 border border-blue-300":"bg-gray-100 text-gray-700"}`,children:"Media (720x1280)"})]})]}),i.jsx("button",{onClick:S,disabled:j.exported||h,className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all text-sm ${j.exported?"bg-green-100 text-green-700 cursor-not-allowed":h?"bg-blue-100 text-blue-700 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:h?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-3 h-3 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Generando..."]}):j.exported?i.jsxs(i.Fragment,{children:[i.jsx(or,{className:"w-3 h-3"}),"Completado"]}):i.jsxs(i.Fragment,{children:[i.jsx(wn,{className:"w-3 h-3"}),"Generar exportación"]})})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-6 h-6 bg-purple-500 rounded-lg flex items-center justify-center",children:i.jsx(Ca,{className:"w-3 h-3 text-white"})}),i.jsx("h2",{className:"font-medium text-gray-900",children:"Programar publicación"}),j.scheduled&&i.jsxs("div",{className:"flex items-center gap-1 text-green-600 text-xs ml-auto",children:[i.jsx(or,{className:"w-3 h-3"}),"Programado"]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"font-medium text-gray-900 text-sm block mb-2",children:"Programar manualmente"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600 block mb-1",children:"Fecha"}),i.jsx("input",{type:"date",value:u,onChange:N=>d(N.target.value),className:"w-full p-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600 block mb-1",children:"Hora"}),i.jsx("input",{type:"time",value:f,onChange:N=>m(N.target.value),className:"w-full p-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})]}),a==="manual"&&i.jsx("button",{onClick:D,className:"mt-3 w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:"Confirmar programación"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-gray-200"})}),i.jsx("div",{className:"relative flex justify-center text-xs",children:i.jsx("span",{className:"px-2 bg-white text-gray-500",children:"o"})})]}),i.jsxs("button",{onClick:T,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all text-sm",children:[i.jsx(Ji,{className:"w-3 h-3"}),"Programar con IA"]}),a==="ai"&&i.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[i.jsxs("div",{className:"text-purple-700 text-xs",children:["📊 IA recomienda: ",i.jsxs("strong",{children:[u," a las ",f]})]}),i.jsx("div",{className:"text-purple-600 text-xs mt-1",children:"Mayor engagement según tu audiencia"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-lg flex items-center justify-center",children:i.jsx($e,{className:"w-3 h-3 text-white"})}),i.jsx("h2",{className:"font-medium text-gray-900",children:"Plataformas"})]}),i.jsx("div",{className:"space-y-2",children:iF.map(N=>{const w=j.platforms.includes(N.id),C=N.icon;return i.jsxs("button",{onClick:()=>R(N.id),className:`flex items-center gap-3 p-3 rounded-lg border-2 transition-all w-full ${w?"border-blue-300 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[i.jsx("div",{className:`w-6 h-6 ${N.color} rounded-lg flex items-center justify-center`,children:i.jsx(C,{className:"w-3 h-3 text-white"})}),i.jsx("span",{className:"font-medium text-gray-900 text-sm",children:N.name}),w&&i.jsx($e,{className:"w-4 h-4 text-blue-500 ml-auto"})]},N.id)})})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[i.jsxs("button",{onClick:()=>b(!y),className:"flex items-center justify-between w-full mb-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-6 h-6 bg-orange-500 rounded-lg flex items-center justify-center",children:i.jsx(Ca,{className:"w-3 h-3 text-white"})}),i.jsx("h2",{className:"font-medium text-gray-900",children:"Vista de agenda"})]}),y?i.jsx(Vo,{className:"w-4 h-4 text-gray-500"}):i.jsx(xn,{className:"w-4 h-4 text-gray-500"})]}),y&&i.jsxs("div",{className:"space-y-2",children:[vb.map((N,w)=>i.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900 text-sm",children:N.story}),i.jsx("div",{className:"text-gray-600 text-xs",children:N.type})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-gray-900 text-xs font-medium",children:N.date}),i.jsxs("div",{className:"text-gray-600 text-xs flex items-center gap-1",children:[i.jsx(Yu,{className:"w-2 h-2"}),N.time]})]})]})},w)),i.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsxs("div",{className:"text-blue-700 text-xs font-medium",children:["📅 ",vb.length," historias programadas esta semana"]}),i.jsx("div",{className:"text-blue-600 text-xs mt-1",children:"Distribución óptima para máximo alcance"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-3 text-sm",children:"Resumen del progreso"}),i.jsx("div",{className:"space-y-2",children:n.map(N=>{const w=[N.exported,N.scheduled,N.platforms.length>0].filter(Boolean).length;return i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs text-gray-700",children:N.title}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-12 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-blue-500 transition-all",style:{width:`${w/3*100}%`}})}),i.jsxs("span",{className:"text-xs text-gray-600",children:[w,"/3"]})]})]},N.id)})})]}),!_&&i.jsx("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-2 text-orange-700",children:[i.jsx(hr,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),i.jsx("span",{className:"text-xs",children:"Completa exportación, programación y plataformas para al menos una historia."})]})})]})}),i.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:[i.jsx(Gt,{className:"w-4 h-4"}),"Volver"]}),i.jsxs("button",{disabled:!_,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${_?"bg-green-500 text-white hover:bg-green-600":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[i.jsx($e,{className:"w-4 h-4"}),"Finalizar"]})]})})]})}function lF(){const[t,e]=p.useState(!1);return p.useEffect(()=>{const n=()=>{e(window.innerWidth<768)};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[]),t?i.jsx(aF,{}):i.jsx(oF,{})}function cF(){const{currentStep:t,currentProject:e}=$g();_e.useEffect(()=>{},[e]);const n=()=>{switch(t){case"briefing":return i.jsx(db,{});case"configuration":return i.jsx(PV,{});case"generation":return i.jsx(LV,{});case"advanced-editing":return i.jsx(JV,{});case"captions":return i.jsx(rF,{});case"publishing":return i.jsx(lF,{});default:return i.jsx(db,{})}};return i.jsx("div",{className:"h-full w-full",children:n()})}const uF=_e.lazy(()=>_n(()=>import("./PostsCreatorModule-B5a755dh.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),dF=_e.lazy(()=>_n(()=>import("./VideosCreatorModule-DacV7AMT.js"),__vite__mapDeps([14,1,2,6,15,7,12,16,17,18,13,11,4,19,5,9]))),hF=_e.lazy(()=>_n(()=>import("./PodcastsCreatorModule-BrOZZ2FX.js"),__vite__mapDeps([20,1,21,6,4,2,17,15,18,9,8,11,16,22,23,24,25,7,19,5,13]))),fF=_e.lazy(()=>_n(()=>import("./CalendarModule-Ba9EgO2R.js"),__vite__mapDeps([26,4,19,5])).then(t=>({default:t.CalendarModule}))),mF=_e.lazy(()=>_n(()=>import("./AssetsLibrary-DfLv-FFO.js"),__vite__mapDeps([27,17,2,4,11,22,23,25,3,10,16]))),pF=_e.lazy(()=>_n(()=>import("./BrandKitModule-eEL0YHIy.js"),__vite__mapDeps([28,6,4,23,13]))),gF=_e.lazy(()=>_n(()=>import("./AnalyticsModule-BPk6GKJM.js"),__vite__mapDeps([29,13,21,30,24,16,22]))),xF=_e.lazy(()=>_n(()=>import("./AutomationModule-D2ADCxP_.js"),__vite__mapDeps([31,9,21,16]))),yF=_e.lazy(()=>_n(()=>import("./CompetitionModule-D7QZOTuj.js"),__vite__mapDeps([32,3,13,30,21,15,7,2,4,16])));function Yn(){return i.jsx("div",{className:"h-full flex items-center justify-center",children:i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"w-8 h-8 mx-auto border-4 border-pink-500 border-t-transparent rounded-full animate-spin"}),i.jsx("p",{className:"text-muted-foreground",children:"Cargando módulo..."})]})})}function bb({error:t,resetError:e}){return i.jsx("div",{className:"h-full flex items-center justify-center",children:i.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[i.jsx("p",{className:"text-red-500 font-medium",children:"Error cargando el módulo"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:t.message}),i.jsxs("div",{className:"space-x-2",children:[i.jsx(te,{onClick:e,variant:"outline",children:"Reintentar"}),i.jsx(te,{onClick:()=>window.location.reload(),children:"Recargar aplicación"})]})]})})}const vF=(t,e,n)=>{if(e)return i.jsx(bb,{error:e,resetError:n});try{switch(t){case"chat":return i.jsx(cb,{});case"stories":return i.jsx(cF,{});case"posts":return i.jsx(p.Suspense,{fallback:i.jsx(Yn,{}),children:i.jsx(uF,{})});case"videos":return i.jsx(p.Suspense,{fallback:i.jsx(Yn,{}),children:i.jsx(dF,{})});case"podcasts":return i.jsx(p.Suspense,{fallback:i.jsx(Yn,{}),children:i.jsx(hF,{})});case"calendar":return i.jsx(p.Suspense,{fallback:i.jsx(Yn,{}),children:i.jsx(fF,{})});case"library":return i.jsx(p.Suspense,{fallback:i.jsx(Yn,{}),children:i.jsx(mF,{})});case"brandkit":return i.jsx(p.Suspense,{fallback:i.jsx(Yn,{}),children:i.jsx(pF,{})});case"analytics":return i.jsx(p.Suspense,{fallback:i.jsx(Yn,{}),children:i.jsx(gF,{})});case"automation":return i.jsx(p.Suspense,{fallback:i.jsx(Yn,{}),children:i.jsx(xF,{})});case"competition":return i.jsx(p.Suspense,{fallback:i.jsx(Yn,{}),children:i.jsx(yF,{})});default:return i.jsx(cb,{})}}catch(r){return console.error("Error rendering module:",r),i.jsx(bb,{error:r,resetError:n})}};function bF({}){const[t,e]=p.useState("chat"),[n,r]=p.useState(null),s=["videos","podcasts"].includes(t),o=()=>r(null),a=l=>{r(null),e(l)};return i.jsx(u4,{children:i.jsx(e9,{children:i.jsx(t9,{children:i.jsx(n9,{children:i.jsx(r9,{children:i.jsx(YL,{children:i.jsxs("div",{className:"flex min-h-screen bg-canvas",children:[i.jsx(ZL,{activeModule:t,onModuleChange:a}),i.jsxs("div",{className:"flex-1 flex flex-col",children:[i.jsx(XL,{activeModule:t,showMasterMenu:s}),i.jsx("main",{className:"flex-1 overflow-hidden",children:vF(t,n,o)})]})]})})})})})})})}function wF(){return i.jsx(bF,{})}D1(document.getElementById("root")).render(i.jsx(wF,{}));export{gm as $,Rv as A,te as B,sb as C,$e as D,ys as E,F2 as F,q2 as G,hr as H,gh as I,NF as J,jv as K,Ee as L,pR as M,H4 as N,ka as O,V9 as P,Up as Q,Xu as R,yV as S,Ot as T,Y2 as U,eI as V,Fo as W,Ms as X,Ji as Y,Ta as Z,Gt as _,Ve as a,gg as a$,xm as a0,ym as a1,At as a2,SF as a3,Jc as a4,KR as a5,qf as a6,Yf as a7,Ca as a8,Z9 as a9,Fa as aA,Mg as aB,La as aC,ue as aD,AR as aE,iR as aF,xn as aG,B2 as aH,G2 as aI,go as aJ,H2 as aK,wn as aL,E4 as aM,BF as aN,Qf as aO,Bp as aP,_v as aQ,$4 as aR,MT as aS,gu as aT,Vo as aU,ia as aV,Rg as aW,NN as aX,SN as aY,wN as aZ,y4 as a_,eV as aa,tV as ab,hR as ac,kv as ad,BR as ae,vR as af,U2 as ag,$F as ah,R4 as ai,LR as aj,_e as ak,es as al,jt as am,bn as an,oe as ao,Q as ap,et as aq,ye as ar,ln as as,IO as at,MO as au,EN as av,_N as aw,Bu as ax,yu as ay,Va as az,zp as b,rl as b0,rV as b1,Ip as b2,kN as b3,F1 as b4,Ja as b5,wb as b6,B4 as b7,TF as b8,AF as b9,Yk as ba,vm as bb,ii as bc,yg as bd,vg as be,ri as bf,Op as bg,Wu as bh,Qa as bi,zu as bj,$P as bk,it as bl,bg as bm,xg as bn,ad as bo,Rs as bp,od as bq,Wa as br,Lp as bs,Vp as bt,EF as bu,K as c,d9 as d,zF as e,Yu as f,or as g,Tv as h,Iv as i,i as j,j4 as k,Q2 as l,Za as m,yS as n,js as o,zt as p,rn as q,p as r,_F as s,z2 as t,Xa as u,ob as v,ib as w,ab as x,Zc as y,rr as z};
