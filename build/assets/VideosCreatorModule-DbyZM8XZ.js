import{c as Ae,u as ue,ah as he,r as a,j as e,b as ls,n as le,B as h,m as Ee,a as $,C as P,a5 as Na,L as R,M as Le,Y as oe,l as ds,D as ie,ai as qs,q as xe,V as de,t as ba,aj as ce,T as je,_ as me,O as Qe,G as Es,Q as Ze,ak as Pe,E as Ps,N as Us,f as De,al as ya,am as wa,an as Fe,ao as fe,ap as Ca,aq as Sa,ar as ka,as as Ea,at as Pa,au as Ta,av as Da,aw as Ma,ax as Xe,ay as Ys,az as Ws,aA as Qs,aB as Zs,aC as Xs,aD as ss,S as Je,U as Aa,h as Be,K as gs,ag as es,aE as ws,aF as Ia,aG as Fa,a3 as $a,a4 as ms,R as ns,g as js,a6 as Js,aH as Va,a8 as ze,a7 as Ra,ad as xs,P as ea,ae as sa,Z as Ts,z as za,aI as Ba,W as La,X as Oa,a9 as _a,aa as Ga,ab as Ka}from"./index-Qk5vTKH0.js";import{S as ge,V as Ds,W as Ha,B as Ms}from"./skeleton-CG66kKsO.js";import{I as ne}from"./input-D9gzZZGo.js";import{S as be}from"./slider-CRT1qsOa.js";import{Y as qa}from"./youtube-IfjtWdBt.js";import{L as Ua}from"./linkedin-X-fQF4Ad.js";import{G as Ya,L as rs}from"./lock-ME-27Wj4.js";import{L as Wa}from"./lightbulb-DtUlExe6.js";import{P as Oe,M as cs}from"./play-SLPhmvib.js";import{C as Qa,P as aa,S as ta,a as ia}from"./skip-forward-DVnUDRzI.js";import{U as Za}from"./users-BJHnXxDj.js";import{S as ra,F as Xa}from"./search-B5htjXhP.js";import{S as ye,a as we,b as Ce,c as Se,d as te}from"./select-DzXUnkCT.js";import{C as la}from"./calendar-tZs6WN5p.js";import{S as os}from"./switch-req8jW8d.js";import"./chevron-left-Dj8W6BM1.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=[["rect",{width:"18",height:"14",x:"3",y:"5",rx:"2",ry:"2",key:"12ruh7"}],["path",{d:"M7 15h4M15 15h2M7 11h2M13 11h4",key:"1ueiar"}]],et=Ae("captions",Ja);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],at=Ae("file-up",st);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],it=Ae("film",tt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],lt=Ae("library",rt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],na=Ae("maximize",nt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Te=Ae("monitor",ct);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],dt=Ae("shuffle",ot);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]],Cs=Ae("tv",mt),xt=[{id:"1",role:"user",content:"Quiero un video narrativo de 3 minutos sobre cómo funciona nuestro servicio de envíos.",timestamp:new Date(Date.now()-12e4)},{id:"2",role:"assistant",content:"Perfecto! Te ayudo a estructurar este video. He identificado: @objetivo: explicar funcionamiento del servicio; @audiencia: clientes nuevos; @tono: educativo; @duracion: 3 minutos; @estructura: introducción, pasos del proceso, conclusión; @cta: visita nuestra web.",timestamp:new Date(Date.now()-6e4)}];function Vs({onNext:t,onPrevious:l}){const{brandKit:n}=ue(),{currentProject:u,updateBriefing:j}=he(),[g,p]=a.useState(xt),[o,y]=a.useState(""),[c,w]=a.useState(!1),[m,I]=a.useState({projectName:"Video Explicativo Envíos",projectDescription:"Video narrativo que explica el proceso de envíos paso a paso",objective:"Explicar el funcionamiento del servicio de envíos de manera clara y educativa",audience:"Clientes nuevos interesados en conocer cómo funciona el servicio",tone:"Educativo y profesional",duration:"3 minutos",structure:"Introducción del problema → Pasos del proceso → Beneficios → Conclusión",cta:"Visita nuestra web para comenzar",styleNotes:'Incluir logo oficial y slogan "Fácil, rápido y seguro"'}),[S,_]=a.useState([]),L=a.useRef(null),T=()=>{L.current?.scrollIntoView({behavior:"smooth"})};a.useEffect(()=>{T()},[g]);const d=x=>{const b={"@objetivo":/@objetivo:\s*([^;@]+)/g,"@audiencia":/@audiencia:\s*([^;@]+)/g,"@tono":/@tono:\s*([^;@]+)/g,"@duracion":/@duracion:\s*([^;@]+)/g,"@estructura":/@estructura:\s*([^;@]+)/g,"@cta":/@cta:\s*([^;@]+)/g},z={};Object.entries(b).forEach(([Y,Z])=>{const H=Z.exec(x);if(H&&H[1]){const D=H[1].trim();switch(Y){case"@objetivo":z.objective=D;break;case"@audiencia":z.audience=D;break;case"@tono":z.tone=D;break;case"@duracion":z.duration=D;break;case"@estructura":z.structure=D;break;case"@cta":z.cta=D;break}}}),Object.keys(z).length>0&&I(Y=>({...Y,...z}))},i=async()=>{if(!o.trim())return;const x={id:Date.now().toString(),role:"user",content:o,timestamp:new Date};p(b=>[...b,x]),y(""),w(!0),setTimeout(()=>{const b=["Entendido. @objetivo: generar engagement; @audiencia: millennials; @tono: dinámico; @duracion: 2 minutos; @estructura: gancho inicial, desarrollo, call to action; @cta: descarga la app.","Perfecto! He actualizado los campos: @objetivo: educar sobre el producto; @audiencia: profesionales 30-50 años; @tono: formal pero accesible; @duracion: 4 minutos; @estructura: problema, solución, casos de uso; @cta: solicita una demo.","Excelente idea! @objetivo: mostrar casos de éxito; @audiencia: empresarios; @tono: inspirador; @duracion: 5 minutos; @estructura: testimonios, resultados, proceso; @cta: contáctanos para más información."],z=b[Math.floor(Math.random()*b.length)],Y={id:(Date.now()+1).toString(),role:"assistant",content:z,timestamp:new Date};p(Z=>[...Z,Y]),d(z),w(!1)},1500)},s=(x,b)=>{I(z=>({...z,[x]:b}))},v=x=>{const b=Array.from(x.target.files||[]);_(z=>[...z,...b])},E=x=>{_(b=>b.filter((z,Y)=>Y!==x))},M=[{label:"Objetivo definido",completed:!!m.objective},{label:"Audiencia definida",completed:!!m.audience},{label:"Duración aproximada indicada",completed:!!m.duration},{label:"Narrativa estructurada",completed:!!m.structure},{label:"CTA claro",completed:!!m.cta},{label:"Recursos subidos",completed:S.length>0||!!m.styleNotes}],V=M.filter(x=>x.completed).length,r=V>=4,A=()=>{j({description:m.projectDescription,script:m.structure,objectives:[m.objective],targetAudience:m.audience}),t?.()};return e.jsx("div",{className:"h-full bg-gradient-to-br from-blue-50 to-indigo-50",children:e.jsxs("div",{className:"h-full p-4 flex gap-4 max-w-none overflow-hidden",children:[e.jsxs("div",{className:"w-[480px] flex flex-col bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ls,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Chat Maestro"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Briefing de Video con Flow"})]})]})}),e.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-4 min-h-0",children:[g.map(x=>e.jsx("div",{className:`flex ${x.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${x.role==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("p",{className:"text-sm",children:x.content}),e.jsx("p",{className:`text-xs mt-1 ${x.role==="user"?"text-blue-100":"text-gray-500"}`,children:x.timestamp.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]})},x.id)),c&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-100 text-gray-900 p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Asistente escribiendo..."})]})})}),e.jsx("div",{ref:L})]}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(le,{value:o,onChange:x=>y(x.target.value),placeholder:"Escribe una instrucción o idea…",className:"min-h-[80px] resize-none",onKeyDown:x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),i())}}),e.jsxs(h,{onClick:i,disabled:!o.trim()||c,className:"w-full",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Enviar al asistente"]})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col bg-white rounded-lg shadow-sm border min-w-0",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Nuevo Video con Flow"}),e.jsx($,{variant:"secondary",children:"Paso 1 de 7"})]})}),e.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-6",children:[e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[e.jsx(Na,{className:"w-4 h-4"}),"Proyecto"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"projectName",children:"Nombre del proyecto"}),e.jsx(ne,{id:"projectName",value:m.projectName,onChange:x=>s("projectName",x.target.value),placeholder:"Demo Envíos Octubre"})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"projectDescription",children:"Descripción breve"}),e.jsx(le,{id:"projectDescription",value:m.projectDescription,onChange:x=>s("projectDescription",x.target.value),placeholder:"Ej: Explicar a clientes nuevos cómo usar la plataforma",className:"min-h-[60px]"})]})]})]})}),e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4"}),"Estrategia narrativa"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"objective",className:"flex items-center gap-2",children:["Objetivo",e.jsxs($,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:[e.jsx(oe,{className:"w-3 h-3 mr-1"}),"AI"]})]}),e.jsx(le,{id:"objective",value:m.objective,onChange:x=>s("objective",x.target.value),placeholder:"¿Qué quieres lograr con el video?",className:"min-h-[60px]"})]}),e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"audience",className:"flex items-center gap-2",children:["Audiencia",e.jsxs($,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:[e.jsx(oe,{className:"w-3 h-3 mr-1"}),"AI"]})]}),e.jsx(le,{id:"audience",value:m.audience,onChange:x=>s("audience",x.target.value),placeholder:"Ej: Clientes en USA de 25–45 años",className:"min-h-[60px]"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"tone",className:"flex items-center gap-2",children:["Tono/Estilo",e.jsxs($,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:[e.jsx(oe,{className:"w-3 h-3 mr-1"}),"AI"]})]}),e.jsx(ne,{id:"tone",value:m.tone,onChange:x=>s("tone",x.target.value),placeholder:"Educativo, humorístico, formal…"})]}),e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"duration",className:"flex items-center gap-2",children:["Duración estimada",e.jsxs($,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:[e.jsx(oe,{className:"w-3 h-3 mr-1"}),"AI"]})]}),e.jsx(ne,{id:"duration",value:m.duration,onChange:x=>s("duration",x.target.value),placeholder:"Ej: 3 minutos"})]})]}),e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"structure",className:"flex items-center gap-2",children:["Estructura narrativa",e.jsxs($,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:[e.jsx(oe,{className:"w-3 h-3 mr-1"}),"AI"]})]}),e.jsx(le,{id:"structure",value:m.structure,onChange:x=>s("structure",x.target.value),placeholder:"Ej: introducción, desarrollo, conclusión",className:"min-h-[60px]"})]}),e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"cta",className:"flex items-center gap-2",children:["CTA principal",e.jsxs($,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:[e.jsx(oe,{className:"w-3 h-3 mr-1"}),"AI"]})]}),e.jsx(ne,{id:"cta",value:m.cta,onChange:x=>s("cta",x.target.value),placeholder:"Ej: Visita nuestra web"})]})]})]})}),e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[e.jsx(at,{className:"w-4 h-4"}),"Recursos obligatorios"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"fileUpload",children:"Subir imágenes/videos de referencia"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"file",id:"fileUpload",multiple:!0,accept:".png,.jpg,.jpeg,.mp4,.mov",onChange:v,className:"hidden"}),e.jsxs(h,{variant:"outline",onClick:()=>document.getElementById("fileUpload")?.click(),className:"w-full",children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),"Seleccionar archivos (.png, .jpg, .mp4)"]}),S.length>0&&e.jsx("div",{className:"mt-3 space-y-2",children:S.map((x,b)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:x.name}),e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>E(b),className:"text-red-600 hover:text-red-700",children:"✕"})]},b))})]})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"styleNotes",children:"Notas de estilo / slogans obligatorios"}),e.jsx(le,{id:"styleNotes",value:m.styleNotes,onChange:x=>s("styleNotes",x.target.value),placeholder:"Incluye el logo oficial y el slogan 'Fácil, rápido y seguro'",className:"min-h-[60px]"})]})]})]})}),e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),"Checklist (",V,"/6)"]}),e.jsx("div",{className:"space-y-2",children:M.map((x,b)=>e.jsxs("div",{className:"flex items-center gap-3",children:[x.completed?e.jsx(ie,{className:"w-4 h-4 text-green-600"}):e.jsx(qs,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:`text-sm ${x.completed?"text-green-800":"text-gray-600"}`,children:x.label})]},b))}),V<4&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"Completa al menos 4 elementos para continuar al siguiente paso."})})]})})]}),e.jsx("div",{className:"p-4 border-t",children:e.jsx("div",{className:"flex justify-end",children:e.jsxs(h,{onClick:A,disabled:!r,className:"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 disabled:opacity-50",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Siguiente: Configuración"]})})})]})]})})}const fs=[{id:"youtube",label:"YouTube",icon:qa,aspectRatio:"16:9",dimensions:{width:200,height:112}},{id:"tiktok",label:"TikTok",icon:de,aspectRatio:"9:16",dimensions:{width:112,height:200}},{id:"instagram",label:"Instagram Reels",icon:ba,aspectRatio:"9:16",dimensions:{width:112,height:200}},{id:"linkedin",label:"LinkedIn",icon:Ua,aspectRatio:"16:9",dimensions:{width:200,height:112}}],vs=[{id:"cinematic",label:"Cinemático",description:"Transiciones suaves, colores ricos, composición cuidada"},{id:"educational",label:"Educativo",description:"Elementos gráficos claros, tipografía legible, estructura ordenada"},{id:"inspirational",label:"Inspirador",description:"Imágenes motivacionales, música emotiva, mensajes positivos"},{id:"corporate",label:"Corporativo",description:"Estilo profesional, colores de marca, presentación formal"},{id:"humorous",label:"Humorístico",description:"Elementos divertidos, timing cómico, tono relajado"}];function ut({onNext:t,onPrevious:l}){const{brandKit:n}=ue(),{currentProject:u,updateBriefing:j}=he(),[g,p]=a.useState("youtube"),[o,y]=a.useState([3]),[c,w]=a.useState("educational"),[m,I]=a.useState([1]),S=fs.find(s=>s.id===g)||fs[0],_=vs.find(s=>s.id===c)||vs[0],L=s=>{p(s)},T=s=>{w(s)},d=()=>{j({platform:g,duration:{target:o[0]*60,min:Math.max(1,o[0]-1)*60,max:(o[0]+1)*60,label:`${o[0]} min`},style:c}),t?.()},i=g&&c&&o[0]>0;return e.jsx("div",{className:"h-full bg-gradient-to-br from-blue-50 to-indigo-50",children:e.jsx("div",{className:"h-full overflow-auto",children:e.jsxs("div",{className:"max-w-4xl mx-auto p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Configuración de Video con Flow"}),e.jsx($,{variant:"secondary",className:"text-sm px-3 py-1",children:"Paso 2 de 7"})]}),e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(Te,{className:"w-5 h-5"}),"Plataforma & Formato"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(R,{className:"text-sm font-medium mb-3 block",children:"Plataforma"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:fs.map(s=>{const v=s.icon,E=g===s.id;return e.jsxs("button",{onClick:()=>L(s.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg border-2 transition-all ${E?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:s.label})]},s.id)})})]}),e.jsxs("div",{children:[e.jsx(R,{className:"text-sm font-medium",children:"Relación de aspecto"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg border",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[S.aspectRatio," - Dependiente de la plataforma elegida"]})})]}),e.jsxs("div",{children:[e.jsxs(R,{className:"text-sm font-medium mb-2 block",children:["Preview ",S.aspectRatio]}),e.jsx("div",{className:"flex items-center justify-center p-6 bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg border",children:e.jsx("div",{className:"bg-gradient-to-br from-gray-200 to-gray-300 rounded-lg flex items-center justify-center border-2 border-dashed border-gray-400 shadow-sm",style:{width:S.dimensions.width,height:S.dimensions.height},children:e.jsxs("div",{className:"text-center text-gray-500 text-sm",children:[e.jsx(de,{className:"w-6 h-6 mx-auto mb-1"}),e.jsx("div",{className:"font-medium",children:S.aspectRatio}),e.jsxs("div",{className:"text-xs text-gray-400",children:[S.dimensions.width,"×",S.dimensions.height,"px"]})]})})})]})]})]})}),e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"Duración"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(R,{className:"text-sm font-medium mb-3 block",children:["Duración exacta (minutos): ",o[0]," min"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(be,{value:o,onValueChange:y,min:1,max:10,step:.5,className:"w-full"})}),e.jsx(ne,{type:"number",value:o[0],onChange:s=>y([Math.max(1,Math.min(10,parseFloat(s.target.value)||1))]),min:1,max:10,step:.5,className:"w-20 text-center"})]})]}),e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsx("p",{className:"text-sm text-blue-800",children:"💡 La IA puede sugerir cortes para ajustarse a la duración elegida."})})]})]})}),e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5"}),"Estilo visual"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-wrap gap-3",children:vs.map(s=>{const v=c===s.id;return e.jsx("button",{onClick:()=>T(s.id),className:`px-4 py-2 rounded-lg border-2 transition-all text-sm font-medium ${v?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 bg-white text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:s.label},s.id)})}),_&&e.jsx("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-200",children:e.jsxs("p",{className:"text-sm text-purple-800",children:[e.jsxs("strong",{children:[_.label,":"]})," ",_.description]})}),e.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:e.jsx("p",{className:"text-sm text-green-800",children:"✨ Cada estilo aplicará colores, fuentes y ritmos visuales basados en BrandKit."})})]})]})}),e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Cantidad de versiones"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(R,{className:"text-sm font-medium mb-3 block",children:["Número de variaciones narrativas: ",m[0]]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(be,{value:m,onValueChange:I,min:1,max:3,step:1,className:"w-full"})}),e.jsx(ne,{type:"number",value:m[0],onChange:s=>I([Math.max(1,Math.min(3,parseInt(s.target.value)||1))]),min:1,max:3,className:"w-20 text-center"})]})]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[m[0]===1&&"Una versión única optimizada para la plataforma seleccionada.",m[0]===2&&"Dos variaciones con enfoques narrativos diferentes.",m[0]===3&&"Tres versiones con estructuras y tonos diversos para máxima flexibilidad."]})})]})]})}),e.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(je,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Validación BrandKit:"})," Todo el contenido se validará contra BrandKit antes de exportar."]}),n&&e.jsxs("p",{className:"text-xs text-yellow-700 mt-1",children:['Se aplicarán automáticamente: colores primarios, tipografías, logos y tono de voz de "',n.meta.brandName,'".']})]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs(h,{variant:"ghost",onClick:l,className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"}),"Volver"]}),e.jsxs(h,{onClick:d,disabled:!i,className:"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 disabled:opacity-50",children:["Siguiente: Storyboard / Flow narrativo",e.jsx(xe,{className:"w-4 h-4 ml-2"})]})]}),e.jsx("div",{className:"hidden",children:e.jsxs(P,{className:"p-4 bg-gray-50",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Configuración actual:"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:["Plataforma: ",S.label," (",S.aspectRatio,")"]}),e.jsxs("p",{children:["Duración: ",o[0]," minutos"]}),e.jsxs("p",{children:["Estilo: ",_.label]}),e.jsxs("p",{children:["Versiones: ",m[0]]})]})]})})]})})})}const ht=[{id:"1",title:"Escena 1 — Introducción",description:"Presentamos el problema: clientes buscan envíos rápidos y económicos.",script:"¿Cansado de esperar semanas para enviar tus paquetes?",visualSuggestions:["Cliente en casa con paquete","Pantalla móvil mostrando app de envíos"],order:1},{id:"2",title:"Escena 2 — Desarrollo",description:"Mostramos cómo funciona el servicio paso a paso.",script:"Con nuestra app, envía en 3 simples pasos.",visualSuggestions:["Animación de app móvil","Cliente recibiendo confirmación"],order:2},{id:"3",title:"Escena 3 — Conclusión",description:"Cerramos con el beneficio clave y CTA.",script:"Envíos rápidos, seguros y fáciles. ¡Descarga la app hoy mismo!",visualSuggestions:["Logo de la empresa","CTA en pantalla"],order:3}];function pt({onNext:t,onPrevious:l}){const{brandKit:n}=ue(),{currentProject:u,updateBriefing:j,setCurrentProject:g}=he(),[p,o]=a.useState(ht),[y,c]=a.useState(null),w=(i,s,v)=>{o(E=>E.map(M=>M.id===i?{...M,[s]:v}:M))},m=async i=>{c(i),setTimeout(()=>{const s=[{description:"Establecemos el contexto emocional del problema de envíos.",script:"¿Te has sentido frustrado esperando por tus envíos?",visualSuggestions:["Persona mirando el reloj","Paquetes acumulándose"]},{description:"Mostramos los beneficios únicos de nuestro servicio.",script:"Imagina recibir tus paquetes en tiempo récord.",visualSuggestions:["Cronómetro en pantalla","Cliente sonriendo al recibir paquete"]},{description:"Presentamos testimonios y casos de éxito reales.",script:"Miles de clientes ya confían en nosotros para sus envíos.",visualSuggestions:["Testimonios en pantalla","Estadísticas de satisfacción"]}],v=s[Math.floor(Math.random()*s.length)];o(E=>E.map(M=>M.id===i?{...M,description:v.description,script:v.script,visualSuggestions:v.visualSuggestions}:M)),c(null)},2e3)},I=i=>{const s=p.find(E=>E.id===i);if(!s)return;const v={...s,id:Date.now().toString(),title:`${s.title} (Copia)`,order:p.length+1};o(E=>[...E,v])},S=i=>{p.length<=3||o(s=>s.filter(v=>v.id!==i))},_=()=>{const i={id:Date.now().toString(),title:`Escena ${p.length+1} — Nueva escena`,description:"Describe qué sucede en esta escena...",script:"Guión para esta escena...",visualSuggestions:["Elemento visual 1","Elemento visual 2"],order:p.length+1};o(s=>[...s,i])},T=(()=>{const i=p.length>=3,s=p.every(v=>v.description.trim()&&v.script.trim()&&v.visualSuggestions.length>0);return i&&s})(),d=()=>{const i=p.map(s=>({id:s.id,projectId:u?.id||"",order:s.order,duration:30,title:s.title,description:s.description,thumbnail:"",layers:[],transitions:[],brandElements:{colors:[],fonts:[],logos:[],animations:[],guidelines:[]},metadata:{aiGenerated:!0,tags:[],complexity:"medium",script:s.script,visualSuggestions:s.visualSuggestions},createdAt:new Date,isSelected:!1}));u&&g&&g({...u,scenes:i,updatedAt:new Date}),t?.()};return e.jsx("div",{className:"h-full bg-gradient-to-br from-blue-50 to-indigo-50",children:e.jsx("div",{className:"h-full overflow-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Storyboard narrativo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx($,{variant:"secondary",className:"text-sm px-3 py-1",children:"Paso 3 de 7"}),e.jsxs(h,{variant:"ghost",onClick:l,className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"}),"Volver"]}),e.jsxs(h,{onClick:d,disabled:!T,className:"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 disabled:opacity-50",children:["Siguiente: Generación inicial",e.jsx(xe,{className:"w-4 h-4 ml-2"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[p.map((i,s)=>e.jsxs(P,{className:"p-4 relative group hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ya,{className:"w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity cursor-move"}),e.jsx("h3",{className:"font-medium text-sm text-gray-900",children:i.title})]}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsx($,{variant:"outline",className:"text-xs",children:s+1})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(R,{className:"text-xs font-medium text-gray-700",children:"Descripción narrativa"}),e.jsx(le,{value:i.description,onChange:v=>w(i.id,"description",v.target.value),className:"mt-1 text-sm min-h-[60px] resize-none",placeholder:"Describe qué sucede en esta escena..."})]}),e.jsxs("div",{children:[e.jsx(R,{className:"text-xs font-medium text-gray-700",children:"Guión propuesto"}),e.jsx(le,{value:i.script,onChange:v=>w(i.id,"script",v.target.value),className:"mt-1 text-sm min-h-[60px] resize-none",placeholder:"Diálogo o narración para esta escena..."})]}),e.jsxs("div",{children:[e.jsx(R,{className:"text-xs font-medium text-gray-700 mb-2 block",children:"Visual sugerido"}),e.jsxs("div",{className:"space-y-2",children:[i.visualSuggestions.map((v,E)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs group",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full flex-shrink-0"}),e.jsx("input",{value:v,onChange:M=>{const V=[...i.visualSuggestions];V[E]=M.target.value,w(i.id,"visualSuggestions",V)},className:"flex-1 bg-transparent border-none outline-none text-gray-600 placeholder-gray-400",placeholder:"Elemento visual..."}),i.visualSuggestions.length>1&&e.jsx("button",{onClick:()=>{const M=i.visualSuggestions.filter((V,r)=>r!==E);w(i.id,"visualSuggestions",M)},className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700 transition-opacity",children:"×"})]},E)),e.jsxs("button",{onClick:()=>{if(i.visualSuggestions.length<5){const v=[...i.visualSuggestions,"Nuevo elemento visual"];w(i.id,"visualSuggestions",v)}},className:"text-xs text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[e.jsx(Wa,{className:"w-3 h-3"}),"Agregar visual"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-3 border-t border-gray-100",children:[e.jsxs(h,{variant:"ghost",size:"sm",onClick:()=>m(i.id),disabled:y===i.id,className:"text-xs h-7 px-2",children:[y===i.id?e.jsx("div",{className:"w-3 h-3 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}):e.jsx(oe,{className:"w-3 h-3"}),e.jsx("span",{className:"ml-1",children:"Regenerar IA"})]}),e.jsxs(h,{variant:"ghost",size:"sm",onClick:()=>I(i.id),className:"text-xs h-7 px-2",children:[e.jsx(Qe,{className:"w-3 h-3"}),e.jsx("span",{className:"ml-1",children:"Duplicar"})]}),e.jsxs(h,{variant:"ghost",size:"sm",onClick:()=>S(i.id),disabled:p.length<=3,className:"text-xs h-7 px-2 text-red-600 hover:text-red-700 disabled:opacity-50",children:[e.jsx(Es,{className:"w-3 h-3"}),e.jsx("span",{className:"ml-1",children:"Eliminar"})]})]}),y===i.id&&e.jsx("div",{className:"absolute inset-0 bg-white/80 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Regenerando con IA..."})]})})]},i.id)),e.jsx(P,{className:"p-4 border-2 border-dashed border-gray-300 hover:border-blue-400 transition-colors cursor-pointer group",children:e.jsxs("button",{onClick:_,className:"w-full h-full min-h-[200px] flex flex-col items-center justify-center text-gray-500 group-hover:text-blue-600 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 border-2 border-current rounded-full flex items-center justify-center mb-3",children:e.jsx(Oe,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-sm font-medium",children:"Agregar nueva escena"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Expande tu narrativa"})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(je,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Validación narrativa:"})," el storyboard debe tener al menos 3 escenas (introducción, desarrollo, conclusión)."]}),e.jsxs("div",{className:"mt-2 space-y-1 text-xs text-yellow-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${p.length>=3?"bg-green-500":"bg-gray-300"}`}),e.jsxs("span",{children:["Mínimo 3 escenas (",p.length,"/3)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${p.every(i=>i.description.trim()&&i.script.trim())?"bg-green-500":"bg-gray-300"}`}),e.jsx("span",{children:"Todas las escenas con contenido completo"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${p.every(i=>i.visualSuggestions.length>0)?"bg-green-500":"bg-gray-300"}`}),e.jsx("span",{children:"Elementos visuales definidos"})]})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 bg-white p-4 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qa,{className:"w-4 h-4"}),e.jsxs("span",{children:[p.length," escenas"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsxs("span",{children:["~",Math.round(p.reduce((i,s)=>i+s.script.length,0)/100)," palabras"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Za,{className:"w-4 h-4"}),e.jsxs("span",{children:["~",p.length*30,"s duración estimada"]})]})]}),n&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx($,{className:"bg-green-100 text-green-800 text-xs",children:"BrandKit aplicado"})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs(h,{variant:"ghost",onClick:l,className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"}),"Volver"]}),e.jsxs(h,{onClick:d,disabled:!T,className:"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 disabled:opacity-50",children:["Siguiente: Generación inicial",e.jsx(xe,{className:"w-4 h-4 ml-2"})]})]})]})]})})})}const ts=["#2563eb","#7c3aed","#dc2626","#059669","#d97706","#db2777"];function gt({onNext:t,onPrevious:l}){const{brandKit:n}=ue(),{currentProject:u,updateBriefing:j}=he(),[g,p]=a.useState(!0),[o,y]=a.useState([]),[c,w]=a.useState(new Set),[m,I]=a.useState(new Set),S=Pe.useMemo(()=>u?.scenes||[],[u?.scenes]);a.useEffect(()=>{console.log("GenerationStepVideoFlow - Debug Info:",{currentProject:!!u,scenes:S.length,generatedClips:o.length})},[S.length,o.length]),a.useEffect(()=>{let r=!0;return(async()=>{if(S.length===0||o.length>0){p(!1);return}if(p(!0),await new Promise(b=>setTimeout(b,3e3)),!r)return;const x=S.map((b,z)=>({id:`clip_${b.id}_${z}`,sceneId:b.id,title:b.title||`Escena ${z+1}`,script:b.metadata?.script||b.description||`Guión para la escena ${z+1}. Esta es una propuesta generada automáticamente por IA basada en el contenido del storyboard.`,duration:b.duration||30,previewColor:n?.colors?.primary||ts[z%ts.length],isSelected:!1,isGenerating:!1,thumbnailUrl:`https://picsum.photos/240/135?random=${b.id}`}));r&&(y(x),p(!1))})(),()=>{r=!1}},[S.length,n?.colors?.primary]);const _=r=>{y(A=>A.map(x=>x.id===r?{...x,isSelected:!x.isSelected}:x))},L=async r=>{if(!(!o.find(x=>x.id===r)||c.has(r))){w(x=>new Set(x).add(r)),y(x=>x.map(b=>b.id===r?{...b,isGenerating:!0}:b));try{await new Promise(z=>setTimeout(z,2500));const x=[{previewColor:"#3b82f6",script:"Versión alternativa del guión con enfoque diferente..."},{previewColor:"#8b5cf6",script:"Nueva perspectiva narrativa para mayor impacto..."},{previewColor:"#10b981",script:"Enfoque más dinámico y energético para esta escena..."},{previewColor:"#f59e0b",script:"Versión optimizada para engagement y retención..."}],b=x[Math.floor(Math.random()*x.length)];y(z=>z.map(Y=>Y.id===r?{...Y,isGenerating:!1,previewColor:b.previewColor,script:b.script,isSelected:!1,thumbnailUrl:`https://picsum.photos/240/135?random=${Y.sceneId}&new=${Date.now()}`}:Y))}catch(x){console.error("Error regenerating clip:",x),y(b=>b.map(z=>z.id===r?{...z,isGenerating:!1}:z))}finally{w(x=>{const b=new Set(x);return b.delete(r),b})}}},T=r=>{const A=o.find(b=>b.id===r);!A||o.filter(b=>b.sceneId===A.sceneId).length<=1||y(b=>b.filter(z=>z.id!==r))},d=async r=>{const A=S.find(z=>z.id===r);if(!A||m.has(r))return;const x=`clip_${r}_additional_${Date.now()}`;I(z=>new Set(z).add(r));const b={id:x,sceneId:r,title:A.title||"Escena adicional",script:"Generando nuevo guión alternativo...",duration:A.duration||30,previewColor:ts[Math.floor(Math.random()*ts.length)],isSelected:!1,isGenerating:!0,thumbnailUrl:`https://picsum.photos/240/135?random=${r}&new=${Date.now()}`};y(z=>[...z,b]);try{await new Promise(Z=>setTimeout(Z,2e3));const z=["Enfoque alternativo con mayor impacto emocional para esta escena...","Versión más dinámica con ritmo acelerado...","Perspectiva diferente que enfatiza los beneficios clave...","Variación con mayor engagement y llamada a la acción..."],Y=z[Math.floor(Math.random()*z.length)];y(Z=>Z.map(H=>H.id===x?{...H,isGenerating:!1,script:Y}:H))}catch(z){console.error("Error generating additional clip:",z),y(Y=>Y.filter(Z=>Z.id!==x))}finally{I(z=>{const Y=new Set(z);return Y.delete(r),Y})}},s=[...new Set(S.map(A=>A.id))].every(A=>o.some(x=>x.sceneId===A&&x.isSelected)),v=()=>{const r=o.filter(A=>A.isSelected);j({selectedClips:r.map(A=>({id:A.id,sceneId:A.sceneId,title:A.title,script:A.script,duration:A.duration,visualPreview:A.previewColor,isGenerated:!0}))}),t?.()},E=Pe.useCallback(r=>o.filter(A=>A.sceneId===r),[o]),M=Pe.useMemo(()=>o.filter(r=>r.isSelected).length,[o]),V=Pe.useMemo(()=>o.filter(r=>r.isSelected).reduce((r,A)=>r+A.duration,0),[o]);return!g&&S.length===0?e.jsx("div",{className:"h-full bg-gradient-to-br from-blue-50 to-indigo-50",children:e.jsx("div",{className:"h-full overflow-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Generación inicial de clips"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx($,{variant:"secondary",className:"text-sm px-3 py-1",children:"Paso 4 de 7"}),e.jsxs(h,{variant:"ghost",onClick:l,className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"}),"Volver"]}),e.jsxs(h,{disabled:!0,className:"bg-gradient-to-r from-blue-500 to-indigo-500 opacity-50",children:["Siguiente: Edición avanzada",e.jsx(xe,{className:"w-4 h-4 ml-2"})]})]})]}),e.jsx(P,{className:"p-8",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(je,{className:"w-8 h-8 text-yellow-600"})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"No hay escenas disponibles"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Debes completar el paso del storyboard antes de generar clips."})]}),e.jsxs(h,{variant:"outline",onClick:l,className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"}),"Volver al Storyboard"]})]})})]})})}):g?e.jsx("div",{className:"h-full bg-gradient-to-br from-blue-50 to-indigo-50",children:e.jsx("div",{className:"h-full overflow-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Generación inicial de clips"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx($,{variant:"secondary",className:"text-sm px-3 py-1",children:"Paso 4 de 7"}),e.jsxs(h,{variant:"ghost",onClick:l,className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"}),"Volver"]}),e.jsxs(h,{disabled:!0,className:"bg-gradient-to-r from-blue-500 to-indigo-500 opacity-50",children:["Siguiente: Edición avanzada",e.jsx(xe,{className:"w-4 h-4 ml-2"})]})]})]}),e.jsx(P,{className:"p-8",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Generando animatics con IA…"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Creando propuestas visuales para cada escena del storyboard (",S.length," escenas)"]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mt-8",children:Array.from({length:Math.min(6,S.length||3)},(r,A)=>e.jsxs(P,{className:"p-4 space-y-4",children:[e.jsx(ge,{className:"h-4 w-3/4"}),e.jsx(ge,{className:"h-32 w-full rounded-lg"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ge,{className:"h-3 w-full"}),e.jsx(ge,{className:"h-3 w-2/3"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ge,{className:"h-8 w-20"}),e.jsx(ge,{className:"h-8 w-24"}),e.jsx(ge,{className:"h-8 w-20"})]})]},A))})]})})]})})}):e.jsx("div",{className:"h-full bg-gradient-to-br from-blue-50 to-indigo-50",children:e.jsx("div",{className:"h-full overflow-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Generación inicial de clips"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx($,{variant:"secondary",className:"text-sm px-3 py-1",children:"Paso 4 de 7"}),e.jsxs(h,{variant:"ghost",onClick:l,className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"}),"Volver"]}),e.jsxs(h,{onClick:v,disabled:!s,className:"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 disabled:opacity-50",children:["Siguiente: Edición avanzada",e.jsx(xe,{className:"w-4 h-4 ml-2"})]})]})]}),e.jsx("div",{className:"space-y-8",children:S.map((r,A)=>{const x=E(r.id);return x.length===0?null:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:r.title||`Escena ${A+1}`}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs($,{variant:"outline",className:"text-xs",children:[x.length," variación",x.length!==1?"es":""]}),x.length<3&&e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>d(r.id),disabled:m.has(r.id),className:"text-xs h-7 px-2",children:[m.has(r.id)?e.jsx("div",{className:"w-3 h-3 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mr-1"}):e.jsx(oe,{className:"w-3 h-3 mr-1"}),m.has(r.id)?"Generando...":"Más opciones"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:x.map((b,z)=>e.jsxs(P,{className:"p-4 relative group hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("h3",{className:"font-medium text-sm text-gray-900",children:b.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs($,{variant:"outline",className:"text-xs",children:[b.duration,"s"]}),b.isSelected&&e.jsx($,{className:"bg-green-100 text-green-800 text-xs",children:"Seleccionado"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2 group",style:{width:"100%",height:"135px",borderColor:b.previewColor+"40"},children:[b.thumbnailUrl?e.jsx("img",{src:b.thumbnailUrl,alt:`Preview de ${b.title}`,className:"w-full h-full object-cover",style:{filter:`hue-rotate(${Math.random()*360}deg)`},onError:Y=>{const Z=Y.target;Z.style.display="none"}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{backgroundColor:b.previewColor+"20"},children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-8 h-8 rounded mx-auto flex items-center justify-center",style:{backgroundColor:b.previewColor},children:e.jsx(de,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("div",{children:"Preview animatic 16:9"}),e.jsx("div",{className:"text-gray-500",children:"240×135px"})]})]})}),e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundColor:b.previewColor}}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:e.jsx("button",{className:"opacity-0 group-hover:opacity-100 transition-opacity bg-white/90 backdrop-blur-sm rounded-full p-3 shadow-lg",onClick:()=>{console.log(`Playing preview for clip: ${b.id}`)},children:e.jsx(Oe,{className:"w-5 h-5 text-gray-700"})})}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx($,{className:"text-xs px-2 py-1 bg-white/80 backdrop-blur-sm text-gray-700",children:"Preview IA"})})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-xs text-gray-600 leading-relaxed",children:[e.jsx("strong",{children:"Guión:"})," ",b.script]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ps,{id:`clip-${b.id}`,checked:b.isSelected,onCheckedChange:()=>_(b.id),className:"data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600"}),e.jsx("label",{htmlFor:`clip-${b.id}`,className:"text-xs font-medium cursor-pointer",children:"Seleccionar"})]}),e.jsxs(h,{variant:"ghost",size:"sm",onClick:()=>L(b.id),disabled:b.isGenerating||c.has(b.id),className:"text-xs h-7 px-2",children:[b.isGenerating||c.has(b.id)?e.jsx("div",{className:"w-3 h-3 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}):e.jsx(oe,{className:"w-3 h-3"}),e.jsx("span",{className:"ml-1",children:"Regenerar IA"})]}),e.jsxs(h,{variant:"ghost",size:"sm",onClick:()=>T(b.id),disabled:E(b.sceneId).length<=1,className:"text-xs h-7 px-2 text-red-600 hover:text-red-700 disabled:opacity-50",children:[e.jsx(Es,{className:"w-3 h-3"}),e.jsx("span",{className:"ml-1",children:"Descartar"})]})]}),(b.isGenerating||c.has(b.id))&&e.jsx("div",{className:"absolute inset-0 bg-white/80 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Regenerando..."})]})})]},b.id))})]},r.id)})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 bg-white p-4 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4"}),e.jsxs("span",{children:[o.length," clips generados"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Us,{className:"w-4 h-4"}),e.jsxs("span",{children:[M," seleccionados"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsxs("span",{children:["~",V,"s duración total"]})]})]}),n&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx($,{className:"bg-green-100 text-green-800 text-xs",children:"Colores BrandKit aplicados"})})]}),e.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(je,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Validación:"})," Debes seleccionar al menos una propuesta por escena para continuar."]}),e.jsx("div",{className:"mt-2 space-y-1 text-xs text-yellow-700",children:S.map(r=>{const A=o.some(x=>x.sceneId===r.id&&x.isSelected);return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${A?"bg-green-500":"bg-gray-300"}`}),e.jsx("span",{children:r.title||`Escena ${S.findIndex(x=>x.id===r.id)+1}`}),A&&e.jsx("span",{className:"text-green-600",children:"(✓ Seleccionado)"})]},r.id)})})]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs(h,{variant:"ghost",onClick:l,className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"}),"Volver"]}),e.jsxs(h,{onClick:v,disabled:!s,className:"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 disabled:opacity-50",children:["Siguiente: Edición avanzada",e.jsx(xe,{className:"w-4 h-4 ml-2"})]})]})]})]})})})}var us="Collapsible",[jt]=wa(us),[ft,As]=jt(us),ca=a.forwardRef((t,l)=>{const{__scopeCollapsible:n,open:u,defaultOpen:j,disabled:g,onOpenChange:p,...o}=t,[y,c]=ya({prop:u,defaultProp:j??!1,onChange:p,caller:us});return e.jsx(ft,{scope:n,disabled:g,contentId:Fe(),open:y,onOpenToggle:a.useCallback(()=>c(w=>!w),[c]),children:e.jsx(fe.div,{"data-state":Fs(y),"data-disabled":g?"":void 0,...o,ref:l})})});ca.displayName=us;var oa="CollapsibleTrigger",da=a.forwardRef((t,l)=>{const{__scopeCollapsible:n,...u}=t,j=As(oa,n);return e.jsx(fe.button,{type:"button","aria-controls":j.contentId,"aria-expanded":j.open||!1,"data-state":Fs(j.open),"data-disabled":j.disabled?"":void 0,disabled:j.disabled,...u,ref:l,onClick:Ca(t.onClick,j.onOpenToggle)})});da.displayName=oa;var Is="CollapsibleContent",ma=a.forwardRef((t,l)=>{const{forceMount:n,...u}=t,j=As(Is,t.__scopeCollapsible);return e.jsx(Sa,{present:n||j.open,children:({present:g})=>e.jsx(vt,{...u,ref:l,present:g})})});ma.displayName=Is;var vt=a.forwardRef((t,l)=>{const{__scopeCollapsible:n,present:u,children:j,...g}=t,p=As(Is,n),[o,y]=a.useState(u),c=a.useRef(null),w=ka(l,c),m=a.useRef(0),I=m.current,S=a.useRef(0),_=S.current,L=p.open||o,T=a.useRef(L),d=a.useRef(void 0);return a.useEffect(()=>{const i=requestAnimationFrame(()=>T.current=!1);return()=>cancelAnimationFrame(i)},[]),Ea(()=>{const i=c.current;if(i){d.current=d.current||{transitionDuration:i.style.transitionDuration,animationName:i.style.animationName},i.style.transitionDuration="0s",i.style.animationName="none";const s=i.getBoundingClientRect();m.current=s.height,S.current=s.width,T.current||(i.style.transitionDuration=d.current.transitionDuration,i.style.animationName=d.current.animationName),y(u)}},[p.open,u]),e.jsx(fe.div,{"data-state":Fs(p.open),"data-disabled":p.disabled?"":void 0,id:p.contentId,hidden:!L,...g,ref:w,style:{"--radix-collapsible-content-height":I?`${I}px`:void 0,"--radix-collapsible-content-width":_?`${_}px`:void 0,...t.style},children:L&&j})});function Fs(t){return t?"open":"closed"}var Nt=ca;function bt({...t}){return e.jsx(Nt,{"data-slot":"collapsible",...t})}function yt({...t}){return e.jsx(da,{"data-slot":"collapsible-trigger",...t})}function wt({...t}){return e.jsx(ma,{"data-slot":"collapsible-content",...t})}var Rs=1,Ct=.9,St=.8,kt=.17,Ns=.1,bs=.999,Et=.9999,Pt=.99,Tt=/[\\\/_+.#"@\[\(\{&]/,Dt=/[\\\/_+.#"@\[\(\{&]/g,Mt=/[\s-]/,xa=/[\s-]/g;function Ss(t,l,n,u,j,g,p){if(g===l.length)return j===t.length?Rs:Pt;var o=`${j},${g}`;if(p[o]!==void 0)return p[o];for(var y=u.charAt(g),c=n.indexOf(y,j),w=0,m,I,S,_;c>=0;)m=Ss(t,l,n,u,c+1,g+1,p),m>w&&(c===j?m*=Rs:Tt.test(t.charAt(c-1))?(m*=St,S=t.slice(j,c-1).match(Dt),S&&j>0&&(m*=Math.pow(bs,S.length))):Mt.test(t.charAt(c-1))?(m*=Ct,_=t.slice(j,c-1).match(xa),_&&j>0&&(m*=Math.pow(bs,_.length))):(m*=kt,j>0&&(m*=Math.pow(bs,c-j))),t.charAt(c)!==l.charAt(g)&&(m*=Et)),(m<Ns&&n.charAt(c-1)===u.charAt(g+1)||u.charAt(g+1)===u.charAt(g)&&n.charAt(c-1)!==u.charAt(g))&&(I=Ss(t,l,n,u,c+1,g+2,p),I*Ns>m&&(m=I*Ns)),m>w&&(w=m),c=n.indexOf(y,c+1);return p[o]=w,w}function zs(t){return t.toLowerCase().replace(xa," ")}function At(t,l,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,Ss(t,l,zs(t),zs(l),0,0,{})}var Ue='[cmdk-group=""]',ys='[cmdk-group-items=""]',It='[cmdk-group-heading=""]',ua='[cmdk-item=""]',Bs=`${ua}:not([aria-disabled="true"])`,ks="cmdk-item-select",Ve="data-value",Ft=(t,l,n)=>At(t,l,n),ha=a.createContext(void 0),as=()=>a.useContext(ha),pa=a.createContext(void 0),$s=()=>a.useContext(pa),ga=a.createContext(void 0),ja=a.forwardRef((t,l)=>{let n=Re(()=>{var f,O;return{search:"",value:(O=(f=t.value)!=null?f:t.defaultValue)!=null?O:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),u=Re(()=>new Set),j=Re(()=>new Map),g=Re(()=>new Map),p=Re(()=>new Set),o=fa(t),{label:y,children:c,value:w,onValueChange:m,filter:I,shouldFilter:S,loop:_,disablePointerSelection:L=!1,vimBindings:T=!0,...d}=t,i=Fe(),s=Fe(),v=Fe(),E=a.useRef(null),M=Ht();$e(()=>{if(w!==void 0){let f=w.trim();n.current.value=f,V.emit()}},[w]),$e(()=>{M(6,Y)},[]);let V=a.useMemo(()=>({subscribe:f=>(p.current.add(f),()=>p.current.delete(f)),snapshot:()=>n.current,setState:(f,O,K)=>{var B,W,C,ee;if(!Object.is(n.current[f],O)){if(n.current[f]=O,f==="search")z(),x(),M(1,b);else if(f==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let se=document.getElementById(v);se?se.focus():(B=document.getElementById(i))==null||B.focus()}if(M(7,()=>{var se;n.current.selectedItemId=(se=Z())==null?void 0:se.id,V.emit()}),K||M(5,Y),((W=o.current)==null?void 0:W.value)!==void 0){let se=O??"";(ee=(C=o.current).onValueChange)==null||ee.call(C,se);return}}V.emit()}},emit:()=>{p.current.forEach(f=>f())}}),[]),r=a.useMemo(()=>({value:(f,O,K)=>{var B;O!==((B=g.current.get(f))==null?void 0:B.value)&&(g.current.set(f,{value:O,keywords:K}),n.current.filtered.items.set(f,A(O,K)),M(2,()=>{x(),V.emit()}))},item:(f,O)=>(u.current.add(f),O&&(j.current.has(O)?j.current.get(O).add(f):j.current.set(O,new Set([f]))),M(3,()=>{z(),x(),n.current.value||b(),V.emit()}),()=>{g.current.delete(f),u.current.delete(f),n.current.filtered.items.delete(f);let K=Z();M(4,()=>{z(),K?.getAttribute("id")===f&&b(),V.emit()})}),group:f=>(j.current.has(f)||j.current.set(f,new Set),()=>{g.current.delete(f),j.current.delete(f)}),filter:()=>o.current.shouldFilter,label:y||t["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:i,inputId:v,labelId:s,listInnerRef:E}),[]);function A(f,O){var K,B;let W=(B=(K=o.current)==null?void 0:K.filter)!=null?B:Ft;return f?W(f,n.current.search,O):0}function x(){if(!n.current.search||o.current.shouldFilter===!1)return;let f=n.current.filtered.items,O=[];n.current.filtered.groups.forEach(B=>{let W=j.current.get(B),C=0;W.forEach(ee=>{let se=f.get(ee);C=Math.max(se,C)}),O.push([B,C])});let K=E.current;H().sort((B,W)=>{var C,ee;let se=B.getAttribute("id"),pe=W.getAttribute("id");return((C=f.get(pe))!=null?C:0)-((ee=f.get(se))!=null?ee:0)}).forEach(B=>{let W=B.closest(ys);W?W.appendChild(B.parentElement===W?B:B.closest(`${ys} > *`)):K.appendChild(B.parentElement===K?B:B.closest(`${ys} > *`))}),O.sort((B,W)=>W[1]-B[1]).forEach(B=>{var W;let C=(W=E.current)==null?void 0:W.querySelector(`${Ue}[${Ve}="${encodeURIComponent(B[0])}"]`);C?.parentElement.appendChild(C)})}function b(){let f=H().find(K=>K.getAttribute("aria-disabled")!=="true"),O=f?.getAttribute(Ve);V.setState("value",O||void 0)}function z(){var f,O,K,B;if(!n.current.search||o.current.shouldFilter===!1){n.current.filtered.count=u.current.size;return}n.current.filtered.groups=new Set;let W=0;for(let C of u.current){let ee=(O=(f=g.current.get(C))==null?void 0:f.value)!=null?O:"",se=(B=(K=g.current.get(C))==null?void 0:K.keywords)!=null?B:[],pe=A(ee,se);n.current.filtered.items.set(C,pe),pe>0&&W++}for(let[C,ee]of j.current)for(let se of ee)if(n.current.filtered.items.get(se)>0){n.current.filtered.groups.add(C);break}n.current.filtered.count=W}function Y(){var f,O,K;let B=Z();B&&(((f=B.parentElement)==null?void 0:f.firstChild)===B&&((K=(O=B.closest(Ue))==null?void 0:O.querySelector(It))==null||K.scrollIntoView({block:"nearest"})),B.scrollIntoView({block:"nearest"}))}function Z(){var f;return(f=E.current)==null?void 0:f.querySelector(`${ua}[aria-selected="true"]`)}function H(){var f;return Array.from(((f=E.current)==null?void 0:f.querySelectorAll(Bs))||[])}function D(f){let O=H()[f];O&&V.setState("value",O.getAttribute(Ve))}function q(f){var O;let K=Z(),B=H(),W=B.findIndex(ee=>ee===K),C=B[W+f];(O=o.current)!=null&&O.loop&&(C=W+f<0?B[B.length-1]:W+f===B.length?B[0]:B[W+f]),C&&V.setState("value",C.getAttribute(Ve))}function U(f){let O=Z(),K=O?.closest(Ue),B;for(;K&&!B;)K=f>0?Gt(K,Ue):Kt(K,Ue),B=K?.querySelector(Bs);B?V.setState("value",B.getAttribute(Ve)):q(f)}let X=()=>D(H().length-1),ae=f=>{f.preventDefault(),f.metaKey?X():f.altKey?U(1):q(1)},J=f=>{f.preventDefault(),f.metaKey?D(0):f.altKey?U(-1):q(-1)};return a.createElement(fe.div,{ref:l,tabIndex:-1,...d,"cmdk-root":"",onKeyDown:f=>{var O;(O=d.onKeyDown)==null||O.call(d,f);let K=f.nativeEvent.isComposing||f.keyCode===229;if(!(f.defaultPrevented||K))switch(f.key){case"n":case"j":{T&&f.ctrlKey&&ae(f);break}case"ArrowDown":{ae(f);break}case"p":case"k":{T&&f.ctrlKey&&J(f);break}case"ArrowUp":{J(f);break}case"Home":{f.preventDefault(),D(0);break}case"End":{f.preventDefault(),X();break}case"Enter":{f.preventDefault();let B=Z();if(B){let W=new Event(ks);B.dispatchEvent(W)}}}}},a.createElement("label",{"cmdk-label":"",htmlFor:r.inputId,id:r.labelId,style:Ut},y),hs(t,f=>a.createElement(pa.Provider,{value:V},a.createElement(ha.Provider,{value:r},f))))}),$t=a.forwardRef((t,l)=>{var n,u;let j=Fe(),g=a.useRef(null),p=a.useContext(ga),o=as(),y=fa(t),c=(u=(n=y.current)==null?void 0:n.forceMount)!=null?u:p?.forceMount;$e(()=>{if(!c)return o.item(j,p?.id)},[c]);let w=va(j,g,[t.value,t.children,g],t.keywords),m=$s(),I=Me(M=>M.value&&M.value===w.current),S=Me(M=>c||o.filter()===!1?!0:M.search?M.filtered.items.get(j)>0:!0);a.useEffect(()=>{let M=g.current;if(!(!M||t.disabled))return M.addEventListener(ks,_),()=>M.removeEventListener(ks,_)},[S,t.onSelect,t.disabled]);function _(){var M,V;L(),(V=(M=y.current).onSelect)==null||V.call(M,w.current)}function L(){m.setState("value",w.current,!0)}if(!S)return null;let{disabled:T,value:d,onSelect:i,forceMount:s,keywords:v,...E}=t;return a.createElement(fe.div,{ref:Xe(g,l),...E,id:j,"cmdk-item":"",role:"option","aria-disabled":!!T,"aria-selected":!!I,"data-disabled":!!T,"data-selected":!!I,onPointerMove:T||o.getDisablePointerSelection()?void 0:L,onClick:T?void 0:_},t.children)}),Vt=a.forwardRef((t,l)=>{let{heading:n,children:u,forceMount:j,...g}=t,p=Fe(),o=a.useRef(null),y=a.useRef(null),c=Fe(),w=as(),m=Me(S=>j||w.filter()===!1?!0:S.search?S.filtered.groups.has(p):!0);$e(()=>w.group(p),[]),va(p,o,[t.value,t.heading,y]);let I=a.useMemo(()=>({id:p,forceMount:j}),[j]);return a.createElement(fe.div,{ref:Xe(o,l),...g,"cmdk-group":"",role:"presentation",hidden:m?void 0:!0},n&&a.createElement("div",{ref:y,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),hs(t,S=>a.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},a.createElement(ga.Provider,{value:I},S))))}),Rt=a.forwardRef((t,l)=>{let{alwaysRender:n,...u}=t,j=a.useRef(null),g=Me(p=>!p.search);return!n&&!g?null:a.createElement(fe.div,{ref:Xe(j,l),...u,"cmdk-separator":"",role:"separator"})}),zt=a.forwardRef((t,l)=>{let{onValueChange:n,...u}=t,j=t.value!=null,g=$s(),p=Me(c=>c.search),o=Me(c=>c.selectedItemId),y=as();return a.useEffect(()=>{t.value!=null&&g.setState("search",t.value)},[t.value]),a.createElement(fe.input,{ref:l,...u,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":y.listId,"aria-labelledby":y.labelId,"aria-activedescendant":o,id:y.inputId,type:"text",value:j?t.value:p,onChange:c=>{j||g.setState("search",c.target.value),n?.(c.target.value)}})}),Bt=a.forwardRef((t,l)=>{let{children:n,label:u="Suggestions",...j}=t,g=a.useRef(null),p=a.useRef(null),o=Me(c=>c.selectedItemId),y=as();return a.useEffect(()=>{if(p.current&&g.current){let c=p.current,w=g.current,m,I=new ResizeObserver(()=>{m=requestAnimationFrame(()=>{let S=c.offsetHeight;w.style.setProperty("--cmdk-list-height",S.toFixed(1)+"px")})});return I.observe(c),()=>{cancelAnimationFrame(m),I.unobserve(c)}}},[]),a.createElement(fe.div,{ref:Xe(g,l),...j,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":u,id:y.listId},hs(t,c=>a.createElement("div",{ref:Xe(p,y.listInnerRef),"cmdk-list-sizer":""},c)))}),Lt=a.forwardRef((t,l)=>{let{open:n,onOpenChange:u,overlayClassName:j,contentClassName:g,container:p,...o}=t;return a.createElement(Pa,{open:n,onOpenChange:u},a.createElement(Ta,{container:p},a.createElement(Da,{"cmdk-overlay":"",className:j}),a.createElement(Ma,{"aria-label":t.label,"cmdk-dialog":"",className:g},a.createElement(ja,{ref:l,...o}))))}),Ot=a.forwardRef((t,l)=>Me(n=>n.filtered.count===0)?a.createElement(fe.div,{ref:l,...t,"cmdk-empty":"",role:"presentation"}):null),_t=a.forwardRef((t,l)=>{let{progress:n,children:u,label:j="Loading...",...g}=t;return a.createElement(fe.div,{ref:l,...g,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":j},hs(t,p=>a.createElement("div",{"aria-hidden":!0},p)))}),_e=Object.assign(ja,{List:Bt,Item:$t,Input:zt,Group:Vt,Separator:Rt,Dialog:Lt,Empty:Ot,Loading:_t});function Gt(t,l){let n=t.nextElementSibling;for(;n;){if(n.matches(l))return n;n=n.nextElementSibling}}function Kt(t,l){let n=t.previousElementSibling;for(;n;){if(n.matches(l))return n;n=n.previousElementSibling}}function fa(t){let l=a.useRef(t);return $e(()=>{l.current=t}),l}var $e=typeof window>"u"?a.useEffect:a.useLayoutEffect;function Re(t){let l=a.useRef();return l.current===void 0&&(l.current=t()),l}function Me(t){let l=$s(),n=()=>t(l.snapshot());return a.useSyncExternalStore(l.subscribe,n,n)}function va(t,l,n,u=[]){let j=a.useRef(),g=as();return $e(()=>{var p;let o=(()=>{var c;for(let w of n){if(typeof w=="string")return w.trim();if(typeof w=="object"&&"current"in w)return w.current?(c=w.current.textContent)==null?void 0:c.trim():j.current}})(),y=u.map(c=>c.trim());g.value(t,o,y),(p=l.current)==null||p.setAttribute(Ve,o),j.current=o}),j}var Ht=()=>{let[t,l]=a.useState(),n=Re(()=>new Map);return $e(()=>{n.current.forEach(u=>u()),n.current=new Map},[t]),(u,j)=>{n.current.set(u,j),l({})}};function qt(t){let l=t.type;return typeof l=="function"?l(t.props):"render"in l?l.render(t.props):t}function hs({asChild:t,children:l},n){return t&&a.isValidElement(l)?a.cloneElement(qt(l),{ref:l.ref},n(l.props.children)):n(l)}var Ut={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Yt({className:t,...l}){return e.jsx(_e,{"data-slot":"command",className:ss("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...l})}function Wt({title:t="Command Palette",description:l="Search for a command to run...",children:n,...u}){return e.jsxs(Ys,{...u,children:[e.jsxs(Ws,{className:"sr-only",children:[e.jsx(Qs,{children:t}),e.jsx(Zs,{children:l})]}),e.jsx(Xs,{className:"overflow-hidden p-0",children:e.jsx(Yt,{className:"[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:n})})]})}function Qt({className:t,...l}){return e.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[e.jsx(ra,{className:"size-4 shrink-0 opacity-50"}),e.jsx(_e.Input,{"data-slot":"command-input",className:ss("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...l})]})}function Zt({className:t,...l}){return e.jsx(_e.List,{"data-slot":"command-list",className:ss("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",t),...l})}function Xt({...t}){return e.jsx(_e.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function Jt({className:t,...l}){return e.jsx(_e.Group,{"data-slot":"command-group",className:ss("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...l})}function Ye({className:t,...l}){return e.jsx(_e.Item,{"data-slot":"command-item",className:ss("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l})}function ei({onNext:t,onPrevious:l}){const{hasBrandKit:n,brandKit:u}=ue(),{currentProject:j}=he(),[g,p]=a.useState(""),[o,y]=a.useState([{id:"1",role:"user",content:"Agrega subtítulos en inglés a la escena 3",timestamp:new Date(Date.now()-12e4)},{id:"2",role:"assistant",content:"✅ Subtítulos en inglés generados y sincronizados.",timestamp:new Date(Date.now()-9e4)},{id:"3",role:"assistant",content:"⚠️ Contraste bajo detectado en subtítulos, sugerido color #FFFFFF.",timestamp:new Date(Date.now()-85e3)},{id:"4",role:"user",content:"Reduce el volumen de la música",timestamp:new Date(Date.now()-6e4)},{id:"5",role:"assistant",content:"✅ Música reducida a 60%.",timestamp:new Date(Date.now()-3e4)}]),[c,w]=a.useState(!1),[m,I]=a.useState(!1),[S,_]=a.useState(0),[L,T]=a.useState(!1),[d,i]=a.useState(!1),[s,v]=a.useState(null),[E,M]=a.useState([60]),[V,r]=a.useState([1]),[A,x]=a.useState("Ninguno"),[b,z]=a.useState([80]),[Y,Z]=a.useState(!0),[H,D]=a.useState(!0),[q,U]=a.useState("ES"),[X,ae]=a.useState("Montserrat"),[J,f]=a.useState("#000000"),[O,K]=a.useState([18]),[B,W]=a.useState("Ninguna"),[C,ee]=a.useState([100]),[se,pe]=a.useState(!1);a.useEffect(()=>{const F=Q=>{Q.key==="k"&&(Q.metaKey||Q.ctrlKey)&&(Q.preventDefault(),i(!0)),Q.key==="k"&&Q.code==="Space"&&(Q.preventDefault(),i(!0))};return document.addEventListener("keydown",F),()=>document.removeEventListener("keydown",F)},[]);const Ge=[{id:"video",label:"Video",color:"#3B82F6",clips:[{id:"clip1",name:"Clip 1",startTime:0,duration:30,color:"#3B82F6"},{id:"clip2",name:"Clip 2 (placeholder)",startTime:30,duration:45,color:"#60A5FA"}]},{id:"audio",label:"Audio",color:"#EC4899",clips:[{id:"audio1",name:"Música base (placeholder)",startTime:0,duration:75,color:"#EC4899"}]},{id:"subtitles",label:"Subtítulos",color:"#10B981",clips:[{id:"subtitle1",name:"Texto (placeholder)",startTime:5,duration:65,color:"#10B981"}]},{id:"overlays",label:"Overlays",color:"#FACC15",clips:[{id:"overlay1",name:"Logo (placeholder)",startTime:0,duration:10,color:"#FACC15"}]}],Ie=75,N=800/Ie,k=a.useCallback(async()=>{if(!g.trim())return;const F={id:`user_${Date.now()}`,role:"user",content:g,timestamp:new Date};y(Q=>[...Q,F]),p(""),w(!0),setTimeout(()=>{const Q=["✅ Cambios aplicados correctamente.","✅ He ajustado el elemento según tu solicitud.","✅ Timeline actualizado. Los cambios mantienen la coherencia de marca.","✅ Modificación completada. El proyecto sigue las directrices del BrandKit."],qe={id:`assistant_${Date.now()}`,role:"assistant",content:Q[Math.floor(Math.random()*Q.length)],timestamp:new Date};y(ps=>[...ps,qe]),w(!1)},1500)},[g]),G=F=>{const Q=Math.floor(F/60),qe=Math.floor(F%60);return`${Q.toString().padStart(2,"0")}:${qe.toString().padStart(2,"0")}`},re=a.useCallback(async F=>{v(F),setTimeout(()=>{const Q={autocorte:"✅ Autocortes aplicados según el ritmo musical detectado.",transiciones:"✅ Transiciones suaves aplicadas en todas las escenas.",subtitulos:"✅ Subtítulos sincronizados automáticamente con el audio.",multiformato:"✅ Versiones generadas: 16:9, 9:16 y 1:1."},qe={id:`macro_${Date.now()}`,role:"assistant",content:Q[F]||"✅ Macro ejecutado correctamente.",timestamp:new Date};y(ps=>[...ps,qe]),v(null)},2e3)},[]),ke=a.useCallback(F=>{i(!1);const Q={"Agregar subtítulo":()=>D(!0),"Insertar logo":()=>{},"Cambiar velocidad clip":()=>{},"Autocorte IA":()=>re("autocorte"),"Exportar MP4":()=>T(!0)};Q[F]&&Q[F]()},[re]),He=F=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 text-xs text-white font-medium",children:F.label}),e.jsxs("div",{className:"flex items-center gap-1",children:[F.id==="video"&&e.jsx(de,{className:"w-3 h-3 text-white"}),F.id==="audio"&&e.jsx(cs,{className:"w-3 h-3 text-white"}),F.id==="subtitles"&&e.jsx(Ze,{className:"w-3 h-3 text-white"}),F.id==="overlays"&&e.jsx(gs,{className:"w-3 h-3 text-white"})]})]}),e.jsx("div",{className:"h-10 bg-gray-800 rounded relative",children:F.clips.map(Q=>e.jsx("div",{className:"absolute h-8 top-1 rounded text-white text-xs flex items-center px-2 cursor-pointer hover:opacity-90 transition-opacity",style:{left:Q.startTime*N,width:Q.duration*N,backgroundColor:Q.color},children:e.jsx("span",{className:"truncate",children:Q.name})},Q.id))})]},F.id);return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-4 p-4 min-h-0",children:[e.jsx("div",{className:"w-full lg:w-72 flex flex-col",children:e.jsxs(P,{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Le,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Chat de Edición (IA)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n?"BrandKit activo":"Sin BrandKit"})]})]})}),e.jsx(Je,{className:"flex-1 p-4",children:e.jsxs("div",{className:"space-y-4",children:[o.map(F=>e.jsx("div",{className:`flex ${F.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`flex gap-3 max-w-[85%] ${F.role==="user"?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${F.role==="user"?"bg-red-500 text-white":"bg-red-100 text-red-600"}`,children:F.role==="user"?e.jsx(Aa,{className:"w-4 h-4"}):e.jsx(ls,{className:"w-4 h-4"})}),e.jsxs("div",{className:`rounded-lg p-3 ${F.role==="user"?"bg-red-500 text-white":"bg-gray-50 border border-gray-200"}`,children:[e.jsx("p",{className:"text-sm",children:F.content}),e.jsx("p",{className:"text-xs opacity-70 mt-1",children:F.timestamp.toLocaleTimeString()})]})]})},F.id)),c&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(ls,{className:"w-4 h-4 text-red-600"})}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})})]})}),e.jsxs("div",{className:"p-4 border-t space-y-3",children:[e.jsx(le,{placeholder:"Escribe un comando…",value:g,onChange:F=>p(F.target.value),onKeyPress:F=>F.key==="Enter"&&!F.shiftKey&&k(),className:"min-h-[80px] resize-none"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{onClick:k,disabled:!g.trim()||c,className:"flex-1 bg-red-500 hover:bg-red-600",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Enviar"]}),e.jsx(h,{variant:"outline",onClick:()=>i(!0),className:"px-3",title:"Abrir paleta de comandos (⌘K)",children:e.jsx(ra,{className:"w-4 h-4"})})]})]})]})}),e.jsxs("div",{className:"flex-1 flex flex-col gap-4 min-w-0",children:[e.jsx("div",{className:"lg:hidden",children:e.jsxs(P,{className:"p-3 bg-white border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-6 h-6 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Be,{className:"w-3 h-3 text-red-600"})}),e.jsx("h4",{className:"font-semibold text-sm",children:"Validaciones BrandGuard"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-green-600",children:"✅"}),e.jsx("span",{className:"text-gray-700",children:"Logo respeta zona segura"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-amber-600",children:"⚠️"}),e.jsx("span",{className:"text-gray-700",children:"Contraste bajo en subtítulos"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-green-600",children:"✅"}),e.jsx("span",{className:"text-gray-700",children:"Colores cumplen paleta"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-amber-600",children:"⚠️"}),e.jsx("span",{className:"text-gray-700",children:"Música demasiado alta"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{size:"sm",className:"bg-red-500 hover:bg-red-600 text-xs px-3 py-1 h-7 flex-1",children:"Autocorregir"}),e.jsx(h,{variant:"ghost",size:"sm",className:"text-xs px-3 py-1 h-7 flex-1",children:"Ver reporte"})]})]})}),e.jsxs(P,{className:"h-[200px] lg:h-[360px] flex items-center justify-center bg-black border border-gray-300 rounded-lg overflow-hidden relative",children:[e.jsx("div",{className:"w-[640px] h-[360px] bg-gray-900 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx(de,{className:"w-16 h-16 mx-auto mb-4 text-gray-500"}),e.jsx("p",{className:"text-gray-400",children:"Preview de escena activa"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Canvas: 640x360"})]})}),e.jsxs("div",{className:"hidden lg:block absolute bottom-4 right-4 w-80 bg-white rounded-xl border border-gray-200 shadow-sm p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-6 h-6 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Be,{className:"w-3 h-3 text-red-600"})}),e.jsx("h4",{className:"font-semibold text-sm",children:"Validaciones BrandGuard"})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-green-600",children:"✅"}),e.jsx("span",{className:"text-gray-700",children:"Logo respeta zona segura"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-amber-600",children:"⚠️"}),e.jsx("span",{className:"text-gray-700",children:"Contraste bajo en subtítulos de escena 3"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-green-600",children:"✅"}),e.jsx("span",{className:"text-gray-700",children:"Colores cumplen paleta BrandKit"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-amber-600",children:"⚠️"}),e.jsx("span",{className:"text-gray-700",children:"Música demasiado alta (>85 dB)"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{size:"sm",className:"bg-red-500 hover:bg-red-600 text-xs px-3 py-1 h-7",children:"Autocorregir"}),e.jsx(h,{variant:"ghost",size:"sm",className:"text-xs px-3 py-1 h-7",children:"Ver reporte"})]})]})]}),e.jsx(P,{className:"h-[240px] lg:h-[320px] p-4 bg-gray-900 overflow-hidden",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between mb-4 gap-2 lg:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-2 lg:gap-4",children:[e.jsx(h,{variant:"outline",size:"sm",onClick:()=>I(!m),className:"bg-gray-800 text-white border-gray-700 hover:bg-gray-700",children:m?e.jsx(aa,{className:"w-4 h-4"}):e.jsx(Oe,{className:"w-4 h-4"})}),e.jsx(h,{variant:"outline",size:"sm",className:"bg-gray-800 text-white border-gray-700 hover:bg-gray-700 hidden lg:inline-flex",children:e.jsx(ta,{className:"w-4 h-4"})}),e.jsx(h,{variant:"outline",size:"sm",className:"bg-gray-800 text-white border-gray-700 hover:bg-gray-700 hidden lg:inline-flex",children:e.jsx(ia,{className:"w-4 h-4"})}),e.jsx(h,{variant:"outline",size:"sm",className:"bg-gray-800 text-white border-gray-700 hover:bg-gray-700",children:e.jsx(Ds,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-white text-sm font-mono",children:[G(S)," / ",G(Ie)]})]}),e.jsx($,{variant:"outline",className:"text-white border-gray-600",children:"Timeline Multipista"})]}),e.jsxs("div",{className:"relative h-6 bg-gray-800 rounded mb-4",children:[Array.from({length:Math.ceil(Ie/10)+1}).map((F,Q)=>e.jsx("div",{className:"absolute top-0 h-full border-l border-gray-600",style:{left:Q*10*N},children:e.jsxs("span",{className:"absolute top-0 left-1 text-xs text-gray-400",children:[Q*10,"s"]})},Q)),e.jsx("div",{className:"absolute top-0 w-0.5 h-full bg-red-500 z-10",style:{left:S*N}})]}),e.jsx(Je,{className:"flex-1",children:e.jsx("div",{className:"space-y-2 min-w-[800px] lg:min-w-0",children:Ge.map(He)})})]})})]}),e.jsx("div",{className:"w-full lg:w-72 flex flex-col",children:e.jsxs(P,{className:"flex-1",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h3",{className:"font-semibold",children:"Herramientas"})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs(P,{className:"p-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(de,{className:"w-4 h-4 text-blue-600"}),e.jsx("h4",{className:"font-medium",children:"Video Clip"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium",children:["Recorte: ",E[0],"s"]}),e.jsx("input",{type:"range",min:"0",max:"300",step:"1",value:E[0],onChange:F=>M([parseInt(F.target.value)]),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium",children:["Velocidad: ",V[0],"x"]}),e.jsx("input",{type:"range",min:"0.25",max:"2",step:"0.25",value:V[0],onChange:F=>r([parseFloat(F.target.value)]),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Filtro"}),e.jsxs("select",{value:A,onChange:F=>x(F.target.value),className:"w-full p-2 bg-gray-50 border rounded-lg",children:[e.jsx("option",{value:"Ninguno",children:"Ninguno"}),e.jsx("option",{value:"Cinemático",children:"Cinemático"}),e.jsx("option",{value:"Retro",children:"Retro"}),e.jsx("option",{value:"Blanco y Negro",children:"Blanco y Negro"})]})]})]})]}),e.jsxs(P,{className:"p-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(cs,{className:"w-4 h-4 text-pink-600"}),e.jsx("h4",{className:"font-medium",children:"Audio"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium",children:["Volumen: ",b[0],"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:b[0],onChange:F=>z([parseInt(F.target.value)]),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium",children:"Fade in/out automático"}),e.jsx("input",{type:"checkbox",checked:Y,onChange:F=>Z(F.target.checked),className:"w-4 h-4"})]}),e.jsx(h,{variant:"secondary",className:"w-full",children:"Reemplazar pista"})]})]}),e.jsxs(P,{className:"p-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ze,{className:"w-4 h-4 text-green-600"}),e.jsx("h4",{className:"font-medium",children:"Subtítulos"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium",children:"Activar subtítulos automáticos"}),e.jsx("input",{type:"checkbox",checked:H,onChange:F=>D(F.target.checked),className:"w-4 h-4"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Idioma"}),e.jsxs("select",{value:q,onChange:F=>U(F.target.value),className:"w-full p-2 bg-gray-50 border rounded-lg",children:[e.jsx("option",{value:"ES",children:"ES"}),e.jsx("option",{value:"EN",children:"EN"}),e.jsx("option",{value:"Multi",children:"Multi"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Fuente"}),e.jsxs("select",{value:X,onChange:F=>ae(F.target.value),className:"w-full p-2 bg-gray-50 border rounded-lg",children:[e.jsx("option",{value:"Montserrat",children:"Montserrat"}),e.jsx("option",{value:"Inter",children:"Inter"}),e.jsx("option",{value:"Roboto",children:"Roboto"}),n&&u?.typography?.primary?.name&&e.jsx("option",{value:u.typography.primary.name,children:u.typography.primary.name}),n&&u?.typography?.secondary?.name&&e.jsx("option",{value:u.typography.secondary.name,children:u.typography.secondary.name})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Color texto"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:n&&u?.colors?e.jsxs(e.Fragment,{children:[Array.isArray(u.colors.primary)&&u.colors.primary.map((F,Q)=>e.jsx("button",{className:`w-6 h-6 rounded-full border-2 hover:border-gray-500 transition-colors ${J===F?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:F},onClick:()=>f(F),"aria-label":`Seleccionar color primario ${F}`},`primary-${Q}`)),Array.isArray(u.colors.secondary)&&u.colors.secondary.map((F,Q)=>e.jsx("button",{className:`w-6 h-6 rounded-full border-2 hover:border-gray-500 transition-colors ${J===F?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:F},onClick:()=>f(F),"aria-label":`Seleccionar color secundario ${F}`},`secondary-${Q}`))]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`w-6 h-6 rounded-full border-2 hover:border-gray-500 transition-colors bg-black ${J==="#000000"?"border-gray-800":"border-gray-300"}`,onClick:()=>f("#000000"),"aria-label":"Seleccionar color negro"}),e.jsx("button",{className:`w-6 h-6 rounded-full border-2 hover:border-gray-500 transition-colors bg-white ${J==="#ffffff"?"border-gray-800":"border-gray-300"}`,onClick:()=>f("#ffffff"),"aria-label":"Seleccionar color blanco"}),e.jsx("button",{className:`w-6 h-6 rounded-full border-2 hover:border-gray-500 transition-colors bg-gray-600 ${J==="#666666"?"border-gray-800":"border-gray-300"}`,onClick:()=>f("#666666"),"aria-label":"Seleccionar color gris"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium",children:["Tamaño: ",O[0],"px"]}),e.jsx("input",{type:"range",min:"10",max:"48",step:"1",value:O[0],onChange:F=>K([parseInt(F.target.value)]),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]})]})]}),e.jsxs(P,{className:"p-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(gs,{className:"w-4 h-4 text-yellow-600"}),e.jsx("h4",{className:"font-medium",children:"Overlays"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(h,{variant:"secondary",className:"w-full",children:[e.jsx(es,{className:"w-4 h-4 mr-2"}),"Agregar texto overlay"]}),e.jsxs(h,{variant:"secondary",className:"w-full",children:[e.jsx(es,{className:"w-4 h-4 mr-2"}),"Insertar logo (BrandKit)"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Animación"}),e.jsxs("select",{value:B,onChange:F=>W(F.target.value),className:"w-full p-2 bg-gray-50 border rounded-lg",children:[e.jsx("option",{value:"Ninguna",children:"Ninguna"}),e.jsx("option",{value:"Fade",children:"Fade"}),e.jsx("option",{value:"Zoom",children:"Zoom"}),e.jsx("option",{value:"Slide",children:"Slide"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium",children:["Opacidad: ",C[0],"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:C[0],onChange:F=>ee([parseInt(F.target.value)]),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]})]})]}),e.jsxs(P,{className:"p-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ha,{className:"w-4 h-4 text-red-600"}),e.jsx("h4",{className:"font-medium",children:"Macros IA"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(h,{variant:"secondary",className:"w-full justify-start text-sm h-auto py-2 px-3",onClick:()=>re("autocorte"),disabled:s==="autocorte",children:[s==="autocorte"?e.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-gray-400 border-t-transparent rounded-full animate-spin flex-shrink-0"}):e.jsx(ws,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsx("span",{className:"text-left",children:"Autocortes según ritmo de música"})]}),e.jsxs(h,{variant:"secondary",className:"w-full justify-start text-sm h-auto py-2 px-3",onClick:()=>re("transiciones"),disabled:s==="transiciones",children:[s==="transiciones"?e.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-gray-400 border-t-transparent rounded-full animate-spin flex-shrink-0"}):e.jsx(dt,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsx("span",{className:"text-left",children:"Aplicar transiciones suaves a todas las escenas"})]}),e.jsxs(h,{variant:"secondary",className:"w-full justify-start text-sm h-auto py-2 px-3",onClick:()=>re("subtitulos"),disabled:s==="subtitulos",children:[s==="subtitulos"?e.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-gray-400 border-t-transparent rounded-full animate-spin flex-shrink-0"}):e.jsx(Ia,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsx("span",{className:"text-left",children:"Sincronizar subtítulos automáticamente"})]}),e.jsxs(h,{variant:"secondary",className:"w-full justify-start text-sm h-auto py-2 px-3",onClick:()=>re("multiformato"),disabled:s==="multiformato",children:[s==="multiformato"?e.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-gray-400 border-t-transparent rounded-full animate-spin flex-shrink-0"}):e.jsx(oe,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsx("span",{className:"text-left",children:"Generar multiformato (16:9, 9:16, 1:1)"})]})]})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsxs(P,{className:"p-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(de,{className:"w-4 h-4 text-purple-600"}),e.jsx("h4",{className:"font-medium",children:"Vista previa en plataformas"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-medium text-gray-600",children:"YouTube (16:9)"}),e.jsx("div",{className:"w-full h-[60px] border border-gray-200 rounded-lg flex items-center justify-center shadow-xs",style:{backgroundColor:n&&u?.colors?.primary?.[0]?u.colors.primary[0]:"#3B82F6"},children:e.jsx("span",{className:"text-white text-xs font-medium",children:"Preview"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-medium text-gray-600",children:"TikTok (9:16)"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-16 h-28 border border-gray-200 rounded-lg flex items-center justify-center shadow-xs",style:{backgroundColor:n&&u?.colors?.secondary?.[0]?u.colors.secondary[0]:"#EC4899"},children:e.jsx("span",{className:"text-white text-xs font-medium",children:"Preview"})})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-medium text-gray-600",children:"LinkedIn (16:9)"}),e.jsx("div",{className:"w-full h-[60px] border border-gray-200 rounded-lg flex items-center justify-center shadow-xs",style:{backgroundColor:n&&u?.colors?.accent?.[0]?u.colors.accent[0]:"#0077B5"},children:e.jsx("span",{className:"text-white text-xs font-medium",children:"Preview"})})]})]})]})}),e.jsx("div",{className:"lg:hidden",children:e.jsxs(bt,{open:se,onOpenChange:pe,children:[e.jsx(yt,{asChild:!0,children:e.jsx(P,{className:"p-3 shadow-sm cursor-pointer hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4 text-purple-600"}),e.jsx("h4",{className:"font-medium",children:"Vista previa en plataformas"})]}),e.jsx(Fa,{className:`w-4 h-4 transition-transform ${se?"rotate-180":""}`})]})})}),e.jsx(wt,{children:e.jsx(P,{className:"mt-2 p-3 shadow-sm",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-medium text-gray-600",children:"YouTube (16:9)"}),e.jsx("div",{className:"w-full h-[50px] border border-gray-200 rounded-lg flex items-center justify-center shadow-xs",style:{backgroundColor:n&&u?.colors?.primary?.[0]?u.colors.primary[0]:"#3B82F6"},children:e.jsx("span",{className:"text-white text-xs font-medium",children:"Preview"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-medium text-gray-600",children:"TikTok (9:16)"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-12 h-20 border border-gray-200 rounded-lg flex items-center justify-center shadow-xs",style:{backgroundColor:n&&u?.colors?.secondary?.[0]?u.colors.secondary[0]:"#EC4899"},children:e.jsx("span",{className:"text-white text-xs font-medium",children:"Preview"})})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-medium text-gray-600",children:"LinkedIn (16:9)"}),e.jsx("div",{className:"w-full h-[50px] border border-gray-200 rounded-lg flex items-center justify-center shadow-xs",style:{backgroundColor:n&&u?.colors?.accent?.[0]?u.colors.accent[0]:"#0077B5"},children:e.jsx("span",{className:"text-white text-xs font-medium",children:"Preview"})})]})]})})})]})})]})})]})})]}),e.jsx("div",{className:"p-4 border-t bg-white",children:e.jsxs("div",{className:"flex justify-between items-center max-w-7xl mx-auto",children:[e.jsxs(h,{variant:"outline",onClick:l,children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Paso anterior"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx($,{variant:"outline",className:"text-sm px-3 py-1",children:"Paso 5D de 7 - Opciones avanzadas"}),n&&e.jsx($,{className:"bg-green-100 text-green-800",children:"BrandKit Activo"})]}),e.jsxs(h,{onClick:t,className:"bg-red-500 hover:bg-red-600",children:["Siguiente paso",e.jsx(xe,{className:"w-4 h-4 ml-2"})]})]})}),e.jsxs(Wt,{open:d,onOpenChange:i,children:[e.jsx(Qt,{placeholder:"Escribe un comando..."}),e.jsxs(Zt,{children:[e.jsx(Xt,{children:"No se encontraron comandos."}),e.jsxs(Jt,{heading:"Comandos disponibles",children:[e.jsxs(Ye,{onSelect:()=>ke("Agregar subtítulo"),children:[e.jsx(Ze,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Agregar subtítulo"})]}),e.jsxs(Ye,{onSelect:()=>ke("Insertar logo"),children:[e.jsx(gs,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Insertar logo"})]}),e.jsxs(Ye,{onSelect:()=>ke("Cambiar velocidad clip"),children:[e.jsx(Be,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Cambiar velocidad clip"})]}),e.jsxs(Ye,{onSelect:()=>ke("Autocorte IA"),children:[e.jsx(ws,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Autocorte IA"})]}),e.jsxs(Ye,{onSelect:()=>ke("Exportar MP4"),children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Exportar MP4"})]})]})]})]}),e.jsx(Ys,{open:L,onOpenChange:T,children:e.jsxs(Xs,{className:"sm:max-w-[500px]",children:[e.jsxs(Ws,{children:[e.jsxs(Qs,{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5 text-green-600"}),"Preflight QA — Checklist de publicación"]}),e.jsx(Zs,{children:"Verificación final antes de exportar tu video"})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg",children:[e.jsx(ie,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-green-800",children:"Logo presente en escena final"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg",children:[e.jsx(ie,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-green-800",children:"Colores cumplen BrandKit"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg",children:[e.jsx(ie,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-green-800",children:"Subtítulos legibles y contrastados"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg",children:[e.jsx(ie,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-green-800",children:"Audio nivelado"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-amber-50 rounded-lg",children:[e.jsx(je,{className:"w-5 h-5 text-amber-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-amber-800",children:"Verifica duración total (supera los 5 minutos)"})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(h,{variant:"ghost",onClick:()=>T(!1),className:"flex-1",children:"Cancelar"}),e.jsx(h,{onClick:()=>T(!1),className:"flex-1 bg-red-500 hover:bg-red-600",children:"Continuar exportación"})]})]})})]})}const si=[{value:"engaging",label:"Atractivo",description:"Capta la atención desde el inicio"},{value:"educational",label:"Educativo",description:"Informativo y didáctico"},{value:"entertaining",label:"Entretenido",description:"Divertido y dinámico"},{value:"professional",label:"Profesional",description:"Formal y corporativo"},{value:"inspirational",label:"Inspiracional",description:"Motivador y aspiracional"},{value:"conversational",label:"Conversacional",description:"Cercano y directo"}],Ls=["#video","#content","#creator","#viral","#trending","#reel","#short","#tutorial","#tips","#howto","#behind","#process","#brand","#story"];function ai(){const{hasBrandKit:t,getBrandInstructions:l}=ue(),{voiceTone:n,instructions:u,hasVoiceTone:j}=$a(),{currentProject:g,updateCopywriting:p,goToPreviousStep:o,goToNextStep:y}=he(),[c,w]=a.useState(g?.copywriting.caption||""),[m,I]=a.useState(g?.copywriting.title||""),[S,_]=a.useState(g?.copywriting.description||""),[L,T]=a.useState(g?.copywriting.hashtags||[]),[d,i]=a.useState(g?.copywriting.callToAction||""),[s,v]=a.useState(g?.copywriting.tone||"engaging"),[E,M]=a.useState(""),[V,r]=a.useState(!1),[A,x]=a.useState(""),[b,z]=a.useState(g?.copywriting.variations||[]),[Y,Z]=a.useState(g?.copywriting.transcript||""),[H,D]=a.useState(g?.copywriting.subtitles||[]),q=g?.briefing,U=q?.videoType||"reel",X=q?.platform||"instagram",ae=q?.duration?.target||30;a.useEffect(()=>{j&&n&&!c&&J()},[j,n]);const J=async()=>{if(g){r(!0);try{let N=`Crea copy para ${U} de ${ae}s sobre: ${q?.description}`;if(t){const k=await l("video");N+=`

APLICAR TONO DE VOZ:
${k}`}N+=`
Plataforma: ${X}
Tono: ${s}`,setTimeout(()=>{const k=f();w(k.caption),I(k.title),_(k.description);const G=O();T(G);const re=K();i(re),B(),r(!1)},2500)}catch(N){console.error("Error generating video copy:",N),r(!1)}}},f=()=>{const N=q?.description||"contenido increíble",k=j?u:"";let G={caption:"",title:"",description:""};switch(U){case"reel":case"short":G.caption=X==="tiktok"?`${N} ✨ ${k?"Con el estilo único de nuestra marca":"Dale like si te gustó"} 🔥`:`🎬 ${N}

${k?k.split(".")[0]:"¡No te pierdas este contenido!"} 💫`,G.title=`${N.split(" ").slice(0,5).join(" ")}...`,G.description=`${N} ${k?"- Contenido alineado con nuestra marca":""}`;break;case"educational":G.caption=`📚 Aprende sobre ${N}

${k||"Contenido educativo de calidad"} 🎓`,G.title=`Tutorial: ${N}`,G.description=`Guía completa sobre ${N}. ${k||"Aprende paso a paso con ejemplos prácticos."}`;break;case"tutorial":G.caption=`🔧 Cómo hacer: ${N}

${k||"Sigue estos pasos"} ⚡`,G.title=`Tutorial: ${N}`,G.description=`Tutorial paso a paso: ${N}. ${k||"Fácil de seguir y muy efectivo."}`;break;case"promotional":G.caption=`🚀 ${N}

${k||"No te lo pierdas"} 💎`,G.title=N,G.description=`${N} ${k?"- Con la calidad que nos caracteriza":""}`;break;default:G.caption=`${N} ${k||""}`,G.title=N,G.description=N}return G},O=()=>{let N=[];switch(U){case"reel":N.push("#reel","#instagram","#viral");break;case"short":N.push("#shorts","#youtube","#tiktok");break;case"educational":N.push("#tutorial","#learn","#education","#tips");break;case"tutorial":N.push("#howto","#stepbystep","#tutorial","#guide");break;case"promotional":N.push("#promo","#launch","#new","#brand");break}X==="tiktok"?N.push("#fyp","#foryoupage","#trending"):X==="instagram"?N.push("#explore","#reelsinstagram","#instagood"):X==="youtube"&&N.push("#youtubeshorts","#youtube","#subscribe");const k=Ls.filter(G=>!N.includes(G));return N=[...N,...k.slice(0,8-N.length)],N.slice(0,10)},K=()=>{const N={reel:["¡Dale like si te gustó! 💜","Comparte con alguien que necesite verlo 🔄","Sígueme para más contenido así ✨","Cuéntame en los comentarios 👇"],short:["¡Suscríbete para más! 🔔","Like si quieres la parte 2 👆","Comenta tu opinión 💬","Comparte si te ayudó 📤"],educational:["¿Te sirvió este tutorial? ¡Cuéntame! 📚","Guarda este post para después 📌","Sígueme para más tutoriales 🎓","¿Qué tema quieres que cubra siguiente? 🤔"],tutorial:["¿Vas a intentarlo? ¡Etiquétame! 🏷️","Muéstrame tu resultado en los comentarios 📸","Like si te funcionó ✅","Comparte con quien lo necesite 🤝"],promotional:["¡No te lo pierdas! Link en bio 🔗",'Comenta "YO" para más info 💬',"Dale like si te interesa 💖","Comparte con tus amigos 👥"]},k=N[U]||N.reel;return k[Math.floor(Math.random()*k.length)]},B=()=>{if(!q?.script)return;const N=q.script;Z(N);const k=N.split(`
`).filter(ke=>ke.trim()),G=ae/k.length,re=k.map((ke,He)=>({id:`sub_${He}`,startTime:He*G,endTime:(He+1)*G,text:ke.trim(),style:{fontSize:24,fontFamily:"Inter",fontWeight:"600",color:"#FFFFFF",backgroundColor:"rgba(0,0,0,0.7)",borderRadius:8}}));D(re)},W=async()=>{r(!0),setTimeout(()=>{const N=f();z(k=>[...k,c].filter(Boolean)),w(N.caption),r(!1)},1500)},C=()=>{if(E.trim()&&!L.includes(E.trim())){const N=E.startsWith("#")?E:`#${E}`;T([...L,N]),M("")}},ee=N=>{T(L.filter(k=>k!==N))},se=N=>{!L.includes(N)&&L.length<30&&T([...L,N])},pe=(N,k)=>{navigator.clipboard.writeText(N),x(k),setTimeout(()=>x(""),2e3)},Ge=()=>{const N=`${m?`${m}

`:""}${c}

${S?`${S}

`:""}${d}

${L.join(" ")}`;pe(N,"full")},Ie=()=>{p({caption:c,title:m,description:S,hashtags:L,callToAction:d,tone:s,transcript:Y,subtitles:H,aiGenerated:!0,variations:b}),y()},Ke=c.trim().length>0;return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-red-500 to-pink-600 text-white",children:e.jsx(ms,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"Copywriting del Video"})]}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Genera el texto perfecto para tu video aplicando automáticamente tu tono de voz de marca"})]}),t&&j&&e.jsx(P,{className:"p-4 bg-gradient-to-r from-green-50 to-blue-50 border-green-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ds,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:"Tono de voz de marca activo"}),e.jsx("p",{className:"text-sm text-green-700",children:u})]}),e.jsx($,{className:"bg-green-100 text-green-800",children:"Aplicando automáticamente"})]})}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5"}),"Configuración"]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Tipo:"}),e.jsx($,{variant:"outline",className:"capitalize",children:U})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Plataforma:"}),e.jsx($,{variant:"outline",className:"capitalize",children:X})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Duración:"}),e.jsxs($,{variant:"outline",children:[ae,"s"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Tono del Copy"}),e.jsxs(ye,{value:s,onValueChange:v,children:[e.jsx(we,{children:e.jsx(Ce,{})}),e.jsx(Se,{children:si.map(N=>e.jsx(te,{value:N.value,children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:N.label}),e.jsx("p",{className:"text-xs text-muted-foreground",children:N.description})]})},N.value))})]}),j&&e.jsx("p",{className:"text-xs text-green-600",children:"✓ Se aplicará tu tono de marca automáticamente"})]}),e.jsx(h,{onClick:J,disabled:V,className:"w-full bg-red-500 hover:bg-red-600",children:V?e.jsxs(e.Fragment,{children:[e.jsx(ns,{className:"w-4 h-4 mr-2 animate-spin"}),"Generando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Generar Copy IA"]})}),e.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4"}),"Transcripción"]}),e.jsx(le,{placeholder:"Transcripción del video (se genera automáticamente del guion)...",value:Y,onChange:N=>Z(N.target.value),className:"min-h-[100px] font-mono text-sm"}),H.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium",children:["Subtítulos generados: ",H.length]}),e.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[H.slice(0,3).map((N,k)=>e.jsxs("div",{className:"text-xs p-2 bg-gray-50 rounded",children:[e.jsxs("span",{className:"text-gray-500",children:[N.startTime.toFixed(1),"s:"]})," ",N.text]},N.id)),H.length>3&&e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["+",H.length-3," subtítulos más"]})]})]})]})]})}),e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5"}),"Contenido"]}),e.jsxs(h,{variant:"outline",size:"sm",onClick:W,disabled:V,children:[e.jsx(ns,{className:"w-3 h-3 mr-1"}),"Regenerar"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Título"}),e.jsx(ne,{placeholder:"Título llamativo para el video...",value:m,onChange:N=>I(N.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium",children:"Caption Principal"}),e.jsx(h,{variant:"outline",size:"sm",onClick:()=>pe(c,"caption"),children:A==="caption"?e.jsx(js,{className:"w-3 h-3"}):e.jsx(Qe,{className:"w-3 h-3"})})]}),e.jsx(le,{placeholder:"Escribe tu caption aquí o genera uno con IA...",value:c,onChange:N=>w(N.target.value),className:"min-h-[150px]",disabled:V}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[c.length," caracteres"]}),e.jsxs("span",{children:["Plataforma: ",X]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Descripción (opcional)"}),e.jsx(le,{placeholder:"Descripción más detallada para YouTube o LinkedIn...",value:S,onChange:N=>_(N.target.value),className:"min-h-[80px]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Call to Action"}),e.jsx(ne,{placeholder:"¿Qué quieres que hagan los viewers?",value:d,onChange:N=>i(N.target.value)})]}),b.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Versiones anteriores"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:b.map((N,k)=>e.jsxs("div",{className:"p-2 bg-gray-50 rounded text-sm cursor-pointer hover:bg-gray-100",onClick:()=>w(N),children:[N.substring(0,100),"..."]},k))})]})]})}),e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Js,{className:"w-5 h-5"}),"Hashtags (",L.length,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{placeholder:"Agregar hashtag...",value:E,onChange:N=>M(N.target.value),onKeyPress:N=>N.key==="Enter"&&C()}),e.jsx(h,{onClick:C,size:"sm",children:"Agregar"})]}),L.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Hashtags seleccionados"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:L.map(N=>e.jsxs($,{variant:"secondary",className:"cursor-pointer hover:bg-red-100",onClick:()=>ee(N),children:[N," ×"]},N))}),e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>pe(L.join(" "),"hashtags"),className:"w-full",children:[A==="hashtags"?e.jsx(js,{className:"w-3 h-3 mr-1"}):e.jsx(Qe,{className:"w-3 h-3 mr-1"}),"Copiar hashtags"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium",children:["Sugerencias para ",U]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Ls.filter(N=>!L.includes(N)).slice(0,8).map(N=>e.jsxs($,{variant:"outline",className:"cursor-pointer hover:bg-red-50",onClick:()=>se(N),children:[N," +"]},N))})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Acciones"}),e.jsx(h,{onClick:Ge,variant:"outline",className:"w-full",children:A==="full"?e.jsxs(e.Fragment,{children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"¡Copiado!"]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Copiar todo el contenido"]})}),Y&&e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>pe(Y,"transcript"),className:"w-full",children:[e.jsx(Va,{className:"w-3 h-3 mr-2"}),"Copiar transcripción"]})]})]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(h,{variant:"outline",onClick:o,children:"← Volver a Edición"}),e.jsx(h,{onClick:Ie,disabled:!Ke,className:"bg-red-500 hover:bg-red-600",children:"Programar Video →"})]}),!Ke&&e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Completa al menos el caption para continuar"})]})}const ti={tiktok:{ratio:"9:16",width:1080,height:1920,maxDuration:180,recommendedDurations:[15,30,60]},instagram:{ratio:"9:16",width:1080,height:1920,maxDuration:90,recommendedDurations:[15,30,60,90]},youtube:{ratio:"16:9",width:1920,height:1080,maxDuration:43200,recommendedDurations:[60,300,600,1200]},linkedin:{ratio:"16:9",width:1920,height:1080,maxDuration:600,recommendedDurations:[60,120,300]},twitter:{ratio:"16:9",width:1280,height:720,maxDuration:140,recommendedDurations:[30,60,120]},multiple:{ratio:"9:16",width:1080,height:1920,maxDuration:60,recommendedDurations:[15,30,60]}},Os={tiktok:de,instagram:ce,youtube:Oe,linkedin:Cs,twitter:Cs},ii={tiktok:"from-black to-gray-800",instagram:"from-pink-500 to-purple-600",youtube:"from-red-500 to-red-600",linkedin:"from-blue-700 to-blue-800",twitter:"from-sky-400 to-sky-600"},We={tiktok:"TikTok",instagram:"Instagram Reels",youtube:"YouTube Shorts",linkedin:"LinkedIn Video",twitter:"X Video"},ri=[{value:"public",label:"Público",description:"Visible para todos"},{value:"unlisted",label:"No listado",description:"Solo con enlace"},{value:"private",label:"Privado",description:"Solo para ti"}];function li(){const{hasBrandKit:t}=ue(),{currentProject:l,updateProject:n,saveProject:u}=he(),[j,g]=a.useState(new Date),[p,o]=a.useState("12:00"),[y,c]=a.useState(""),[w,m]=a.useState(""),[I,S]=a.useState([{platform:l?.briefing.platform||"instagram",status:"pending",customCaption:l?.copywriting.caption||"",customHashtags:l?.copywriting.hashtags||[],customTitle:l?.copywriting.title||"",visibility:"public"}]),[_,L]=a.useState(!1),[T,d]=a.useState("schedule"),i=l?.briefing,s=l?.scenes.filter(D=>l.selectedSceneIds.includes(D.id))||[],v=s.reduce((D,q)=>D+q.duration,0),E=l?.copywriting.caption||"",M=l?.copywriting.hashtags||[],V=l?.copywriting.title||"",r=l?.copywriting.callToAction||"",A=["tiktok","instagram","youtube","linkedin","twitter"],x=D=>{const q=I.find(U=>U.platform===D);S(q?I.filter(U=>U.platform!==D):[...I,{platform:D,status:"pending",customCaption:E,customHashtags:[...M],customTitle:V,visibility:"public"}])},b=(D,q,U)=>{S(X=>X.map(ae=>ae.platform===D?{...ae,[q]:U}:ae))},z=async()=>{if(l){L(!0);try{const D=T==="schedule"?new Date(`${j.toDateString()} ${p}`):T==="now"?new Date:void 0;n({publishing:{scheduledDate:D,platforms:I,status:T==="draft"?"draft":"scheduled",publishingNotes:y,thumbnailCustom:w},status:T==="draft"?"finalizing":"scheduled"}),await u(),setTimeout(()=>{L(!1),S(q=>q.map(U=>({...U,status:T==="now"?"published":"scheduled",postTime:D})))},3e3)}catch(D){console.error("Error scheduling video:",D),L(!1)}}},Y=D=>{const q=D.customTitle||V,U=D.customCaption||E,X=D.customHashtags||M,ae=r;return`${q?`${q}

`:""}${U}

${ae}

${X.join(" ")}`},Z=D=>{const q=Math.floor(D/60),U=Math.floor(D%60);return q>0?`${q}:${U.toString().padStart(2,"0")}`:`${U}s`},H=I.length>0&&(T!=="schedule"||j&&p);return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-red-500 to-pink-600 text-white",children:e.jsx(Ee,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"Publicación del Video"})]}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Programa tu video para publicarse automáticamente en las plataformas seleccionadas"})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[e.jsx(P,{className:"xl:col-span-2 p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5"}),"Programación"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium",children:"¿Cuándo quieres publicar?"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx(P,{className:`p-4 cursor-pointer transition-all ${T==="now"?"ring-2 ring-green-500 bg-green-50":"hover:bg-gray-50"}`,onClick:()=>d("now"),children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(Ra,{className:"w-6 h-6 mx-auto text-green-600"}),e.jsx("h4",{className:"font-medium",children:"Ahora"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Publicar inmediatamente"})]})}),e.jsx(P,{className:`p-4 cursor-pointer transition-all ${T==="schedule"?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"}`,onClick:()=>d("schedule"),children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(De,{className:"w-6 h-6 mx-auto text-blue-600"}),e.jsx("h4",{className:"font-medium",children:"Programar"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Elegir fecha y hora"})]})}),e.jsx(P,{className:`p-4 cursor-pointer transition-all ${T==="draft"?"ring-2 ring-gray-500 bg-gray-50":"hover:bg-gray-50"}`,onClick:()=>d("draft"),children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(xs,{className:"w-6 h-6 mx-auto text-gray-600"}),e.jsx("h4",{className:"font-medium",children:"Borrador"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guardar para después"})]})})]})]}),T==="schedule"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),e.jsx(la,{mode:"single",selected:j,onSelect:D=>D&&g(D),disabled:D=>D<new Date,className:"rounded-md border"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Hora"}),e.jsxs(ye,{value:p,onValueChange:o,children:[e.jsx(we,{children:e.jsx(Ce,{})}),e.jsx(Se,{children:Array.from({length:24},(D,q)=>{const U=q.toString().padStart(2,"0");return e.jsx(te,{value:`${U}:00`,children:`${U}:00`},`${U}:00`)})})]})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Resumen de programación"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Se publicará el"," ",e.jsx("strong",{children:j.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})," ","a las ",e.jsx("strong",{children:p})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Horarios recomendados"}),e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[e.jsx("p",{children:"🎵 TikTok: 09:00 - 12:00, 19:00 - 22:00"}),e.jsx("p",{children:"📱 Instagram: 11:00 - 13:00, 19:00 - 21:00"}),e.jsx("p",{children:"📺 YouTube: 14:00 - 16:00, 20:00 - 22:00"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Plataformas de publicación"}),e.jsx("div",{className:"space-y-4",children:A.map(D=>{const q=Os[D],U=I.some(J=>J.platform===D),X=I.find(J=>J.platform===D),ae=ti[D];return e.jsx(P,{className:`p-4 ${U?"ring-2 ring-blue-500 bg-blue-50":""}`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ps,{checked:U,onCheckedChange:()=>x(D)}),e.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-r ${ii[D]} text-white`,children:e.jsx(q,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium",children:We[D]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[ae.ratio," • Max ",Z(ae.maxDuration)]})]})]}),X?.status&&e.jsx($,{className:X.status==="published"?"bg-green-100 text-green-800":X.status==="scheduled"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800",children:X.status==="published"?"Publicado":X.status==="scheduled"?"Programado":"Pendiente"})]}),U&&X&&e.jsxs("div",{className:"space-y-3 pl-10",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Título (opcional)"}),e.jsx(ne,{placeholder:`Título específico para ${We[D]}...`,value:X.customTitle,onChange:J=>b(D,"customTitle",J.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Descripción personalizada"}),e.jsx(le,{placeholder:`Descripción específica para ${We[D]}...`,value:X.customCaption,onChange:J=>b(D,"customCaption",J.target.value),className:"min-h-[80px]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Hashtags personalizados"}),e.jsx(ne,{placeholder:"Hashtags separados por espacios...",value:X.customHashtags?.join(" ")||"",onChange:J=>b(D,"customHashtags",J.target.value.split(" ").filter(f=>f.trim()))})]}),(D==="youtube"||D==="linkedin")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Visibilidad"}),e.jsxs(ye,{value:X.visibility||"public",onValueChange:J=>b(D,"visibility",J),children:[e.jsx(we,{children:e.jsx(Ce,{})}),e.jsx(Se,{children:ri.map(J=>e.jsx(te,{value:J.value,children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:J.label}),e.jsx("p",{className:"text-xs text-muted-foreground",children:J.description})]})},J.value))})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Us,{className:"w-4 h-4 text-gray-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["Preview para ",We[D]]})]}),e.jsx("div",{className:"text-sm text-gray-700 max-h-32 overflow-y-auto",children:Y(X)})]})]})]})},D)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Thumbnail personalizado (opcional)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{placeholder:"URL de imagen para thumbnail...",value:w,onChange:D=>m(D.target.value)}),e.jsxs(h,{variant:"outline",children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),"Subir"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Notas adicionales (opcional)"}),e.jsx(le,{placeholder:"Notas internas sobre esta publicación...",value:y,onChange:D=>c(D.target.value),className:"min-h-[80px]"})]})]})}),e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Resumen Final"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Video"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-full aspect-[9/16] bg-gray-900 rounded-lg flex items-center justify-center border",children:s.length>0?e.jsxs("div",{className:"text-center text-white",children:[e.jsx(de,{className:"w-12 h-12 mx-auto mb-4 opacity-70"}),e.jsxs("p",{className:"text-sm font-medium",children:[i?.videoType," - ",Z(v)]}),e.jsxs("p",{className:"text-xs opacity-70",children:[s.length," escenas"]})]}):e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx(de,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Sin escenas seleccionadas"})]})}),t&&e.jsxs($,{className:"absolute top-2 right-2 bg-green-100 text-green-800",children:[e.jsx(ie,{className:"w-3 h-3 mr-1"}),"BrandKit aplicado"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium",children:"Contenido"}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg space-y-2",children:[V&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Título:"}),e.jsx("p",{className:"text-sm font-medium",children:V})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Descripción:"}),e.jsxs("p",{className:"text-sm",children:[E.substring(0,100),"..."]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Hashtags:"}),e.jsx("p",{className:"text-sm text-blue-600",children:M.slice(0,5).join(" ")})]}),r&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"CTA:"}),e.jsx("p",{className:"text-sm",children:r})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium",children:"Publicación"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Modo:"}),e.jsx($,{variant:"outline",children:T==="now"?"Inmediato":T==="schedule"?"Programado":"Borrador"})]}),T==="schedule"&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Fecha:"}),e.jsxs("span",{children:[j.toLocaleDateString()," ",p]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Plataformas:"}),e.jsx("span",{children:I.length})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Duración:"}),e.jsx("span",{children:Z(v)})]})]})]}),I.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Plataformas seleccionadas"}),e.jsx("div",{className:"space-y-1",children:I.map(D=>{const q=Os[D.platform];return e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:We[D.platform]}),e.jsx($,{variant:"outline",className:"ml-auto",children:D.status==="published"?"Publicado":D.status==="scheduled"?"Programado":"Pendiente"})]},D.platform)})})]})]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(h,{variant:"outline",onClick:()=>window.history.back(),children:"← Volver a Copywriting"}),e.jsx(h,{onClick:z,disabled:!H||_,className:"bg-red-500 hover:bg-red-600",children:_?e.jsxs(e.Fragment,{children:[e.jsx(ns,{className:"w-4 h-4 mr-2 animate-spin"}),"Procesando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),T==="now"?"Publicar Ahora":T==="schedule"?"Programar Video":"Guardar como Borrador"]})})]}),!H&&e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Selecciona al menos una plataforma y completa la configuración para continuar"}),_&&e.jsx(P,{className:"p-6 bg-gradient-to-r from-red-50 to-pink-50 border-red-200",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(de,{className:"w-8 h-8 text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold",children:T==="now"?"Publicando video...":T==="schedule"?"Programando video...":"Guardando borrador..."}),e.jsx("p",{className:"text-muted-foreground",children:"Tu video se está procesando con el BrandKit aplicado"}),e.jsxs("div",{className:"flex justify-center gap-2 text-sm text-gray-600",children:[e.jsxs("span",{children:["📱 ",I.length," plataformas"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["⏱️ ",Z(v)]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["🎬 ",s.length," escenas"]})]})]})})]})}const ve=["briefing","configuration","storyboard","generation","editing","copywriting","publishing"],ni={briefing:Le,configuration:Be,storyboard:it,generation:oe,editing:sa,copywriting:ms,publishing:Ee},ci={briefing:"Briefing (Flow)",configuration:"Configuración Técnica",storyboard:"Storyboard Narrativo",generation:"Generación de Escenas",editing:"Edición Multipista",copywriting:"Captions & Subtítulos",publishing:"Publicación Final"};function oi(){const{hasBrandKit:t}=ue(),{currentProject:l,currentStep:n,setCurrentStep:u,saveProject:j}=he(),[g,p]=a.useState(!1),[o,y]=a.useState("briefing");if(a.useEffect(()=>{y(n)},[n]),!l)return e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-blue-100 to-indigo-100 rounded-full flex items-center justify-center",children:e.jsx(Te,{className:"w-8 h-8 text-blue-500"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No hay proyecto activo"}),e.jsx("p",{className:"text-muted-foreground",children:"Selecciona crear un nuevo Video Largo para comenzar"})]})});const c=()=>{const i=ve.indexOf(o);if(i<ve.length-1){const s=ve[i+1];y(s),s!=="configuration"&&s!=="storyboard"&&u(s)}},w=()=>{const i=ve.indexOf(o);if(i>0){const s=ve[i-1];y(s),s!=="configuration"&&s!=="storyboard"&&u(s)}},m=ve.indexOf(o),I=(m+1)/ve.length*100,S=async()=>{try{p(!0),await j()}catch(i){console.error("Error saving:",i)}finally{p(!1)}},_=()=>{switch(o){case"briefing":return e.jsx(Vs,{onNext:()=>{y("configuration")}});case"configuration":return e.jsx(ut,{onNext:c,onPrevious:w});case"storyboard":return e.jsx(pt,{onNext:c,onPrevious:w});case"generation":return e.jsx(gt,{onNext:c,onPrevious:w});case"editing":return e.jsx(ei,{onNext:c,onPrevious:w});case"copywriting":return e.jsx(ai,{});case"publishing":return e.jsx(li,{});default:return e.jsx(Vs,{onNext:()=>y("configuration")})}},L=()=>"Video Largo con Flow",T=()=>l.selectedSceneIds?.length||0,d=()=>l.scenes.filter(s=>l.selectedSceneIds?.includes(s.id)).reduce((s,v)=>s+v.duration,0);return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"p-6 border-b bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 text-white",children:e.jsx(Te,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-2xl font-bold",children:l.title}),e.jsx($,{className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:L()}),l.briefing.platform&&e.jsx($,{variant:"secondary",className:"capitalize",children:l.briefing.platform}),t&&e.jsx($,{className:"bg-green-100 text-green-800",children:"BrandKit Activo"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[o==="briefing"||o==="configuration"||o==="storyboard"?e.jsxs($,{variant:"secondary",className:"text-sm px-3 py-1",children:["Paso ",m+1," de ",ve.length]}):e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[l.scenes.length>0&&e.jsxs("span",{children:[l.scenes.length," escenas creadas"]}),T()>0&&e.jsxs("span",{children:[T()," seleccionadas"]}),d()>0&&e.jsxs("span",{children:["~",Math.round(d()),"s duración"]})]}),e.jsxs(h,{variant:"outline",onClick:S,disabled:g,children:[e.jsx(xs,{className:"w-4 h-4 mr-2"}),g?"Guardando...":"Guardar"]})]})]}),o!=="briefing"&&o!=="configuration"&&o!=="storyboard"&&e.jsxs(e.Fragment,{children:[e.jsx(Ms,{showOnlyWarning:!0}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Progreso del Video Largo con Flow"}),e.jsxs("span",{children:[Math.round(I),"% completado"]})]}),e.jsx(ea,{value:I,className:"h-2"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-1",children:ve.map((i,s)=>{const v=ni[i],E=o===i,M=s<m,V=s<=m;return e.jsxs(h,{variant:E?"default":"ghost",size:"sm",className:`gap-2 ${M?"text-green-600":E?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white":V?"text-muted-foreground":"text-gray-400"}`,onClick:()=>{V&&i!=="configuration"&&i!=="storyboard"&&(y(i),i!=="configuration"&&i!=="storyboard"&&u(i))},disabled:!V||i==="configuration"||i==="storyboard",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:ci[i]}),M&&e.jsx(ie,{className:"w-3 h-3 text-green-600"})]},i)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{variant:"outline",size:"sm",onClick:w,disabled:m===0,children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Anterior"]}),e.jsxs(h,{size:"sm",onClick:c,disabled:m===ve.length-1,className:"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700",children:["Siguiente",e.jsx(xe,{className:"w-4 h-4 ml-2"})]})]})]})]})]})}),e.jsx("div",{className:`flex-1 overflow-auto ${o==="briefing"||o==="configuration"||o==="storyboard"?"":"bg-gradient-to-br from-blue-50 to-indigo-50"}`,children:_()})]})}const di=[{command:"/brief",hint:"Estructura objetivo→audiencia→mensaje→CTA"},{command:"/hook",hint:"Generar 3 ganchos (3s)"},{command:"/style",hint:"Definir estilo visual"},{command:"/music",hint:"Mood musical"},{command:"/subs",hint:"Subtítulos & idioma"}],mi=[{role:"user",content:"Quiero un Reel vertical sobre nuestra nueva promo de envío a Cuba, tono enérgico."},{role:"assistant",content:'Entendido. @objetivo: presentar promo; @audiencia: clientes en Miami; @duracion: 30s; @plataforma: Reels; @hook: "Ahorra hoy, envía ya"; @cta: "Reserva en línea".'}],_s=[{value:"instagram",label:"Instagram",maxDuration:90},{value:"facebook",label:"Facebook",maxDuration:90},{value:"tiktok",label:"TikTok",maxDuration:60},{value:"youtube",label:"YouTube Shorts",maxDuration:60}],xi=["Enérgica","Cálida","Corporativa","Urbana","Electrónica"],ui=[{value:"es",label:"ES",selected:!0},{value:"en",label:"EN",selected:!1},{value:"multi",label:"Multi",selected:!1}],hi=["Objetivo definido (AI)","Audiencia definida (AI)","Hook (0–3s) definido (AI)","CTA definido (AI)","Duración y plataforma elegidas","Branding bloqueado por BrandKit","Audio/subtítulos definidos"];function Gs({onNext:t}){const{hasBrandKit:l}=ue(),{currentProject:n,updateBriefing:u,goToNextStep:j}=he(),[g,p]=a.useState("Reel"),[o,y]=a.useState("Promo Envíos Cuba – Octubre"),[c,w]=a.useState(""),[m,I]=a.useState(["instagram"]),[S,_]=a.useState([30]),[L,T]=a.useState(""),[d,i]=a.useState(""),[s,v]=a.useState(""),[E,M]=a.useState(""),[V,r]=a.useState("Enérgica"),[A,x]=a.useState(!1),[b,z]=a.useState(["es"]),[Y,Z]=a.useState(""),[H,D]=a.useState({objective:!1,audience:!1,hook:!1,cta:!1,duration:!1,music:!1,captions:!1}),[q,U]=a.useState("");a.useEffect(()=>{if(n?.briefing){const C=n.briefing;C.description&&w(C.description),C.duration?.target&&_([C.duration.target])}},[n]);const X=_s.filter(C=>m.includes(C.value)),ae=Math.min(...X.map(C=>C.maxDuration)),J=C=>{I(ee=>ee.includes(C)?ee.filter(se=>se!==C):[...ee,C])},f=C=>{z(ee=>ee.includes(C)?ee.filter(se=>se!==C):[...ee,C])},O=()=>{q.trim()&&U("")},K=o&&m.length>0&&S[0],B=()=>{K&&(u({videoType:"short",description:c,duration:{target:S[0],min:Math.max(10,S[0]-10),max:Math.min(ae,S[0]+15),label:`${S[0]}s`},platform:m[0],style:"trendy",objectives:[L||"viral"],flowRequired:!1}),t?t():j())},W=Object.values(H).filter(Boolean).length;return e.jsx("div",{className:"h-full bg-canvas",children:e.jsxs("div",{className:"h-full flex gap-4 p-4",children:[e.jsxs("div",{className:"w-[520px] flex flex-col bg-white rounded-lg shadow-sm",children:[e.jsxs("div",{className:"p-3 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Le,{className:"w-4 h-4 text-pink-600"}),e.jsx("h3",{className:"text-sm font-medium",children:"Chat Maestro (Briefing de Short / Reel)"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"El chat entiende y rellena el formulario usando etiquetas como: @objetivo, @audiencia, @hook, @cta, @duracion, @musica, @capciones, @colores, @logo, @referencias."}),e.jsx("div",{className:"flex flex-wrap gap-1",children:di.map(C=>e.jsx(h,{variant:"outline",size:"sm",className:"h-6 px-2 text-xs border-dashed",onClick:()=>U(C.command+" "),children:C.command},C.command))})]}),e.jsx(Je,{className:"flex-1 p-3",children:e.jsx("div",{className:"space-y-3",children:mi.map((C,ee)=>e.jsx("div",{className:`flex ${C.role==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] p-2 rounded-lg text-sm ${C.role==="user"?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"}`,children:C.content})},ee))})}),e.jsxs("div",{className:"p-3 border-t",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{value:q,onChange:C=>U(C.target.value),placeholder:"Describe tu Short/Reel...",onKeyDown:C=>C.key==="Enter"&&O(),className:"flex-1"}),e.jsx(h,{size:"sm",onClick:O,children:e.jsx(Ee,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Estado: ",W," campos autocompletados · ",7-W," pendientes"]})]})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg shadow-sm",children:[e.jsx("h2",{className:"text-lg font-medium",children:"Nuevo Short / Reel"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx(h,{variant:g==="Short"?"default":"ghost",size:"sm",onClick:()=>p("Short"),className:"h-7 px-3 text-xs",children:"Short"}),e.jsx(h,{variant:g==="Reel"?"default":"ghost",size:"sm",onClick:()=>p("Reel"),className:"h-7 px-3 text-xs",children:"Reel"})]}),e.jsx($,{variant:"secondary",className:"text-xs",children:"Paso 1 de 5"})]})]}),e.jsxs(P,{className:"p-3",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Proyecto"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"project-name",className:"text-xs",children:"Nombre del proyecto"}),e.jsx(ne,{id:"project-name",value:o,onChange:C=>y(C.target.value),placeholder:"Promo Envíos Cuba – Octubre",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"project-desc",className:"text-xs",children:"Descripción breve"}),e.jsx(le,{id:"project-desc",value:c,onChange:C=>w(C.target.value),placeholder:"Contexto, propósito, links internos",rows:2,className:"mt-1 resize-none"})]})]})]}),e.jsxs(P,{className:"p-3",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Plataforma & Formato"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(R,{className:"text-xs",children:"Plataforma"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:_s.map(C=>e.jsx(h,{variant:m.includes(C.value)?"default":"outline",size:"sm",onClick:()=>J(C.value),className:"h-7 px-3 text-xs",children:C.label},C.value))})]}),e.jsxs("div",{children:[e.jsx(R,{className:"text-xs",children:"Relación de aspecto"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 p-2 bg-gray-50 rounded text-xs text-muted-foreground",children:[e.jsx(rs,{className:"w-3 h-3"}),"9:16 (vertical)"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(R,{className:"text-xs",children:"Duración (seg.)"}),H.duration&&e.jsx($,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800",children:"AI"})]}),e.jsxs("div",{className:"space-y-2 mt-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{children:[S[0],"s"]}),e.jsxs("span",{className:"text-muted-foreground",children:["Max: ",ae,"s"]})]}),e.jsx(be,{value:S,onValueChange:_,min:5,max:ae,step:5,className:"w-full"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Shorts: 15–60s · Reels: 30–90s"})]})]})]}),e.jsxs(P,{className:"p-3",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Estrategia de contenido"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(R,{htmlFor:"objective",className:"text-xs",children:"Objetivo"}),H.objective&&e.jsx($,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800",children:"AI"})]}),e.jsx(le,{id:"objective",value:L,onChange:C=>T(C.target.value),placeholder:"Conversión, awareness, tráfico…",rows:2,className:`mt-1 resize-none ${H.objective?"bg-blue-50 border-blue-200":""}`})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(R,{htmlFor:"audience",className:"text-xs",children:"Audiencia"}),H.audience&&e.jsx($,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800",children:"AI"})]}),e.jsx(le,{id:"audience",value:d,onChange:C=>i(C.target.value),placeholder:"Ej: Clientes en Miami, 20–45, remesas/envíos",rows:2,className:`mt-1 resize-none ${H.audience?"bg-blue-50 border-blue-200":""}`})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(R,{htmlFor:"hook",className:"text-xs",children:"Hook (0–3s)"}),H.hook&&e.jsx($,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800",children:"AI"})]}),e.jsx(ne,{id:"hook",value:s,onChange:C=>v(C.target.value),placeholder:"El gancho inicial",className:`mt-1 ${H.hook?"bg-blue-50 border-blue-200":""}`})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(R,{htmlFor:"cta",className:"text-xs",children:"CTA"}),H.cta&&e.jsx($,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800",children:"AI"})]}),e.jsx(ne,{id:"cta",value:E,onChange:C=>M(C.target.value),placeholder:"Qué deben hacer (Reserva en línea, Llama hoy…)",className:`mt-1 ${H.cta?"bg-blue-50 border-blue-200":""}`})]})]})]}),e.jsxs(P,{className:"p-3",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Branding (desde BrandKit)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(R,{className:"text-xs",children:"Paleta"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 p-2 bg-gray-50 rounded text-xs",children:[e.jsx(rs,{className:"w-3 h-3 text-primary"}),e.jsx("span",{children:"Primaria"})]})]}),e.jsxs("div",{children:[e.jsx(R,{className:"text-xs",children:"Tipografía"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 p-2 bg-gray-50 rounded text-xs",children:[e.jsx(rs,{className:"w-3 h-3 text-primary"}),e.jsx("span",{children:"Titulares"})]})]}),e.jsxs("div",{children:[e.jsx(R,{className:"text-xs",children:"Logo"}),e.jsxs(ye,{defaultValue:"principal",children:[e.jsx(we,{className:"mt-1",children:e.jsx(Ce,{})}),e.jsxs(Se,{children:[e.jsx(te,{value:"principal",children:"Principal"}),e.jsx(te,{value:"negativo",children:"Negativo"}),e.jsx(te,{value:"alternativo",children:"Alternativo"})]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Las opciones siguen el BrandKit. No se permiten colores/tipos fuera de norma."})]})]}),e.jsxs(P,{className:"p-3",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Audio & Subtítulos"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(R,{className:"text-xs",children:"Música (mood)"}),H.music&&e.jsx($,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800",children:"AI"})]}),e.jsxs(ye,{value:V,onValueChange:r,children:[e.jsx(we,{className:"mt-1",children:e.jsx(Ce,{})}),e.jsx(Se,{children:xi.map(C=>e.jsx(te,{value:C,children:C},C))})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(R,{htmlFor:"voice-over",className:"text-xs",children:"Voz en off"}),e.jsx(os,{id:"voice-over",checked:A,onCheckedChange:x})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(R,{className:"text-xs",children:"Subtítulos"}),H.captions&&e.jsx($,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800",children:"AI"})]}),e.jsx("div",{className:"flex gap-2 mt-1",children:ui.map(C=>e.jsx(h,{variant:b.includes(C.value)?"default":"outline",size:"sm",onClick:()=>f(C.value),className:"h-7 px-3 text-xs",children:C.label},C.value))})]})]})]}),e.jsxs(P,{className:"p-3",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Referencias"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(R,{className:"text-xs",children:"Subir imágenes/videos de referencia (opcional)"}),e.jsxs("div",{className:"mt-1 border-2 border-dashed border-gray-200 rounded-lg p-3 text-center",children:[e.jsx(ds,{className:"w-6 h-6 mx-auto text-gray-400 mb-1"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Arrastra archivos aquí o haz clic para seleccionar"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:".png, .jpg, .mp4, .pdf"})]})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"style-notes",className:"text-xs",children:"Notas de estilo / restricciones"}),e.jsx(le,{id:"style-notes",value:Y,onChange:C=>Z(C.target.value),placeholder:"Evitar claims sensibles, respetar zonas seguras del logo…",rows:2,className:"mt-1 resize-none"})]})]})]}),e.jsxs(P,{className:"p-3",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Checklist de completitud"}),e.jsx("div",{className:"space-y-2",children:hi.map((C,ee)=>e.jsxs("div",{className:"flex items-center gap-2",children:[Math.random()>.6?e.jsx(ie,{className:"w-4 h-4 text-green-500"}):e.jsx(qs,{className:"w-4 h-4 text-gray-300"}),e.jsx("span",{className:"text-xs",children:C})]},ee))})]}),e.jsx("div",{className:"flex justify-end bg-white p-3 rounded-lg shadow-sm",children:e.jsxs(h,{onClick:B,disabled:!K,className:"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white",children:["Siguiente: Configuración",e.jsx(xe,{className:"w-4 h-4 ml-2"})]})})]})})]})})}const Ks=[{value:"tiktok",label:"TikTok",icon:"🎵",maxDuration:60,recommendedDuration:[15,30,60]},{value:"instagram",label:"Instagram Reels",icon:"📷",maxDuration:90,recommendedDuration:[30,60,90]},{value:"youtube",label:"YouTube Shorts",icon:"▶️",maxDuration:60,recommendedDuration:[15,30,60]},{value:"facebook",label:"Facebook Reels",icon:"👥",maxDuration:90,recommendedDuration:[30,60,90]}],pi=[{value:"cinematic",label:"Cinemático"},{value:"dynamic",label:"Dinámico"},{value:"minimal",label:"Minimalista"},{value:"corporate",label:"Corporativo"},{value:"urban",label:"Urbano"}];function gi({onNext:t,onPrevious:l}){const{hasBrandKit:n}=ue(),{currentProject:u,updateBriefing:j,goToNextStep:g,goToPreviousStep:p}=he(),[o,y]=a.useState(["instagram"]),[c,w]=a.useState([30]),[m,I]=a.useState("dynamic"),[S,_]=a.useState([2]);a.useEffect(()=>{if(u?.briefing){const r=u.briefing;r.platform&&y([r.platform]),r.duration?.target&&w([r.duration.target]),r.style&&I(r.style)}},[u]);const L=()=>{if(o.length===0)return{minDuration:5,maxDuration:90};const r=Ks.filter(b=>o.includes(b.value)),A=5,x=Math.min(...r.map(b=>b.maxDuration));return{minDuration:A,maxDuration:x}},{minDuration:T,maxDuration:d}=L();a.useEffect(()=>{c[0]>d?w([d]):c[0]<T&&w([T])},[d,T,c]);const i=r=>{y(A=>A.includes(r)?A.filter(x=>x!==r):[...A,r])},s=r=>{I(r)},v=o.length>0&&c[0]&&m&&S[0],E=()=>{v&&(j({platform:o[0],duration:{target:c[0],min:Math.max(T,c[0]-10),max:Math.min(d,c[0]+15),label:`${c[0]}s`},style:m,platforms:o,versions:S[0]}),t?t():g())},M=()=>{l?l():p()},V=r=>`${r}s`;return e.jsx("div",{className:"h-full bg-canvas",children:e.jsxs("div",{className:"max-w-4xl mx-auto p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Configuración de Short / Reel"}),e.jsx($,{variant:"secondary",className:"text-sm px-3 py-1",children:"Paso 2 de 5"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ce,{className:"w-5 h-5 text-pink-600"}),e.jsx("h3",{className:"text-lg font-medium",children:"Plataforma & Formato"})]}),e.jsxs("div",{children:[e.jsx(R,{className:"text-sm font-medium mb-3 block",children:"Plataforma"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Ks.map(r=>e.jsxs(h,{variant:o.includes(r.value)?"default":"outline",onClick:()=>i(r.value),className:"h-auto p-3 flex flex-col items-center gap-2 transition-all",children:[e.jsx("span",{className:"text-lg",children:r.icon}),e.jsx("span",{className:"text-xs text-center leading-tight",children:r.label})]},r.value))})]}),e.jsxs("div",{children:[e.jsx(R,{className:"text-sm font-medium mb-2 block",children:"Relación de aspecto"}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg text-sm text-muted-foreground",children:[e.jsx(rs,{className:"w-4 h-4"}),e.jsx("span",{children:"9:16 (vertical)"})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"text-sm font-medium mb-2 block text-center",children:"Preview 9:16"}),e.jsx("div",{className:"bg-gray-200 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center",style:{width:"120px",height:"220px"},children:e.jsxs("div",{className:"text-center text-xs text-gray-500",children:[e.jsx(ce,{className:"w-6 h-6 mx-auto mb-1"}),e.jsx("div",{children:"Preview"}),e.jsx("div",{children:"9:16"})]})})]})})]})}),e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(De,{className:"w-5 h-5 text-pink-600"}),e.jsx("h3",{className:"text-lg font-medium",children:"Duración"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(R,{className:"text-sm font-medium",children:"Duración (segundos)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{type:"number",value:c[0],onChange:r=>{const A=parseInt(r.target.value)||T,x=Math.max(T,Math.min(d,A));w([x])},min:T,max:d,className:"w-20 h-8 text-center"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"seg"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(be,{value:c,onValueChange:w,min:T,max:d,step:5,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:V(T)}),e.jsx("span",{children:V(d)})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Shorts: 15–60s · Reels: 30–90s"})]})]})}),e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ts,{className:"w-5 h-5 text-pink-600"}),e.jsx("h3",{className:"text-lg font-medium",children:"Estilo Visual"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:pi.map(r=>e.jsx(h,{variant:m===r.value?"default":"outline",onClick:()=>s(r.value),className:"h-auto p-3 text-center transition-all",children:e.jsx("span",{className:"text-sm",children:r.label})},r.value))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Se aplicarán colores y tipografías del BrandKit."})]})}),e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Qe,{className:"w-5 h-5 text-pink-600"}),e.jsx("h3",{className:"text-lg font-medium",children:"Cantidad de Versiones"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(R,{className:"text-sm font-medium",children:"Número de variaciones a generar"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{type:"number",value:S[0],onChange:r=>{const A=parseInt(r.target.value)||1,x=Math.max(1,Math.min(5,A));_([x])},min:1,max:5,className:"w-16 h-8 text-center"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"versiones"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(be,{value:S,onValueChange:_,min:1,max:5,step:1,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"1 versión"}),e.jsx("span",{children:"5 versiones"})]})]})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(je,{className:"w-4 h-4 text-amber-600"}),e.jsx("p",{className:"text-sm text-amber-800",children:"Todo el contenido será validado contra el BrandKit antes de exportar."})]})]}),e.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[e.jsxs(h,{variant:"ghost",onClick:M,className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"}),"Volver"]}),e.jsxs(h,{onClick:E,disabled:!v,className:"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white flex items-center gap-2",children:["Siguiente: Generación",e.jsx(xe,{className:"w-4 h-4"})]})]}),!v&&e.jsx("p",{className:"text-sm text-gray-500 text-center mt-2",children:"Selecciona al menos una plataforma y configura todos los parámetros para continuar"})]})})}const ji=[{id:"prop-1",title:"Propuesta Dinámica",duration:30,platform:"Instagram Reels",style:"Dinámico",validation:"valid",preview:{backgroundColor:"#E91E63"},metadata:{scenes:5,transitions:8,textOverlays:3}},{id:"prop-2",title:"Propuesta Minimalista",duration:45,platform:"TikTok",style:"Minimalista",validation:"warning",validationMessage:"Revisar contraste",preview:{backgroundColor:"#9C27B0"},metadata:{scenes:3,transitions:4,textOverlays:2}},{id:"prop-3",title:"Propuesta Urbana",duration:35,platform:"YouTube Shorts",style:"Urbano",validation:"valid",preview:{backgroundColor:"#FF9800"},metadata:{scenes:6,transitions:10,textOverlays:4}},{id:"prop-4",title:"Propuesta Corporativa",duration:40,platform:"Instagram Reels",style:"Corporativo",validation:"valid",preview:{backgroundColor:"#2196F3"},metadata:{scenes:4,transitions:6,textOverlays:3}},{id:"prop-5",title:"Propuesta Cinemática",duration:50,platform:"TikTok",style:"Cinemático",validation:"error",validationMessage:"Duración excede límite de plataforma",preview:{backgroundColor:"#4CAF50"},metadata:{scenes:7,transitions:12,textOverlays:5}},{id:"prop-6",title:"Propuesta Trendy",duration:25,platform:"Instagram Reels",style:"Dinámico",validation:"valid",preview:{backgroundColor:"#FF5722"},metadata:{scenes:4,transitions:7,textOverlays:2}}];function fi({onNext:t,onPrevious:l}){const{hasBrandKit:n}=ue(),{currentProject:u,updateBriefing:j,goToNextStep:g,goToPreviousStep:p}=he(),[o,y]=a.useState(!0),[c,w]=a.useState([]),[m,I]=a.useState([]),[S,_]=a.useState(null);a.useEffect(()=>{const r=setTimeout(()=>{w(ji),y(!1)},3e3);return()=>clearTimeout(r)},[]);const L=r=>{I(A=>A.includes(r)?A.filter(x=>x!==r):[...A,r])},T=()=>{m.length===c.length?I([]):I(c.map(r=>r.id))},d=r=>{w(A=>A.filter(x=>x.id!==r)),I(A=>A.filter(x=>x!==r))},i=r=>{_(S===r?null:r)},s=m.length>0,v=()=>{s&&(j({selectedProposals:m,totalProposals:c.length}),t?t():g())},E=()=>{l?l():p()},M=r=>{switch(r){case"valid":return e.jsx(ie,{className:"w-4 h-4 text-green-500"});case"warning":return e.jsx(je,{className:"w-4 h-4 text-yellow-500"});case"error":return e.jsx(je,{className:"w-4 h-4 text-red-500"})}},V=r=>{switch(r.validation){case"valid":return"✅ Validado";case"warning":return`⚠️ ${r.validationMessage}`;case"error":return`❌ ${r.validationMessage}`}};return o?e.jsx("div",{className:"h-full bg-canvas",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Generación de Shorts / Reels"}),e.jsx($,{variant:"secondary",className:"text-sm px-3 py-1",children:"Paso 3 de 5"})]}),e.jsx(P,{className:"p-8 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(za,{className:"w-8 h-8 animate-spin text-pink-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Generando tus propuestas con IA…"}),e.jsx("p",{className:"text-muted-foreground",children:"Creando múltiples versiones basadas en tu briefing y configuración"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((r,A)=>e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(ge,{className:"w-full h-64 rounded-lg"}),e.jsx(ge,{className:"h-4 w-3/4"}),e.jsx(ge,{className:"h-3 w-1/2"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ge,{className:"h-8 w-16"}),e.jsx(ge,{className:"h-8 w-16"})]})]})},A))})]})}):e.jsx("div",{className:"h-full bg-canvas",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Generación de Shorts / Reels"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx($,{variant:"secondary",className:"text-sm px-3 py-1",children:"Paso 3 de 5"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[m.length," propuestas seleccionadas"]}),e.jsx(h,{variant:"ghost",size:"sm",onClick:T,children:m.length===c.length?"Deseleccionar todo":"Seleccionar todo"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(r=>e.jsxs(P,{className:"p-4 relative",children:[e.jsx("div",{className:"absolute top-3 right-3 z-10",children:e.jsx(Ps,{checked:m.includes(r.id),onCheckedChange:()=>L(r.id),className:"bg-white border-2 shadow-sm"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-full h-64 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center overflow-hidden",style:{backgroundColor:r.preview.backgroundColor},children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx(ce,{className:"w-8 h-8 mx-auto mb-2 opacity-80"}),e.jsx("div",{className:"text-sm font-medium opacity-90",children:"Preview Short/Reel"}),e.jsx("div",{className:"text-xs opacity-70",children:r.style})]})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{variant:"ghost",size:"sm",onClick:()=>i(r.id),className:"flex-1",children:[e.jsx(na,{className:"w-4 h-4 mr-1"}),"Ampliar"]}),e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>d(r.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(Es,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:["Duración: ",r.duration,"s"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:["Plataforma: ",r.platform]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ts,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:["Estilo: ",r.style]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[M(r.validation),e.jsx("span",{className:`text-xs ${r.validation==="valid"?"text-green-600":r.validation==="warning"?"text-yellow-600":"text-red-600"}`,children:V(r)})]})]}),S===r.id&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg text-xs space-y-1",children:[e.jsxs("div",{children:["Escenas: ",r.metadata.scenes]}),e.jsxs("div",{children:["Transiciones: ",r.metadata.transitions]}),e.jsxs("div",{children:["Textos superpuestos: ",r.metadata.textOverlays]})]})]})]},r.id))}),c.length===0&&e.jsx(P,{className:"p-8 text-center",children:e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx(ce,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No hay propuestas disponibles"}),e.jsx("p",{children:"Todas las propuestas han sido descartadas. Vuelve al paso anterior para generar nuevas propuestas."})]})}),c.length>0&&e.jsx(P,{className:"p-4 bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ie,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-blue-900",children:[c.length," propuestas generadas"]}),e.jsx("p",{className:"text-sm text-blue-800",children:"Selecciona las que más te gusten para continuar con la edición. Puedes elegir múltiples opciones para compararlas."})]})]})}),e.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[e.jsxs(h,{variant:"ghost",onClick:E,className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"}),"Volver"]}),e.jsxs(h,{onClick:v,disabled:!s,className:"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white flex items-center gap-2",children:["Siguiente: Edición",e.jsx(xe,{className:"w-4 h-4"})]})]}),!s&&e.jsx("p",{className:"text-sm text-gray-500 text-center mt-2",children:"Selecciona al menos una propuesta para continuar"})]})})}const vi=[{id:"video",label:"Video",color:"#3B82F6",clips:[{id:"clip1",name:"Clip 1",start:0,duration:8,color:"#3B82F6"},{id:"clip2",name:"Clip 2",start:8,duration:12,color:"#3B82F6"},{id:"clip3",name:"Clip 3",start:20,duration:10,color:"#3B82F6"}]},{id:"overlays",label:"Overlays",color:"#FACC15",clips:[{id:"text1",name:"Texto 1",start:2,duration:5,color:"#FACC15"},{id:"logo1",name:"Logo",start:15,duration:8,color:"#FACC15"}]},{id:"subtitles",label:"Subtítulos",color:"#10B981",clips:[{id:"sub1",name:"Subs línea 1",start:0,duration:10,color:"#10B981"},{id:"sub2",name:"Subs línea 2",start:10,duration:20,color:"#10B981"}]},{id:"audio",label:"Audio",color:"#EC4899",clips:[{id:"music1",name:"Música base",start:0,duration:30,color:"#EC4899"},{id:"fx1",name:"FX",start:8,duration:3,color:"#F97316"}]}],Ni=[{id:"1",role:"user",content:"Agrega subtítulos en inglés",timestamp:new Date(Date.now()-4e5)},{id:"2",role:"assistant",content:"✅ Subtítulos en inglés generados y sincronizados.",timestamp:new Date(Date.now()-38e4)},{id:"3",role:"assistant",content:"⚠️ Contraste bajo detectado en subtítulos, sugerido color #FFFFFF.",timestamp:new Date(Date.now()-36e4)},{id:"4",role:"user",content:"Reduce el volumen de la música",timestamp:new Date(Date.now()-18e4)},{id:"5",role:"assistant",content:"✅ Música reducida a 60%.",timestamp:new Date(Date.now()-16e4)}];function bi({onNext:t,onPrevious:l}){const{hasBrandKit:n,brandKit:u}=ue(),{currentProject:j,updateBriefing:g,goToNextStep:p,goToPreviousStep:o}=he(),y=Pe.useMemo(()=>{if(u?.colors){const k=[];return u.colors.primary&&u.colors.primary.forEach((G,re)=>{k.push({name:`Primario ${re+1}`,hex:G})}),u.colors.secondary&&u.colors.secondary.forEach((G,re)=>{k.push({name:`Secundario ${re+1}`,hex:G})}),u.colors.alternatives&&u.colors.alternatives.forEach((G,re)=>{k.push({name:`Alternativo ${re+1}`,hex:G})}),k.length>0?k:[{name:"Primario",hex:"#E91E63"},{name:"Secundario",hex:"#9C27B0"},{name:"Texto",hex:"#212121"},{name:"Fondo",hex:"#FFFFFF"}]}return[{name:"Primario",hex:"#E91E63"},{name:"Secundario",hex:"#9C27B0"},{name:"Texto",hex:"#212121"},{name:"Fondo",hex:"#FFFFFF"}]},[u?.colors]),c=Pe.useMemo(()=>{const k=[];return u?.typography?.primary?.name&&k.push(u.typography.primary.name),u?.typography?.secondary?.name&&k.push(u.typography.secondary.name),k.length>0?k:["Montserrat","Inter","Roboto","Open Sans"]},[u?.typography]),[w,m]=a.useState(Ni),[I,S]=a.useState(""),[_,L]=a.useState(!1),[T,d]=a.useState(0),[i,s]=a.useState(null),[v,E]=a.useState([30]),[M,V]=a.useState([1]),[r,A]=a.useState("Ninguno"),[x,b]=a.useState([80]),[z,Y]=a.useState(!0),[Z,H]=a.useState("Enérgica"),[D,q]=a.useState(!0),[U,X]=a.useState("ES"),[ae,J]=a.useState("Montserrat"),[f,O]=a.useState("#FFFFFF"),[K,B]=a.useState([18]),[W,C]=a.useState("Sin animación"),[ee,se]=a.useState([100]),pe=()=>{if(!I.trim())return;const k={id:Date.now().toString(),role:"user",content:I,timestamp:new Date};m(G=>[...G,k]),S(""),setTimeout(()=>{const G={id:(Date.now()+1).toString(),role:"assistant",content:"✅ Instrucción ejecutada correctamente.",timestamp:new Date};m(re=>[...re,G])},1e3)},Ge=()=>{L(!_)},Ie=()=>{g({editingCompleted:!0,finalDuration:30}),t?t():p()},Ke=()=>{l?l():o()},N=k=>{const G=Math.floor(k/60),re=k%60;return`${G}:${re.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"h-full bg-gradient-to-br from-pink-50 to-purple-50 relative",children:[e.jsxs("div",{className:"h-full p-4 gap-4 flex pb-20",children:[e.jsxs(P,{className:"w-[300px] flex flex-col",children:[e.jsx("div",{className:"p-3 border-b",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ls,{className:"w-5 h-5 text-pink-600"}),e.jsx("h3",{className:"font-medium",children:"Chat de Edición (IA)"})]})}),e.jsx(Je,{className:"h-[500px] p-3",children:e.jsx("div",{className:"space-y-3",children:w.map(k=>e.jsx("div",{className:`flex ${k.role==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] rounded-lg px-3 py-2 text-sm ${k.role==="user"?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"}`,children:k.content})},k.id))})}),e.jsxs("div",{className:"p-3 border-t space-y-2",children:[e.jsx(le,{placeholder:"Escribe una instrucción…",value:I,onChange:k=>S(k.target.value),rows:3,className:"resize-none",onKeyDown:k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),pe())}}),e.jsxs(h,{onClick:pe,disabled:!I.trim(),className:"w-full bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Enviar"]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col gap-4",children:[e.jsx(P,{className:"h-[400px] bg-black border-gray-300",children:e.jsxs("div",{className:"h-full flex items-center justify-center relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"bg-gray-800 border border-gray-600 rounded-lg flex items-center justify-center overflow-hidden",style:{width:"225px",height:"400px"},children:e.jsxs("div",{className:"text-center text-white/70",children:[e.jsx(ce,{className:"w-12 h-12 mx-auto mb-3"}),e.jsx("div",{className:"text-sm",children:"Preview Video (9:16)"}),e.jsx("div",{className:"text-xs text-white/50 mt-1",children:"30 segundos"})]})}),e.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex items-center gap-2 bg-black/50 backdrop-blur-sm rounded-full px-4 py-2",children:[e.jsx(h,{size:"sm",variant:"ghost",className:"text-white hover:text-white hover:bg-white/20 p-1",onClick:()=>d(Math.max(0,T-5)),children:e.jsx(ta,{className:"w-4 h-4"})}),e.jsx(h,{size:"sm",variant:"ghost",className:"text-white hover:text-white hover:bg-white/20 p-2",onClick:Ge,children:_?e.jsx(aa,{className:"w-5 h-5"}):e.jsx(Oe,{className:"w-5 h-5"})}),e.jsx(h,{size:"sm",variant:"ghost",className:"text-white hover:text-white hover:bg-white/20 p-1",onClick:()=>d(Math.min(30,T+5)),children:e.jsx(ia,{className:"w-4 h-4"})}),e.jsxs("div",{className:"text-white text-xs mx-2",children:[N(T)," / ",N(30)]}),e.jsx(h,{size:"sm",variant:"ghost",className:"text-white hover:text-white hover:bg-white/20 p-1",children:e.jsx(Ds,{className:"w-4 h-4"})}),e.jsx(h,{size:"sm",variant:"ghost",className:"text-white hover:text-white hover:bg-white/20 p-1",children:e.jsx(na,{className:"w-4 h-4"})})]})]}),e.jsx(P,{className:"absolute bottom-4 right-4 w-64 shadow-lg border border-gray-200",children:e.jsxs("div",{className:"p-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ba,{className:"w-4 h-4 text-blue-600"}),e.jsx("h4",{className:"text-sm font-medium",children:"Validaciones BrandGuard"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(ie,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{children:"Logo respeta zona segura"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(je,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{children:"Contraste bajo en subtítulos"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(ie,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{children:"Paleta de colores oficial"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(je,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{children:"Música demasiado alta (>85 dB)"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{size:"sm",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:"Autocorregir"}),e.jsxs(h,{size:"sm",variant:"ghost",className:"flex-1",children:[e.jsx(ms,{className:"w-3 h-3 mr-1"}),"Ver reporte"]})]})]})})]})}),e.jsx(P,{className:"h-[300px] bg-gray-900 border-gray-700",children:e.jsxs("div",{className:"h-full p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-white font-medium",children:"Timeline"}),e.jsx("div",{className:"text-gray-400 text-sm",children:"30s"})]}),e.jsx("div",{className:"space-y-2 h-[240px] overflow-y-auto",children:vi.map(k=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-20 text-xs font-medium text-white p-2 rounded text-center",style:{backgroundColor:k.color},children:k.label}),e.jsx("div",{className:"flex-1 h-10 bg-gray-800 rounded relative overflow-hidden",children:k.clips.map(G=>e.jsx("div",{className:"absolute h-full rounded text-white text-xs flex items-center justify-center cursor-pointer hover:opacity-80 transition-opacity",style:{backgroundColor:G.color,left:`${G.start/30*100}%`,width:`${G.duration/30*100}%`},children:e.jsx("span",{className:"truncate px-1",children:G.name})},G.id))})]},k.id))}),e.jsxs("div",{className:"mt-2 flex justify-between text-gray-400 text-xs",children:[e.jsx("span",{children:"0s"}),e.jsx("span",{children:"15s"}),e.jsx("span",{children:"30s"})]})]})})]}),e.jsxs(P,{className:"w-[240px] flex flex-col",children:[e.jsx("div",{className:"p-3 border-b",children:e.jsx("h3",{className:"font-medium",children:"Herramientas"})}),e.jsx(Je,{className:"flex-1",children:e.jsxs("div",{className:"p-3 space-y-4",children:[e.jsxs(P,{className:"p-3 space-y-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4 text-blue-600"}),e.jsx("h4",{className:"font-medium text-sm",children:"Video Clip"})]}),e.jsxs(h,{variant:"secondary",size:"sm",className:"w-full",children:[e.jsx(ds,{className:"w-3 h-3 mr-2"}),"Reemplazar clip"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"text-xs",children:"Duración (trim)"}),e.jsx(be,{value:v,onValueChange:E,max:90,min:1,step:1,className:"w-full"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[v[0],"s"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"text-xs",children:"Velocidad"}),e.jsx(be,{value:M,onValueChange:V,max:2,min:.25,step:.25,className:"w-full"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[M[0],"x"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"text-xs",children:"Filtro"}),e.jsxs(ye,{value:r,onValueChange:A,children:[e.jsx(we,{className:"h-8 text-xs",children:e.jsx(Ce,{})}),e.jsxs(Se,{children:[e.jsx(te,{value:"Ninguno",children:"Ninguno"}),e.jsx(te,{value:"Cinemático",children:"Cinemático"}),e.jsx(te,{value:"Retro",children:"Retro"}),e.jsx(te,{value:"Blanco y Negro",children:"Blanco y Negro"})]})]})]})]}),e.jsxs(P,{className:"p-3 space-y-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"w-4 h-4 text-pink-600"}),e.jsx("h4",{className:"font-medium text-sm",children:"Audio"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"text-xs",children:"Volumen"}),e.jsx(be,{value:x,onValueChange:b,max:100,min:0,step:1,className:"w-full"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[x[0],"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(R,{className:"text-xs",children:"Fade in/out automático"}),e.jsx(os,{checked:z,onCheckedChange:Y,className:"scale-75"})]}),e.jsxs(h,{variant:"secondary",size:"sm",className:"w-full",children:[e.jsx(cs,{className:"w-3 h-3 mr-2"}),"Reemplazar música"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"text-xs",children:"Música (mood)"}),e.jsxs(ye,{value:Z,onValueChange:H,children:[e.jsx(we,{className:"h-8 text-xs",children:e.jsx(Ce,{})}),e.jsxs(Se,{children:[e.jsx(te,{value:"Enérgica",children:"Enérgica"}),e.jsx(te,{value:"Corporativa",children:"Corporativa"}),e.jsx(te,{value:"Urbana",children:"Urbana"}),e.jsx(te,{value:"Electrónica",children:"Electrónica"})]})]})]})]}),e.jsxs(P,{className:"p-3 space-y-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4 text-green-600"}),e.jsx("h4",{className:"font-medium text-sm",children:"Subtítulos"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(R,{className:"text-xs",children:"Activar subtítulos automáticos"}),e.jsx(os,{checked:D,onCheckedChange:q,className:"scale-75"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"text-xs",children:"Idioma"}),e.jsxs(ye,{value:U,onValueChange:X,children:[e.jsx(we,{className:"h-8 text-xs",children:e.jsx(Ce,{})}),e.jsxs(Se,{children:[e.jsx(te,{value:"ES",children:"ES"}),e.jsx(te,{value:"EN",children:"EN"}),e.jsx(te,{value:"Multi",children:"Multi"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"text-xs",children:"Fuente (BrandKit)"}),e.jsxs(ye,{value:ae,onValueChange:J,children:[e.jsx(we,{className:"h-8 text-xs",children:e.jsx(Ce,{})}),e.jsx(Se,{children:c.map(k=>e.jsx(te,{value:k,children:k},k))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"text-xs",children:"Color texto"}),e.jsx("div",{className:"flex gap-1 flex-wrap",children:y.map(k=>e.jsx("button",{className:`w-6 h-6 rounded-full border-2 ${f===k.hex?"border-gray-900":"border-gray-300"}`,style:{backgroundColor:k.hex},onClick:()=>O(k.hex),title:k.name},k.hex))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"text-xs",children:"Tamaño"}),e.jsx(be,{value:K,onValueChange:B,max:48,min:10,step:1,className:"w-full"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[K[0],"px"]})]})]}),e.jsxs(P,{className:"p-3 space-y-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(La,{className:"w-4 h-4 text-purple-600"}),e.jsx("h4",{className:"font-medium text-sm",children:"Overlays"})]}),e.jsxs(h,{variant:"secondary",size:"sm",className:"w-full",children:[e.jsx(es,{className:"w-3 h-3 mr-2"}),"Agregar texto overlay"]}),e.jsxs(h,{variant:"secondary",size:"sm",className:"w-full",children:[e.jsx(Ts,{className:"w-3 h-3 mr-2"}),"Insertar logo (BrandKit)"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"text-xs",children:"Animación"}),e.jsxs(ye,{value:W,onValueChange:C,children:[e.jsx(we,{className:"h-8 text-xs",children:e.jsx(Ce,{})}),e.jsxs(Se,{children:[e.jsx(te,{value:"Sin animación",children:"Sin animación"}),e.jsx(te,{value:"Desvanecer",children:"Desvanecer"}),e.jsx(te,{value:"Deslizar",children:"Deslizar"}),e.jsx(te,{value:"Zoom",children:"Zoom"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"text-xs",children:"Opacidad"}),e.jsx(be,{value:ee,onValueChange:se,max:100,min:0,step:1,className:"w-full"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[ee[0],"%"]})]})]}),e.jsxs(P,{className:"p-3 space-y-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4 text-indigo-600"}),e.jsx("h4",{className:"font-medium text-sm",children:"Vista previa en plataformas"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"text-xs",children:"TikTok"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-2 flex items-center justify-center shadow-sm",style:{width:"140px",height:"260px",backgroundImage:`linear-gradient(135deg, ${y[0]?.hex||"#E91E63"}, ${y[1]?.hex||"#9C27B0"})`},children:e.jsxs("div",{className:"text-center text-white text-xs",children:[e.jsx("div",{className:"mb-1",children:"📱"}),e.jsx("div",{children:"TikTok"}),e.jsx("div",{className:"text-xs opacity-75",children:"9:16"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"text-xs",children:"Instagram Reels"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-2 flex items-center justify-center shadow-sm",style:{width:"140px",height:"260px",backgroundImage:`linear-gradient(135deg, ${y[1]?.hex||"#9C27B0"}, ${y[2]?.hex||"#212121"})`},children:e.jsxs("div",{className:"text-center text-white text-xs",children:[e.jsx("div",{className:"mb-1",children:"📸"}),e.jsx("div",{children:"Instagram"}),e.jsx("div",{className:"text-xs opacity-75",children:"Reels"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"text-xs",children:"YouTube Shorts"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-2 flex items-center justify-center shadow-sm",style:{width:"100%",height:"135px",backgroundImage:`linear-gradient(135deg, ${y[2]?.hex||"#212121"}, ${y[0]?.hex||"#E91E63"})`},children:e.jsxs("div",{className:"text-center text-white text-xs",children:[e.jsx("div",{className:"mb-1",children:"🎥"}),e.jsx("div",{children:"YouTube Shorts"}),e.jsx("div",{className:"text-xs opacity-75",children:"16:9"})]})})]})]})]})}),e.jsx("div",{className:"p-3 border-t",children:e.jsxs(h,{variant:"outline",className:"w-full",size:"sm",children:[e.jsx(Be,{className:"w-4 h-4 mr-2"}),"Configuración"]})})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-white border-t p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[e.jsxs(h,{variant:"ghost",onClick:Ke,className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"}),"Volver"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($,{variant:"secondary",children:"Paso 4 de 5"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Editor de Video"})]}),e.jsxs(h,{onClick:Ie,className:"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white flex items-center gap-2",children:["Siguiente: Copy & Tags",e.jsx(xe,{className:"w-4 h-4"})]})]})})]})}const yi=[{id:"video-1",title:"Reel 1",duration:30,caption:"Descubre nuestra nueva promo 🚀. Ahorra y envía hoy mismo. #Envíos #Promo",hashtags:["#Envíos","#Promo","#TuMarca"],validation:{status:"success",message:"Cumple BrandGuard",details:"Caption breve y válido."},allowEmojis:!0,confirmed:!1},{id:"video-2",title:"Short 2",duration:20,caption:"Un vistazo rápido a nuestra oferta ✨ #Descuento #Short",hashtags:["#Descuento","#Short"],validation:{status:"warning",message:"Ajustar",details:"Texto demasiado largo para TikTok."},allowEmojis:!0,confirmed:!1}];function wi({onNext:t,onPrevious:l}){const{brandKit:n}=ue(),{currentProject:u}=he(),[j,g]=a.useState(yi),[p,o]=a.useState({}),y=j.some(d=>d.confirmed),c=(d,i)=>{g(s=>s.map(v=>v.id===d?{...v,caption:i,confirmed:!1}:v))},w=(d,i)=>{g(s=>s.map(v=>v.id===d?{...v,hashtags:v.hashtags.filter(E=>E!==i),confirmed:!1}:v))},m=d=>{const i=p[d]?.trim();if(!i)return;const s=i.startsWith("#")?i:`#${i}`;g(v=>v.map(E=>E.id===d?{...E,hashtags:[...E.hashtags,s],confirmed:!1}:E)),o(v=>({...v,[d]:""}))},I=(d,i)=>{g(s=>s.map(v=>v.id===d?{...v,allowEmojis:i,confirmed:!1}:v))},S=d=>{const i=["Nueva propuesta de contenido 🎯 Perfecto para tu marca. #Contenido #Marketing","¡Descubre lo que tenemos para ti! ✨ No te lo pierdas. #Novedad #Especial","Contenido que marca la diferencia 🚀 Únete a nosotros. #Diferencia #Marca"],s=i[Math.floor(Math.random()*i.length)];c(d,s)},_=d=>{const s=["#Trending","#Viral","#Engagement","#Social","#Content"].sort(()=>Math.random()-.5).slice(0,2);g(v=>v.map(E=>E.id===d?{...E,hashtags:[...E.hashtags,...s.filter(M=>!E.hashtags.includes(M))],confirmed:!1}:E))},L=d=>{g(i=>i.map(s=>s.id===d?{...s,confirmed:!0}:s))},T=Pe.useMemo(()=>{if(n?.colors){const d=[];return n.colors.primary&&n.colors.primary.forEach((i,s)=>{d.push({name:`Primario ${s+1}`,hex:i})}),n.colors.secondary&&n.colors.secondary.forEach((i,s)=>{d.push({name:`Secundario ${s+1}`,hex:i})}),d.length>0?d:[{name:"Primario",hex:"#E91E63"},{name:"Secundario",hex:"#9C27B0"}]}return[{name:"Primario",hex:"#E91E63"},{name:"Secundario",hex:"#9C27B0"}]},[n?.colors]);return e.jsxs("div",{className:"h-full bg-gradient-to-br from-pink-50 to-purple-50",children:[e.jsxs("div",{className:"h-full p-6 pb-24",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Captions & Hashtags"}),e.jsx($,{variant:"secondary",className:"text-sm",children:"Paso 5 de 6"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[j.filter(d=>d.confirmed).length," de ",j.length," videos confirmados"]})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 max-w-7xl mx-auto",children:j.map((d,i)=>e.jsxs(P,{className:"p-4 space-y-4 shadow-sm relative",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-medium text-lg",children:[d.title," — ",d.duration,"s"]}),d.confirmed&&e.jsxs($,{variant:"default",className:"bg-green-100 text-green-800",children:[e.jsx(ie,{className:"w-3 h-3 mr-1"}),"Confirmado"]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"border border-gray-300 rounded-lg p-6 flex items-center justify-center shadow-sm",style:{width:"200px",height:"360px",backgroundImage:`linear-gradient(135deg, ${T[i]?.hex||"#E91E63"}, ${T[i+1]?.hex||"#9C27B0"})`},children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx(ce,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-medium",children:"Preview 9:16"}),e.jsxs("div",{className:"text-xs opacity-75",children:[d.duration,"s"]})]})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"text-sm font-medium",children:"Caption generado por IA"}),e.jsx(le,{value:d.caption,onChange:s=>c(d.id,s.target.value),placeholder:"Escribe el caption para este video...",rows:4,className:"resize-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"text-sm font-medium",children:"Hashtags"}),e.jsxs("div",{className:"flex flex-wrap gap-2 min-h-[40px] p-2 border rounded-lg bg-gray-50",children:[d.hashtags.map((s,v)=>e.jsxs("div",{className:"flex items-center gap-1 bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs",children:[e.jsx("span",{children:s}),e.jsx("button",{onClick:()=>w(d.id,s),className:"hover:bg-blue-200 rounded-full p-0.5",children:e.jsx(Oa,{className:"w-3 h-3"})})]},v)),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"text",value:p[d.id]||"",onChange:s=>o(v=>({...v,[d.id]:s.target.value})),placeholder:"#nuevo",className:"bg-transparent text-xs border-none outline-none w-16 min-w-16",onKeyPress:s=>{s.key==="Enter"&&m(d.id)}}),e.jsx("button",{onClick:()=>m(d.id),className:"hover:bg-gray-200 rounded-full p-0.5",disabled:!p[d.id]?.trim(),children:e.jsx(es,{className:"w-3 h-3"})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs($,{variant:d.validation.status==="success"?"default":"destructive",className:d.validation.status==="success"?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800",children:[d.validation.status==="success"?e.jsx(ie,{className:"w-3 h-3 mr-1"}):e.jsx(je,{className:"w-3 h-3 mr-1"}),d.validation.message]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:d.validation.details})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{variant:"ghost",size:"sm",onClick:()=>S(d.id),className:"text-xs",children:[e.jsx(ns,{className:"w-3 h-3 mr-1"}),"Regenerar caption"]}),e.jsxs(h,{variant:"ghost",size:"sm",onClick:()=>_(d.id),className:"text-xs",children:[e.jsx(Js,{className:"w-3 h-3 mr-1"}),"Sugerir más hashtags"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"text-xs",children:"Permitir emojis"}),e.jsx(os,{checked:d.allowEmojis,onCheckedChange:s=>I(d.id,s)})]}),!d.confirmed&&e.jsx(h,{size:"sm",onClick:()=>L(d.id),className:"bg-green-600 hover:bg-green-700 text-white",children:"Confirmar"})]})]})]},d.id))})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-white border-t p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[e.jsxs(h,{variant:"ghost",onClick:l,className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"}),"Volver"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[!y&&e.jsx("span",{className:"text-sm text-muted-foreground",children:"Confirma al menos un video para continuar"}),e.jsxs(h,{onClick:t,disabled:!y,className:"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 disabled:opacity-50",children:["Siguiente: Publicación",e.jsx(xe,{className:"w-4 h-4 ml-2"})]})]})]})})]})}const Hs=t=>t.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}),Ci=t=>t.toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),Si=[{id:"video-1",title:"Reel 1",duration:30,caption:"Descubre nuestra nueva promo 🚀. Ahorra y envía hoy mismo. #Envíos #Promo",status:"pending",scheduledDate:null,scheduledTime:"18:00"},{id:"video-2",title:"Short 2",duration:20,caption:"Un vistazo rápido a nuestra oferta ✨ #Descuento #Short",status:"scheduled",scheduledDate:new Date("2025-10-12"),scheduledTime:"15:00"}],is={pending:{icon:De,label:"Pendiente",description:"Esperando programación",badgeClass:"bg-gray-100 text-gray-700"},scheduled:{icon:ze,label:"Programado",description:"Listo para publicar",badgeClass:"bg-blue-100 text-blue-700"},published:{icon:ie,label:"Publicado",description:"Ya está en vivo",badgeClass:"bg-green-100 text-green-700"},saved:{icon:lt,label:"En Biblioteca",description:"Guardado para después",badgeClass:"bg-purple-100 text-purple-700"}};function ki({onNext:t,onPrevious:l}){const{brandKit:n}=ue(),{currentProject:u}=he(),[j,g]=a.useState(Si),[p,o]=a.useState({}),[y,c]=a.useState({"video-1":"18:00","video-2":"15:00"}),w=j.some(s=>s.status==="scheduled"||s.status==="published"||s.status==="saved"),m=(s,v,E)=>{g(M=>M.map(V=>V.id===s?{...V,status:v,scheduledDate:E||V.scheduledDate,scheduledTime:y[s]||V.scheduledTime}:V))},I=s=>{const v=p[s];v&&m(s,"scheduled",v)},S=s=>{const v=[new Date("2025-10-11"),new Date("2025-10-13"),new Date("2025-10-14")],E=["10:00","14:00","18:00","20:00"],M=v[Math.floor(Math.random()*v.length)],V=E[Math.floor(Math.random()*E.length)];o(r=>({...r,[s]:M})),c(r=>({...r,[s]:V})),m(s,"scheduled",M)},_=s=>{m(s,"published")},L=s=>{m(s,"saved")},T=s=>s.status==="scheduled"&&s.scheduledDate?`Programado para ${Hs(s.scheduledDate)} ${s.scheduledTime}`:is[s.status].description,d=Pe.useMemo(()=>{if(n?.colors){const s=[];return n.colors.primary&&n.colors.primary.forEach((v,E)=>{s.push({name:`Primario ${E+1}`,hex:v})}),n.colors.secondary&&n.colors.secondary.forEach((v,E)=>{s.push({name:`Secundario ${E+1}`,hex:v})}),s.length>0?s:[{name:"Primario",hex:"#E91E63"},{name:"Secundario",hex:"#9C27B0"}]}return[{name:"Primario",hex:"#E91E63"},{name:"Secundario",hex:"#9C27B0"}]},[n?.colors]),i=j.filter(s=>s.status==="scheduled"&&s.scheduledDate).map(s=>({date:s.scheduledDate,time:s.scheduledTime,title:s.title}));return e.jsxs("div",{className:"h-full bg-gradient-to-br from-pink-50 to-purple-50",children:[e.jsxs("div",{className:"h-full p-6 pb-24",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Publicación de Shorts/Reels"}),e.jsx($,{variant:"secondary",className:"text-sm",children:"Paso 6 de 6"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[j.filter(s=>s.status!=="pending").length," de ",j.length," videos procesados"]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:j.map((s,v)=>{const E=is[s.status].icon;return e.jsxs(P,{className:"p-4 space-y-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-medium text-lg",children:[s.title," — ",s.duration,"s"]}),e.jsxs($,{className:is[s.status].badgeClass,children:[e.jsx(E,{className:"w-3 h-3 mr-1"}),is[s.status].label]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"border border-gray-300 rounded-lg p-6 flex items-center justify-center shadow-sm",style:{width:"200px",height:"360px",backgroundImage:`linear-gradient(135deg, ${d[v]?.hex||"#E91E63"}, ${d[v+1]?.hex||"#9C27B0"})`},children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx(ce,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-medium",children:"Preview 9:16"}),e.jsxs("div",{className:"text-xs opacity-75",children:[s.duration,"s"]})]})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"text-sm font-medium",children:"Caption final"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border text-sm",children:s.caption})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(R,{className:"text-sm font-medium",children:"Opciones de publicación"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(_a,{children:[e.jsx(Ga,{asChild:!0,children:e.jsxs(h,{variant:"outline",className:"w-40 justify-start text-left font-normal",children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),p[s.id]?Hs(p[s.id]):"Seleccionar fecha"]})}),e.jsx(Ka,{className:"w-auto p-0",children:e.jsx(la,{mode:"single",selected:p[s.id],onSelect:M=>o(V=>({...V,[s.id]:M})),initialFocus:!0})})]}),e.jsx(ne,{type:"time",value:y[s.id]||"18:00",onChange:M=>c(V=>({...V,[s.id]:M.target.value})),className:"w-32"}),e.jsx(h,{size:"sm",onClick:()=>I(s.id),disabled:!p[s.id],children:"Programar"})]}),e.jsxs(h,{variant:"secondary",size:"sm",onClick:()=>S(s.id),className:"w-full",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"📊 Programar con IA",e.jsx("span",{className:"ml-2 text-xs opacity-70",children:"IA sugiere fecha/hora óptima"})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("span",{className:"text-sm text-muted-foreground",children:T(s)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{size:"sm",onClick:()=>_(s.id),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Ee,{className:"w-3 h-3 mr-1"}),"Publicar ahora"]}),e.jsxs(h,{variant:"ghost",size:"sm",onClick:()=>L(s.id),children:[e.jsx(xs,{className:"w-3 h-3 mr-1"}),"Guardar en Biblioteca"]})]})]},s.id)})}),e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-medium text-lg flex items-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5"}),"Vista rápida de agenda"]}),i.length>0?e.jsx("div",{className:"space-y-2",children:i.map((s,v)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:s.title}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[Ci(s.date)," a las ",s.time]})]})]},v))}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ze,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No hay videos programados aún"}),e.jsx("p",{className:"text-xs",children:"Programa tus videos para verlos aquí"})]}),i.length>0&&e.jsx("div",{className:"pt-2 border-t",children:e.jsxs(h,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(ze,{className:"w-4 h-4 mr-2"}),"Ver calendario completo"]})})]})})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-white border-t p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[e.jsxs(h,{variant:"ghost",onClick:l,className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"}),"Volver"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[!w&&e.jsx("span",{className:"text-sm text-muted-foreground",children:"Programa, publica o guarda al menos un video para finalizar"}),e.jsxs(h,{onClick:t,disabled:!w,className:"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 disabled:opacity-50",children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Finalizar"]})]})]})})]})}const Ne=["briefing","configuration","generation","editing","copywriting","publishing"],Ei={briefing:Le,configuration:Be,generation:oe,editing:sa,copywriting:ms,publishing:Ee},Pi={briefing:"Briefing",configuration:"Configuración",generation:"Generación",editing:"Edición",copywriting:"Captions & Hashtags",publishing:"Publicación"};function Ti(){const{hasBrandKit:t}=ue(),{currentProject:l,currentStep:n,setCurrentStep:u,saveProject:j}=he(),[g,p]=a.useState(!1),[o,y]=a.useState("briefing");a.useEffect(()=>{y(n)},[n]);const c=()=>{const d=Ne.indexOf(o);if(d<Ne.length-1){const i=Ne[d+1];i==="configuration"?y("configuration"):(y(i),i!=="configuration"&&u(i))}},w=()=>{const d=Ne.indexOf(o);if(d>0){const i=Ne[d-1];i==="configuration"?y("configuration"):(y(i),i!=="configuration"&&u(i))}};if(!l)return e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-pink-100 to-purple-100 rounded-full flex items-center justify-center",children:e.jsx(ce,{className:"w-8 h-8 text-pink-500"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No hay proyecto activo"}),e.jsx("p",{className:"text-muted-foreground",children:"Selecciona crear un nuevo Short/Reel para comenzar"})]})});const m=Ne.indexOf(o),I=(m+1)/Ne.length*100,S=async()=>{try{p(!0),await j()}catch(d){console.error("Error saving:",d)}finally{p(!1)}},_=()=>{switch(o){case"briefing":return e.jsx(Gs,{onNext:()=>{y("configuration")}});case"configuration":return e.jsx(gi,{onNext:c,onPrevious:w});case"generation":return e.jsx(fi,{onNext:c,onPrevious:w});case"editing":return e.jsx(bi,{onNext:c,onPrevious:w});case"copywriting":return e.jsx(wi,{onNext:c,onPrevious:w});case"publishing":return e.jsx(ki,{onNext:()=>{console.log("Flujo de Shorts/Reels completado")},onPrevious:w});default:return e.jsx(Gs,{onNext:()=>y("configuration")})}},L=()=>l.selectedSceneIds?.length||0,T=()=>l.scenes.filter(i=>l.selectedSceneIds?.includes(i.id)).reduce((i,s)=>i+s.duration,0);return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"p-6 border-b bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-pink-500 to-rose-500 text-white",children:e.jsx(ce,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-2xl font-bold",children:l.title}),e.jsx($,{className:"bg-gradient-to-r from-pink-500 to-rose-500 text-white",children:"Short / Reel"}),l.briefing.platform&&e.jsx($,{variant:"secondary",className:"capitalize",children:l.briefing.platform}),t&&e.jsx($,{className:"bg-green-100 text-green-800",children:"BrandKit Activo"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[o==="briefing"||o==="configuration"?e.jsxs($,{variant:"secondary",className:"text-sm px-3 py-1",children:["Paso ",m+1," de ",Ne.length]}):e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[l.scenes.length>0&&e.jsxs("span",{children:[l.scenes.length," escenas creadas"]}),L()>0&&e.jsxs("span",{children:[L()," seleccionadas"]}),T()>0&&e.jsxs("span",{children:["~",Math.round(T()),"s duración"]})]}),e.jsxs(h,{variant:"outline",onClick:S,disabled:g,children:[e.jsx(xs,{className:"w-4 h-4 mr-2"}),g?"Guardando...":"Guardar"]})]})]}),o!=="briefing"&&o!=="configuration"&&e.jsxs(e.Fragment,{children:[e.jsx(Ms,{showOnlyWarning:!0}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Progreso del Short/Reel"}),e.jsxs("span",{children:[Math.round(I),"% completado"]})]}),e.jsx(ea,{value:I,className:"h-2"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-1",children:Ne.map((d,i)=>{const s=Ei[d],v=o===d,E=i<m,M=i<=m;return e.jsxs(h,{variant:v?"default":"ghost",size:"sm",className:`gap-2 ${E?"text-green-600":v?"bg-gradient-to-r from-pink-500 to-rose-500 text-white":M?"text-muted-foreground":"text-gray-400"}`,onClick:()=>{M&&d!=="configuration"&&(y(d),d!=="configuration"&&u(d))},disabled:!M||d==="configuration",children:[e.jsx(s,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:Pi[d]}),E&&e.jsx(ie,{className:"w-3 h-3 text-green-600"})]},d)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{variant:"outline",size:"sm",onClick:w,disabled:m===0,children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Anterior"]}),e.jsxs(h,{size:"sm",onClick:c,disabled:m===Ne.length-1,className:"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600",children:["Siguiente",e.jsx(xe,{className:"w-4 h-4 ml-2"})]})]})]})]})]})}),e.jsx("div",{className:`flex-1 overflow-auto ${o==="briefing"||o==="configuration"?"":"bg-gradient-to-br from-pink-50 to-purple-50"}`,children:_()})]})}const Di=[{type:"short",title:"Shorts / Reels",description:"Workflow de 6 pasos: Briefing → Configuración → Generación → Edición → Captions → Publicación",icon:ce,gradient:"from-pink-500 to-purple-600",duration:"15-90s",platforms:["Instagram","TikTok","YouTube Shorts"],features:["Grid de propuestas 9:16","Timeline simple","Texto, música y overlays","Captions & Hashtags"]},{type:"video_long",title:"Videos Largos con Flow Narrativo",description:"Workflow de 7 pasos: Briefing (Flow) → Configuración → Storyboard → Generación → Edición Multipista → Captions → Publicación",icon:Te,gradient:"from-blue-500 to-blue-600",duration:"2-20min",platforms:["YouTube","LinkedIn","Website"],features:["Cards de escenas","Previews IA por bloque","Edición multipista (Prompts A-D)","Subtítulos multi-idioma"]}];function Mi(){const{hasBrandKit:t}=ue(),{currentProject:l,createNewProject:n}=he(),[u,j]=a.useState(!!l),[g,p]=a.useState(!1),o=c=>{try{p(!0),n(c),j(!0)}catch(w){console.error("Error creating video project:",w)}finally{p(!1)}},y=()=>{console.log("Opening existing video project selector")};if(u&&l)try{return l.type==="short"?e.jsx(Ti,{}):e.jsx(oi,{})}catch(c){console.error("Error loading video workflow:",c),j(!1)}return g?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-8 h-8 mx-auto border-4 border-pink-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-muted-foreground",children:"Creando proyecto de video..."})]})}):e.jsx("div",{className:"h-full overflow-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-red-500 to-pink-600 text-white",children:e.jsx(de,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-3xl font-bold",children:"Creator de Videos"})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto",children:"Produce contenido audiovisual profesional desde briefing hasta publicación programada, con tu BrandKit aplicado automáticamente"})]}),e.jsx(Ms,{}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"¿Qué tipo de video quieres crear?"}),e.jsx("p",{className:"text-muted-foreground",children:"Cada tipo está optimizado para diferentes plataformas y objetivos"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:Di.map(c=>{const w=c.icon;return e.jsx(P,{className:"p-8 hover:shadow-xl transition-all cursor-pointer group border-2 hover:border-opacity-50",onClick:()=>o(c.type),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${c.gradient} rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform shadow-lg`,children:e.jsx(w,{className:"w-8 h-8 text-white"})}),e.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-lg border-2 border-gray-100",children:e.jsx(es,{className:"w-4 h-4 text-gray-600"})})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("h3",{className:"text-xl font-bold",children:c.title}),e.jsx("p",{className:"text-muted-foreground",children:c.description})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-center items-center gap-4 text-sm",children:[e.jsxs($,{variant:"outline",children:[e.jsx(De,{className:"w-3 h-3 mr-1"}),c.duration]}),e.jsx($,{variant:"secondary",children:"IA + BrandKit"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 text-center",children:"Plataformas principales:"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-1",children:c.platforms.map(m=>e.jsx($,{variant:"outline",className:"text-xs",children:m},m))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 text-center",children:"Características principales:"}),e.jsx("div",{className:"grid grid-cols-2 gap-1",children:c.features.map((m,I)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-current rounded-full flex-shrink-0"}),e.jsx("span",{className:"text-xs",children:m})]},I))})]})]}),e.jsxs(h,{className:`w-full group-hover:shadow-lg transition-all bg-gradient-to-r ${c.gradient} hover:opacity-90 text-lg py-6`,children:[e.jsx(oe,{className:"w-5 h-5 mr-3"}),"Crear ",c.title]})]})},c.type)})})]}),e.jsxs(P,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xa,{className:"w-5 h-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Proyectos de Video Recientes"})]}),e.jsx(h,{variant:"outline",onClick:y,children:"Ver todos"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(P,{className:"p-4 hover:bg-gray-50 cursor-pointer",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx($,{className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white text-xs",children:"Shorts/Reels"}),e.jsxs($,{className:"bg-yellow-100 text-yellow-800",children:[e.jsx(De,{className:"w-3 h-3 mr-1"}),"Paso 4/6"]})]}),e.jsx("h4",{className:"font-medium",children:"Tips JavaScript"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"En edición • 45s"}),e.jsx("div",{className:"w-full h-24 bg-gradient-to-br from-pink-500 to-purple-600 rounded border flex items-center justify-center",children:e.jsx(ce,{className:"w-8 h-8 text-white opacity-70"})})]})}),e.jsx(P,{className:"p-4 hover:bg-gray-50 cursor-pointer",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx($,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white text-xs",children:"Video Largo"}),e.jsxs($,{className:"bg-blue-100 text-blue-800",children:[e.jsx(De,{className:"w-3 h-3 mr-1"}),"Programado"]})]}),e.jsx("h4",{className:"font-medium",children:"Masterclass React"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Flow narrativo • 15min"}),e.jsx("div",{className:"w-full h-24 bg-gradient-to-br from-blue-500 to-blue-600 rounded border flex items-center justify-center",children:e.jsx(Te,{className:"w-8 h-8 text-white opacity-70"})})]})}),e.jsx(P,{className:"p-4 hover:bg-gray-50 cursor-pointer",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx($,{className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white text-xs",children:"Shorts/Reels"}),e.jsxs($,{className:"bg-green-100 text-green-800",children:[e.jsx(ie,{className:"w-3 h-3 mr-1"}),"Publicado"]})]}),e.jsx("h4",{className:"font-medium",children:"CSS Grid Hacks"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Viral en TikTok • 30s"}),e.jsx("div",{className:"w-full h-24 bg-gradient-to-br from-pink-500 to-purple-600 rounded border flex items-center justify-center",children:e.jsx(ce,{className:"w-8 h-8 text-white opacity-70"})})]})}),e.jsx(P,{className:"p-4 hover:bg-gray-50 cursor-pointer",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx($,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white text-xs",children:"Video Largo"}),e.jsx($,{className:"bg-purple-100 text-purple-800",children:"Paso 3/7"})]}),e.jsx("h4",{className:"font-medium",children:"Guía Backend Node.js"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"En storyboard • 12min"}),e.jsx("div",{className:"w-full h-24 bg-gradient-to-br from-blue-500 to-blue-600 rounded border flex items-center justify-center",children:e.jsx(Te,{className:"w-8 h-8 text-white opacity-70"})})]})})]})]}),e.jsx(P,{className:"p-6 bg-gradient-to-r from-red-50 to-pink-50 border-red-200",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5 text-red-600"}),"¿Qué incluye el Creator de Videos?"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-medium text-base text-pink-600 flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),"Workflow Shorts/Reels (6 pasos)"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"1. Briefing"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Chat especializado en contenido viral"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"2. Configuración"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Formato, duración, estilo y versiones"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"3. Generación"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Grid de propuestas 9:16"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"4. Edición"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Timeline simple con texto, música y overlays"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"5. Captions & Hashtags"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Optimización por plataforma"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"6. Publicación"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Programación multicanal"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-medium text-base text-blue-600 flex items-center gap-2",children:[e.jsx(Te,{className:"w-4 h-4"}),"Workflow Videos Largos con Flow (7 pasos)"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"1. Briefing (Flow)"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Selección de Flow narrativo"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"2. Configuración Técnica"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Formato, duración, estilo y versiones"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"3. Storyboard Narrativo"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Cards de escenas secuenciales"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"4. Generación de Escenas"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Previews IA por bloque"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"5. Edición Multipista"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Prompts A–D avanzados"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"6. Captions & Subtítulos"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Multi-idioma finales"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"7. Publicación Final"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Programación con thumbnails custom"})]})]})]})]})]})}),e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-center",children:"Plataformas Soportadas"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-12 h-12 mx-auto bg-gradient-to-br from-black to-gray-800 rounded-lg flex items-center justify-center",children:e.jsx(de,{className:"w-6 h-6 text-white"})}),e.jsx("h4",{className:"font-medium text-sm",children:"TikTok"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Vertical • 15-180s"})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-12 h-12 mx-auto bg-gradient-to-br from-pink-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(ce,{className:"w-6 h-6 text-white"})}),e.jsx("h4",{className:"font-medium text-sm",children:"Instagram"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Reels • 15-90s"})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-12 h-12 mx-auto bg-gradient-to-br from-red-500 to-red-600 rounded-lg flex items-center justify-center",children:e.jsx(Oe,{className:"w-6 h-6 text-white"})}),e.jsx("h4",{className:"font-medium text-sm",children:"YouTube"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Shorts + Long • Sin límite"})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-12 h-12 mx-auto bg-gradient-to-br from-blue-700 to-blue-800 rounded-lg flex items-center justify-center",children:e.jsx(Te,{className:"w-6 h-6 text-white"})}),e.jsx("h4",{className:"font-medium text-sm",children:"LinkedIn"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Video • Hasta 10min"})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-12 h-12 mx-auto bg-gradient-to-br from-sky-400 to-sky-600 rounded-lg flex items-center justify-center",children:e.jsx(Cs,{className:"w-6 h-6 text-white"})}),e.jsx("h4",{className:"font-medium text-sm",children:"X (Twitter)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Video • Hasta 2:20"})]})]})]})}),t&&e.jsx(P,{className:"p-4 bg-gradient-to-r from-green-50 to-blue-50 border-green-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ie,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-green-800",children:"Tu BrandKit está activo"}),e.jsx("p",{className:"text-sm text-green-700",children:"Todos los videos aplicarán automáticamente tus colores, tipografías, logos, animaciones y tono de voz corporativo"})]})]})})]})})}function Yi(){return e.jsx(Mi,{})}export{Yi as default};
