import{c as Ce,j as e,C as z,T as de,B as n,a as w,b as $e,U as ms,r as p,S as xe,d as Ds,u as he,e as Y,M as Je,R as Ve,f as Qe,g as Le,h as Re,P as xs,A as ss,i as as,k as Ee,l as hs,m as _e,L as M,n as be,o as us,p as Te,X as Ne,q as ps,I as Xe,s as Ye,t as gs,F as fs,V as js,v as fe,w as je,x as me,y as Bs,z as Fs,D as U,E as vs,G as Ls,H as Os,J as $s,K as bs,N as ts,O as Ae,Q as rs,W as Vs,Y as ve,Z as Rs,_ as Ns,$ as _s,a0 as qs,a1 as Hs,a2 as Gs,a3 as Ks,a4 as ye,a5 as Us,a6 as Qs,a7 as Ze,a8 as ys,a9 as Ws,aa as Js,ab as Xs,ac as Ys,ad as Zs,ae as ea,af as sa,ag as is}from"./index-Qk5vTKH0.js";import{S as ke,W as aa,V as ta,B as ws}from"./skeleton-CG66kKsO.js";import{I as K}from"./input-D9gzZZGo.js";import{T as es,a as Ie,b as te,c as J}from"./tabs-pnYPreHj.js";import{S as ie,a as le,b as ne,c as ce,d as R}from"./select-DzXUnkCT.js";import{C as we}from"./chevron-left-Dj8W6BM1.js";import{S as ge}from"./slider-CRT1qsOa.js";import{L as Cs}from"./linkedin-X-fQF4Ad.js";import{T as Ss,C as ra}from"./twitter-DPcVWT8Y.js";import{S as ia}from"./switch-req8jW8d.js";import{S as ks,a as Ps,b as Ts,c as As,d as Es}from"./sheet-DZr8Am9K.js";import{S as la,F as na}from"./search-B5htjXhP.js";import{L as ca,G as ls}from"./lock-ME-27Wj4.js";import{U as oa}from"./users-BJHnXxDj.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ma=Ce("eye-off",da);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],ha=Ce("lock-open",xa);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],pa=Ce("maximize-2",ua);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],fa=Ce("panel-right-open",ga);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],va=Ce("pen",ja);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Na=Ce("shield-check",ba);function ns({fieldName:l,currentValue:i,suggestedValue:a,onMaintain:t,onReplace:s,onMerge:r,colorVariant:o="amber"}){const N={amber:{border:"border-amber-200",bg:"bg-amber-50/30",icon:"text-amber-600",text:"text-amber-800"},orange:{border:"border-orange-200",bg:"bg-orange-50/30",icon:"text-orange-600",text:"text-orange-800"},red:{border:"border-red-200",bg:"bg-red-50/30",icon:"text-red-600",text:"text-red-800"}}[o];return e.jsx("div",{className:"my-4",children:e.jsx(z,{className:`border ${N.border} ${N.bg} shadow-sm`,children:e.jsxs("div",{className:"p-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:`w-4 h-4 ${N.icon}`}),e.jsxs("span",{className:`text-sm font-medium ${N.text}`,children:["Conflicto en ",l]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Actual"}),e.jsx("div",{className:"bg-white border rounded p-2",children:e.jsx("code",{className:"text-xs text-red-700",children:i})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Sugerido"}),e.jsx("div",{className:"bg-white border rounded p-2",children:e.jsx("code",{className:"text-xs text-green-700",children:a})})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(n,{variant:"ghost",size:"sm",className:"text-xs h-7",onClick:t,children:"Mantener"}),e.jsx(n,{variant:"default",size:"sm",className:"text-xs h-7",onClick:s,children:"Reemplazar"}),e.jsx(n,{variant:"outline",size:"sm",className:"text-xs h-7",onClick:r,children:"Fusionar"})]})]})})})}function Pe({content:l,badge:i="patch JSON (diseño)"}){return e.jsx("div",{className:"my-3",children:e.jsx(z,{className:"bg-gray-50 border border-gray-200 shadow-sm",children:e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(w,{variant:"outline",className:"text-xs",children:i})}),e.jsx("pre",{className:"text-xs font-mono text-gray-700 bg-white/50 p-2 rounded border overflow-x-auto",children:l})]})})})}function G({role:l,content:i,timestamp:a,edited:t}){return e.jsxs("div",{className:`flex gap-3 ${l==="user"?"justify-end":"justify-start"}`,children:[l!=="user"&&e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${l==="system"?"bg-amber-100 text-amber-600":"bg-blue-100 text-blue-600"}`,children:e.jsx($e,{className:"w-4 h-4"})}),e.jsxs("div",{className:"rounded-xl p-3 max-w-[80%] text-sm",style:{backgroundColor:l==="user"?"var(--color-bubble-user)":l==="system"?"var(--color-bubble-system)":"var(--color-bubble-assistant)",color:l==="user"?"white":"inherit"},children:[e.jsx("p",{className:"whitespace-pre-wrap",children:i}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("p",{className:"text-xs opacity-70",children:a}),t&&e.jsx(w,{variant:"outline",className:"text-xs py-0",children:"Editado"})]})]}),l==="user"&&e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 text-white",style:{backgroundColor:"var(--color-bubble-user)"},children:e.jsx(ms,{className:"w-4 h-4"})})]})}function ya({messages:l,isTyping:i}){const a=p.useRef(null);return p.useEffect(()=>{a.current?.scrollIntoView({behavior:"smooth"})},[l]),e.jsx(xe,{className:"flex-1 p-4",children:e.jsxs("div",{className:"space-y-4 pb-4",children:[e.jsx(G,{role:"assistant",content:"Para definir el brief, confirmar: Objetivo, Audiencia, Oferta, Formato y CTA.",timestamp:"10:26"}),e.jsx(G,{role:"user",content:"Objetivo: aumentar ventas del nuevo plan PRO este mes.",timestamp:"10:27"}),e.jsx(Pe,{content:'{ "objective": "Aumentar ventas del plan PRO en 30 días" }'}),e.jsx(G,{role:"assistant",content:"¿Plataformas principales y el público primario?",timestamp:"10:28"}),e.jsx(G,{role:"user",content:"Instagram y TikTok; público 18–30 que busca ofertas.",timestamp:"10:29"}),e.jsx(Pe,{content:'{ "post.platforms": ["Instagram","TikTok"], "audience.primary": "18–30 cazadores de ofertas" }'}),e.jsx(G,{role:"assistant",content:"¿Qué acción quieres que tomen los usuarios? Define el call-to-action principal.",timestamp:"10:30"}),e.jsx(G,{role:"user",content:"Quiero que 'Compren ahora' con urgencia. Es una promoción limitada.",timestamp:"10:31"}),e.jsx(Pe,{content:'{ "cta.primary": "Compra ahora", "cta.urgency": true, "offer.type": "promoción limitada" }'}),e.jsx(ns,{fieldName:"post.cta",currentValue:'"Compra ahora"',suggestedValue:'"Pruébalo hoy"',colorVariant:"amber",onMaintain:()=>console.log("Mantener CTA"),onReplace:()=>console.log("Reemplazar CTA"),onMerge:()=>console.log("Fusionar CTA")}),e.jsx(ns,{fieldName:"audience.age",currentValue:'"18-30"',suggestedValue:'"25-35"',colorVariant:"orange",onMaintain:()=>console.log("Mantener Age"),onReplace:()=>console.log("Reemplazar Age"),onMerge:()=>console.log("Fusionar Age")}),e.jsx(G,{role:"assistant",content:"Perfecto. ¿Cuál es el formato de post que prefieres? ¿Single, carousel o story?",timestamp:"10:32"}),e.jsx(G,{role:"user",content:"Quiero hacer un carousel de 3 slides para explicar mejor el producto.",timestamp:"10:33"}),e.jsx(Pe,{content:'{ "format.type": "carousel", "format.slides": 3, "format.narrative": "explicativo" }'}),e.jsx(G,{role:"assistant",content:"Excelente. Con esa información tengo todo lo necesario para generar el brief completo. ¿Procedemos con la generación?",timestamp:"10:34"}),e.jsx(G,{role:"user",content:"Sí, genera el post por favor.",timestamp:"10:35"}),e.jsx(Pe,{content:`{ 
  "status": "brief_completed",
  "generated_at": "2024-01-15T10:35:00Z",
  "total_fields": 8,
  "conflicts_resolved": 2
}`,badge:"brief completado"}),l.map(t=>e.jsxs("div",{className:`flex gap-3 ${t.role==="user"?"justify-end":"justify-start"}`,children:[t.role!=="user"&&e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${t.role==="system"?"bg-amber-100 text-amber-600":"bg-blue-100 text-blue-600"}`,children:e.jsx($e,{className:"w-4 h-4"})}),e.jsxs("div",{className:`rounded-lg p-3 max-w-[80%] ${t.role==="user"?"bg-blue-500 text-white":t.role==="system"?"bg-amber-50 border border-amber-200 text-amber-800":"bg-muted"}`,children:[e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.content}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("p",{className:"text-xs opacity-70",children:typeof t.timestamp=="string"?new Date(t.timestamp).toLocaleTimeString():t.timestamp.toLocaleTimeString()}),t.metadata?.edited&&e.jsx(w,{variant:"outline",className:"text-xs py-0",children:"Editado"})]})]}),t.role==="user"&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center flex-shrink-0 text-white",children:e.jsx(ms,{className:"w-4 h-4"})})]},t.id)),i&&e.jsxs("div",{className:"flex gap-3 justify-start",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx($e,{className:"w-4 h-4 text-blue-600"})}),e.jsx("div",{className:"bg-muted rounded-lg p-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]}),e.jsx("div",{ref:a})]})})}const Oe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},We=new Map,De=l=>{const i=We.get(l);return i?Object.fromEntries(Object.entries(i.stores).map(([a,t])=>[a,t.getState()])):{}},wa=(l,i,a)=>{if(l===void 0)return{type:"untracked",connection:i.connect(a)};const t=We.get(a.name);if(t)return{type:"tracked",store:l,...t};const s={connection:i.connect(a),stores:{}};return We.set(a.name,s),{type:"tracked",store:l,...s}},Ca=(l,i={})=>(a,t,s)=>{const{enabled:r,anonymousActionType:o,store:d,...N}=i;let m;try{m=(r??(Oe?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!m)return(Oe?"production":void 0)!=="production"&&r&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),l(a,t,s);const{connection:c,...j}=wa(d,m,N);let k=!0;s.setState=(g,u,v)=>{const b=a(g,u);if(!k)return b;const C=v===void 0?{type:o||"anonymous"}:typeof v=="string"?{type:v}:v;return d===void 0?(c?.send(C,t()),b):(c?.send({...C,type:`${d}/${C.type}`},{...De(N.name),[d]:s.getState()}),b)};const x=(...g)=>{const u=k;k=!1,a(...g),k=u},T=l(s.setState,t,s);if(j.type==="untracked"?c?.init(T):(j.stores[j.store]=s,c?.init(Object.fromEntries(Object.entries(j.stores).map(([g,u])=>[g,g===j.store?T:u.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let g=!1;const u=s.dispatch;s.dispatch=(...v)=>{(Oe?"production":void 0)!=="production"&&v[0].type==="__setState"&&!g&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),g=!0),u(...v)}}return c.subscribe(g=>{var u;switch(g.type){case"ACTION":if(typeof g.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return qe(g.payload,v=>{if(v.type==="__setState"){if(d===void 0){x(v.state);return}Object.keys(v.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const b=v.state[d];if(b==null)return;JSON.stringify(s.getState())!==JSON.stringify(b)&&x(b);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(v)});case"DISPATCH":switch(g.payload.type){case"RESET":return x(T),d===void 0?c?.init(s.getState()):c?.init(De(N.name));case"COMMIT":if(d===void 0){c?.init(s.getState());return}return c?.init(De(N.name));case"ROLLBACK":return qe(g.state,v=>{if(d===void 0){x(v),c?.init(s.getState());return}x(v[d]),c?.init(De(N.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return qe(g.state,v=>{if(d===void 0){x(v);return}JSON.stringify(s.getState())!==JSON.stringify(v[d])&&x(v[d])});case"IMPORT_STATE":{const{nextLiftedState:v}=g.payload,b=(u=v.computedStates.slice(-1)[0])==null?void 0:u.state;if(!b)return;x(d===void 0?b:b[d]),c?.send(null,v);return}case"PAUSE_RECORDING":return k=!k}return}}),T},Sa=Ca,qe=(l,i)=>{let a;try{a=JSON.parse(l)}catch(t){console.error("[zustand devtools middleware] Could not parse the received json",t)}a!==void 0&&i(a)};function ka(l,i){let a;try{a=l()}catch{return}return{getItem:s=>{var r;const o=N=>N===null?null:JSON.parse(N,void 0),d=(r=a.getItem(s))!=null?r:null;return d instanceof Promise?d.then(o):o(d)},setItem:(s,r)=>a.setItem(s,JSON.stringify(r,void 0)),removeItem:s=>a.removeItem(s)}}const ze=l=>i=>{try{const a=l(i);return a instanceof Promise?a:{then(t){return ze(t)(a)},catch(t){return this}}}catch(a){return{then(t){return this},catch(t){return ze(t)(a)}}}},Pa=(l,i)=>(a,t,s)=>{let r={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:u=>u,version:0,merge:(u,v)=>({...v,...u}),...i},o=!1;const d=new Set,N=new Set;let m;try{m=r.getStorage()}catch{}if(!m)return l((...u)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),a(...u)},t,s);const c=ze(r.serialize),j=()=>{const u=r.partialize({...t()});let v;const b=c({state:u,version:r.version}).then(C=>m.setItem(r.name,C)).catch(C=>{v=C});if(v)throw v;return b},k=s.setState;s.setState=(u,v)=>{k(u,v),j()};const x=l((...u)=>{a(...u),j()},t,s);let T;const g=()=>{var u;if(!m)return;o=!1,d.forEach(b=>b(t()));const v=((u=r.onRehydrateStorage)==null?void 0:u.call(r,t()))||void 0;return ze(m.getItem.bind(m))(r.name).then(b=>{if(b)return r.deserialize(b)}).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==r.version){if(r.migrate)return r.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var C;return T=r.merge(b,(C=t())!=null?C:x),a(T,!0),j()}).then(()=>{v?.(T,void 0),o=!0,N.forEach(b=>b(T))}).catch(b=>{v?.(void 0,b)})};return s.persist={setOptions:u=>{r={...r,...u},u.getStorage&&(m=u.getStorage())},clearStorage:()=>{m?.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:u=>(d.add(u),()=>{d.delete(u)}),onFinishHydration:u=>(N.add(u),()=>{N.delete(u)})},g(),T||x},Ta=(l,i)=>(a,t,s)=>{let r={storage:ka(()=>localStorage),partialize:g=>g,version:0,merge:(g,u)=>({...u,...g}),...i},o=!1;const d=new Set,N=new Set;let m=r.storage;if(!m)return l((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),a(...g)},t,s);const c=()=>{const g=r.partialize({...t()});return m.setItem(r.name,{state:g,version:r.version})},j=s.setState;s.setState=(g,u)=>{j(g,u),c()};const k=l((...g)=>{a(...g),c()},t,s);let x;const T=()=>{var g,u;if(!m)return;o=!1,d.forEach(b=>{var C;return b((C=t())!=null?C:k)});const v=((u=r.onRehydrateStorage)==null?void 0:u.call(r,(g=t())!=null?g:k))||void 0;return ze(m.getItem.bind(m))(r.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==r.version){if(r.migrate)return r.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var C;return x=r.merge(b,(C=t())!=null?C:k),a(x,!0),c()}).then(()=>{v?.(x,void 0),x=t(),o=!0,N.forEach(b=>b(x))}).catch(b=>{v?.(void 0,b)})};return s.persist={setOptions:g=>{r={...r,...g},g.storage&&(m=g.storage)},clearStorage:()=>{m?.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>T(),hasHydrated:()=>o,onHydrate:g=>(d.add(g),()=>{d.delete(g)}),onFinishHydration:g=>(N.add(g),()=>{N.delete(g)})},r.skipHydration||T(),x||k},Aa=(l,i)=>"getStorage"in i||"serialize"in i||"deserialize"in i?((Oe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Pa(l,i)):Ta(l,i),Ea=Aa,He={objetivo:"",audienciaPrimaria:"",audienciaInsight:"",ofertaProducto:"",ofertaBeneficio:"",ofertaPrueba:"",marcaTono:"",marcaColores:[],marcaTipografia:"",formatoTipo:"single",formatoPlataformas:[],formatoAspectRatio:"",formatoDuracion:"",cta:"",hashtags:[],assetsProporcionados:[],assetsNecesarios:[],restriccionesLegales:"",restriccionesClaims:"",restriccionesFecha:"",aceptacionDebeIncluir:[],aceptacionMetrica:""},Ge=[{id:"objetivo",name:"Objetivo",fields:[{id:"objetivo",label:"Objetivo del post",placeholder:"Ej.: Generar awareness + clics al sitio",type:"input",required:!0,validation:l=>l.length<10?"Describe el objetivo con más detalle":null}],isComplete:!1,completionPercentage:0},{id:"audiencia",name:"Audiencia",fields:[{id:"audienciaPrimaria",label:"Primaria",placeholder:"Segmento principal (edad, intereses)",type:"input",required:!0},{id:"audienciaInsight",label:"Insight",placeholder:"Dolor/beneficio clave que moverá a la acción",type:"textarea",required:!0}],isComplete:!1,completionPercentage:0},{id:"oferta",name:"Oferta",fields:[{id:"ofertaProducto",label:"Producto/servicio",placeholder:"¿Qué se promociona?",type:"input",required:!0},{id:"ofertaBeneficio",label:"Beneficio principal",placeholder:"¿Qué gana el usuario?",type:"input",required:!0},{id:"ofertaPrueba",label:"Prueba/soporte",placeholder:"Datos, testimonios o certificaciones",type:"textarea"}],isComplete:!1,completionPercentage:0},{id:"marca",name:"Marca",fields:[{id:"marcaTono",label:"Tono",placeholder:"Elegir tono",type:"select",options:["Simple","Neutral","Formal"]},{id:"marcaColores",label:"Colores",placeholder:"Seleccionar colores de marca",type:"tags"},{id:"marcaTipografia",label:"Tipografía",placeholder:"Ej.: Headline/Body",type:"input"}],isComplete:!1,completionPercentage:0},{id:"formato",name:"Formato",fields:[{id:"formatoTipo",label:"Tipo",placeholder:"Tipo de post",type:"select",options:["single","carousel","story"],required:!0},{id:"formatoPlataformas",label:"Plataformas",placeholder:"Selecciona plataformas",type:"tags"},{id:"formatoAspectRatio",label:"Aspect ratio",placeholder:"Elegir",type:"select",options:["1:1","4:5","16:9"]},{id:"formatoDuracion",label:"Duración (s) (si aplica)",placeholder:"0",type:"input"}],isComplete:!1,completionPercentage:0},{id:"cta",name:"CTA",fields:[{id:"cta",label:"CTA",placeholder:"Ej.: Compra ahora / Reserva hoy / Más info",type:"input",required:!0}],isComplete:!1,completionPercentage:0},{id:"hashtags",name:"Hashtags",fields:[{id:"hashtags",label:"Hashtags",placeholder:"#tuMarca #postSimple #oferta",type:"tags"}],isComplete:!1,completionPercentage:0},{id:"assets",name:"Assets",fields:[{id:"assetsProporcionados",label:"Proporcionados",placeholder:"logo.svg, foto_packshot.png",type:"tags"},{id:"assetsNecesarios",label:"Necesarios",placeholder:"Mockup del producto, foto lifestyle",type:"tags"}],isComplete:!1,completionPercentage:0},{id:"restricciones",name:"Restricciones",fields:[{id:"restriccionesLegales",label:"Legales",placeholder:"Cláusulas/advertencias obligatorias",type:"textarea"},{id:"restriccionesClaims",label:"Claims prohibidos",placeholder:"Afirmaciones no permitidas",type:"textarea"},{id:"restriccionesFecha",label:"Fecha límite",placeholder:"YYYY-MM-DD",type:"input"}],isComplete:!1,completionPercentage:0},{id:"aceptacion",name:"Aceptación",fields:[{id:"aceptacionDebeIncluir",label:"Debe incluir",placeholder:"Precio final, delivery, logo, CTA…",type:"tags"},{id:"aceptacionMetrica",label:"Métrica de éxito",placeholder:"CTR ≥ x%, comentarios ≥ n",type:"input"}],isComplete:!1,completionPercentage:0}],Ia=Ds()(Sa(Ea((l,i)=>({messages:[{id:"system-welcome",role:"system",content:"¡Hola! Te ayudaré a definir el brief para tu post. Cuéntame sobre el proyecto que tienes en mente.",timestamp:new Date}],isLoading:!1,isTyping:!1,briefData:He,activeBriefSection:"objetivo",conflicts:[],hasUnresolvedConflicts:!1,chatCollapsed:!1,briefCollapsed:!1,lastSaved:null,hasUnsavedChanges:!1,autoSaveEnabled:!0,briefCompleted:!1,canContinueWorkflow:!1,addMessage:(a,t)=>{const s={id:`msg_${Date.now()}_${Math.random()}`,role:t,content:a,timestamp:new Date};l(r=>({messages:[...r.messages,s],hasUnsavedChanges:!0})),t==="assistant"&&setTimeout(()=>{i().extractInformationFromChat(a)},500)},updateMessage:(a,t)=>{l(s=>({messages:s.messages.map(r=>r.id===a?{...r,content:t,metadata:{...r.metadata,edited:!0,editedAt:new Date,originalContent:r.metadata?.originalContent||r.content}}:r),hasUnsavedChanges:!0}))},deleteMessage:a=>{l(t=>({messages:t.messages.filter(s=>s.id!==a),hasUnsavedChanges:!0}))},setIsLoading:a=>l({isLoading:a}),setIsTyping:a=>l({isTyping:a}),updateBriefField:(a,t)=>{l(s=>{const r={...s.briefData,[a]:t},o=s.messages.filter(d=>d.role==="user"||d.role==="assistant").map(d=>d.content).join(" ").toLowerCase();return i().detectConflicts(a,t,o),{briefData:r,hasUnsavedChanges:!0}}),setTimeout(()=>i().checkBriefCompletion(),100)},setActiveBriefSection:a=>l({activeBriefSection:a}),resetBrief:()=>l({briefData:He,conflicts:[],hasUnresolvedConflicts:!1,briefCompleted:!1,canContinueWorkflow:!1}),addConflict:a=>{const t={...a,timestamp:new Date,resolved:!1};l(s=>({conflicts:[...s.conflicts.filter(r=>r.fieldId!==a.fieldId),t],hasUnresolvedConflicts:!0}))},resolveConflict:(a,t,s)=>{const r=i().conflicts.find(d=>d.fieldId===a);if(!r)return;let o;switch(t){case"chat":o=r.chatValue;break;case"brief":o=r.briefValue;break;case"manual":o=s||r.briefValue;break}i().updateBriefField(a,o),l(d=>({conflicts:d.conflicts.map(N=>N.fieldId===a?{...N,resolved:!0}:N),hasUnresolvedConflicts:d.conflicts.some(N=>N.fieldId!==a&&!N.resolved)}))},dismissConflict:a=>{l(t=>({conflicts:t.conflicts.filter(s=>s.fieldId!==a),hasUnresolvedConflicts:t.conflicts.some(s=>s.fieldId!==a&&!s.resolved)}))},toggleChatCollapse:()=>l(a=>({chatCollapsed:!a.chatCollapsed})),toggleBriefCollapse:()=>l(a=>({briefCollapsed:!a.briefCollapsed})),markUnsavedChanges:()=>l({hasUnsavedChanges:!0}),markSaved:()=>l({hasUnsavedChanges:!1,lastSaved:new Date}),setAutoSaveEnabled:a=>l({autoSaveEnabled:a}),checkBriefCompletion:()=>{const a=i(),s=["objetivo","audienciaPrimaria","audienciaInsight","ofertaProducto","ofertaBeneficio","formatoTipo","cta"].every(o=>a.briefData[o]&&String(a.briefData[o]).trim()!==""),r=s&&!a.hasUnresolvedConflicts;l({briefCompleted:s,canContinueWorkflow:r})},setBriefCompleted:a=>l({briefCompleted:a}),setCanContinueWorkflow:a=>l({canContinueWorkflow:a}),extractInformationFromChat:a=>{const t=i(),s=a.toLowerCase(),r={};if(!t.briefData.objetivo&&(s.includes("objetivo")||s.includes("meta")||s.includes("lograr"))){const o=a.split(".").filter(d=>d.trim().length>0);o.length>0&&(r.objetivo=o[0].trim()+".")}t.briefData.audienciaPrimaria||(s.includes("jóvenes")||s.includes("millennials")?r.audienciaPrimaria="Jóvenes 18-35 años, activos en redes sociales":s.includes("profesional")||s.includes("empresa")?r.audienciaPrimaria="Profesionales y empresarios":s.includes("estudiante")?r.audienciaPrimaria="Estudiantes universitarios":(s.includes("familia")||s.includes("padres"))&&(r.audienciaPrimaria="Padres de familia, 25-45 años")),!t.briefData.ofertaProducto&&(s.includes("producto")||s.includes("servicio"))&&(s.includes("curso")||s.includes("capacitación")?r.ofertaProducto="Curso online":s.includes("software")||s.includes("app")?r.ofertaProducto="Aplicación/Software":s.includes("consultoría")&&(r.ofertaProducto="Servicio de consultoría")),t.briefData.cta||(s.includes("comprar")||s.includes("vender")?r.cta="Compra ahora":s.includes("suscrib")||s.includes("registr")?r.cta="Suscríbete":s.includes("visita")||s.includes("web")?r.cta="Visita nuestra web":(s.includes("contacto")||s.includes("consulta"))&&(r.cta="Contáctanos")),Object.entries(r).forEach(([o,d])=>{d&&i().updateBriefField(o,d)})},detectConflicts:(a,t,s)=>{i(),a==="audienciaPrimaria"&&t&&s&&t.toLowerCase().includes("jóvenes")&&s.includes("profesional")&&i().addConflict({fieldId:a,chatValue:"Profesionales y empresarios",briefValue:t,suggestion:"El chat menciona profesionales, pero el brief indica jóvenes"}),a==="cta"&&t&&s&&t.toLowerCase().includes("compra")&&s.includes("suscrib")&&i().addConflict({fieldId:a,chatValue:"Suscríbete",briefValue:t,suggestion:"El chat sugiere suscripción, pero el brief indica compra"})},saveBrief:async()=>{const a=i();try{console.log("Saving brief data:",a.briefData),console.log("Saving chat messages:",a.messages),await new Promise(t=>setTimeout(t,500)),i().markSaved()}catch(t){throw console.error("Error saving brief:",t),t}},loadBrief:async a=>{try{console.log("Loading brief:",a),await new Promise(t=>setTimeout(t,500))}catch(t){throw console.error("Error loading brief:",t),t}},resetStore:()=>{l({messages:[{id:"system-welcome",role:"system",content:"¡Hola! Te ayudaré a definir el brief para tu post. Cuéntame sobre el proyecto que tienes en mente.",timestamp:new Date}],isLoading:!1,isTyping:!1,briefData:He,activeBriefSection:"objetivo",conflicts:[],hasUnresolvedConflicts:!1,chatCollapsed:!1,briefCollapsed:!1,lastSaved:null,hasUnsavedChanges:!1,autoSaveEnabled:!0,briefCompleted:!1,canContinueWorkflow:!1})}}),{name:"brief-chat-storage",partialize:l=>({briefData:l.briefData,messages:l.messages,lastSaved:l.lastSaved,autoSaveEnabled:l.autoSaveEnabled})}),{name:"BriefChatStore"}));function cs({onContinue:l}){const{hasBrandKit:i}=he(),{currentProject:a,goToNextStep:t}=Y(),{messages:s,isLoading:r,isTyping:o,addMessage:d,setIsLoading:N,setIsTyping:m,briefData:c,activeBriefSection:j,setActiveBriefSection:k,updateBriefField:x,conflicts:T,hasUnresolvedConflicts:g,resolveConflict:u,dismissConflict:v,chatCollapsed:b,briefCollapsed:C,toggleChatCollapse:$,toggleBriefCollapse:P,lastSaved:D,hasUnsavedChanges:S,autoSaveEnabled:L,setAutoSaveEnabled:E,saveBrief:O,markSaved:Z,briefCompleted:Q,canContinueWorkflow:re,checkBriefCompletion:ue,resetStore:Me}=Ia(),[X,pe]=p.useState(""),[oe,ee]=p.useState(!1),Se=p.useRef(null),se=p.useRef();p.useEffect(()=>{Se.current?.scrollIntoView({behavior:"smooth"})},[s]),p.useEffect(()=>(L&&S&&(se.current&&clearTimeout(se.current),se.current=setTimeout(async()=>{try{ee(!0),await O()}catch(I){console.error("Auto-save failed:",I)}finally{ee(!1)}},3e3)),()=>{se.current&&clearTimeout(se.current)}),[S,L,O]),p.useEffect(()=>{ue()},[c,T,ue]);const A=async()=>{!X.trim()||r||(d(X,"user"),pe(""),N(!0),m(!0),setTimeout(()=>{const I=q(X);d(I,"assistant"),N(!1),m(!1)},1500+Math.random()*1e3))},q=I=>{const f=I.toLowerCase();if(f.includes("objetivo")||f.includes("meta"))return`Perfecto, entiendo que quieres trabajar en el objetivo del post. Basándome en lo que me cuentas, te sugiero que el objetivo principal sea claro y medible. ${i?"Veo que tienes tu BrandKit configurado, así que podemos alinearlo con tu identidad de marca.":"Te recomiendo configurar tu BrandKit para mantener consistencia."} ¿Puedes contarme más específicamente qué quieres lograr con este post?`;if(f.includes("audiencia")||f.includes("público"))return"Excelente, definir bien la audiencia es clave para el éxito del post. Te ayudo a segmentarla correctamente. ¿Me puedes describir a quién específicamente quieres llegar? Por ejemplo: edad, intereses, comportamiento en redes sociales, etc.";if(f.includes("producto")||f.includes("servicio"))return"Entiendo que quieres promocionar un producto/servicio. Para crear un post efectivo, necesito entender: ¿cuál es el beneficio principal que aporta? ¿qué problema resuelve? ¿qué hace que sea único frente a la competencia?";if(f.includes("promoción")||f.includes("oferta")||f.includes("descuento"))return"Genial, las promociones pueden generar mucho engagement. Para maximizar el impacto, sugiero incluir: el beneficio específico, la urgencia (tiempo limitado), y un call-to-action claro. ¿Tienes definidos estos elementos?";if(f.includes("evento")||f.includes("lanzamiento"))return"Los eventos y lanzamientos requieren una estrategia especial. Necesitamos destacar: la fecha y ubicación (si aplica), qué lo hace especial, quién debería asistir, y cómo participar. ¿Me puedes dar más detalles del evento?";const y=["Interesante propuesta. Para ayudarte mejor, necesito entender algunos aspectos clave. ¿Podrías contarme más sobre el contexto del proyecto?","Me parece una buena idea. Para desarrollarla correctamente, ¿qué resultado específico esperas obtener con este post?","Entiendo la dirección. Para asegurarme de crear algo efectivo, ¿cuál dirías que es el mensaje principal que quieres transmitir?",`Perfecto, vamos definiendo los detalles. ${i?"Con tu BrandKit aplicado, podemos mantener consistencia con tu marca.":""} ¿Hay algún elemento específico que no puede faltar en el post?`];return y[Math.floor(Math.random()*y.length)]},B=(I,f)=>{x(I,f)},h=()=>{re&&O().then(()=>{l?l():t()})},F=()=>{const I=["objetivo","audienciaPrimaria","audienciaInsight","ofertaProducto","ofertaBeneficio","formatoTipo","cta"],f=I.filter(y=>c[y]&&String(c[y]).trim()!=="").length;return{completed:f,total:I.length,percentage:Math.round(f/I.length*100)}},V=I=>{const f=Ge.find(W=>W.id===I);if(!f)return"incompleto";const y=f.fields.filter(W=>W.required),_=y.filter(W=>{const ae=c[W.id];return ae&&(Array.isArray(ae)?ae.length>0:String(ae).trim()!=="")});return y.length===0?"opcional":_.length===y.length?"completo":"incompleto"},H=F();return e.jsxs("div",{className:"h-full flex flex-col bg-background",children:[e.jsxs("div",{className:"p-4 border-b bg-card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 text-white",children:e.jsx(Je,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold",children:a?.type==="carousel"?"Crear Carusel — Paso 1":"Crear Post Simple — Paso 1"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Brief interactivo con IA"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(w,{variant:Q?"default":"secondary",children:["Brief: ",Q?"completo":`${H.percentage}%`]}),e.jsx(w,{variant:"outline",className:"flex items-center gap-1",children:oe?e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"w-3 h-3 animate-spin"}),"Guardando..."]}):S?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-3 h-3"}),"Sin guardar"]}):e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"w-3 h-3"}),"Guardado"]})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>E(!L),title:"Configurar auto-guardado",children:e.jsx(Re,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx(xs,{value:H.percentage,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[e.jsx("span",{children:"Progreso del brief"}),e.jsxs("span",{children:[H.completed,"/",H.total," campos clave"]})]})]})]}),g&&e.jsxs(ss,{className:"m-4 border-amber-200 bg-amber-50",children:[e.jsx(de,{className:"w-4 h-4 text-amber-600"}),e.jsxs(as,{className:"text-amber-800",children:["Se detectaron ",T.filter(I=>!I.resolved).length," conflictos entre el chat y el brief.",e.jsx(n,{variant:"link",className:"p-0 h-auto ml-2 text-amber-700",children:"Revisar conflictos"})]})]}),e.jsxs("div",{className:"flex-1 flex",children:[e.jsx("div",{className:`transition-all duration-300 ${b?"w-12":"w-[60%]"} border-r bg-card/50`,children:b?e.jsx("div",{className:"p-3",children:e.jsx(n,{variant:"ghost",size:"sm",onClick:$,className:"w-full",children:e.jsx(Ee,{className:"w-4 h-4"})})}):e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${o?"bg-green-500 animate-pulse":"bg-green-500"}`}),e.jsx("span",{className:"font-medium",children:"Chat con ChatGPT-5 (Brief)"}),i&&e.jsx(w,{variant:"secondary",className:"text-xs",children:"BrandKit activo"})]}),e.jsx(n,{variant:"ghost",size:"sm",onClick:$,children:e.jsx(we,{className:"w-4 h-4"})})]}),e.jsx(ya,{messages:s,isTyping:o}),e.jsxs("div",{className:"p-4 border-t bg-background",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{placeholder:"Escribe tu respuesta...",value:X,onChange:I=>pe(I.target.value),onKeyPress:I=>I.key==="Enter"&&!I.shiftKey&&A(),disabled:r,className:"flex-1"}),e.jsxs(n,{variant:"outline",size:"sm",className:"h-9 rounded-lg",title:"Subir imagen o archivo (diseño)",children:[e.jsx(hs,{className:"w-4 h-4 mr-2"}),"Subir"]}),e.jsx(n,{onClick:A,disabled:!X.trim()||r,size:"sm",className:"h-9",children:e.jsx(_e,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"text-right mt-2",children:e.jsx("p",{className:"text-xs text-muted-foreground opacity-70",children:"Tipos (diseño): Imágenes (PNG/JPG), PDF, TXT"})})]})]})}),e.jsx("div",{className:`transition-all duration-300 ${C?"w-12":"w-[40%]"} bg-card`,children:C?e.jsx("div",{className:"p-3",children:e.jsx(n,{variant:"ghost",size:"sm",onClick:P,className:"w-full",children:e.jsx(we,{className:"w-4 h-4"})})}):e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Brief (editable)"}),e.jsxs(w,{variant:"outline",className:"text-xs",children:["Autosave: ",L?"ON":"OFF"]})]}),e.jsx(n,{variant:"ghost",size:"sm",onClick:P,children:e.jsx(Ee,{className:"w-4 h-4"})})]}),e.jsxs(es,{value:j,onValueChange:k,className:"flex-1 flex flex-col",children:[e.jsx(xe,{className:"px-3 py-2 border-b",children:e.jsx(Ie,{className:"inline-flex h-auto p-1 space-x-1 overflow-x-auto min-w-max",children:Ge.map(I=>e.jsx(te,{value:I.id,className:"text-xs py-2 px-3 whitespace-nowrap data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:I.name},I.id))})}),e.jsx(xe,{className:"flex-1",children:Ge.map(I=>e.jsxs(J,{value:I.id,className:"p-3 space-y-3 mt-0",children:[I.fields.map(f=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs(M,{className:"text-xs font-semibold opacity-85 flex items-center gap-2",children:[f.label,f.required&&e.jsx("span",{className:"text-red-500",children:"*"}),T.some(y=>y.fieldId===f.id&&!y.resolved)&&e.jsx(de,{className:"w-4 h-4 text-amber-500"})]}),f.type==="input"&&e.jsx(K,{placeholder:f.placeholder,value:c[f.id]||"",onChange:y=>B(f.id,y.target.value),className:"h-9 rounded-lg"}),f.type==="textarea"&&e.jsx(be,{placeholder:f.placeholder,value:c[f.id]||"",onChange:y=>B(f.id,y.target.value),className:"min-h-[72px] rounded-lg",rows:f.id==="audienciaInsight"?3:2}),f.type==="select"&&f.id==="formatoTipo"&&e.jsxs(us,{value:c[f.id]||"single",onValueChange:y=>B(f.id,y),className:"flex flex-row space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{value:"single",id:"single"}),e.jsx(M,{htmlFor:"single",className:"text-xs",children:"Single"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{value:"carousel",id:"carousel"}),e.jsx(M,{htmlFor:"carousel",className:"text-xs",children:"Carousel"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{value:"story",id:"story"}),e.jsx(M,{htmlFor:"story",className:"text-xs",children:"Story"})]})]}),f.type==="select"&&f.id!=="formatoTipo"&&e.jsxs(ie,{value:c[f.id]||"",onValueChange:y=>B(f.id,y),children:[e.jsx(le,{className:"h-9 rounded-lg",children:e.jsx(ne,{placeholder:f.placeholder})}),e.jsx(ce,{children:f.options?.map(y=>e.jsx(R,{value:y,children:y},y))})]}),f.type==="tags"&&f.id==="formatoPlataformas"&&e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Instagram","Facebook","TikTok","LinkedIn","X"].map(y=>e.jsx(n,{variant:c[f.id]?.includes(y)?"default":"outline",size:"sm",className:"text-xs h-8 rounded-lg",onClick:()=>{const _=c[f.id]||[],W=_.includes(y)?_.filter(ae=>ae!==y):[..._,y];B(f.id,W)},children:y},y))})}),f.type==="tags"&&f.id==="marcaColores"&&e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:["Primario","Secundario","Accento"].map(y=>e.jsx(n,{variant:c[f.id]?.includes(y)?"default":"outline",size:"sm",className:"text-xs h-8 rounded-lg",onClick:()=>{const _=c[f.id]||[],W=_.includes(y)?_.filter(ae=>ae!==y):[..._,y];B(f.id,W)},children:y},y))})}),f.type==="tags"&&!["formatoPlataformas","marcaColores"].includes(f.id)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{placeholder:f.placeholder,className:"h-9 rounded-lg",onKeyPress:y=>{if(y.key==="Enter"){y.preventDefault();const _=y.target.value.trim();_&&!c[f.id]?.includes(_)&&(B(f.id,[...c[f.id]||[],_]),y.target.value="")}}}),c[f.id]?.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:c[f.id]?.map((y,_)=>e.jsxs(w,{variant:"secondary",className:"text-xs h-6 rounded-lg",children:[y,e.jsx(n,{variant:"ghost",size:"sm",className:"w-4 h-4 p-0 ml-1 hover:bg-transparent",onClick:()=>{const W=c[f.id].filter((ae,Ms)=>Ms!==_);B(f.id,W)},children:e.jsx(Ne,{className:"w-3 h-3"})})]},_))})]}),f.id==="objetivo"&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"1 frase clara, medible si es posible"}),f.id==="hashtags"&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"3–8 hashtags relevantes"}),T.filter(y=>y.fieldId===f.id&&!y.resolved).map(y=>e.jsxs(ss,{className:"border-amber-200 bg-amber-50",children:[e.jsx(de,{className:"w-4 h-4 text-amber-600"}),e.jsxs(as,{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-amber-800",children:y.suggestion}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{size:"sm",variant:"outline",onClick:()=>u(y.fieldId,"chat"),className:"text-xs",children:['Usar chat: "',y.chatValue,'"']}),e.jsx(n,{size:"sm",variant:"outline",onClick:()=>u(y.fieldId,"brief"),className:"text-xs",children:"Mantener brief"}),e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>v(y.fieldId),className:"text-xs",children:e.jsx(Ne,{className:"w-3 h-3"})})]})]})]},`${y.fieldId}-${y.timestamp.getTime()}`))]},f.id)),e.jsx("div",{className:"pt-2",children:e.jsx(w,{variant:V(I.id)==="completo"?"default":"secondary",className:"h-6 rounded-lg text-xs",children:V(I.id)})})]},I.id))})]}),e.jsxs("div",{className:"p-3 border-t bg-background",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(w,{variant:V(j)==="completo"?"default":"secondary",className:"text-xs",children:["Sección activa: ",V(j)]}),g&&e.jsxs(w,{variant:"destructive",className:"text-xs",children:[T.filter(I=>!I.resolved).length," conflictos"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>O(),disabled:oe,className:"text-xs",children:oe?e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"w-3 h-3 mr-1 animate-spin"}),"Guardando..."]}):"Guardar sección"}),e.jsxs(n,{onClick:h,disabled:!re,size:"sm",className:"flex items-center gap-2",children:["Continuar",e.jsx(ps,{className:"w-4 h-4"})]})]})]}),!re&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2 flex items-center gap-1",children:[e.jsx(Xe,{className:"w-3 h-3"}),"Completa los campos clave para continuar"]})]})]})})]})]})}const Ke=[{id:"Instagram",name:"Instagram",icon:gs,gradient:"from-pink-500 to-purple-600",ratios:["1:1","9:16"]},{id:"Facebook",name:"Facebook",icon:fs,gradient:"from-blue-600 to-blue-700",ratios:["1:1"]},{id:"TikTok",name:"TikTok",icon:js,gradient:"from-black to-gray-800",ratios:["9:16"]},{id:"LinkedIn",name:"LinkedIn",icon:Cs,gradient:"from-blue-700 to-blue-800",ratios:["16:9","1:1"]},{id:"X",name:"X (Twitter)",icon:Ss,gradient:"from-black to-gray-800",ratios:["16:9"]}];function za(){const{hasBrandKit:l}=he(),{primaryColors:i,secondaryColors:a}=Ye(),{currentProject:t,updateConfiguration:s,goToNextStep:r,goToPreviousStep:o}=Y(),[d,N]=p.useState("post"),[m,c]=p.useState(3),[j,k]=p.useState("Instagram"),[x,T]=p.useState("1:1");p.useEffect(()=>{if(t?.configuration){const S=t.configuration;c(S.generationCount||3),k(S.primaryPlatform||"Instagram"),T(S.format?.ratio||"1:1")}},[t]),p.useEffect(()=>{if(!t)return;Ke.find(L=>L.id===j);const S=C(x);s({socialPlatforms:[j.toLowerCase()],primaryPlatform:j.toLowerCase(),generationCount:m,format:{ratio:x,name:S.name,width:S.width,height:S.height},dimensions:{width:S.width,height:S.height}})},[d,m,j,x,t,s]);const g=Ke.find(S=>S.id===j),u=i[0]?.hex||"#2563eb",v=a[0]?.hex||"#6366f1",b=a[1]?.hex||"#8b5cf6",C=S=>{switch(S){case"1:1":return{name:"Cuadrado",width:1080,height:1080};case"9:16":return{name:"Vertical",width:1080,height:1920};case"16:9":return{name:"Horizontal",width:1920,height:1080};default:return{name:"Cuadrado",width:1080,height:1080}}},$=d&&m>=1&&m<=10&&j&&x,P=()=>{o()},D=()=>{$&&r()};return e.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-xl sm:text-2xl",children:"Configuración del Contenido"}),e.jsx(w,{variant:"secondary",className:"self-start sm:self-center",children:"Paso 2 de 7"})]}),e.jsxs(z,{className:"shadow-md hover:shadow-lg transition-shadow",children:[e.jsx(fe,{className:"pb-4",children:e.jsx(je,{className:"text-lg",children:"Tipo de Contenido"})}),e.jsx(me,{children:e.jsxs(us,{value:d,onValueChange:N,className:"gap-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Te,{value:"post",id:"post"}),e.jsx(M,{htmlFor:"post",className:"cursor-pointer flex-1",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"space-y-1",children:e.jsx("p",{children:"Post simple"})}),e.jsx("div",{className:"ml-auto",children:e.jsx("div",{className:"rounded-lg shadow-sm border flex items-center justify-center transition-transform hover:scale-105",style:{width:60,height:60,backgroundColor:d==="post"?u:"#f3f4f6"},children:e.jsx(Bs,{className:`w-6 h-6 ${d==="post"?"text-white":"text-gray-500"}`})})})]})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Te,{value:"carrousel",id:"carrousel"}),e.jsx(M,{htmlFor:"carrousel",className:"cursor-pointer flex-1"})]})]})})]}),e.jsxs(z,{className:"shadow-md hover:shadow-lg transition-shadow",children:[e.jsx(fe,{className:"pb-4",children:e.jsx(je,{className:"text-lg",children:"Cantidad de ejemplos a generar"})}),e.jsxs(me,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx(ge,{value:[m],onValueChange:S=>c(S[0]),max:10,min:1,step:1,className:"w-full",style:{"--primary":u}}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-2",children:[e.jsx("span",{children:"1"}),e.jsx("span",{children:"10"})]})]}),e.jsx("div",{className:"w-full sm:w-20",children:e.jsx(K,{type:"number",min:1,max:10,value:m,onChange:S=>c(Math.max(1,Math.min(10,Number(S.target.value)))),className:"w-full sm:w-20 text-center"})})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ejemplos a generar: ",e.jsx("span",{style:{color:u},children:m})]})]})]}),e.jsxs(z,{className:"shadow-md hover:shadow-lg transition-shadow",children:[e.jsx(fe,{className:"pb-4",children:e.jsx(je,{className:"text-lg",children:"Red social objetivo"})}),e.jsxs(me,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(M,{children:"Selecciona la plataforma"}),e.jsx("div",{className:"grid grid-cols-2 sm:flex sm:flex-wrap gap-3 sm:gap-4",children:Ke.map(S=>{const L=S.icon,E=j===S.id;return e.jsxs("button",{onClick:()=>{k(S.id),S.ratios.length>0&&!S.ratios.includes(x)&&T(S.ratios[0])},className:`flex items-center justify-center sm:justify-start gap-2 px-3 py-3 sm:py-2 rounded-2xl border transition-all hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 ${E?"border-transparent text-white shadow-md":"border-gray-200 hover:border-gray-300 bg-white text-gray-700"}`,style:{background:E?`linear-gradient(135deg, ${S.gradient.replace("from-","").replace("to-","").split(" ").map(O=>({"pink-500":"#ec4899","purple-600":"#9333ea","blue-600":"#2563eb","blue-700":"#1d4ed8","blue-800":"#1e40af",black:"#000000","gray-800":"#1f2937"})[O]||O).join(", ")})`:void 0},"aria-label":`${S.name} - formatos disponibles: ${S.ratios.join(", ")}`,children:[e.jsx(L,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-semibold text-center sm:text-left",children:S.name}),e.jsx(w,{variant:"secondary",className:"text-xs px-1 py-0 hidden lg:inline-flex",children:S.ratios.join(" / ")})]},S.id)})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(M,{children:["Selecciona el formato para ",g?.name]}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap gap-4 sm:gap-6 justify-center sm:justify-start",children:[g?.ratios.includes("1:1")&&e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:`rounded-lg shadow-md border flex items-center justify-center text-white transition-all hover:scale-105 cursor-pointer ${x==="1:1"?"ring-2 ring-offset-2":""}`,style:{width:100,height:100,backgroundColor:x==="1:1"?u:"#e5e7eb",color:x==="1:1"?"white":"#6b7280",ringColor:u},onClick:()=>T("1:1"),title:"Formato cuadrado",role:"button",tabIndex:0,"aria-label":"Formato cuadrado 1:1",onKeyDown:S=>S.key==="Enter"&&T("1:1"),children:e.jsx("span",{className:"text-sm font-semibold",children:"1:1"})}),e.jsx("span",{className:"text-xs text-muted-foreground text-center",children:"Formato cuadrado"})]}),g?.ratios.includes("9:16")&&e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:`rounded-lg shadow-md border flex items-center justify-center text-white transition-all hover:scale-105 cursor-pointer ${x==="9:16"?"ring-2 ring-offset-2":""}`,style:{width:70,height:120,backgroundColor:x==="9:16"?v:"#e5e7eb",color:x==="9:16"?"white":"#6b7280",ringColor:v},onClick:()=>T("9:16"),title:"Formato vertical",role:"button",tabIndex:0,"aria-label":"Formato vertical 9:16",onKeyDown:S=>S.key==="Enter"&&T("9:16"),children:e.jsx("span",{className:"text-sm font-semibold",children:"9:16"})}),e.jsx("span",{className:"text-xs text-muted-foreground text-center",children:"Formato vertical"})]}),g?.ratios.includes("16:9")&&e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:`rounded-lg shadow-md border flex items-center justify-center text-white transition-all hover:scale-105 cursor-pointer ${x==="16:9"?"ring-2 ring-offset-2":""}`,style:{width:140,height:80,backgroundColor:x==="16:9"?b:"#e5e7eb",color:x==="16:9"?"white":"#6b7280",ringColor:b},onClick:()=>T("16:9"),title:"Formato horizontal",role:"button",tabIndex:0,"aria-label":"Formato horizontal 16:9",onKeyDown:S=>S.key==="Enter"&&T("16:9"),children:e.jsx("span",{className:"text-sm font-semibold",children:"16:9"})}),e.jsx("span",{className:"text-xs text-muted-foreground text-center",children:"Formato horizontal"})]})]}),x&&e.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Formato seleccionado:"}),e.jsxs("span",{style:{color:u},children:[C(x).name," (",x,") - ",C(x).width,"x",C(x).height,"px"]})]})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg border ${l?"bg-amber-50 border-amber-200":"bg-blue-50 border-blue-200"}`,children:[e.jsx(de,{className:`w-4 h-4 flex-shrink-0 ${l?"text-amber-600":"text-blue-600"}`}),e.jsx("p",{className:`text-sm ${l?"text-amber-700":"text-blue-700"}`,children:l?"⚠️ El contenido será validado contra el BrandKit (colores, tipografías, accesibilidad)":"ℹ️ Se aplicarán colores y estilos predeterminados. Configura tu BrandKit para personalizar automáticamente."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:justify-between pt-4",children:[e.jsx(n,{variant:"ghost",onClick:P,className:"sm:w-auto",children:"← Volver"}),e.jsx(n,{onClick:D,disabled:!$,className:"sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:$?u:"#e5e7eb",color:$?"white":"#9ca3af"},children:"Siguiente: Generación"})]})]})]})}const Ma={Instagram:gs,Facebook:fs,TikTok:js,LinkedIn:Cs,X:Ss},Be=[{id:1,platform:"Instagram",format:"1:1",validated:!0,confidence:95,style:"minimal"},{id:2,platform:"Instagram",format:"9:16",validated:!0,confidence:88,style:"bold"},{id:3,platform:"Facebook",format:"1:1",validated:!0,confidence:92,style:"professional"},{id:4,platform:"LinkedIn",format:"16:9",validated:!1,confidence:78,style:"corporate"},{id:5,platform:"TikTok",format:"9:16",validated:!0,confidence:85,style:"dynamic"},{id:6,platform:"X",format:"16:9",validated:!0,confidence:90,style:"minimal"}];function Da(){const{hasBrandKit:l}=he(),{primaryColors:i,secondaryColors:a}=Ye(),{goToNextStep:t,goToPreviousStep:s}=Y(),[r,o]=p.useState(!0),[d,N]=p.useState(new Set),m=i[0]?.hex||"#2563eb",c=a[0]?.hex||"#6366f1",j=a[1]?.hex||"#8b5cf6";p.useEffect(()=>{const P=setTimeout(()=>{o(!1)},3e3);return()=>clearTimeout(P)},[]);const k=()=>{s()},x=()=>{d.size>0&&t()},T=P=>{const D=new Set(d);D.has(P)?D.delete(P):D.add(P),N(D)},g=()=>{d.size===Be.length?N(new Set):N(new Set(Be.map(P=>P.id)))},u=P=>{console.log("Expanding proposal:",P)},v=P=>{console.log("Discarding proposal:",P)},b=P=>{const D=[m,c,j];return D[P%D.length]},C=d.size,$=d.size===Be.length;return e.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-xl sm:text-2xl",children:"Generación de Diseños"}),e.jsx(w,{variant:"secondary",className:"self-start sm:self-center",children:"Paso 3 de 6"})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[C," ",C===1?"post seleccionado":"posts seleccionados"]}),e.jsx(n,{variant:"ghost",size:"sm",onClick:g,className:"text-sm self-start sm:self-auto",children:$?"Deseleccionar todo":"Seleccionar todo"})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:k,className:"flex-1 sm:flex-none",children:"← Volver"}),e.jsxs(n,{size:"sm",onClick:x,disabled:C===0,className:"flex-1 sm:flex-none",style:{backgroundColor:C>0?m:void 0,opacity:C>0?1:.5},children:[e.jsx("span",{className:"hidden sm:inline",children:"Siguiente: Edición"}),e.jsx("span",{className:"sm:hidden",children:"Siguiente"})]})]})]})]}),r&&e.jsxs(z,{className:"p-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(Fs,{className:"w-6 h-6 animate-spin",style:{color:m}}),e.jsx("h3",{className:"text-lg",children:"Generando propuestas con IA…"})]}),e.jsx("p",{className:"text-muted-foreground",children:l?"Aplicando automáticamente los colores, tipografías y estilo de tu BrandKit":"Creando diseños con paleta de colores predeterminada"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-8",children:Array.from({length:6}).map((P,D)=>e.jsxs(z,{className:"p-3",children:[e.jsx(ke,{className:"w-full aspect-square rounded-lg mb-3"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ke,{className:"h-4 w-3/4"}),e.jsx(ke,{className:"h-3 w-1/2"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ke,{className:"h-8 flex-1"}),e.jsx(ke,{className:"h-8 flex-1"})]})]})]},D))})]}),!r&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg",children:"Propuestas generadas"}),e.jsxs(w,{variant:"outline",className:"gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"6 diseños listos"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Be.map((P,D)=>{const S=Ma[P.platform],L=d.has(P.id),E=b(D);return e.jsx(z,{className:`transition-all hover:shadow-md ${L?"ring-2 ring-offset-2":""}`,style:{ringColor:L?m:void 0},children:e.jsxs(me,{className:"p-3 space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-full aspect-square rounded-lg flex items-center justify-center text-white transition-transform hover:scale-[1.02] cursor-pointer",style:{backgroundColor:E},onClick:()=>T(P.id),children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(S,{className:"w-8 h-8 mx-auto opacity-80"}),e.jsxs("div",{className:"text-sm opacity-90",children:["Preview ",P.id]}),e.jsx("div",{className:"text-xs opacity-70",children:P.style})]})}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx(vs,{checked:L,onCheckedChange:()=>T(P.id),className:"w-5 h-5 bg-white/90 border-2",style:{borderColor:L?m:"#d1d5db",backgroundColor:L?m:"rgba(255,255,255,0.9)"},"aria-label":`Seleccionar diseño ${P.id}`})}),e.jsx(w,{className:`absolute top-2 right-2 text-xs ${P.validated?"bg-green-100 text-green-800 border-green-200":"bg-amber-100 text-amber-800 border-amber-200"}`,variant:"outline",children:P.validated?"✅":"⚠️"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>u(P.id),className:"p-2 flex-1",title:"Expandir",children:e.jsx(pa,{className:"w-4 h-4"})}),e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>v(P.id),className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 flex-1",title:"Descartar",children:e.jsx(Ls,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Plataforma:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(S,{className:"w-3 h-3"}),e.jsx("span",{children:P.platform})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Formato:"}),e.jsx(w,{variant:"secondary",className:"text-xs px-1 py-0",children:P.format})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Validación:"}),e.jsx("span",{className:P.validated?"text-green-600":"text-amber-600",children:P.validated?"✅ Aprobado":"⚠️ Revisión"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Confianza:"}),e.jsxs("span",{className:"font-medium",children:[P.confidence,"%"]})]})]})]})},P.id)})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:justify-between pt-4",children:[e.jsx(n,{variant:"ghost",onClick:k,className:"sm:w-auto",children:"← Volver"}),e.jsx(n,{onClick:x,disabled:C===0,className:"sm:w-auto",style:{backgroundColor:C>0?m:void 0,opacity:C>0?1:.5},children:C>0?`Siguiente: Edición (${C} ${C===1?"post":"posts"})`:"Selecciona al menos un diseño"})]}),C>1&&!r&&e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(U,{className:"w-4 h-4 text-blue-600"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Has seleccionado ",e.jsxs("strong",{children:[C," diseños"]}),". Cada uno se convertirá en una publicación independiente."]})]}),C===0&&!r&&e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(Os,{className:"w-4 h-4 text-amber-600"}),e.jsx("p",{className:"text-sm text-amber-700",children:"Selecciona al menos una propuesta para continuar al siguiente paso"})]})]})}const Ba=({onCommand:l})=>{const i=[{name:"Archivo",items:["Nuevo post","Duplicar","Guardar snapshot","Revertir snapshot","Importar JSON de capas","Exportar…","Preflight (QA)"]},{name:"Edición",items:["Deshacer","Rehacer","Copiar estilo","Pegar estilo","Buscar/Sustituir texto","Nudge preciso"]},{name:"Capas",items:["Árbol","Grupo","Máscara (vector/píxel/IA)","Clipping","Etiquetas","Bloquear"]},{name:"Tipografía",items:["Fuente (BrandKit)","Variable font axes","Jerarquías H1/H2/body","OpenType","Verificador de jerarquía"]},{name:"Color & Estilos",items:["Paleta BrandKit","Degradados avanzados","Gradient Map","Sombras múltiples","Contraste WCAG"]},{name:"Imagen & Máscaras IA",items:["Reemplazar","Curvas","LUT","Borrar fondo (IA)","Relleno generativo","Segmentación","Depth/Relight"]},{name:"Vectores & Formas",items:["Pluma Bézier","Booleanas","Expandir/Contornear","Esquinas por-nodo","Mesh gradient","Auto-traza IA"]},{name:"Transformar",items:["Escala/Rotar/Sesgar","Perspective warp","Warp mesh","Alinear a clave","Distribuir","Constraints"]},{name:"Composición & Guías",items:["Rejillas","Guías inteligentes","Zonas seguras","Plantillas por plataforma"]},{name:"BrandGuard",items:["Checklist","Autocorrección 1-click","Report"]},{name:"Accesibilidad",items:["Simulación daltonismo","Mínimos por plataforma","ALT auto"]},{name:"Activos & Librerías",items:["Logos","Iconos","Patrones","Componentes"]},{name:"Historia & Versiones",items:["Timeline","Snapshots","Comparar A/B"]},{name:"Previsualizar",items:["Instagram Feed","LinkedIn Timeline","X Post","Modo oscuro/claro","Escalas 1×/2×/3×"]},{name:"Automatizar",items:["Macros","Aplicar estilo en lote","Find&Replace","Multiformato"]},{name:"Comandos IA",items:["Abrir Paleta ⌘K","Sugerencias de edición"]}];return e.jsxs("div",{className:"h-10 bg-white border-b border-gray-200 flex items-center px-3 shadow-sm",children:[e.jsx("div",{className:"flex items-center gap-1",children:i.map(a=>e.jsxs(_s,{children:[e.jsx(qs,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"sm",className:"h-8 px-3 text-xs",children:a.name})}),e.jsx(Hs,{align:"start",className:"w-56",children:a.items.map((t,s)=>e.jsx(Gs,{onClick:()=>l(t),className:"text-xs",children:t},s))})]},a.name))}),e.jsx("div",{className:"flex-1"}),e.jsx(w,{variant:"secondary",className:"text-xs",children:"Paso 4 de 6"})]})};function Fa(){const{hasBrandKit:l}=he(),{primaryColors:i,allColors:a}=Ye(),{primaryFont:t,allFonts:s}=$s(),{goToPreviousStep:r,goToNextStep:o}=Y(),d=Array.isArray(s)&&s.length>0?s:[{font:"Montserrat",name:"Montserrat"},{font:"Inter",name:"Inter"}],N=Array.isArray(a)&&a.length>0?a:[{hex:"#6366f1",name:"Primary"},{hex:"#f97316",name:"Secondary"},{hex:"#0891b2",name:"Accent"},{hex:"#059669",name:"Success"},{hex:"#dc2626",name:"Error"},{hex:"#6b7280",name:"Neutral"}],[m,c]=p.useState(""),[j,k]=p.useState([{id:1,role:"user",content:"Haz el logo 150% y muévelo a inf. derecha",timestamp:new Date(Date.now()-12e4)},{id:2,role:"assistant",content:"✅ Tamaño 150%, posición Inf. Der., clear space ok.",timestamp:new Date(Date.now()-115e3)}]),[x,T]=p.useState([{id:"bg",name:"Fondo",type:"background",visible:!0,locked:!1},{id:"img",name:"Imagen 01",type:"image",visible:!0,locked:!1},{id:"logo",name:"Logo",type:"logo",visible:!0,locked:!1},{id:"title",name:"Título",type:"text",visible:!0,locked:!1}]),[g,u]=p.useState(t?.font||"Montserrat"),[v,b]=p.useState([32]),[C,$]=p.useState(i?.[0]?.hex||"#000000"),[P,D]=p.useState([100]),[S,L]=p.useState([100]),[E,O]=p.useState([100]),[Z,Q]=p.useState("Principal"),[re,ue]=p.useState([100]),[Me,X]=p.useState("SI"),[pe]=p.useState([{type:"success",label:"✅ Paleta válida"},{type:"warning",label:"⚠️ Contraste bajo en subtítulo (AA-)"},{type:"success",label:"✅ Logo ≥ tamaño mínimo"}]),oe=A=>{console.log("Command:",A)},ee=()=>{if(!m.trim())return;const A={id:Date.now(),role:"user",content:m,timestamp:new Date};k(q=>[...q,A]),c(""),setTimeout(()=>{const q=["✅ Comando ejecutado según BrandKit.","⚠️ Ajuste aplicado con validación automática.","✅ Cambio completado respetando guías.","🔍 Análisis de impacto en marcha..."],B={id:Date.now()+1,role:"assistant",content:q[Math.floor(Math.random()*q.length)],timestamp:new Date};k(h=>[...h,B])},1e3)},Se=A=>{T(q=>q.map(B=>B.id===A?{...B,visible:!B.visible}:B))},se=A=>{T(q=>q.map(B=>B.id===A?{...B,locked:!B.locked}:B))};return e.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[e.jsx(Ba,{onCommand:oe}),e.jsxs("div",{className:"flex-1 flex gap-4 p-4 overflow-hidden",children:[e.jsxs(z,{className:"w-80 flex flex-col bg-white shadow-sm rounded-lg",children:[e.jsxs("div",{className:"p-3 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ra,{className:"w-4 h-4 text-purple-600"}),e.jsx("h3",{className:"text-sm font-medium",children:"Comandos IA (⌘K)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(la,{className:"w-3 h-3 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(K,{value:m,onChange:A=>c(A.target.value),placeholder:"Escribe un comando… (p.ej. 'logo 150%')",className:"pl-9 text-xs h-8",onKeyDown:A=>A.key==="Enter"&&ee()})]})]}),e.jsx(xe,{className:"flex-1",children:e.jsx("div",{className:"p-3",children:e.jsx("div",{className:"space-y-3",children:j.map(A=>e.jsx("div",{className:`flex ${A.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:"flex gap-2 max-w-[85%]",children:[A.role==="assistant"&&e.jsx("div",{className:"w-5 h-5 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx($e,{className:"w-2.5 h-2.5 text-purple-600"})}),e.jsxs("div",{className:`rounded-lg p-2 text-xs ${A.role==="user"?"bg-blue-500 text-white":"bg-gray-50 border border-gray-200"}`,children:[e.jsx("p",{children:A.content}),e.jsx("div",{className:`text-xs mt-1 ${A.role==="user"?"text-blue-100":"text-gray-400"}`,children:A.timestamp.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]})]})},A.id))})})}),e.jsxs("div",{className:"border-t p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Los cambios se aplican al post activo."}),e.jsxs(n,{onClick:ee,disabled:!m.trim(),className:"w-full text-xs h-8",size:"sm",children:[e.jsx(_e,{className:"w-3 h-3 mr-1"}),"Ejecutar"]})]})]}),e.jsxs("div",{className:"flex-1 bg-canvas rounded-lg border border-dashed border-gray-300 flex items-center justify-center relative",children:[e.jsx("div",{className:"w-96 h-96 bg-white rounded-lg shadow-lg border-2 border-gray-200 flex items-center justify-center relative",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(bs,{className:"w-6 h-6"})}),e.jsx("h3",{className:"text-sm font-medium",children:"Canvas por capas"}),e.jsx("p",{className:"text-xs",children:"Post activo"})]})}),e.jsx(z,{className:"absolute bottom-4 right-4 p-3 bg-white shadow-sm border w-64",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"text-xs font-medium flex items-center gap-1",children:[e.jsx(Na,{className:"w-3 h-3 text-green-600"}),"BrandGuard"]}),e.jsx("div",{className:"space-y-1",children:pe.map((A,q)=>e.jsx("div",{className:"text-xs p-1.5 rounded-md bg-gray-50",children:A.label},q))})]})})]}),e.jsx(z,{className:"w-80 bg-white shadow-sm rounded-lg",children:e.jsxs(es,{defaultValue:"layers",className:"flex flex-col h-full",children:[e.jsxs("div",{className:"border-b p-3",children:[e.jsxs(Ie,{className:"grid w-full grid-cols-3",children:[e.jsx(te,{value:"layers",className:"text-xs",children:"Capas"}),e.jsx(te,{value:"text",className:"text-xs",children:"Texto"}),e.jsx(te,{value:"image",className:"text-xs",children:"Imagen"})]}),e.jsxs(Ie,{className:"grid w-full grid-cols-3 mt-2",children:[e.jsx(te,{value:"logo",className:"text-xs",children:"Logo"}),e.jsx(te,{value:"effects",className:"text-xs",children:"Efectos"}),e.jsx(te,{value:"a11y",className:"text-xs",children:"A11y"})]})]}),e.jsx(xe,{className:"flex-1",children:e.jsxs("div",{className:"p-3",children:[e.jsx(J,{value:"layers",className:"space-y-3 mt-0",children:e.jsx("div",{className:"space-y-2",children:x.map(A=>e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md border border-gray-200 bg-gray-50",children:[e.jsx(n,{variant:"ghost",size:"sm",className:"p-1 h-6 w-6",onClick:()=>Se(A.id),children:A.visible?e.jsx(ts,{className:"w-3 h-3"}):e.jsx(ma,{className:"w-3 h-3"})}),e.jsx(n,{variant:"ghost",size:"sm",className:"p-1 h-6 w-6",onClick:()=>se(A.id),children:A.locked?e.jsx(ca,{className:"w-3 h-3"}):e.jsx(ha,{className:"w-3 h-3"})}),e.jsx("span",{className:"flex-1 text-xs",children:A.name}),e.jsx(n,{variant:"ghost",size:"sm",className:"p-1 h-6 w-6",children:e.jsx(Ae,{className:"w-3 h-3"})})]},A.id))})}),e.jsx(J,{value:"text",className:"space-y-4 mt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(M,{className:"text-xs",children:"Fuente"}),e.jsxs(ie,{value:g,onValueChange:u,children:[e.jsx(le,{className:"h-8 text-xs",children:e.jsx(ne,{})}),e.jsx(ce,{children:d.map(A=>e.jsx(R,{value:A.font,className:"text-xs",children:A.name},A.font))})]})]}),e.jsxs("div",{children:[e.jsxs(M,{className:"text-xs",children:["Tamaño: ",v[0],"px"]}),e.jsx(ge,{value:v,onValueChange:b,min:12,max:96,step:1,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(M,{className:"text-xs",children:"Color"}),e.jsx("div",{className:"flex gap-1 mt-1 flex-wrap",children:N.slice(0,8).map(A=>e.jsx("button",{className:`w-5 h-5 rounded border-2 ${C===A.hex?"border-gray-900":"border-gray-300"}`,style:{backgroundColor:A.hex},onClick:()=>$(A.hex),title:A.name},A.hex))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:"outline",size:"sm",className:"text-xs flex-1",children:[e.jsx(rs,{className:"w-3 h-3 mr-1"}),"Bold"]}),e.jsxs(n,{variant:"outline",size:"sm",className:"text-xs flex-1",children:[e.jsx(rs,{className:"w-3 h-3 mr-1"}),"Italic"]})]}),e.jsxs("div",{children:[e.jsx(M,{className:"text-xs",children:"OpenType / Variable"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ejes y features"})]})]})}),e.jsx(J,{value:"image",className:"space-y-4 mt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs(n,{className:"w-full text-xs h-8",children:[e.jsx(Vs,{className:"w-3 h-3 mr-1"}),"Reemplazar"]}),e.jsxs("div",{children:[e.jsxs(M,{className:"text-xs",children:["Brillo: ",P[0],"%"]}),e.jsx(ge,{value:P,onValueChange:D,min:0,max:200,step:1,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsxs(M,{className:"text-xs",children:["Contraste: ",S[0],"%"]}),e.jsx(ge,{value:S,onValueChange:L,min:0,max:200,step:1,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsxs(M,{className:"text-xs",children:["Saturación: ",E[0],"%"]}),e.jsx(ge,{value:E,onValueChange:O,min:0,max:200,step:1,className:"mt-1"})]}),e.jsxs(n,{variant:"ghost",className:"w-full text-xs h-8",children:[e.jsx(aa,{className:"w-3 h-3 mr-1"}),"Borrar fondo (IA)"]})]})}),e.jsx(J,{value:"logo",className:"space-y-4 mt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(M,{className:"text-xs",children:"Variante"}),e.jsxs(ie,{value:Z,onValueChange:Q,children:[e.jsx(le,{className:"h-8 text-xs",children:e.jsx(ne,{})}),e.jsxs(ce,{children:[e.jsx(R,{value:"Principal",className:"text-xs",children:"Principal"}),e.jsx(R,{value:"Negativo",className:"text-xs",children:"Negativo"}),e.jsx(R,{value:"Alternativo",className:"text-xs",children:"Alternativo"})]})]})]}),e.jsxs("div",{children:[e.jsxs(M,{className:"text-xs",children:["Tamaño: ",re[0],"%"]}),e.jsx(ge,{value:re,onValueChange:ue,min:10,max:200,step:1,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(M,{className:"text-xs",children:"Posición"}),e.jsxs(ie,{value:Me,onValueChange:X,children:[e.jsx(le,{className:"h-8 text-xs",children:e.jsx(ne,{})}),e.jsxs(ce,{children:[e.jsx(R,{value:"SI",className:"text-xs",children:"Superior Izquierda"}),e.jsx(R,{value:"SD",className:"text-xs",children:"Superior Derecha"}),e.jsx(R,{value:"II",className:"text-xs",children:"Inferior Izquierda"}),e.jsx(R,{value:"ID",className:"text-xs",children:"Inferior Derecha"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(M,{className:"text-xs",children:"Watermark"}),e.jsx(ia,{})]})]})}),e.jsx(J,{value:"effects",className:"space-y-4 mt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(M,{className:"text-xs",children:"Sombras"}),e.jsxs(n,{variant:"outline",className:"w-full text-xs h-8 mt-1",children:[e.jsx(ve,{className:"w-3 h-3 mr-1"}),"Configurar sombras"]})]}),e.jsxs("div",{children:[e.jsx(M,{className:"text-xs",children:"Borde"}),e.jsx(n,{variant:"outline",className:"w-full text-xs h-8 mt-1",children:"Añadir borde"})]}),e.jsxs("div",{children:[e.jsx(M,{className:"text-xs",children:"Resplandor"}),e.jsx(n,{variant:"outline",className:"w-full text-xs h-8 mt-1",children:"Configurar glow"})]}),e.jsxs("div",{children:[e.jsx(M,{className:"text-xs",children:"Degradado"}),e.jsxs(n,{variant:"outline",className:"w-full text-xs h-8 mt-1",children:[e.jsx(Rs,{className:"w-3 h-3 mr-1"}),"Editor degradado"]})]})]})}),e.jsx(J,{value:"a11y",className:"space-y-4 mt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs p-2 rounded-md bg-green-50 border border-green-200",children:"Contraste AA: ✅"}),e.jsx("div",{className:"text-xs p-2 rounded-md bg-yellow-50 border border-yellow-200",children:"⚠️ Simulación daltonismo"}),e.jsx("div",{className:"text-xs p-2 rounded-md bg-blue-50 border border-blue-200",children:"Tamaño mínimo texto: ✅"})]}),e.jsxs(n,{variant:"outline",className:"w-full text-xs h-8",children:[e.jsx(ts,{className:"w-3 h-3 mr-1"}),"Simular daltonismo"]})]})})]})})]})})]}),e.jsxs("div",{className:"border-t bg-white p-4 flex justify-between items-center",children:[e.jsxs(n,{variant:"ghost",onClick:r,className:"text-xs",children:[e.jsx(Ns,{className:"w-3 h-3 mr-1"}),"Volver"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:"secondary",className:"text-xs",children:"Guardar snapshot"}),e.jsx(n,{onClick:o,className:"text-xs bg-purple-500 hover:bg-purple-600",children:"Siguiente: Caption & Hashtags"})]})]})]})}const La=[{value:"professional",label:"Profesional",description:"Formal y corporativo"},{value:"friendly",label:"Amigable",description:"Cercano y accesible"},{value:"energetic",label:"Energético",description:"Dinámico y motivador"},{value:"educational",label:"Educativo",description:"Informativo y didáctico"},{value:"playful",label:"Divertido",description:"Casual y entretenido"},{value:"inspirational",label:"Inspiracional",description:"Motivador y aspiracional"}],os=[{value:"short",label:"Corto",description:"1-2 frases",chars:100},{value:"medium",label:"Medio",description:"3-5 frases",chars:300},{value:"long",label:"Largo",description:"6+ frases",chars:500}],Oa=["#marketing","#design","#branding","#business","#entrepreneur","#creativity","#innovation","#inspiration","#success","#growth","#digitalmarketing","#socialmedia","#content","#strategy"];function $a(){const{hasBrandKit:l,getBrandInstructions:i}=he(),{voiceTone:a,instructions:t,hasVoiceTone:s}=Ks(),{currentProject:r,updateCopywriting:o,goToPreviousStep:d,goToNextStep:N}=Y(),[m,c]=p.useState(r?.copywriting.caption||""),[j,k]=p.useState(r?.copywriting.hashtags||[]),[x,T]=p.useState(r?.copywriting.callToAction||""),[g,u]=p.useState(r?.copywriting.tone||"professional"),[v,b]=p.useState(r?.copywriting.length||"medium"),[C,$]=p.useState(""),[P,D]=p.useState(!1),[S,L]=p.useState(""),[E,O]=p.useState(r?.copywriting.variations||[]);p.useEffect(()=>{s&&a&&!m&&Z()},[s,a]);const Z=async()=>{if(r){D(!0);try{let h=`Crea un caption para ${r.type==="post"?"post":"carrusel"} de redes sociales sobre: ${r.briefing.description}`;if(l){const F=await i("post");h+=`

APLICAR TONO DE VOZ:
${F}`}h+=`
Tono: ${g}
Longitud: ${v}`,setTimeout(()=>{const F=Q();c(F);const V=re();k(V);const H=ue();T(H),D(!1)},2e3)}catch(h){console.error("Error generating copy:",h),D(!1)}}},Q=()=>{const h=r?.briefing.description||"contenido increíble",F=s?t:"",V={professional:`Presentamos ${h}. Una solución innovadora que transforma la manera en que trabajas. ${F}`,friendly:`¡Hola! 👋 Queremos compartir contigo ${h}. Estamos seguros de que te va a encantar. ${F}`,energetic:`🚀 ¡INCREÍBLE! ${h} está aquí y va a cambiar todo. ¿Estás listo para esta experiencia? ${F}`,educational:`Hoy aprenderemos sobre ${h}. Te explicamos paso a paso todo lo que necesitas saber. ${F}`,playful:`¿Sabías que ${h}? 🤔 ¡Prepárate para sorprenderte! Esto va a ser súper divertido. ${F}`,inspirational:`El cambio comienza con ${h}. Cada gran transformación empieza con un primer paso. ${F}`};let H=V[g]||V.professional;return v==="short"?H=H.split(".")[0]+".":v==="long"&&(H+=" Descubre más en nuestros comentarios y comparte tu experiencia con nosotros."),H.trim()},re=()=>{const h=r?.briefing.description||"",F=r?.configuration.primaryPlatform||"instagram";let V=[];h.toLowerCase().includes("producto")&&V.push("#producto","#novedad","#lanzamiento"),h.toLowerCase().includes("servicio")&&V.push("#servicio","#calidad","#experiencia"),h.toLowerCase().includes("marca")&&V.push("#branding","#marca","#identidad"),F==="instagram"?V.push("#instagram","#insta","#igdaily"):F==="linkedin"&&V.push("#linkedin","#business","#professional");const H=["#marketing","#design","#innovation","#success"];return V=[...V,...H].slice(0,8),V},ue=()=>{const h=["¿Qué opinas? ¡Cuéntanos en los comentarios!","Comparte este post si te parece útil 🔄","Etiqueta a alguien que necesite ver esto 👇","Guarda este post para más tarde 💾","Síguenos para más contenido como este ✨"];return h[Math.floor(Math.random()*h.length)]},Me=async()=>{D(!0),setTimeout(()=>{const h=Q();O(F=>[...F,m].filter(Boolean)),c(h),D(!1)},1500)},X=()=>{if(C.trim()&&!j.includes(C.trim())){const h=C.startsWith("#")?C:`#${C}`;k([...j,h]),$("")}},pe=h=>{k(j.filter(F=>F!==h))},oe=h=>{!j.includes(h)&&j.length<20&&k([...j,h])},ee=(h,F)=>{navigator.clipboard.writeText(h),L(F),setTimeout(()=>L(""),2e3)},Se=()=>{const h=`${m}

${x}

${j.join(" ")}`;ee(h,"full")},se=()=>{o({caption:m,hashtags:j,callToAction:x,tone:g,length:v,aiGenerated:!0,variations:E}),N()},A=m.trim().length>0,q=os.find(h=>h.value===v)?.chars||300,B=m.length>q;return e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 text-white",children:e.jsx(ye,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"Copywriting"})]}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Genera el texto perfecto para tu publicación aplicando automáticamente tu tono de voz de marca"})]}),l&&s&&e.jsx(z,{className:"p-4 bg-gradient-to-r from-green-50 to-blue-50 border-green-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ta,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:"Tono de voz de marca activo"}),e.jsx("p",{className:"text-sm text-green-700",children:t})]}),e.jsx(w,{className:"bg-green-100 text-green-800",children:"Aplicando automáticamente"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Us,{className:"w-5 h-5"}),"Configuración"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Tono"}),e.jsxs(ie,{value:g,onValueChange:u,children:[e.jsx(le,{children:e.jsx(ne,{})}),e.jsx(ce,{children:La.map(h=>e.jsx(R,{value:h.value,children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:h.label}),e.jsx("p",{className:"text-xs text-muted-foreground",children:h.description})]})},h.value))})]}),s&&e.jsx("p",{className:"text-xs text-green-600",children:"✓ Se aplicará tu tono de marca automáticamente"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Longitud"}),e.jsxs(ie,{value:v,onValueChange:h=>b(h),children:[e.jsx(le,{children:e.jsx(ne,{})}),e.jsx(ce,{children:os.map(h=>e.jsx(R,{value:h.value,children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:h.label}),e.jsx("p",{className:"text-xs text-muted-foreground",children:h.description})]})},h.value))})]})]}),r?.briefing.targetAudience&&e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(oa,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Audiencia objetivo"})]}),e.jsx("p",{className:"text-sm text-blue-700",children:r.briefing.targetAudience})]}),e.jsx(n,{onClick:Z,disabled:P,className:"w-full",children:P?e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"w-4 h-4 mr-2 animate-spin"}),"Generando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"w-4 h-4 mr-2"}),"Generar con IA"]})})]})}),e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5"}),"Caption"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(n,{variant:"outline",size:"sm",onClick:Me,disabled:P,children:[e.jsx(Ve,{className:"w-3 h-3 mr-1"}),"Regenerar"]}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>ee(m,"caption"),children:S==="caption"?e.jsx(Le,{className:"w-3 h-3"}):e.jsx(Ae,{className:"w-3 h-3"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(be,{placeholder:"Escribe tu caption aquí o genera uno con IA...",value:m,onChange:h=>c(h.target.value),className:"min-h-[200px]",disabled:P}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:B?"text-red-600":"text-muted-foreground",children:[m.length," / ",q," caracteres"]}),e.jsx("span",{className:"text-muted-foreground",children:v})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Call to Action"}),e.jsx(K,{placeholder:"¿Qué quieres que hagan tus seguidores?",value:x,onChange:h=>T(h.target.value)})]}),E.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Versiones anteriores"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:E.map((h,F)=>e.jsxs("div",{className:"p-2 bg-gray-50 rounded text-sm cursor-pointer hover:bg-gray-100",onClick:()=>c(h),children:[h.substring(0,100),"..."]},F))})]})]})}),e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Qs,{className:"w-5 h-5"}),"Hashtags (",j.length,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{placeholder:"Agregar hashtag...",value:C,onChange:h=>$(h.target.value),onKeyPress:h=>h.key==="Enter"&&X()}),e.jsx(n,{onClick:X,size:"sm",children:"Agregar"})]}),j.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Hashtags seleccionados"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:j.map(h=>e.jsxs(w,{variant:"secondary",className:"cursor-pointer hover:bg-red-100",onClick:()=>pe(h),children:[h," ×"]},h))}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>ee(j.join(" "),"hashtags"),className:"w-full",children:[S==="hashtags"?e.jsx(Le,{className:"w-3 h-3 mr-1"}):e.jsx(Ae,{className:"w-3 h-3 mr-1"}),"Copiar hashtags"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Sugerencias"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Oa.filter(h=>!j.includes(h)).slice(0,10).map(h=>e.jsxs(w,{variant:"outline",className:"cursor-pointer hover:bg-blue-50",onClick:()=>oe(h),children:[h," +"]},h))})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsx(n,{onClick:Se,variant:"outline",className:"w-full",children:S==="full"?e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"w-4 h-4 mr-2"}),"¡Copiado!"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Copiar post completo"]})})})]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(n,{variant:"outline",onClick:d,children:"← Volver a Edición"}),e.jsx(n,{onClick:se,disabled:!A||B,className:"bg-indigo-500 hover:bg-indigo-600",children:"Programar Publicación →"})]}),(!A||B)&&e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:A?"El caption excede el límite de caracteres":"Escribe un caption para continuar"})]})}const Va=({type:l,content:i,meta:a})=>{const t={system:"bg-bubble-system text-yellow-800 mx-2 sm:mx-4",user:"bg-bubble-user text-white ml-auto mr-2 sm:mr-4 max-w-[85%] sm:max-w-[80%]",assistant:"bg-bubble-assistant text-gray-700 mr-auto ml-2 sm:ml-4 max-w-[85%] sm:max-w-[80%]"};return e.jsxs("div",{className:`rounded-xl px-3 py-2 text-sm ${t[l]}`,children:[e.jsx("p",{children:i}),a&&e.jsx("div",{className:"text-xs opacity-70 mt-1",children:a})]})},Ra=({label:l,placeholder:i,value:a,onChange:t})=>{const[s,r]=p.useState(""),o=a?a.split(" ").filter(m=>m.trim()!==""):[],d=m=>{if((m.key==="Enter"||m.key===" ")&&(m.preventDefault(),s.trim())){const c=s.startsWith("#")?s:`#${s.trim()}`,j=[...o,c];t(j.join(" ")),r("")}},N=m=>{const c=o.filter((j,k)=>k!==m);t(c.join(" "))};return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:l}),e.jsxs("div",{className:"space-y-2",children:[o.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:o.map((m,c)=>e.jsxs(w,{variant:"secondary",className:"text-xs px-2 py-1 cursor-pointer hover:bg-destructive hover:text-destructive-foreground",onClick:()=>N(c),children:[m," ×"]},c))}),e.jsx(K,{value:s,onChange:m=>r(m.target.value),onKeyDown:d,placeholder:i,className:"text-sm"})]})]})};function _a(){const{goToPreviousStep:l,goToNextStep:i}=Y(),[a,t]=p.useState(""),[s]=p.useState([{type:"system",content:"Vamos a trabajar el caption y hashtags de tu post.",meta:void 0},{type:"user",content:"Quiero un copy corto y directo para Instagram.",meta:"10:24"},{type:"assistant",content:"Sugerencia: '¡Tu mejor versión empieza hoy! ✨ #Bienestar #Motivación'",meta:"10:25"}]),[r,o]=p.useState(""),[d,N]=p.useState(""),[m,c]=p.useState(""),j=["Descubre tu mejor versión. #Bienestar #Motivación","¡Empieza hoy, hazlo tuyo! ✨ #Salud #Inspiración","Cada día cuenta. Da el paso. #Crecimiento #Éxito"],k=[{icon:"check",color:"green",message:"Caption dentro del tono de marca"},{icon:"warning",color:"amber",message:"Hashtag duplicado detectado (#Éxito)"},{icon:"check",color:"green",message:"Longitud adecuada (menos de 2200)"},{icon:"warning",color:"amber",message:"Uso excesivo de '!' (3 veces)"}],x=()=>{a.trim()&&(console.log("Send message:",a),t(""))},T=()=>{console.log("Continue to next step"),i()},g=E=>{navigator.clipboard.writeText(E),console.log("Copied variation:",E)},u=E=>{const O=E.split(" #"),Z=O[0],Q=O.length>1?"#"+O.slice(1).join(" #"):"";o(Z),Q&&c(Q),console.log("Applied variation:",{caption:Z,hashtags:Q})},v=()=>{console.log("Apply Brand Guard suggestion")},b=()=>{console.log("View Brand Guard detail")},C=()=>{console.log("Simplify caption")},$=()=>{console.log("Make caption shorter")},P=()=>{console.log("Make caption longer")},D=()=>{console.log("Translate caption")},S=()=>{console.log("Regenerate copy")},L=r.trim()!==""&&m.trim()!=="";return e.jsxs("div",{className:"h-full flex flex-col lg:flex-row bg-surface",children:[e.jsxs("div",{className:"w-full lg:w-[840px] bg-surface flex flex-col border-b lg:border-b-0 lg:border-r border-border",children:[e.jsx("div",{className:"h-11 flex items-center px-3 bg-surface-elev-1 border-b border-border",children:e.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Chat con ChatGPT-5 (Copywriting)"})}),e.jsx(xe,{className:"flex-1 p-2 sm:p-3 min-h-[200px] lg:min-h-0",children:e.jsx("div",{className:"space-y-2",children:s.map((E,O)=>e.jsx(Va,{type:E.type,content:E.content,meta:E.meta},O))})}),e.jsx("div",{className:"h-25 p-2 bg-surface border-t border-border shadow-sm",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(be,{value:a,onChange:E=>t(E.target.value),placeholder:"Escribe tu respuesta o feedback…",className:"min-h-[60px] text-sm resize-none bg-surface border border-border rounded-lg",onKeyDown:E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),x())}}),e.jsxs(n,{onClick:x,disabled:!a.trim(),size:"sm",className:"w-full text-xs h-8",children:[e.jsx(_e,{className:"w-3 h-3 mr-1"}),"Enviar"]})]})})]}),e.jsxs("div",{className:"w-full lg:w-[600px] bg-surface-elev-1 lg:border-l border-border flex flex-col",children:[e.jsxs("div",{className:"h-11 flex items-center justify-between px-3 bg-surface border-b border-border",children:[e.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Caption & Hashtags"}),e.jsx(w,{variant:"secondary",className:"text-xs",children:L?"Completo":"Incompleto"})]}),e.jsx(xe,{className:"flex-1 p-3 sm:p-4 min-h-[400px] lg:min-h-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Caption principal"}),e.jsx(be,{value:r,onChange:E=>o(E.target.value),placeholder:"Escribe o edita aquí el texto final…",className:"min-h-[100px] text-sm resize-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Call to Action (CTA)"}),e.jsx(K,{value:d,onChange:E=>N(E.target.value),placeholder:"Ej.: Compra ahora",className:"text-sm"})]}),e.jsx(Ra,{label:"Hashtags",placeholder:"#ejemplo #marca #post",value:m,onChange:c}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2",children:[e.jsxs(w,{variant:"secondary",className:"text-xs font-mono px-3 py-1 h-6 justify-center",children:[r.length," / 2200 caracteres"]}),e.jsxs(w,{variant:"secondary",className:"text-xs font-mono px-3 py-1 h-6 justify-center",children:[m?m.split(" ").filter(E=>E.trim()!=="").length:0," / 30 hashtags"]})]}),e.jsxs(z,{className:"shadow-xs border border-border bg-card",children:[e.jsx(fe,{className:"pb-2 px-3 pt-3",children:e.jsx(je,{className:"text-sm font-medium",children:"Variaciones sugeridas"})}),e.jsx(me,{className:"space-y-2 px-3 pb-3",children:j.map((E,O)=>e.jsxs("div",{className:"flex items-start justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded-md text-xs leading-relaxed",children:[e.jsxs("span",{className:"flex-1 pr-2",children:[O+1,". '",E,"'"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(n,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0 opacity-60 hover:opacity-100",onClick:()=>g(E),title:"Copiar variación",children:e.jsx(Ae,{className:"w-3 h-3"})}),e.jsx(n,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0 opacity-60 hover:opacity-100",onClick:()=>u(E),title:"Aplicar variación",children:e.jsx(U,{className:"w-3 h-3"})})]})]},O))})]}),e.jsxs(z,{className:"shadow-xs border border-border bg-card",children:[e.jsx(fe,{className:"pb-2 px-3 pt-3",children:e.jsx(je,{className:"text-sm font-medium",children:"Validaciones de marca"})}),e.jsxs(me,{className:"space-y-3 px-3 pb-3",children:[e.jsx("div",{className:"space-y-1.5",children:k.map((E,O)=>e.jsxs("div",{className:"flex items-center gap-2 h-8",children:[E.icon==="check"?e.jsx(U,{className:"w-3.5 h-3.5 text-green-600"}):e.jsx(de,{className:"w-3.5 h-3.5 text-amber-500"}),e.jsx("span",{className:"text-xs text-foreground",children:E.message})]},O))}),e.jsxs("div",{className:"flex justify-end gap-2 pt-1",children:[e.jsx(n,{variant:"ghost",size:"sm",className:"text-xs h-7",onClick:b,children:"Ver detalle"}),e.jsx(n,{size:"sm",className:"text-xs h-7 bg-purple-500 hover:bg-purple-600",onClick:v,children:"Aplicar sugerencia"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 pt-2",children:[e.jsx(n,{variant:"ghost",size:"sm",className:"text-xs h-7 px-2",onClick:C,children:"Simplificar"}),e.jsx(n,{variant:"ghost",size:"sm",className:"text-xs h-7 px-2",onClick:$,children:"Más corto"}),e.jsx(n,{variant:"ghost",size:"sm",className:"text-xs h-7 px-2",onClick:P,children:"Más largo"}),e.jsx(n,{variant:"ghost",size:"sm",className:"text-xs h-7 px-2",onClick:D,children:"Traducir"}),e.jsx(n,{variant:"secondary",size:"sm",className:"text-xs h-7 px-2",onClick:S,children:"Regenerar copy"})]}),e.jsxs(z,{className:"shadow-sm border border-border bg-card",children:[e.jsx(fe,{className:"pb-2 px-3 pt-3",children:e.jsx(je,{className:"text-sm font-medium",children:"Checklist final"})}),e.jsxs(me,{className:"space-y-1.5 px-3 pb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 h-8",children:[e.jsx(U,{className:"w-3.5 h-3.5 text-green-600"}),e.jsx("span",{className:"text-xs text-foreground",children:"Caption completado y alineado a marca"})]}),e.jsxs("div",{className:"flex items-center gap-2 h-8",children:[e.jsx(U,{className:"w-3.5 h-3.5 text-green-600"}),e.jsx("span",{className:"text-xs text-foreground",children:"CTA definido"})]}),e.jsxs("div",{className:"flex items-center gap-2 h-8",children:[e.jsx(U,{className:"w-3.5 h-3.5 text-green-600"}),e.jsx("span",{className:"text-xs text-foreground",children:"Hashtags validados (sin duplicados prohibidos)"})]}),e.jsxs("div",{className:"flex items-center gap-2 h-8",children:[e.jsx(U,{className:"w-3.5 h-3.5 text-green-600"}),e.jsx("span",{className:"text-xs text-foreground",children:"Validaciones de BrandGuard aprobadas"})]})]})]})]})}),e.jsxs("div",{className:"h-auto sm:h-12 flex flex-col sm:flex-row items-center justify-between px-3 py-2 sm:py-0 bg-surface border-t border-border gap-2 sm:gap-0",children:[e.jsx(w,{variant:"default",className:"text-xs bg-green-500 hover:bg-green-600 text-white order-2 sm:order-1",children:"Caption listo ✅"}),e.jsx("div",{className:"flex-1 order-3 sm:order-2"}),e.jsxs(n,{onClick:T,className:"text-xs bg-purple-500 hover:bg-purple-600 w-full sm:w-auto order-1 sm:order-3",disabled:!L,children:[e.jsx("span",{className:"hidden sm:inline",children:"Continuar: Calendarización"}),e.jsx("span",{className:"sm:hidden",children:"Siguiente: Calendarización"})]})]})]})]})}const Fe=[{id:"contrast",label:"Contraste AA verificado en botones y texto",status:"passed",category:"accessibility",details:"Ratio de contraste mínimo 4.5:1 cumplido en todos los elementos de texto."},{id:"focus",label:"Focus visible en todos los interactivos",status:"passed",category:"accessibility",details:"Indicadores de foco implementados en botones, inputs y elementos clickeables."},{id:"targets",label:"Targets ≥ 32px",status:"passed",category:"usability",details:"Áreas de click/touch cumplen con el tamaño mínimo recomendado."},{id:"performance",label:"Scroll fluido en vista con 1000+ eventos",status:"warning",category:"performance",details:"Requiere virtualización para listas grandes. Considerar lazy loading."},{id:"responsive",label:"Diseño responsive validado",status:"passed",category:"usability",details:"Layout se adapta correctamente a diferentes tamaños de pantalla."},{id:"keyboard",label:"Navegación completa por teclado",status:"passed",category:"accessibility",details:"Todos los elementos son accesibles usando solo el teclado."}];function qa({item:l}){const[i,a]=p.useState(!1),t=r=>{switch(r){case"passed":return e.jsx(U,{className:"w-4 h-4 text-green-600"});case"warning":return e.jsx(de,{className:"w-4 h-4 text-amber-600"});case"failed":return e.jsx(Ne,{className:"w-4 h-4 text-red-600"});default:return e.jsx(Xe,{className:"w-4 h-4 text-gray-600"})}},s=r=>{switch(r){case"accessibility":return e.jsx(w,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:"A11y"});case"performance":return e.jsx(w,{variant:"outline",className:"text-xs bg-purple-50 text-purple-700",children:"Perf"});case"usability":return e.jsx(w,{variant:"outline",className:"text-xs bg-green-50 text-green-700",children:"UX"});default:return e.jsx(w,{variant:"outline",className:"text-xs",children:"General"})}};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-3 p-2 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>a(!i),children:[t(l.status),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm",children:l.label}),s(l.category)]})})]}),i&&e.jsx("div",{className:"ml-7 p-2 bg-gray-50 rounded text-xs text-gray-600",children:l.details})]})}function Is({isVisible:l,onClose:i,isMobile:a=!1}){if(!l)return null;const t=Fe.filter(o=>o.status==="passed").length,s=Fe.filter(o=>o.status==="warning").length,r=Fe.filter(o=>o.status==="failed").length;return e.jsx("div",{className:`fixed inset-0 bg-black/20 backdrop-blur-sm z-50 flex items-center justify-center p-4 ${a?"p-2":"p-12"}`,onClick:i,children:e.jsx(z,{className:`bg-white shadow-md max-h-[80vh] overflow-auto ${a?"w-full max-w-sm":"w-full max-w-2xl"}`,onClick:o=>o.stopPropagation(),children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"font-medium",children:"Checklist QA & Accesibilidad"})]}),e.jsx(n,{variant:"ghost",size:"sm",onClick:i,children:e.jsx(Ne,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-medium text-green-700",children:t}),e.jsx("div",{className:"text-xs text-green-600",children:"Pasado"})]}),e.jsxs("div",{className:"text-center p-3 bg-amber-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-medium text-amber-700",children:s}),e.jsx("div",{className:"text-xs text-amber-600",children:"Advertencia"})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-medium text-red-700",children:r}),e.jsx("div",{className:"text-xs text-red-600",children:"Fallido"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm text-gray-700",children:"Items de verificación:"}),e.jsx("div",{className:"space-y-1",children:Fe.map(o=>e.jsx(qa,{item:o},o.id))})]}),e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Xe,{className:"w-4 h-4 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-xs text-blue-700",children:[e.jsx("strong",{children:"Nota de Performance:"})," Para calendarios con más de 1000 eventos, se recomienda implementar virtualización de scroll y lazy loading para mantener un rendimiento óptimo."]})]})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-border",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:i,children:"Cerrar"}),e.jsx(n,{size:"sm",className:"bg-purple-500 hover:bg-purple-600",children:"Exportar reporte"})]})]})})})}const Ha=[{day:2,events:[{id:"1",title:"Post IG — Oferta ✨",status:"suggested",platform:"instagram"}]},{day:3,events:[{id:"2",title:"Post FB — Anuncio ✅",status:"approved",platform:"facebook"}]},{day:8,events:[{id:"3",title:"Story IG — Behind scenes",status:"pending",platform:"instagram"}]},{day:15,events:[{id:"4",title:"Post LI — Artículo",status:"approved",platform:"linkedin"}]},{day:22,events:[{id:"5",title:"Video TK — Tendencia",status:"suggested",platform:"tiktok"}]}],Ga=[{id:"1",title:"Instagram — Oferta",status:"suggested",date:"2 Oct",time:"14:00"},{id:"2",title:"Facebook — Anuncio",status:"approved",date:"3 Oct",time:"10:30"},{id:"3",title:"LinkedIn — Blogpost",status:"warning",date:"15 Oct",time:"09:00"},{id:"4",title:"TikTok — Video",status:"suggested",date:"22 Oct",time:"18:00"}];function Ka({eventData:l,onSave:i,onCancel:a}){const[t,s]=p.useState(l),r=()=>{i(t)};return e.jsx(Xs,{className:"w-72 p-3 shadow-lg rounded-lg",side:"top",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Editar programación"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"date",className:"text-xs",children:"Fecha"}),e.jsx(K,{id:"date",type:"date",value:t.date,onChange:o=>s({...t,date:o.target.value}),className:"h-8 text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"time",className:"text-xs",children:"Hora"}),e.jsx(K,{id:"time",type:"time",value:t.time,onChange:o=>s({...t,time:o.target.value}),className:"h-8 text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"platform",className:"text-xs",children:"Plataforma"}),e.jsxs(ie,{value:t.platform,onValueChange:o=>s({...t,platform:o}),children:[e.jsx(le,{className:"h-8 text-xs",children:e.jsx(ne,{})}),e.jsxs(ce,{children:[e.jsx(R,{value:"instagram",children:"Instagram"}),e.jsx(R,{value:"facebook",children:"Facebook"}),e.jsx(R,{value:"linkedin",children:"LinkedIn"}),e.jsx(R,{value:"twitter",children:"X"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(vs,{id:"auto-publish",checked:t.autoPublish,onCheckedChange:o=>s({...t,autoPublish:!!o})}),e.jsx(M,{htmlFor:"auto-publish",className:"text-xs",children:"Publicar automáticamente"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-1",children:[e.jsx(n,{variant:"ghost",size:"sm",className:"text-xs h-7",onClick:a,children:"Cancelar"}),e.jsx(n,{size:"sm",className:"text-xs h-7 bg-purple-500 hover:bg-purple-600",onClick:r,children:"Guardar"})]})]})})}function Ua({day:l,events:i}){const[a,t]=p.useState(!1),[s,r]=p.useState(null),o=(c,j=!1)=>{const k="text-[11px] px-1.5 py-0.5 rounded-md border cursor-pointer transition-all shadow-xs",x=j?"opacity-60 shadow-lg scale-105":"hover:opacity-80";switch(c){case"suggested":return`${k} ${x} bg-blue-100 text-blue-700 border-blue-200`;case"approved":return`${k} ${x} bg-green-100 text-green-700 border-green-200`;case"pending":return`${k} ${x} bg-gray-100 text-gray-700 border-gray-200`;case"warning":return`${k} ${x} bg-amber-100 text-amber-700 border-amber-200`;default:return`${k} ${x} bg-gray-100 text-gray-700 border-gray-200`}},d=c=>{r({id:c.id,title:c.title,date:"2025-10-01",time:"14:30",platform:c.platform,autoPublish:!0}),t(!0)},N=c=>{console.log("Saving event data:",c),t(!1),r(null)},m=()=>{t(!1),r(null)};return e.jsxs("div",{className:"min-h-[100px] p-1.5 border border-border bg-white hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-1",children:l}),e.jsxs("div",{className:"space-y-1",children:[i.map((c,j)=>e.jsxs(Ws,{open:a&&s?.id===c.id,onOpenChange:t,children:[e.jsx(Js,{asChild:!0,children:e.jsx("div",{className:`group relative ${o(c.status,!1)}`,title:c.title,onClick:()=>d(c),children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ls,{className:"w-2.5 h-2.5 opacity-40 group-hover:opacity-70 transition-opacity"}),e.jsx("div",{className:"truncate flex-1",children:c.title}),e.jsx(va,{className:"w-2.5 h-2.5 opacity-0 group-hover:opacity-70 transition-opacity"})]})})}),s&&s.id===c.id&&e.jsx(Ka,{eventData:s,onSave:N,onCancel:m})]},c.id)),l===5&&e.jsxs("div",{className:`${o("approved",!0)} relative`,title:"Instagram — Oferta (arrastrando…)",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ls,{className:"w-2.5 h-2.5 opacity-70"}),e.jsx("div",{className:"truncate flex-1",children:"Instagram — Oferta (arrastrando…)"})]}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-500 rounded-full animate-pulse"})]})]})]})}const Qa=[{day:"Mar",dayNumber:2,events:[{id:"w1",title:"✨ Post sugerido — 10:00 AM",status:"suggested",platform:"instagram"}]},{day:"Jue",dayNumber:4,events:[{id:"w2",title:"✨ Story sugerida — 18:00 PM",status:"suggested",platform:"instagram"}]}];function Wa({viewMode:l}){const[i]=p.useState(new Date(2024,9));if(l==="Semana"){const o=["Lun","Mar","Mié","Jue","Vie","Sáb","Dom"];return e.jsxs("div",{className:"bg-canvas flex-1 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Semana del 30 Sep - 6 Oct 2024"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{variant:"ghost",size:"sm",children:e.jsx(we,{className:"w-4 h-4"})}),e.jsx(n,{variant:"ghost",size:"sm",children:e.jsx(Ee,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-border overflow-hidden",children:[e.jsx("div",{className:"grid grid-cols-7 bg-gray-50 border-b border-border",children:o.map(d=>e.jsx("div",{className:"p-3 text-center text-xs font-medium text-gray-600",children:d},d))}),e.jsx("div",{className:"grid grid-cols-7",children:o.map((d,N)=>{const m=Qa.find(j=>j.day===d),c=N+1;return e.jsxs("div",{className:"min-h-[120px] p-1.5 border border-border bg-white hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-1",children:c}),e.jsx("div",{className:"space-y-1",children:m&&m.events.map(j=>e.jsx("div",{className:"text-[11px] px-1.5 py-0.5 rounded-md border cursor-pointer hover:opacity-80 transition-opacity bg-blue-100 text-blue-700 border-blue-200 shadow-xs",title:j.title,children:e.jsx("div",{className:"truncate",children:j.title})},j.id))})]},d)})})]})]})}const a=new Date(i.getFullYear(),i.getMonth()+1,0).getDate(),t=new Date(i.getFullYear(),i.getMonth(),1).getDay(),s=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],r=[];for(let o=0;o<t;o++)r.push(null);for(let o=1;o<=a;o++){const d=Ha.find(N=>N.day===o)?.events||[];r.push({day:o,events:d})}return e.jsxs("div",{className:"bg-canvas flex-1 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Octubre 2024"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{variant:"ghost",size:"sm",children:e.jsx(we,{className:"w-4 h-4"})}),e.jsx(n,{variant:"ghost",size:"sm",children:e.jsx(Ee,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-border overflow-hidden",children:[e.jsx("div",{className:"grid grid-cols-7 bg-gray-50 border-b border-border",children:s.map(o=>e.jsx("div",{className:"p-3 text-center text-xs font-medium text-gray-600",children:o},o))}),e.jsx("div",{className:"grid grid-cols-7",children:r.map((o,d)=>e.jsx("div",{children:o?e.jsx(Ua,{day:o.day,events:o.events}):e.jsx("div",{className:"min-h-[100px] p-1.5 border border-border bg-gray-50"})},d))})]})]})}function Ja(){const l=()=>{console.log("Aplicando sugerencias de IA")};return e.jsx(z,{className:"p-3 shadow-xs rounded-xl",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-sm flex items-center gap-1",children:"Recomendaciones IA ✨"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs leading-tight bg-gray-50 rounded-md p-2",children:"📊 Tus posts tienen más engagement los martes a las 10:00 AM."}),e.jsx("div",{className:"text-xs leading-tight bg-gray-50 rounded-md p-2",children:"✨ Recomendamos publicar una Story el jueves a las 18:00 PM."}),e.jsx("div",{className:"text-xs leading-tight bg-gray-50 rounded-md p-2",children:"✅ Evita sábados tarde: menor alcance registrado."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(n,{size:"sm",className:"text-xs h-7 bg-purple-500 hover:bg-purple-600",onClick:l,children:"Aplicar sugerencias"})})]})})}function Xa(){const l=i=>{switch(i){case"suggested":return e.jsx(w,{variant:"secondary",className:"text-xs",children:"✨ sugerido"});case"approved":return e.jsx(w,{variant:"default",className:"text-xs bg-green-500 hover:bg-green-600",children:"✅ aprobado"});case"warning":return e.jsx(w,{variant:"destructive",className:"text-xs bg-amber-500 hover:bg-amber-600",children:"⚠️ revisar"});default:return e.jsx(w,{variant:"outline",className:"text-xs",children:"pendiente"})}};return e.jsxs("div",{className:"w-80 bg-surface-elev-1 border-l border-border p-3 space-y-3",children:[e.jsx("h3",{className:"font-medium text-sm",children:"Posts programados"}),e.jsx("div",{className:"space-y-2",children:Ga.map(i=>e.jsx(z,{className:"p-2 shadow-xs",children:e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:i.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.date," • ",i.time]})]}),l(i.status)]})})},i.id))}),e.jsx(Ja,{}),e.jsxs("div",{className:"space-y-2 pt-2 border-t border-border",children:[e.jsx("h4",{className:"text-xs font-medium text-muted-foreground",children:"Estados:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(w,{variant:"default",className:"text-xs bg-green-500 hover:bg-green-600",children:"✅ aprobado"}),e.jsx(w,{variant:"destructive",className:"text-xs bg-amber-500 hover:bg-amber-600",children:"⚠️ revisar"}),e.jsx(w,{variant:"secondary",className:"text-xs",children:"✨ sugerido"})]})]}),e.jsxs(n,{variant:"outline",size:"sm",className:"w-full text-xs",children:[e.jsx(Re,{className:"w-3 h-3 mr-1"}),"Gestionar calendario"]})]})}function Ya(){const{currentProject:l}=Y(),[i,a]=p.useState("Mes"),[t,s]=p.useState(!1),r=()=>{console.log("Programar manualmente")},o=()=>{console.log("Finalizar proyecto")};return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"h-14 flex items-center justify-between px-3 py-0 bg-surface-elev-1 border-b border-border shadow-xs",children:[e.jsx("h2",{className:"font-medium",children:"Publicación — Calendarización"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs(ie,{value:i,onValueChange:d=>a(d),children:[e.jsx(le,{className:"w-24 h-8 text-xs",children:e.jsx(ne,{})}),e.jsxs(ce,{children:[e.jsx(R,{value:"Mes",children:"Mes"}),e.jsx(R,{value:"Semana",children:"Semana"})]})]})}),e.jsxs(n,{variant:"outline",size:"sm",className:"text-xs h-8",onClick:()=>s(!0),children:[e.jsx(Ze,{className:"w-3 h-3 mr-1"}),"QA"]}),e.jsxs(n,{variant:"secondary",size:"sm",className:"text-xs h-8",onClick:r,children:[e.jsx(ys,{className:"w-3 h-3 mr-1"}),"Programar manualmente"]})]})]}),e.jsxs("div",{className:"flex-1 flex",children:[e.jsx(Wa,{viewMode:i}),e.jsx(Xa,{})]}),e.jsx("div",{className:"h-12 flex items-center justify-end px-3 bg-surface-elev-1 border-t border-border shadow-xs",children:e.jsx(n,{className:"text-xs bg-purple-500 hover:bg-purple-600",onClick:o,children:"Finalizar"})}),e.jsx(Is,{isVisible:t,onClose:()=>s(!1),isMobile:!1})]})}const Za=[{day:"Mar",dayNumber:2,events:[{id:"m1",title:"✨ IG sugerido — 10:00",status:"suggested",platform:"instagram"}]},{day:"Jue",dayNumber:4,events:[{id:"m2",title:"✨ Story sugerida — 18:00",status:"suggested",platform:"instagram"}]}],et=[{id:"1",title:"Instagram — Oferta",status:"approved",date:"2 Oct",time:"14:00"},{id:"2",title:"Facebook — Anuncio",status:"warning",date:"3 Oct",time:"10:30"}];function st(){const l=["Lun","Mar","Mié","Jue","Vie","Sáb","Dom"];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium",children:"Semana 30 Sep - 6 Oct"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(n,{variant:"ghost",size:"sm",children:e.jsx(we,{className:"w-4 h-4"})}),e.jsx(n,{variant:"ghost",size:"sm",children:e.jsx(Ee,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-border overflow-hidden",children:[e.jsx("div",{className:"grid grid-cols-7 bg-gray-50 border-b border-border",children:l.map(i=>e.jsx("div",{className:"p-2 text-center text-xs font-medium text-gray-600",children:i},i))}),e.jsx("div",{className:"grid grid-cols-7",children:l.map((i,a)=>{const t=Za.find(r=>r.day===i),s=a+1;return e.jsxs("div",{className:"min-h-[80px] p-1 border border-border bg-white",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-1",children:s}),e.jsx("div",{className:"space-y-1",children:t&&t.events.map(r=>e.jsx("div",{className:"text-[10px] px-1 py-0.5 rounded bg-blue-100 text-blue-700 border border-blue-200 cursor-pointer",title:r.title,children:e.jsx("div",{className:"truncate",children:r.title})},r.id))})]},i)})})]})]})}function at(){const l=i=>{switch(i){case"approved":return e.jsx(w,{variant:"default",className:"text-xs bg-green-500 hover:bg-green-600",children:"✅ aprobado"});case"warning":return e.jsx(w,{variant:"destructive",className:"text-xs bg-amber-500 hover:bg-amber-600",children:"⚠️ revisar"});default:return e.jsx(w,{variant:"secondary",className:"text-xs",children:"✨ sugerido"})}};return e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium text-sm",children:"Posts programados"}),e.jsx("div",{className:"space-y-2",children:et.map(i=>e.jsx(z,{className:"p-3",children:e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:i.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.date," • ",i.time]})]}),l(i.status)]})})},i.id))}),e.jsxs(n,{variant:"outline",size:"sm",className:"w-full text-xs",children:[e.jsx(Re,{className:"w-3 h-3 mr-1"}),"Gestionar calendario"]})]})}function tt(){const{currentProject:l}=Y(),[i,a]=p.useState(!1),[t,s]=p.useState(!1),r=()=>{console.log("Finalizar proyecto móvil")};return e.jsxs("div",{className:"h-full flex flex-col bg-canvas",children:[e.jsxs("div",{className:"h-14 flex items-center justify-between px-3 bg-surface-elev-1 border-b border-border shadow-xs",children:[e.jsx(n,{variant:"ghost",size:"sm",children:e.jsx(Ys,{className:"w-4 h-4"})}),e.jsx("h2",{className:"font-medium",children:"Publicación"}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>s(!0),children:e.jsx(Ze,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex-1 overflow-auto p-2",children:e.jsx(st,{})}),e.jsxs(ks,{open:i,onOpenChange:a,children:[e.jsx(Ps,{asChild:!0,children:e.jsxs(n,{variant:"outline",size:"sm",className:"fixed bottom-20 right-4 shadow-lg z-10",children:[e.jsx(ys,{className:"w-4 h-4 mr-1"}),"Posts"]})}),e.jsxs(Ts,{side:"right",className:"w-80 bg-surface shadow-lg",children:[e.jsx(As,{children:e.jsx(Es,{className:"text-left",children:"Posts programados"})}),e.jsx("div",{className:"mt-4",children:e.jsx(at,{})})]})]}),e.jsx("div",{className:"h-12 flex items-center justify-end px-3 bg-surface-elev-1 border-t border-border",children:e.jsx(n,{className:"text-xs bg-purple-500 hover:bg-purple-600",onClick:r,children:"Finalizar"})}),e.jsx(Is,{isVisible:t,onClose:()=>s(!1),isMobile:!0})]})}const Ue=768;function zs(){const[l,i]=p.useState(void 0);return p.useEffect(()=>{const a=window.matchMedia(`(max-width: ${Ue-1}px)`),t=()=>{i(window.innerWidth<Ue)};return a.addEventListener("change",t),i(window.innerWidth<Ue),()=>a.removeEventListener("change",t)},[]),!!l}const rt={briefing:Je,configuration:Re,generation:ve,editing:ea,copywriting:ye,caption:ye,publishing:_e},ds={briefing:"Briefing",configuration:"Configuración",generation:"Generación",editing:"Edición",copywriting:"Copywriting",caption:"Caption & Hashtags",publishing:"Publicación"};function it(){const{hasBrandKit:l}=he(),{currentProject:i,currentStep:a,setCurrentStep:t,goToNextStep:s,goToPreviousStep:r,saveProject:o,createNewProject:d}=Y(),N=zs(),[m,c]=p.useState(!1);if(p.useEffect(()=>{i||d("post")},[i,d]),!i)return e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-gray-100 rounded-full flex items-center justify-center animate-pulse",children:e.jsx(ye,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium",children:"Iniciando proyecto..."}),e.jsx("p",{className:"text-muted-foreground",children:"Configurando el workspace para Posts"})]})});const j=Object.keys(ds),k=j.indexOf(a),x=(k+1)/j.length*100,T=async()=>{try{c(!0),await o()}catch(u){console.error("Error saving:",u)}finally{c(!1)}},g=()=>{switch(a){case"briefing":return e.jsx(cs,{onContinue:s});case"configuration":return e.jsx(za,{});case"generation":return e.jsx(Da,{});case"editing":return e.jsx(Fa,{});case"copywriting":return e.jsx($a,{});case"caption":return e.jsx(_a,{});case"publishing":return N?e.jsx(tt,{}):e.jsx(Ya,{});default:return e.jsx(cs,{onContinue:s})}};return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"p-6 border-b bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-2xl font-bold",children:i.title}),e.jsx(w,{variant:"outline",className:"capitalize",children:i.type}),l&&e.jsx(w,{className:"bg-green-100 text-green-800",children:"BrandKit Activo"})]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(n,{variant:"outline",onClick:T,disabled:m,children:[e.jsx(Zs,{className:"w-4 h-4 mr-2"}),m?"Guardando...":"Guardar"]})})]}),e.jsx(ws,{showOnlyWarning:!0}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Progreso del proyecto"}),e.jsxs("span",{children:[Math.round(x),"% completado"]})]}),e.jsx(xs,{value:x,className:"h-2"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-1",children:j.map((u,v)=>{const b=rt[u],C=a===u,$=v<k,P=v<=k;return e.jsxs(n,{variant:C?"default":"ghost",size:"sm",className:`gap-2 ${$?"text-green-600":C?"":P?"text-muted-foreground":"text-gray-400"}`,onClick:()=>P&&t(u),disabled:!P,children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:ds[u]}),$&&e.jsx(U,{className:"w-3 h-3 text-green-600"})]},u)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(n,{variant:"outline",size:"sm",onClick:r,disabled:k===0,children:[e.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Volver"]}),e.jsxs(n,{size:"sm",onClick:s,disabled:k===j.length-1,children:["Siguiente",e.jsx(ps,{className:"w-4 h-4 ml-2"})]})]})]})]})}),e.jsx("div",{className:`flex-1 ${a==="briefing"?"":"overflow-auto bg-gradient-to-br from-gray-50 to-white"}`,children:g()})]})}function lt({onBack:l}){const[i,a]=p.useState(""),[t,s]=p.useState(!1),[r,o]=p.useState("Objetivo"),[d,N]=p.useState(!0),[m,c]=p.useState({objetivo:"",cta:"",hashtags:""}),j=()=>{i.trim()&&(console.log("Enviando mensaje:",i),a(""))},k=["Objetivo","Audiencia","Oferta","Marca","Formato","CTA","Hashtags","Assets","Restricciones","Aceptación"];return e.jsxs("div",{className:"h-screen w-full max-w-[390px] mx-auto flex flex-col relative",style:{backgroundColor:"var(--color-canvas)"},children:[e.jsxs("header",{className:"h-14 px-3 flex items-center justify-between border-b shadow-sm",style:{backgroundColor:"var(--color-surface-elev-1)"},children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:l,className:"p-2",children:e.jsx(we,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-center flex-1 px-2",children:"Crear Post — Paso 1"}),e.jsxs(ks,{open:t,onOpenChange:s,children:[e.jsx(Ps,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"sm",className:"p-2",children:e.jsx(fa,{className:"w-5 h-5"})})}),e.jsxs(Ts,{side:"right",className:"w-[360px] p-0",children:[e.jsxs(As,{className:"h-12 px-3 flex-row items-center justify-between border-b",style:{backgroundColor:"var(--color-surface)"},children:[e.jsx(Es,{className:"text-sm",children:"Brief"}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>s(!1),className:"p-2",children:e.jsx(Ne,{className:"w-4 h-4"})})]}),e.jsxs(es,{value:r,onValueChange:o,className:"h-full flex flex-col",children:[e.jsxs("div",{className:"border-b",children:[e.jsx(Ie,{className:"grid grid-cols-5 w-full h-auto p-1 gap-1",children:k.slice(0,5).map(x=>e.jsx(te,{value:x,className:"text-xs py-2 px-1 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:x},x))}),e.jsx(Ie,{className:"grid grid-cols-5 w-full h-auto p-1 gap-1",children:k.slice(5).map(x=>e.jsx(te,{value:x,className:"text-xs py-2 px-1 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:x},x))})]}),e.jsxs("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto",children:[e.jsx(J,{value:"Objetivo",className:"space-y-3 mt-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm",children:"Objetivo"}),e.jsx(be,{placeholder:"¿Qué debe lograr?",value:m.objetivo,onChange:x=>c(T=>({...T,objetivo:x.target.value})),className:"min-h-[80px] rounded-lg"})]})}),e.jsx(J,{value:"CTA",className:"space-y-3 mt-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm",children:"CTA"}),e.jsx(K,{placeholder:"Ej.: Compra ahora",value:m.cta,onChange:x=>c(T=>({...T,cta:x.target.value})),className:"rounded-lg"})]})}),e.jsx(J,{value:"Hashtags",className:"space-y-3 mt-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm",children:"Hashtags"}),e.jsx(K,{placeholder:"#marca #promo",value:m.hashtags,onChange:x=>c(T=>({...T,hashtags:x.target.value})),className:"rounded-lg"})]})}),k.filter(x=>!["Objetivo","CTA","Hashtags"].includes(x)).map(x=>e.jsx(J,{value:x,className:"space-y-3 mt-0",children:e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsxs("p",{children:["Contenido de ",x]}),e.jsx("p",{className:"text-xs",children:"En desarrollo"})]})},x))]}),e.jsxs("div",{className:"h-12 px-3 flex items-center justify-between border-t",style:{backgroundColor:"var(--color-surface)"},children:[e.jsx(w,{variant:"outline",className:"text-xs",children:"Brief: 0/10"}),e.jsx("div",{className:"flex-1"}),e.jsx(n,{size:"sm",className:"text-xs",children:"Continuar"})]})]})]})]})]}),e.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",style:{backgroundColor:"var(--color-canvas)"},children:[e.jsx("div",{className:"flex-1 p-3 overflow-y-auto",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(G,{role:"system",content:"Definamos el brief del post.",timestamp:"10:24"}),e.jsx(G,{role:"user",content:"Quiero un post para la promo.",timestamp:"10:25"}),e.jsx(G,{role:"assistant",content:"Empecemos por el objetivo.",timestamp:"10:26"})]})}),e.jsxs("div",{className:"h-32 p-3 border-t shadow-sm",style:{backgroundColor:"var(--color-surface)"},children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(n,{variant:"ghost",size:"sm",className:"p-2 mt-1",children:e.jsx(sa,{className:"w-4 h-4"})}),e.jsx(be,{placeholder:"Responde…",value:i,onChange:x=>a(x.target.value),className:"flex-1 min-h-[60px] resize-none rounded-lg",rows:3}),e.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[e.jsxs(n,{variant:"outline",size:"sm",className:"h-9 rounded-lg",children:[e.jsx(hs,{className:"w-4 h-4 mr-2"}),"Subir"]}),e.jsx(n,{size:"sm",onClick:j,disabled:!i.trim(),className:"h-9",children:"Enviar"})]})]}),e.jsx("div",{className:"text-right mt-2",children:e.jsx("p",{className:"text-xs text-muted-foreground opacity-70",children:"PNG/JPG, PDF, TXT (diseño)"})})]})]}),d&&e.jsx("div",{className:"absolute inset-0 bg-black/20 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-background rounded-lg p-4 max-w-sm w-full space-y-4 border shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Checklist de QA y A11y"}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>N(!1),className:"p-1",children:e.jsx(Ne,{className:"w-4 h-4"})})]}),e.jsxs(z,{className:"p-3",children:[e.jsx("h4",{className:"font-medium text-xs mb-2",children:"Checklist Visual"}),e.jsxs("ul",{className:"text-xs space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"✓ Header fijo; Composer sticky; Timeline scrolleable"}),e.jsx("li",{children:"✓ Panel Brief como sheet derecho (cerrado por defecto)"}),e.jsx("li",{children:"✓ Espaciado base 8px; radios consistentes"})]})]}),e.jsxs(z,{className:"p-3",children:[e.jsx("h4",{className:"font-medium text-xs mb-2",children:"Checklist A11y"}),e.jsxs("ul",{className:"text-xs space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"✓ Contraste AA en botones y texto"}),e.jsx("li",{children:"✓ Focus visible (outline 2px) en inputs/botones"}),e.jsx("li",{children:"✓ Labels claros para íconos (Back, Panel, Enviar)"})]})]}),e.jsx("div",{className:"text-center",children:e.jsx(n,{size:"sm",onClick:()=>N(!1),className:"text-xs",children:"Cerrar Overlay"})})]})})]})}function nt(){const{hasBrandKit:l}=he(),{currentProject:i,createNewProject:a}=Y(),t=zs(),[s,r]=p.useState(!!i),[o,d]=p.useState(!1),[N,m]=p.useState(!1),c=x=>{a(x),t||N?d(!0):r(!0)},j=()=>{console.log("Opening existing project selector")},k=()=>{d(!1)};return(t||N)&&o?e.jsx(lt,{onBack:k}):s&&i?e.jsx(it,{}):e.jsx("div",{className:"h-full overflow-auto",children:e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 text-white",children:e.jsx(ye,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-3xl font-bold",children:"Creator de Posts y Carruseles"})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto",children:"Flujo completo de creación desde briefing hasta publicación programada, con tu BrandKit aplicado automáticamente en cada paso"}),e.jsx("div",{className:"flex items-center justify-center gap-2 mt-4",children:e.jsx(n,{variant:N?"default":"outline",size:"sm",onClick:()=>m(!N),className:"text-sm",children:"📱 Vista Móvil D4 (Demo)"})})]}),e.jsx(ws,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(z,{className:"p-8 hover:shadow-lg transition-all cursor-pointer group",onClick:()=>c("post"),children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx(ye,{className:"w-10 h-10 text-white"})}),e.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center",children:e.jsx(is,{className:"w-4 h-4 text-white"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Crear Post Simple"}),e.jsx("p",{className:"text-muted-foreground",children:"Publicación única para redes sociales con diseño profesional y copywriting optimizado"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[e.jsx(w,{variant:"secondary",children:"IA + BrandKit"}),e.jsx(w,{variant:"secondary",children:"Multi-plataforma"}),e.jsx(w,{variant:"secondary",children:"Programación"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"✓ Diseño automático con tu marca"}),e.jsx("li",{children:"✓ Copywriting con tu tono de voz"}),e.jsx("li",{children:"✓ Optimizado por red social"}),e.jsx("li",{children:"✓ Publicación programada"})]})]}),e.jsxs(n,{className:"w-full group-hover:bg-blue-600",children:[e.jsx(ve,{className:"w-4 h-4 mr-2"}),"Comenzar Post"]})]})}),e.jsx(z,{className:"p-8 hover:shadow-lg transition-all cursor-pointer group",onClick:()=>c("carousel"),children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx(bs,{className:"w-10 h-10 text-white"})}),e.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(is,{className:"w-4 h-4 text-white"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Crear Carrusel"}),e.jsx("p",{className:"text-muted-foreground",children:"Serie de slides interactivas para contar historias completas y generar mayor engagement"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[e.jsx(w,{variant:"secondary",children:"Multi-slide"}),e.jsx(w,{variant:"secondary",children:"Storytelling"}),e.jsx(w,{variant:"secondary",children:"Alto engagement"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"✓ Hasta 10 slides por carrusel"}),e.jsx("li",{children:"✓ Narrativa coherente automática"}),e.jsx("li",{children:"✓ Transiciones optimizadas"}),e.jsx("li",{children:"✓ Métricas de deslizamiento"})]})]}),e.jsxs(n,{className:"w-full group-hover:bg-purple-600",children:[e.jsx(ve,{className:"w-4 h-4 mr-2"}),"Comenzar Carrusel"]})]})})]}),e.jsxs(z,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(na,{className:"w-5 h-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Proyectos Recientes"})]}),e.jsx(n,{variant:"outline",onClick:j,children:"Ver todos"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(z,{className:"p-4 hover:bg-gray-50 cursor-pointer",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(w,{variant:"outline",children:"Post"}),e.jsxs(w,{className:"bg-yellow-100 text-yellow-800",children:[e.jsx(Qe,{className:"w-3 h-3 mr-1"}),"Borrador"]})]}),e.jsx("h4",{className:"font-medium",children:"Lanzamiento Producto X"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Última edición: hace 2 horas"}),e.jsx("div",{className:"w-full h-24 bg-gray-200 rounded border"})]})}),e.jsx(z,{className:"p-4 hover:bg-gray-50 cursor-pointer",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(w,{variant:"outline",children:"Carrusel"}),e.jsxs(w,{className:"bg-blue-100 text-blue-800",children:[e.jsx(Qe,{className:"w-3 h-3 mr-1"}),"Programado"]})]}),e.jsx("h4",{className:"font-medium",children:"Tutorial 5 pasos"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Se publica: Mañana 10:00"}),e.jsx("div",{className:"w-full h-24 bg-gray-200 rounded border"})]})}),e.jsx(z,{className:"p-4 hover:bg-gray-50 cursor-pointer",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(w,{variant:"outline",children:"Post"}),e.jsxs(w,{className:"bg-green-100 text-green-800",children:[e.jsx(U,{className:"w-3 h-3 mr-1"}),"Publicado"]})]}),e.jsx("h4",{className:"font-medium",children:"Testimonio Cliente"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Publicado: hace 3 días"}),e.jsx("div",{className:"w-full h-24 bg-gray-200 rounded border"})]})})]})]}),e.jsx(z,{className:"p-6 bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(ve,{className:"w-5 h-5 text-blue-600"}),"¿Qué incluye el Creator completo?"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"1. Briefing Inteligente"}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:"• Chat con IA especializada"}),e.jsx("li",{children:"• Subida de referencias"}),e.jsx("li",{children:"• Definición de objetivos"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"2. Configuración Automática"}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:"• Formatos por plataforma"}),e.jsx("li",{children:"• Aplicación de BrandKit"}),e.jsx("li",{children:"• Optimización visual"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"3. Generación + Edición"}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:"• Múltiples opciones de diseño"}),e.jsx("li",{children:"• Editor con capas"}),e.jsx("li",{children:"• Chat de edición por IA"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"4. Copy + Publicación"}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:"• Copywriting automático"}),e.jsx("li",{children:"• Hashtags sugeridos"}),e.jsx("li",{children:"• Programación multi-red"})]})]})]})]})}),l&&e.jsx(z,{className:"p-4 bg-gradient-to-r from-green-50 to-blue-50 border-green-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-green-800",children:"Tu BrandKit está activo"}),e.jsx("p",{className:"text-sm text-green-700",children:"Todos los contenidos creados aplicarán automáticamente tus colores, tipografías, logos y tono de voz corporativo"})]})]})})]})})}function yt(){return e.jsx(nt,{})}export{yt as default};
